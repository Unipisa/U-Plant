$(document).ready(function(){$("#specie").select2();$("#regione").prop("disabled","disabled");$("#provincia").prop("disabled","disabled");$.ajax({type:"GET",url:baseUrlNazioni,data:"{}",success:function(n){for(var i='<option value="">Selezione Nazione<\/option>',t=0;t<n.length;t++)i+='<option value="'+n[t].codicenazione+'">'+n[t].descrizionenazione+"<\/option>";$("#nazione").html(i)}})});$("#nazione").on("change",function(){$("#regione").val("0");$("#provincia").val("0");var n=$("#nazione").val();n!="IT"?($("#regione").val("99"),$("#provincia").empty().append('<option selected="selected" value="999"> NON DEFINITA<\/option>'),$("#regione").prop("disabled","disabled"),$("#provincia").prop("disabled","disabled")):($("#regione").removeAttr("disabled"),$.ajax({type:"GET",url:baseUrlRegioni,data:"{}",success:function(n){for(var i='<option value="-1">Seleziona Regione<\/option>',t=0;t<n.length;t++)i+='<option value="'+n[t].codiceregione+'">'+n[t].descrizioneregione+"<\/option>";$("#regione").html(i)}}))});$("#regione").on("change",function(){var n=$("#regione :selected").val();$("#provincia").removeAttr("disabled");$("#provincia").val("0");$.ajax({type:"GET",url:baseUrlProvince,data:{codiceregione:n},success:function(n){for(var i='<option value="-1">Selezione Provincia<\/option>',t=0;t<n.length;t++)i+='<option value="'+n[t].codiceprovincia+'">'+n[t].descrizioneprovincia+"<\/option>";$("#provincia").html(i)},error:function(n){alert("Error during process: \n"+n.responseText)}})});$("#provincia").on("change",function(){var n=$("#provincia :selected").val();$.ajax({type:"GET",url:baseUrlProvince,data:{codiceprovincia:n},success:function(n){for(var i='<option value="-1">Selezione Comune<\/option>',t=0;t<n.length;t++)i+='<option value="'+n[t].codicecomune+'">'+n[t].descrizionecomune+"<\/option>";$("#comune").html(i)},error:function(n){alert("Error during process: \n"+n.responseText)}})});$("#famiglia").on("change",function(){var n=$("#famiglia :selected").val(),t,i;$("#genere").val("0");$("#addlink2").show();n!=""?$.ajax({type:"GET",url:baseUrlGenere,data:{codicefamiglia:n},success:function(n){var i,t;for($("#genere").disabled=!1,i='<option value="-1">Selezione Genere<\/option>',t=0;t<n.length;t++)i+='<option value="'+n[t].codicegenere+'">'+n[t].descrizionegenere+"<\/option>";$("#genere").removeAttr("disabled");$("#genere").html(i)},error:function(n){alert("Error during process: \n"+n.responseText)}}):(t='<option value="-1">Selezione Genere<\/option>',$("#genere").html(t),$("#genere").attr("disabled","disabled"),i='<option value="-1">Selezione Specie<\/option>',$("#specie").html(i),$("#specie").attr("disabled","disabled"))});$("#genere").on("change",function(){var n,t;$("#addGenere").hide();$("#addSpecie").hide();$("#addlink2").show();$("#addlink").show();n=$("#genere :selected").val();n!="-1"?($("#specie").val("0"),$("#addlink").show(),$.ajax({type:"GET",url:baseUrlSpecie,data:{codicegenere:n},success:function(n){var i,t;for($("#specie").disabled=!1,i='<option value="-1">Selezione Specie<\/option>',t=0;t<n.length;t++)i+='<option value="'+n[t].codicespecie+'">'+n[t].nomescientifico+"<\/option>";$("#specie").removeAttr("disabled");$("#specie").html(i)},error:function(n){alert("Error during process: \n"+n.responseText)}})):(t='<option value="-1">Selezione Specie<\/option>',$("#specie").html(t))});$("#specie").on("change",function(){$("#addSpecie").hide();$("#addlink").show()});$("#addlink").click(function(){$("#addSpecie").css("display")=="none"?($("#Specie1_nome").val(""),$("#Specie1_autori").val(""),$("#Specie1_nome_volgare").val(""),$("#Specie1_nome_comune").val(""),$("#Specie1_nome_comune_en").val(""),$("#Specie1_subspecie").val(""),$("#Specie1_autorisub").val(""),$("#Specie1_varieta").val(""),$("#Specie1_autorivar").val(""),$("#Specie1_cult").val(""),$("#Specie1_autoricult").val(""),$("#regno").val("343b8a46-5dfa-4127-9ab4-29eb0d1d1ad5"),$("#areale").val("473a0041-c4ee-406f-892e-1728997f45fa"),$("#Genere1_descrizione").val(""),$("#addSpecie").show(),$("#addGenere").hide(),$("#addlink").hide(),$("#addlink2").show(),$("#specie").val("0")):$("#addSpecie").hide()});$("#addlink2").click(function(){$("#addGenere").css("display")=="none"?($("#Specie1_nome").val(""),$("#Specie1_autori").val(""),$("#Specie1_nome_volgare").val(""),$("#Specie1_nome_comune").val(""),$("#Specie1_nome_comune_en").val(""),$("#Specie1_subspecie").val(""),$("#Specie1_autorisub").val(""),$("#Specie1_varieta").val(""),$("#Specie1_autorivar").val(""),$("#Specie1_cult").val(""),$("#Specie1_autoricult").val(""),$("#regno").val("343b8a46-5dfa-4127-9ab4-29eb0d1d1ad5"),$("#areale").val("473a0041-c4ee-406f-892e-1728997f45fa"),$("#Genere1_descrizione").val(""),$("#addSpecie").hide(),$("#addGenere").show(),$("#addlink2").hide(),$("#addlink").show()):($("#addGenere").hide(),$("#genere").attr("disabled","disabled"),$("#famiglia").attr("disabled","disabled"))});$("#insSpecie").click(function(){var t,i,n,r,u;document.getElementById("Specie1_nome").value==""?alert("Campo Nome Specie Obbligatorio"):(t="",i="",$("#Specie1_subspecie").val().length>0?(n=" subsp. "+$("#Specie1_subspecie").val().trim(),$("#Specie1_autorisub").val().length>0&&(n=n+" "+$("#Specie1_autorisub").val().trim())):n="",r=$("#Specie1_varieta").val().length>0?" var. "+$("#Specie1_varieta").val().trim()+" "+$("#Specie1_autorivar").val().trim():"",u=$("#Specie1_cult").val().length>0?" '"+$("#Specie1_cult").val().trim()+"' "+$("#Specie1_autoricult").val().trim():"",t=$("#Specie1_nome_comune").val().length>0?$("#Specie1_nome_comune").val():"",i=$("#Specie1_nome_comune_en").val().length>0?$("#Specie1_nome_comune_en").val():"",$.ajax({type:"GET",url:baseUrlAddSpecie,dataType:"json",data:{genere:$("#genere :selected").val(),nome:$("#Specie1_nome").val().trim(),nome_scientifico:$("#genere :selected").text()+" "+$("#Specie1_nome").val().trim()+" "+$("#Specie1_autori").val().trim()+n+r+u,nome_volgare:$("#Specie1_nome_volgare").val(),nome_comune:t,nome_comune_en:i,autori:$("#Specie1_autori").val().trim(),subspecie:$("#Specie1_subspecie").val().trim(),autorisub:$("#Specie1_autorisub").val().trim(),varieta:$("#Specie1_varieta").val().trim(),autorivar:$("#Specie1_autorivar").val().trim(),cult:$("#Specie1_cult").val().trim(),autoricult:$("#Specie1_autoricult").val().trim(),regno:$("#regno").val(),areale:$("#areale").val()},success:function(n){if(n.errore==!1){var i=document.getElementById("specie"),t=document.createElement("option");t.appendChild(document.createTextNode(n.specie_nome));t.value=n.specie_id;i.appendChild(t);$("#specie").val(n.specie_id);$("#addSpecie").hide();$("#Specie1_nome").val("");$("#Specie1_autori").val("");$("#Specie1_nome_volgare").val("");$("#Specie1_nome_comune").val("");$("#Specie1_nome_comune_en").val("");$("#Specie1_subspecie").val("");$("#Specie1_autorisub").val("");$("#Specie1_varieta").val("");$("#Specie1_autorivar").val("");$("#Specie1_cult").val("");$("#Specie1_autoricult").val("");$("#regno").val("343b8a46-5dfa-4127-9ab4-29eb0d1d1ad5");$("#areale").val("473a0041-c4ee-406f-892e-1728997f45fa");$("#Genere1_descrizione").val("");alert(n.message);console.log("Specie Inserita con successo")}else alert(n.message)},error:function(){alert(data.message);console.log("Qualcosa è andato storto!")}}))});$("#settore").on("change",function(){var n=$("#settore :selected").val();$("#collezione").val("0");$("#collezione").removeAttr("disabled");$.ajax({type:"GET",url:baseUrlCollezioni,data:{codicesettore:n},success:function(n){for(var i="",t=0;t<n.length;t++)i+='<option value="'+n[t].codicecollezione+'">'+n[t].descrizionecollezione+"<\/option>";t==0&&(alert("Il settore non ha collezioni corrispondenti verificare e correggi"),$("#settore").focusin());$("#collezione").html(i)},error:function(n){alert("Error during process: \n"+n.responseText)}})});$("#insGenere").click(function(){document.getElementById("Genere1_descrizione").value==""?alert("Campo Descrizione Obbligatorio"):$.ajax({type:"GET",url:baseUrlAddGenere,dataType:"json",data:{famiglia:$("#famiglia :selected").val(),descrizione:$("#Genere1_descrizione").val()},success:function(n){var i,t,r;n.erroreG==!1?(i=document.getElementById("genere"),t=document.createElement("option"),t.appendChild(document.createTextNode(n.genere_descrizione)),t.value=n.genere_id,i.appendChild(t),$("#genere").val(n.genere_id),$("#addGenere").hide(),$("#Genere1_descrizione").val(""),$("#addlink").show(),$("#addlink2").hide(),r=n.genere_id,console.log(n),console.log("Send success"),$.ajax({type:"GET",url:baseUrlSpecie,data:{codicegenere:r},success:function(n){var i,t;for($("#specie").disabled=!1,i='<option value="-1">Selezione Specie<\/option>',t=0;t<n.length;t++)i+='<option value="'+n[t].codicespecie+'">'+n[t].nomespecie+"<\/option>";$("#specie").removeAttr("disabled");$("#specie").html(i)},error:function(n){alert("Error during process: \n"+n.responseText)}}),alert(n.messageG)):alert(n.messageG)},error:function(n){alert(n.message);console.log(n);console.log("Qualcosa è andato storto!")}})});