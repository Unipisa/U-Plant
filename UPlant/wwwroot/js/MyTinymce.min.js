!function(){function t(){return i.tinymce}var u,r,f,e=[],i="undefined"!=typeof global?global:window,n=i.jQuery,o;n.fn.tinymce=function(u){function v(){var i=[],r=0;f||(o(),f=!0);h.each(function(n,f){var o,e=f.id,s=u.oninit;e||(f.id=e=t().DOM.uniqueId());t().get(e)||(o=t().createEditor(e,u),i.push(o),o.on("init",function(){var u,n=s;h.css("visibility","");s&&++r==i.length&&("string"==typeof n&&(u=-1===n.indexOf(".")?null:t().resolve(n.replace(/\.\w+$/,"")),n=t().resolve(n)),n.apply(u||t(),i))}))});n.each(i,function(n,t){t.render()})}var s,y,l,c,h=this,a="";return h.length?u?(h.css("visibility","hidden"),i.tinymce||r||!(s=u.script_url)?1===r?e.push(v):v():(r=1,y=s.substring(0,s.lastIndexOf("/")),-1!=s.indexOf(".min")&&(a=".min"),i.tinymce=i.tinyMCEPreInit||{base:y,suffix:a},-1!=s.indexOf("gzip")&&(l=u.language||"en",s=s+(/\?/.test(s)?"&":"?")+"js=true&core=true&suffix="+escape(a)+"&themes="+escape(u.theme||"modern")+"&plugins="+escape(u.plugins||"")+"&languages="+(l||""),i.tinyMCE_GZ||(i.tinyMCE_GZ={start:function(){function i(n){t().ScriptLoader.markDone(t().baseURI.toAbsolute(n))}i("langs/"+l+".js");i("themes/"+u.theme+"/theme"+a+".js");i("themes/"+u.theme+"/langs/"+l+".js");n.each(u.plugins.split(","),function(n,t){t&&(i("plugins/"+t+"/plugin"+a+".js"),i("plugins/"+t+"/langs/"+l+".js"))})},end:function(){}})),(c=document.createElement("script")).type="text/javascript",c.onload=c.onreadystatechange=function(i){i=i||window.event;2!==r&&("load"==i.type||/complete|loaded/.test(c.readyState))&&(t().dom.Event.domLoaded=1,r=2,u.script_loaded&&u.script_loaded(),v(),n.each(e,function(n,t){t()}))},c.src=s,document.body.appendChild(c)),h):t()?t().get(h[0].id):null:h};n.extend(n.expr[":"],{tinymce:function(n){var r;return!!(n.id&&"tinymce"in i&&(r=t().get(n.id))&&r.editorManager===t())}});o=function(){function o(n){"remove"===n&&this.each(function(n,t){var i=f(t);i&&i.remove()});this.find("span.mceEditor,div.mceEditor").each(function(n,i){var r=t().get(i.id.replace(/_parent$/,""));r&&r.remove()})}function s(n){var r,i=this;if(null!=n)o.call(i),i.each(function(i,r){var u;(u=t().get(r.id))&&u.setContent(n)});else if(0<i.length&&(r=t().get(i[0].id)))return r.getContent()}function e(n){return n&&n.length&&i.tinymce&&n.is(":tinymce")}var f=function(n){return n&&n.id&&i.tinymce?t().get(n.id):null},r={};n.each(["text","html","val"],function(t,i){var o=r[i]=n.fn[i],h="text"===i;n.fn[i]=function(t){var i=this,r,c;return e(i)?t!==u?(s.call(i.filter(":tinymce"),t),o.apply(i.not(":tinymce"),arguments),i):(r="",c=arguments,(h?i:i.eq(0)).each(function(t,i){var u=f(i);r+=u?h?u.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):u.getContent({save:!0}):o.apply(n(i),c)}),r):o.apply(i,arguments)}});n.each(["append","prepend"],function(t,i){var o=r[i]=n.fn[i],s="prepend"===i;n.fn[i]=function(n){var t=this;return e(t)?n!==u?("string"==typeof n&&t.filter(":tinymce").each(function(t,i){var r=f(i);r&&r.setContent(s?n+r.getContent():r.getContent()+n)}),o.apply(t.not(":tinymce"),arguments),t):void 0:o.apply(t,arguments)}});n.each(["remove","replaceWith","replaceAll","empty"],function(t,i){var u=r[i]=n.fn[i];n.fn[i]=function(){return o.call(this,i),u.apply(this,arguments)}});r.attr=n.fn.attr;n.fn.attr=function(t,i){var o=this,h=arguments,c,l;return!t||"value"!==t||!e(o)?r.attr.apply(o,h):i!==u?(s.call(o.filter(":tinymce"),i),r.attr.apply(o.not(":tinymce"),h),o):(c=o[0],l=f(c),l?l.getContent({save:!0}):r.attr.apply(n(c),h))}}}();!function(){"use strict";function hst(n){if(null===n)return"null";if(void 0===n)return"undefined";var t=typeof n;return"object"==t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t}function cst(n){return cl(function(t,i){if(t.length!==i.length)return!1;for(var u=t.length,r=0;r<u;r++)if(!n.eq(t[r],i[r]))return!1;return!0})}function lst(n){return cl(function(t,i){var h,o,u,f=Object.keys(t),c=Object.keys(i),s,r,e;if(o=cst(vhi),u=function(n){return t=h,Array.prototype.slice.call(n).sort(t);var t},!cl(function(n,t){return o.eq(u(n),u(t))}).eq(f,c))return!1;for(s=f.length,r=0;r<s;r++)if(e=f[r],!n.eq(t[e],i[e]))return!1;return!0})}function bd(n){return function(t){return r=typeof(i=t),(null===i?"null":"object"==r&&(Array.prototype.isPrototypeOf(i)||i.constructor&&"Array"===i.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(i)||i.constructor&&"String"===i.constructor.name)?"string":r)===n;var i,r}}function kd(n){return function(t){return typeof t===n}}function ast(n){return function(t){return n===t}}function wu(n){return null==n}function tt(n){return!wu(n)}function y(){}function ao(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,r))}}function vst(n,t){return function(i){return n(t(i))}}function f(n){return function(){return n}}function ki(n){return n}function ahi(n,t){return n===t}function u(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){for(var u,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return u=i.concat(r),n.apply(null,u)}}function gd(n){return function(t){return!n(t)}}function yhi(n){return n()}function phi(n){n()}function ng(){return ny}function pst(n){return n()}function wst(n,t){return whi.call(n,t)}function dt(n,t){return-1<wst(n,t)}function vi(n,t){for(var i=0,r=n.length;i<r;i++)if(t(n[i],i))return!0;return!1}function ut(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i);return u}function e(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i)}function bst(n,t){for(var i=n.length-1;0<=i;i--)t(n[i],i)}function kst(n,t){for(var r,u=[],f=[],i=0,e=n.length;i<e;i++)r=n[i],(t(r,i)?u:f).push(r);return{pass:u,fail:f}}function p(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i)&&u.push(r);return u}function dst(n,t,i){return bst(n,function(n,r){i=t(i,n,r)}),i}function fu(n,t,i){return e(n,function(n,r){i=t(i,n,r)}),i}function gst(t,i,r){for(var f,u=0,e=t.length;u<e;u++){if(f=t[u],i(f,u))return n.some(f);if(r(f,u))break}return n.none()}function gt(n,t){return gst(n,t,it)}function ty(t,i){for(var r=0,u=t.length;r<u;r++)if(i(t[r],r))return n.some(r);return n.none()}function oh(n,t){return function(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!br(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);bhi.apply(i,n[t])}return i}(ut(n,t))}function al(n,t){for(var i=0,r=n.length;i<r;++i)if(!0!==t(n[i],i))return!1;return!0}function iy(n){var t=eg.call(n,0);return t.reverse(),t}function nht(n,t){return p(n,function(n){return!dt(t,n)})}function tg(n,t){var i=eg.call(n,0);return i.sort(t),i}function ig(t,i){return 0<=i&&i<t.length?n.some(t[i]):n.none()}function or(n){return ig(n,0)}function vo(n){return ig(n,n.length-1)}function tht(t,i){for(var u,r=0;r<t.length;r++)if(u=i(t[r],r),u.isSome())return u;return n.none()}function et(n,t){for(var r,u=ch(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r)}function iht(n,t){return dhi(n,function(n,i){return{k:i,v:t(n,i)}})}function rg(n){return function(t,i){n[i]=t}}function rht(n,t,i,r){return et(n,function(n,u){(t(n,u)?i:r)(n,u)}),1}function vl(n,t){var i={};return rht(n,t,rg(i),y),i}function at(t,i){return w(t,i)?n.from(t[i]):n.none()}function sh(n,t){return w(n,t)&&void 0!==n[t]&&null!==n[t]}function yl(n,t,i){var r,u;if(!n)return!1;if(i=i||n,void 0!==n.length){for(r=0,u=n.length;r<u;r++)if(!1===t.call(i,n[r],r,n))return!1}else for(r in n)if(w(n,r)&&!1===t.call(i,n[r],r,n))return!1;return!0}function ug(n,t){var i=[];return yl(n,function(r,u){i.push(t(r,u,n))}),i}function hh(n,t){var i=[];return yl(n,function(r,u){t&&!t(r,u,n)||i.push(r)}),i}function uht(n,t){if(n)for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1}function ry(n,t,i,r){for(var f=tr(i)?n[0]:i,u=0;u<n.length;u++)f=t.call(r,f,n[u],u);return f}function fht(n,t,i){for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r],r,n))return r;return-1}function yo(n){return n[n.length-1]}function fe(n,t,i){if(i||2===arguments.length)for(var u,r=0,f=t.length;r<f;r++)!u&&r in t||((u=u||Array.prototype.slice.call(t,0,r))[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))}function eht(n){var t,i=!1;return function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];return i||(i=!0,t=n.apply(null,u)),t}}function oht(n,t){var i=String(t).toLowerCase();return gt(n,function(n){return n.search(i)})}function yi(n,t){return-1!==n.indexOf(t)}function sg(n){return function(t){return t.replace(n,"")}}function uy(n){return 0<n.length}function sht(n){return!uy(n)}function pf(n){return function(t){return yi(t,n)}}function ghi(n){return window.matchMedia(n).matches}function hht(n){return null==n?"":(""+n).replace(sci,"")}function cht(n,t){return t?!("array"!==t||!og(n))||typeof n===t:void 0!==n}function lht(n,t){for(var i=[],u=function(n){return i.push(n),t(n)},r=t(n);(r=r.bind(u)).isSome(););return i}function lh(n,t){var r=n.dom,i;if(1!==r.nodeType)return!1;if(i=r,void 0!==i.matches)return i.matches(t);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(t);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");}function aht(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount}function g(n,t){return n.dom===t.dom}function ee(n,t){return kr().browser.isIE()?(i=n.dom,r=t.dom,u=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(i.compareDocumentPosition(r)&u)):(f=n.dom)!==(e=t.dom)&&f.contains(e);var i,r,u,f,e}function vht(){return hg(0,0)}function yht(n){function t(n){return function(){return i===n}}var i=n.current,r=n.version;return{current:i,version:r,isEdge:t("Edge"),isChrome:t("Chrome"),isIE:t("IE"),isOpera:t("Opera"),isFirefox:t(kht),isSafari:t("Safari")}}function pht(n){function t(n){return function(){return i===n}}var i=n.current,r=n.version;return{current:i,version:r,isWindows:t(dht),isiOS:t("iOS"),isAndroid:t(ght),isOSX:t("OSX"),isLinux:t("Linux"),isSolaris:t(nct),isFreeBSD:t(tct),isChromeOS:t(ict)}}function pl(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}}function vt(n){return n.dom.nodeName.toLowerCase()}function fct(n){return n.dom.nodeType}function fy(n){return function(t){return fct(t)===n}}function ect(n){return t.fromDom(n.dom.ownerDocument)}function ah(n){return lci(n)?n:ect(n)}function oct(n){return t.fromDom(ah(n).dom.defaultView)}function eu(i){return n.from(i.dom.parentNode).map(t.fromDom)}function wo(i){return n.from(i.dom.previousSibling).map(t.fromDom)}function bl(i){return n.from(i.dom.nextSibling).map(t.fromDom)}function sct(n){return iy(lht(n,wo))}function hct(n){return lht(n,bl)}function ey(i,r){var u=i.dom.childNodes;return n.from(u[r]).map(t.fromDom)}function cct(n){return ey(n,0)}function vg(n){return ey(n,n.dom.childNodes.length-1)}function lct(n){return n.dom.childNodes.length}function act(n){return aci(n)&&tt(n.dom.host)}function yg(n){return act(n)?n:function(){var i=ah(n).dom.head;if(null==i)throw new Error("Head is not available yet");return t.fromDom(i)}()}function hci(n){return t.fromDom(n.dom.host)}function ou(n,t){eu(n).each(function(i){i.dom.insertBefore(t.dom,n.dom)})}function kl(n,t){bl(n).fold(function(){eu(n).each(function(n){ii(n,t)})},function(n){ou(n,t)})}function vct(n,t){cct(n).fold(function(){ii(n,t)},function(i){n.dom.insertBefore(t.dom,i.dom)})}function oy(n,t){e(t,function(t){ii(n,t)})}function pg(n){n.dom.textContent="";e(nu(n),function(n){ni(n)})}function yct(n){var t,i=nu(n);0<i.length&&(t=n,e(i,function(n){ou(t,n)}));ni(n)}function sy(n,t){return void 0!==n?n:void 0!==t?t:0}function wg(n){var t=void 0!==n?n.dom:document,i=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return yh(i,r)}function pct(n,t,i){var r=(void 0!==i?i.dom:document).defaultView;r&&r.scrollTo(n,t)}function wct(n,t){kr().browser.isSafari()&&ft(n.dom.scrollIntoViewIfNeeded)?n.dom.scrollIntoViewIfNeeded(!1):n.dom.scrollIntoView(t)}function bct(n,t,i,r){return{x:n,y:t,width:i,height:r,right:n+i,bottom:t+r}}function kct(i){var r=void 0===i?window:i,f=r.document,u=wg(t.fromDom(f)),e=void 0===r?window:r;return(kr().browser.isFirefox()?n.none():n.from(e.visualViewport)).fold(function(){var n=r.document.documentElement,t=n.clientWidth,i=n.clientHeight;return bct(u.left,u.top,t,i)},function(n){return bct(Math.max(n.pageLeft,u.left),Math.max(n.pageTop,u.top),n.width,n.height)})}function dl(n){return function(t){return!!t&&t.nodeType===n}}function hy(n){return n&&!Object.getPrototypeOf(n)}function dr(n){var t=n.map(function(n){return n.toLowerCase()});return function(n){if(n&&n.nodeName){var i=n.nodeName.toLowerCase();return dt(t,i)}return!1}}function cy(n,t){var i=t.toLowerCase().split(" ");return function(t){var r,u;if(h(t))for(r=0;r<i.length;r++)if(u=t.ownerDocument.defaultView.getComputedStyle(t,null),(u?u.getPropertyValue(n):null)===i[r])return!0;return!1}}function dct(n){return function(t){return h(t)&&t.hasAttribute(n)}}function bo(n){return h(n)&&n.hasAttribute("data-mce-bogus")}function vh(n){return h(n)&&"TABLE"===n.tagName}function gct(n){return function(t){return h(t)&&(t.contentEditable===n||t.getAttribute("data-mce-contenteditable")===n)?!0:!1}}function ly(n,t,i){return void 0===i&&(i=ahi),n.exists(function(n){return i(n,t)})}function di(t,i,r){return t.isSome()&&i.isSome()?n.some(r(t.getOrDie(),i.getOrDie())):n.none()}function ay(n){return void 0!==n.style&&ft(n.style.getPropertyValue)}function nlt(n,t,i){if(!(ht(i)||yst(i)||eh(i)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",i,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,i+"")}function du(n,t,i){nlt(n.dom,t,i)}function oe(n,t){var i=n.dom;et(t,function(n,t){nlt(i,t,n)})}function gl(n,t){var i=n.dom.getAttribute(t);if(null!==i)return i}function tlt(t,i){return n.from(gl(t,i))}function se(n,t){n.dom.removeAttribute(t)}function cci(n,t){var i=n.dom;et(t,function(n,t){!function(n,t,i){if(!ht(i))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",i,":: Element ",n),new Error("CSS value must be a string: "+i);ay(n)&&n.style.setProperty(t,i)}(i,t,n)})}function wf(n,t){var i=n.dom,r=window.getComputedStyle(i).getPropertyValue(t);return""!==r||na(n)?r:olt(i,t)}function bg(t,i){var r=t.dom,u=olt(r,i);return n.from(u).filter(function(n){return 0<n.length})}function ilt(n){var u={},t=n.dom,i,r;if(ay(t))for(i=0;i<t.style.length;i++)r=t.style.item(i),u[r]=t.style[r];return u}function rlt(n){return gt(n,su)}function ult(n,t){return n.children&&dt(n.children,t)}function bci(n){setTimeout(function(){throw n;},0)}function hlt(n){return ta(function(){return new clt(n)})}function he(n){if(!br(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],i={};return e(n,function(r,u){var o=ch(r),f,e;if(1!==o.length)throw new Error("one and only one name per case");if(f=o[0],e=r[f],void 0!==i[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!br(e))throw new Error("case arguments must be an array");t.push(f);i[f]=function(){for(var o,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(o=i.length,o!==e.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+e.length+" ("+e+"), got "+o);return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+t.length);return t[u].apply(null,i)},match:function(n){var r=ch(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!al(t,function(n){return dt(r,n)}))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[f].apply(null,i)},log:function(n){console.log(n,{constructors:t,constructor:f,params:i})}}}}),i}function alt(n){return n.fold(ki,ki)}function vlt(t,i,r,u,f){return t(r,u)?n.some(r):ft(f)&&f(r)?n.none():i(r,u,f)}function ra(i,r,u){for(var e,f=i.dom,o=ft(u)?u:it;f.parentNode;){if(f=f.parentNode,e=t.fromDom(f),r(e))return n.some(e);if(o(e))break}return n.none()}function yy(n,t,i){return vlt(function(n,t){return t(n)},ra,n,t,i)}function py(n,t,i){return ra(n,function(n){return lh(n,t)},i)}function wy(i,r){return u=r,aht(f=void 0===i?document:i.dom)?n.none():n.from(f.querySelector(u)).map(t.fromDom);var u,f}function un(n,t,i){return vlt(lh,py,n,t,i)}function fn(n,t){return"number"!=typeof t&&(t=0),setTimeout(n,t)}function ylt(n,t){return"number"!=typeof t&&(t=1),setInterval(n,t)}function plt(n,t){function r(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];clearTimeout(i);i=fn(function(){n.apply(this,u)},t)}var i;return r.stop=function(){clearTimeout(i)},r}function wlt(n,i){function s(f,e,s){function k(n,t){for(var i=n.length;i--;)n[i]();h.status=t;h.passed=[];h.failed=[];c&&(c.onload=null,c.onerror=null,c=null)}function d(){return k(h.passed,2),0}function w(){return k(h.failed,3)}var c,p=r._addCacheSuffix(f),h=at(u,p).getOrThunk(function(){return{id:"mce-u"+l++,passed:[],failed:[],count:0}}),y,g,nt,b;(u[p]=h).count++;b=function(){var t=b;(function(){for(var r,t=n.styleSheets,i=t.length;i--;)if(r=t[i].ownerNode,r&&r.id===c.id)return d(),1})()||(Date.now()-g<v?ui.setTimeout(t):w())};e&&h.passed.push(e);s&&h.failed.push(s);1!==h.status&&(2!==h.status?3!==h.status?(h.status=1,oe(y=t.fromTag("link",a.dom),{rel:"stylesheet",type:"text/css",id:h.id}),g=Date.now(),i.contentCssCors&&du(y,"crossOrigin","anonymous"),i.referrerPolicy&&du(y,"referrerpolicy",i.referrerPolicy),(c=y.dom).onload=b,c.onerror=w,nt=y,ii(yg(o),nt),du(y,"href",p)):w():d())}function c(n){return hlt(function(t){s(n,ao(t,f(llt.value(n))),ao(t,f(llt.error(n))))})}function h(n){var t=r._addCacheSuffix(n);at(u,t).each(function(n){var i;0==--n.count&&(delete u[t],i=n.id,wy(yg(o),"#"+i).each(ni))})}void 0===i&&(i={});var l=0,u={},o=t.fromDom(n),a=ah(o),v=i.maxLoadTime||5e3;return{load:s,loadAll:function(n,t,i){var r,u=ut(n,c);r=u;hlt(function(n){var t=[],i=0;0===r.length?n([]):e(r,function(u,f){var e;u.get((e=f,function(u){t[e]=u;++i>=r.length&&n(t)}))})}).get(function(n){var r=kst(n,function(n){return n.isValue()});0<r.fail.length?i(r.fail.map(alt)):t(r.pass.map(alt))})},unload:h,unloadAll:function(n){e(n,function(n){h(n)})},_setReferrerPolicy:function(n){i.referrerPolicy=n}}}function go(n,t){this.node=n;this.rootNode=t;this.current=this.current.bind(this);this.next=this.next.bind(this);this.prev=this.prev.bind(this);this.prev2=this.prev2.bind(this)}function ce(n){var t;return function(i){return t=t||function(n,t){for(var r,u={},i=0,f=n.length;i<f;i++)r=n[i],u[String(r)]=t(r,i);return u}(n,lt),w(t,vt(i))}}function sn(n){return su(n)&&!tf(n)}function wh(n){return su(n)&&"br"===vt(n)}function bh(n){return gh(n)&&(n=n.parentNode),tli(n)&&n.hasAttribute("data-mce-caret")}function kh(n){return gh(n)&&tp(n.data)}function hr(n){return bh(n)||kh(n)}function klt(n){return n.firstChild!==n.lastChild||!st(n.firstChild)}function hn(n){var t=n.container();return!!o(t)&&(t.data.charAt(n.offset())===fi||n.isAtStart()&&kh(t.previousSibling))}function cn(n){var t=n.container();return!!o(t)&&(t.data.charAt(n.offset()-1)===fi||n.isAtEnd()&&kh(t.nextSibling))}function ln(n){return n&&n.hasAttribute("data-mce-caret")?(bo(t=(i=n.getElementsByTagName("br"))[i.length-1])&&t.parentNode.removeChild(t),n.removeAttribute("data-mce-caret"),n.removeAttribute("data-mce-bogus"),n.removeAttribute("style"),n.removeAttribute("_moz_abspos"),n):null;var i,t}function dlt(n){return bh(n.startContainer)}function nf(n){return!oli(n)&&(uli(n)?!fli(n.parentNode):sat(n)||rli(n)||eli(n)||dn(n))}function by(n,t){return nf(n)&&function(n,t){for(n=n.parentNode;n&&n!==t;n=n.parentNode){if(dn(n))return!1;if(oat(n))return!0}return!0}(n,t)}function ns(n){return sli.test(n)}function ky(n,i){return nf(n)&&!1===(c=i,o(f=n)&&ns(f.data)&&!1===(e=f,s=t.fromDom(c),py(t.fromDom(e),"pre,code",u(g,s)).isSome()))||h(r=n)&&"A"===r.nodeName&&!r.hasAttribute("href")&&(r.hasAttribute("name")||r.hasAttribute("id"))||hli(n);var e,s,r,f,c}function pt(n,t){return function(n,t){var u=0,i,r;if(ky(n,n))return!1;if(i=n.firstChild,!i)return!0;r=new yt(i,n);do{if(t){if(lli(i)){i=r.next(!0);continue}if(cli(i)){i=r.next();continue}}if(st(i))u++,i=r.next();else{if(ky(i,n))return!1;i=r.next()}}while(i);return u<=1}(n.dom,t=void 0===t||t)}function glt(n,i){return tt(n)&&(ky(n,i)||sn(t.fromDom(n)))}function nat(n){return"span"===n.nodeName.toLowerCase()&&"bookmark"===n.getAttribute("data-mce-type")}function tat(n,t){var i,r,u,f={};if(n){for(n=n.split(","),t=t||10,i=0;i<n.length;i+=2)r=String.fromCharCode(parseInt(n[i],t)),ts[r]||(u="&"+n[i+1]+";",f[r]=u,f[u]=r);return f}}function iat(n,t){return n.replace(t?up:fp,function(n){return ts[n]||n})}function rat(n,t){return n.replace(t?up:fp,function(n){return 1<n.length?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":ts[n]||"&#"+n.charCodeAt(0)+";"})}function an(n,t,i){return i=i||ntt,n.replace(t?up:fp,function(n){return ts[n]||i[n]||n})}function ti(n,t){return(n=r.trim(n))?n.split(t||" "):[]}function vn(n,t){var i;return n&&(i={},si(n="string"==typeof n?{"*":n}:n,function(n,r){i[r]=i[r.toUpperCase()]=("map"===t?nc:hat)(n,/[, ]/)})),i}function le(n){function h(t,i,r){var u=n[t];return u?u=nc(u,/[, ]/,nc(u.toUpperCase(),/[, ]/)):(u=is[t])||(u=nc(i," ",nc(i.toUpperCase()," ")),u=ttt(u,r),is[t]=u),u}function t(n,t,i){function f(n,t){for(var r={},i=0,u=n.length;i<u;i++)r[n[i]]=t||{};return r}var e,o,r,u;for(t=t||"","string"==typeof(i=i||[])&&(i=ti(i)),r=ti(n),u=r.length;u--;)o={attributes:f(e=ti([a,t].join(" "))),attributesOrder:e,children:f(i,bli)},c[r[u]]=o}function i(n,t){for(var r,i,f,e=ti(n),o=e.length,u=ti(t);o--;)for(r=c[e[o]],i=0,f=u.length;i<f;i++)r.attributes[u[i]]={},r.attributesOrder.push(u[i])}function ft(n){return new RegExp("^"+n.replace(/([?+*])/g,".$1")+"$")}function y(n){var y,g,p,nt,i,t,f,l,s,r,w,h,o,e,b,a,k,c,tt=/[*?+]/,d;if(n)for(d=ti(n,","),u["@"]&&(a=u["@"].attributes,k=u["@"].attributesOrder),y=0,g=d.length;y<g;y++)if(i=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/.exec(d[y])){if(e=i[1],s=i[2],b=i[3],l=i[5],t={attributes:h={},attributesOrder:o=[]},"#"===e&&(t.paddEmpty=!0),"-"===e&&(t.removeEmpty=!0),"!"===i[4]&&(t.removeEmptyAttrs=!0),a&&(et(a,function(n,t){h[t]=n}),o.push.apply(o,k)),l)for(p=0,nt=(l=ti(l,"|")).length;p<nt;p++)(i=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/.exec(l[p]))&&(f={},w=i[1],r=i[2].replace(/[\\:]:/g,":"),e=i[3],c=i[4],"!"===w&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(r),f.required=!0),"-"!==w?(e&&("="===e&&(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:r,value:c}),f.defaultValue=c),":"===e&&(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:r,value:c}),f.forcedValue=c),"<"===e&&(f.validValues=nc(c,"?"))),tt.test(r)?(t.attributePatterns=t.attributePatterns||[],f.pattern=ft(r),t.attributePatterns.push(f)):(h[r]||o.push(r),h[r]=f)):(delete h[r],o.splice(kli(o,r),1)));a||"@"!==s||(a=h,k=o);b&&(t.outputName=s,u[b]=t);tt.test(s)?(t.pattern=ft(s),v.push(t)):u[s]=t}}function ot(n){u={};v=[];y(n);si(it,function(n,t){o[t]=n.children})}function st(n){var t=/^(~)?(.+)$/;n&&(is.text_block_elements=is.block_elements=null,si(ti(n,","),function(n){var r,e=t.exec(n),s="~"===e[1],f=s?"span":"div",i=e[2];o[i]=o[f];nt[i]=f;s||(w[i.toUpperCase()]={},w[i]={});u[i]||(r=u[f],delete(r=ttt({},r)).removeEmptyAttrs,delete r.removeEmpty,u[i]=r);si(o,function(n,t){n[f]&&(o[t]=n=ttt({},o[t]),n[i]=n[f])})}))}function b(t){var i=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;is[n.schema]=null;t&&si(ti(t,","),function(n){var r,u,t=i.exec(n);t&&(u=t[1],r=u?o[t[2]]:o[t[2]]={"#comment":{}},r=o[t[2]],si(ti(t[3],"|"),function(n){"-"===u?delete r[n]:r[n]={}}))})}function k(n){var i,t=u[n];if(t)return t;for(i=v.length;i--;)if((t=v[i]).pattern.test(n))return t}var s,a,l,e,r,d,g,c,u={},o={},v=[],nt={},tt={},it=(s=(n=n||{}).schema,c={},is[s]||(a="id accesskey class dir lang style tabindex title role",l="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",e="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==s&&(a+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",l+=" article aside details dialog figure main header footer hgroup section nav",e+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==s&&(a+=" xml:lang",e=[e,g="acronym applet basefont big font strike tt"].join(" "),si(ti(g),function(n){t(n,"",e)}),l=[l,d="center dir isindex noframes"].join(" "),r=[l,e].join(" "),si(ti(d),function(n){t(n,"",r)})),r=r||[l,e].join(" "),t("html","manifest","head body"),t("head","","base command link meta noscript script style title"),t("title hr noscript br"),t("base","href target"),t("link","href rel media hreflang type sizes hreflang"),t("meta","name http-equiv content charset"),t("style","media type scoped"),t("script","src async defer type charset"),t("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),t("address dt dd div caption","",r),t("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",e),t("blockquote","cite",r),t("ol","reversed start type","li"),t("ul","","li"),t("li","value",r),t("dl","","dt dd"),t("a","href target rel media hreflang type",e),t("q","cite",e),t("ins del","cite datetime",r),t("img","src sizes srcset alt usemap ismap width height"),t("iframe","src name width height",r),t("embed","src type width height"),t("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),t("param","name value"),t("map","name",[r,"area"].join(" ")),t("area","alt coords shape href target rel media hreflang type"),t("table","border","caption colgroup thead tfoot tbody tr"+("html4"===s?" col":"")),t("colgroup","span","col"),t("col","span"),t("tbody thead tfoot","","tr"),t("tr","","td th"),t("td","colspan rowspan headers",r),t("th","colspan rowspan headers scope abbr",r),t("form","accept-charset action autocomplete enctype method name novalidate target",r),t("fieldset","disabled form name",[r,"legend"].join(" ")),t("label","form for",e),t("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),t("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===s?r:e),t("select","disabled form multiple name required size","option optgroup"),t("optgroup","disabled label","option"),t("option","disabled label selected value"),t("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),t("menu","type label",[r,"li"].join(" ")),t("noscript","",r),"html4"!==s&&(t("wbr"),t("ruby","",[e,"rt rp"].join(" ")),t("figcaption","",r),t("mark rt rp summary bdi","",e),t("canvas","width height",r),t("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),t("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),t("picture","","img source"),t("source","src srcset type media sizes"),t("track","kind src srclang label default"),t("datalist","",[e,"option"].join(" ")),t("article section nav aside main header footer","",r),t("hgroup","","h1 h2 h3 h4 h5 h6"),t("figure","",[r,"figcaption"].join(" ")),t("time","datetime",e),t("dialog","open",r),t("command","type label icon disabled checked radiogroup command"),t("output","for form name",e),t("progress","value max",e),t("meter","value min max low high optimum",e),t("details","open",[r,"summary"].join(" ")),t("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==s&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==s&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allowfullscreen loading")),si(ti("a form meter progress dfn"),function(n){c[n]&&delete c[n].children[n]}),delete c.caption.children.table,delete c.script,is[s]=c));!1===n.verify_html&&(n.valid_elements="*[*]");var ht=vn(n.valid_styles),ct=vn(n.invalid_styles,"map"),lt=vn(n.valid_classes,"map"),at=h("whitespace_elements","pre script noscript style textarea video audio iframe object code"),vt=h("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),p=h("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),yt=h("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),rt="td th iframe video audio object script code",pt=h("non_empty_elements",rt+" pre",p),wt=h("move_caret_before_on_enter_elements",rt+" table",p),ut=h("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),w=h("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",ut),bt=h("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");si((n.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(n){tt[n]=new RegExp("<\/"+n+"[^>]*>","gi")});n.valid_elements?ot(n.valid_elements):(si(it,function(n,t){u[t]={attributes:n.attributes,attributesOrder:n.attributesOrder};o[t]=n.children}),"html5"!==n.schema&&si(ti("strong/b em/i"),function(n){var t=ti(n,"/");u[t[1]].outputName=t[0]}),si(ti("ol ul sub sup blockquote span font a table tbody strong em b i"),function(n){u[n]&&(u[n].removeEmpty=!0)}),si(ti("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(n){u[n].paddEmpty=!0}),si(ti("span"),function(n){u[n].removeEmptyAttrs=!0}));st(n.custom_elements);b(n.valid_children);y(n.extended_valid_elements);b("+ol[ul|ol],+ul[ul|ol]");si({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(n,t){u[t]&&(u[t].parentsRequired=ti(n))});n.invalid_elements&&si(hat(n.invalid_elements),function(n){u[n]&&delete u[n]});k("span")||y("span[!data-mce-type|*]");var kt=f(ht),dt=f(ct),gt=f(lt),ni=f(yt),ii=f(w),ri=f(ut),ui=f(bt),fi=f(p),ei=f(vt),oi=f(pt),hi=f(wt),ci=f(at),li=f(tt),ai=f(nt);return{children:o,elements:u,getValidStyles:kt,getValidClasses:gt,getBlockElements:ii,getInvalidStyles:dt,getShortEndedElements:fi,getTextBlockElements:ri,getTextInlineElements:ui,getBoolAttrs:ni,getElementRule:k,getSelfClosingElements:ei,getNonEmptyElements:oi,getMoveCaretBeforeOnEnterElements:hi,getWhiteSpaceElements:ci,getSpecialElements:li,isValidChild:function(n,t){var i=o[n.toLowerCase()];return!(!i||!i[t.toLowerCase()])},isValid:function(n,t){var i,r,u=k(n);if(u){if(!t||u.attributes[t])return!0;if(i=u.attributePatterns)for(r=i.length;r--;)if(i[r].pattern.test(n))return!0}return!1},getCustomElements:ai,addValidElements:y,setValidElements:ot,addCustomElements:st,addValidChildren:b}}function uat(n,t,i,r){function u(n){return 1<(n=parseInt(n,10).toString(16)).length?n:"0"+n}return"#"+u(t)+u(i)+u(r)}function yn(n,t){var o,r,l=this,s=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,a=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,h=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={},f=kn,e,i;for(n=n||{},t&&(o=t.getValidStyles(),r=t.getInvalidStyles()),e=("\\\" \\' \\; \\: ; : "+f).split(" "),i=0;i<e.length;i++)u[e[i]]=f+i,u[f+i]=e[i];return{toHex:function(n){return n.replace(s,uat)},parse:function(t){function v(n,t,u){var h=r[n+"-top"+t],e,o,s,f;if(h&&(e=r[n+"-right"+t],e&&(o=r[n+"-bottom"+t],o&&(s=r[n+"-left"+t],s)))){for(f=[h,e,o,s],i=f.length-1;i--&&f[i]===f[i+1];);-1<i&&u||(r[n+t]=-1===i?f[0]:f.join(" "),delete r[n+"-top"+t],delete r[n+"-right"+t],delete r[n+"-bottom"+t],delete r[n+"-left"+t])}}function b(n){var i,t=r[n];if(t){for(i=(t=t.split(" ")).length;i--;)if(t[i]!==t[0])return;return r[n]=t[0],1}}function nt(n){return d=!0,u[n]}function k(n,t){return d&&(n=n.replace(/\uFEFF[0-9]/g,function(n){return u[n]})),t?n:n.replace(/\\([\'\";:])/g,"$1")}function rt(n){return String.fromCharCode(parseInt(n.slice(1),16))}function tt(n){return n.replace(/\\[0-9a-f]+/gi,rt)}function ut(t,i,r,u,f,e){if(f=f||e)return"'"+(f=k(f)).replace(/\'/g,"\\'")+"'";if(i=k(i||r||u),!n.allow_script_urls){var o=i.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(o)||!n.allow_svg_data_urls&&/^data:image\/svg/i.test(o))return""}return"url('"+(i=it?it.call(ft,i,"style"):i).replace(/\'/g,"\\'")+"')"}var y,o,e,d,g,p,w,r={},it=n.url_converter,ft=n.url_converter_scope||l;if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,nt).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(n){return n.replace(/[;:]/g,nt)});y=h.exec(t);)h.lastIndex=y.index+y[0].length,o=y[1].replace(c,"").toLowerCase(),e=y[2].replace(c,""),o&&e&&(o=tt(o),e=tt(e),-1===o.indexOf(f)&&-1===o.indexOf('"')&&(n.allow_script_urls||"behavior"!==o&&!/expression\s*\(|\/\*|\*\//.test(e))&&("font-weight"===o&&"700"===e?e="bold":"color"!==o&&"background-color"!==o||(e=e.toLowerCase()),e=(e=e.replace(s,uat)).replace(a,ut),r[o]=d?k(e,!0):e));v("border","",!0);v("border","-width");v("border","-color");v("border","-style");v("padding","");v("margin","");p="border-style";w="border-color";b(g="border-width")&&b(p)&&b(w)&&(r.border=r[g]+" "+r[p]+" "+r[w],delete r[g],delete r[p],delete r[w]);"medium none"===r.border&&delete r.border;"none"===r["border-image"]&&delete r["border-image"]}return r},serialize:function(n,t){function u(t){var f,u=o[t],r,e;if(u)for(r=0,e=u.length;r<e;r++)t=u[r],(f=n[t])&&(i+=(0<i.length?" ":"")+t+": "+f+";")}var i="";return t&&o?(u("*"),u(t)):et(n,function(n,u){var f;!n||r&&((f=r["*"])&&f[u]||(f=r[t])&&f[u])||(i+=(0<i.length?" ":"")+u+": "+n+";")}),i}}}function pn(n){return n instanceof Event||ft(n.initEvent)}function fat(n,t,i,r){var f,e,u=function(n){var t,i=null!=r?r:{};for(t in n)w(dli,t)||(i[t]=n[t]);return tt(i.composedPath)&&(i.composedPath=function(){return n.composedPath()}),i}(t);return u.type=n,wu(u.target)&&(u.target=null!==(f=u.srcElement)&&void 0!==f?f:i),(wu((e=t).preventDefault)||pn(e))&&(u.preventDefault=function(){u.defaultPrevented=!0;u.isDefaultPrevented=lt;ft(t.preventDefault)?t.preventDefault():pn(t)&&(t.returnValue=!1)},u.stopPropagation=function(){u.cancelBubble=!0;u.isPropagationStopped=lt;ft(t.stopPropagation)?t.stopPropagation():pn(t)&&(t.cancelBubble=!0)},u.stopImmediatePropagation=function(){u.isImmediatePropagationStopped=lt;u.stopPropagation()},u.isDefaultPrevented!==lt&&u.isDefaultPrevented!==it&&(u.isDefaultPrevented=!0===u.defaultPrevented?lt:it,u.isPropagationStopped=!0===u.cancelBubble?lt:it,u.isImmediatePropagationStopped=it)),u}function wn(n,t,i,r){n.addEventListener?n.addEventListener(t,i,r||!1):n.attachEvent&&n.attachEvent("on"+t,i)}function dy(n,t,i,r){n.removeEventListener?n.removeEventListener(t,i,r||!1):n.detachEvent&&n.detachEvent("on"+t,i)}function dh(n,t){var f,i,r,e,u=fat(n.type,n,document,t);return tt(e=n)&&gli.test(e.type)&&tr(n.pageX)&&!tr(n.clientX)&&(i=(f=u.target.ownerDocument||document).documentElement,r=f.body,u.pageX=n.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),u.pageY=n.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),tr(u.metaKey)&&(u.metaKey=!1),u}function rf(){this.domLoaded=!1;this.events={};this.count=1;this.expando="mce-data-"+(+new Date).toString(32);this.hasMouseEnterLeave="onmouseenter"in document.documentElement;this.hasFocusIn="onfocusin"in document.documentElement;this.count=1}function ye(n,t,i){var r="0x"+t-65536;return r!=r||i?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}function ett(){function n(i,r){return t.push(i+" ")>nt.cacheLength&&delete n[t.shift()],n[i+" "]=r}var t=[];return n}function cu(n){return n[ei]=!0,n}function kat(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||-2147483648)-(~n.sourceIndex||-2147483648);if(r)return r;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return n?1:-1}function fs(n){return cu(function(t){return t=+t,cu(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ott(n){return n&&typeof n.getElementsByTagName!=hp&&n}function dat(){}function ap(n){for(var t=0,r=n.length,i="";t<r;t++)i+=n[t].value;return i}function stt(n,t,i){var r=t.dir,u=i&&"parentNode"===r,f=nai++;return t.first?function(t,i,f){for(;t=t[r];)if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,e){var o,s,h=[ff,f];if(e){for(;t=t[r];)if((1===t.nodeType||u)&&n(t,i,e))return!0}else for(;t=t[r];)if(1===t.nodeType||u){if((o=(s=t[ei]||(t[ei]={}))[r])&&o[0]===ff&&o[1]===f)return h[2]=o[2];if((s[r]=h)[2]=n(t,i,e))return!0}}}function htt(n){return 1<n.length?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function vp(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;f<s;f++)(e=n[f])&&(i&&!i(e,r,u)||(o.push(e),h&&t.push(f)));return o}function oa(n){return void 0!==n}function ctt(n){return"string"==typeof n}function gat(n,t){var i,r=(t=t||uvt).createElement("div"),u=t.createDocumentFragment();for(r.innerHTML=n;i=r.firstChild;)u.appendChild(i);return u}function nvt(n,t){return n&&t&&-1!==(" "+n.className+" ").indexOf(" "+t+" ")}function tvt(n,t,i){var u,r;return t=a(t)[0],n.each(function(){i&&u===this.parentNode||(u=this.parentNode,r=t.cloneNode(!1),this.parentNode.insertBefore(r,this));r.appendChild(this)}),n}function lr(n,t){return new a.fn.init(n,t)}function ivt(n){return null==n?"":(""+n).replace(gai,"")}function bf(n,t){var f,u,r,i;if(n)if(void 0===(f=n.length)){for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],!1===t.call(i,u,i)))break}else for(r=0;r<f&&(i=n[r],!1!==t.call(i,r,i));r++);return n}function rvt(n,t){var i=[];return bf(n,function(n,r){t(r,n)&&i.push(r)}),i}function fvt(n,t,i){var u=[],r=n[t];for("string"!=typeof i&&i instanceof a&&(i=i[0]);r&&9!==r.nodeType;){if(void 0!==i){if(r===i)break;if("string"==typeof i&&a(r).is(i))break}1===r.nodeType&&u.push(r);r=r[t]}return u}function ptt(n,t,i,r){var u=[];for(r instanceof a&&(r=r[0]);n;n=n[t])if(!i||n.nodeType===i){if(void 0!==r){if(n===r)break;if("string"==typeof r&&a(n).is(r))break}u.push(n)}return u}function evt(n,t,i){for(n=n[t];n;n=n[t])if(n.nodeType===i)return n;return null}function ovt(n,t){var i=t.attr("style"),r=n.serialize(n.parse(i),t[0].nodeName)||null;t.attr("data-mce-style",r)}function fc(n,t){var r,i,u=0;if(n)for(r=n.nodeType,n=n.previousSibling;n;n=n.previousSibling)i=n.nodeType,(!t||3!==i||i!==r&&n.nodeValue.length)&&(u++,r=i);return u}function iu(n){void 0===n&&(n={});this.states={};this.queue=[];this.scriptLoadedCallbacks={};this.queueLoadedCallbacks=[];this.loading=0;this.settings=n}function hi(n){var t=n;return{get:function(){return t},set:function(n){t=n}}}function svt(){return at(ca,ktt.get())}function ec(){function u(){return t.get().each(i)}var i,t,r=(i=y,t=hi(n.none()),{clear:function(){u();t.set(n.none())},isSet:function(){return t.get().isSome()},get:function(){return t.get()},set:function(i){u();t.set(n.some(i))}});return c(c({},r),{on:function(n){return r.get().each(n)}})}function dtt(n,t){var i=null;return{cancel:function(){ll(i)||(clearTimeout(i),i=null)},throttle:function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];ll(i)&&(i=setTimeout(function(){i=null;n.apply(null,u)},t))}}}function hvt(n,t){function r(){ll(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:r,throttle:function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];r();i=setTimeout(function(){i=null;n.apply(null,f)},t)}}}function gtt(n,t){var i=gl(n,t);return void 0===i||""===i?[]:i.split(" ")}function yp(n){return void 0!==n.dom.classList}function pp(n,t){var i,r,u;yp(n)?n.dom.classList.add(t):(r=t,u=gtt(i=n,"class").concat([r]),du(i,"class",u.join(" ")))}function cvt(n,t){return yp(n)&&n.dom.classList.contains(t)}function gi(n,i){return aht(r=void 0===n?document:n.dom)?[]:ut(r.querySelectorAll(i),t.fromDom);var r}function lvt(i,r){function u(t,i){return(r=t.dom)&&r.hasAttribute&&r.hasAttribute(i)?n.some(gl(t,i)):n.none();var r}var f=i.selection.getRng(),e=t.fromDom(f.startContainer),o=t.fromDom(i.getBody()),s=r.fold(function(){return"."+rit()},function(n){return"["+la()+'="'+n+'"]'});return un(ey(e,f.startOffset).getOr(e),s,function(n){return g(n,o)}).bind(function(n){return u(n,""+bp()).bind(function(t){return u(n,""+la()).map(function(n){var r=fvi(i,t);return{uid:t,name:n,elements:r}})})})}function uvi(t){function o(){return{listeners:[],previous:ec()}}function u(n,t){i(n,function(n){return t(n),n})}function i(n,t){var i=r.get(),u=t(at(i,n).getOrThunk(o));i[n]=u;r.set(i)}var r=hi({}),f=hvt(function(){var f=r.get();e(tg(ch(f)),function(r){i(r,function(i){var f=i.previous.get();return lvt(t,n.some(r)).fold(function(){var n;f.isSome()&&(u(n=r,function(t){e(t.listeners,function(t){return t(!1,n)})}),i.previous.clear())},function(n){var r,o,s,t=n.uid,h=n.name,c=n.elements;ly(f,t)||(o=t,s=c,u(r=h,function(n){e(n.listeners,function(n){return n(!0,r,{uid:o,nodes:ut(s,function(n){return n.dom})})})}),i.previous.set(t))}),{previous:i.previous,listeners:i.listeners}})})},30);return t.on("remove",function(){f.cancel()}),t.on("NodeChange",function(){f.throttle()}),{addListener:function(n,t){i(n,function(n){return{previous:n.previous,listeners:n.listeners.concat([t])}})}}}function avt(n){var t=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++evi+String(t)}function vvt(n,i){var r,u,f=ect(n).dom,e=t.fromDom(f.createDocumentFragment());oy(e,(r=i,(u=(f||document).createElement("div")).innerHTML=r,nu(t.fromDom(u))));pg(n);ii(n,e)}function yvt(n,i){return t.fromDom(n.dom.cloneNode(i))}function oc(n){return yvt(n,!1)}function pvt(n){return yvt(n,!0)}function wvt(t,i,r){function u(t){for(var i;(i=f[t]())&&!o(i)&&!r(i););return n.from(i).filter(o)}void 0===r&&(r=it);var f=new yt(t,i);return{current:function(){return n.from(f.current()).filter(o)},next:function(){return u("next")},prev:function(){return u("prev")},prev2:function(){return u("prev2")}}}function bvt(t,i){var u=i||function(n){return t.isBlock(n)||st(n)||rt(n)},r=function(t,i,u,f){if(o(t)){var e=f(t,i,t.data);if(-1!==e)return n.some({container:t,offset:e})}return u().bind(function(n){return r(n.container,n.offset,u,f)})};return{backwards:function(n,t,i,f){var e=wvt(n,f,u);return r(n,t,function(){return e.prev().map(function(n){return{container:n,offset:n.length}})},i).getOrNull()},forwards:function(n,t,i,f){var e=wvt(n,f,u);return r(n,t,function(){return e.next().map(function(n){return{container:n,offset:0}})},i).getOrNull()}}}function es(n){return n?{left:cc(n.left),top:cc(n.top),bottom:cc(n.bottom),right:cc(n.right),width:cc(n.width),height:cc(n.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function kvt(n,t){return n=es(n),t||(n.left=n.left+n.width),n.right=n.left,n.width=0,n}function dvt(n,t,i){return 0<=n&&n<=Math.min(t.height,i.height)/2}function sc(n,t){var i=Math.min(t.height/2,n.height/2);return n.bottom-i<t.top||!(n.top>t.bottom)&&dvt(t.top-n.bottom,n,t)}function hc(n,t){return n.top>t.bottom||!(n.bottom<t.top)&&dvt(t.bottom-n.top,n,t)}function gvt(n,t,i){return t>=n.left&&t<=n.right&&i>=n.top&&i<=n.bottom}function wp(n){var t=n.startContainer,i=n.startOffset;return t.hasChildNodes()&&n.endOffset===i+1?t.childNodes[i]:null}function no(n,t){var i,r;return h(n)&&n.hasChildNodes()?(i=n.childNodes,i[(r=i.length-1,Math.min(Math.max(t,0),r))]):n}function nyt(n){return"string"==typeof n&&768<=n.charCodeAt(0)&&ovi.test(n)}function nit(n){return"createRange"in n?n.createRange():d.DOM.createRng()}function tit(n){return n&&/[\r\n\t ]/.test(n)}function tyt(n){return n.setStart&&n.setEnd}function iit(n){var t=n.startContainer,r=n.startOffset,i;if(tit(n.toString())&&cvi(t.parentNode)&&o(t))return i=t.data,tit(i[r-1])||tit(i[r+1])?1:void 0}function iyt(n){return 0===n.left&&0===n.right&&0===n.top&&0===n.bottom}function os(n,t){var i=kvt(n,t);return i.width=1,i.right=i.left+1,i}function dp(n,t){o(t)&&0===t.data.length&&n.remove(t)}function fit(t,i,r){var u,f,e,s,o,h,c;nn(r)?(e=t,s=i,h=n.from((o=r).firstChild),c=n.from(o.lastChild),s.insertNode(o),h.each(function(n){return dp(e,n.previousSibling)}),c.each(function(n){return dp(e,n.nextSibling)})):(u=t,i.insertNode(f=r),dp(u,f.previousSibling),dp(u,f.nextSibling))}function oyt(n){return function(t){return n===t}}function syt(n){var i,t,r,u;return(au(n)?"text()":n.nodeName.toLowerCase())+"["+(t=lit(kpt(i=n)),r=fht(t,oyt(i),i),u=ry(t=t.slice(0,r+1),function(n,i,r){return au(i)&&au(t[r-1])&&n++,n},0),fht(t=hh(t,dr([i.nodeName])),oyt(i),i)-u)+"]"}function hyt(n,t){var r,f,o,e=[],i=t.container(),u=t.offset();return au(i)?r=function(n,t){for(;(n=n.previousSibling)&&au(n);)t+=n.data.length;return t}(i,u):(u>=(f=i.childNodes).length?(r="after",u=f.length-1):r="before",i=f[u]),e.push(syt(i)),o=hh(function(n,t){var i=[];for(t=t.parentNode;t!==n;t=t.parentNode)i.push(t);return i}(n,i),gd(bo)),(e=e.concat(ug(o,syt))).reverse().join("/")+","+r}function cyt(n,t){if(!t)return null;var f=t.split(","),e=f[0].split("/"),u=1<f.length?f[1]:"before",r=ry(e,function(n,t){var u,f,e,i,r=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return r?("text()"===r[1]&&(r[1]="#text"),u=n,f=r[1],e=parseInt(r[2],10),i=hh(i=lit(u),function(n,t){return!au(n)||!au(i[t-1])}),(i=hh(i,dr([f])))[e]):null},n);return r?au(r)?function(n,t){for(var u,r=n,f=0;au(r);){if(u=r.data.length,f<=t&&t<=f+u){n=r;t-=f;break}if(!au(r.nextSibling)){n=r;t=u;break}f+=u;r=r.nextSibling}return au(n)&&t>n.data.length&&(t=n.data.length),i(n,t)}(r,parseInt(u,10)):(u="after"===u?bpt(r)+1:bpt(r),i(r.parentNode,u)):null}function lyt(n,t,i,r,u){var s,f=r[u?"startContainer":"endContainer"],e=r[u?"startOffset":"endOffset"],h=[],c=0,l=n.getRoot();for(o(f)?h.push(i?function(n,t,i){for(var u=n(t.data.slice(0,i)).length,r=t.previousSibling;r&&o(r);r=r.previousSibling)u+=n(r.data).length;return u}(t,f,e):e):(e>=(s=f.childNodes).length&&s.length&&(c=1,e=Math.max(0,s.length-1)),h.push(n.nodeIndex(s[e],i)+c));f&&f!==l;f=f.parentNode)h.push(n.nodeIndex(f,i));return h}function eit(n,t,i){var u=0;return r.each(n.select(t),function(n){if("all"!==n.getAttribute("data-mce-bogus"))return n!==i&&void u++}),u}function ayt(n,t){var u,f=t?"start":"end",i=n[f+"Container"],r=n[f+"Offset"];h(i)&&"TR"===i.nodeName&&(i=(u=i.childNodes)[Math.min(t?r:r-1,u.length-1)])&&(r=t?0:i.childNodes.length,n["set"+(t?"Start":"End")](i,r))}function vyt(n){return ayt(n,!0),ayt(n,!1),n}function yyt(n,t){var i;return h(n)&&(n=no(n,t),rw(n))?n:hr(n)?(i=(n=o(n)&&bh(n)?n.parentNode:n).previousSibling,rw(i)?i:(i=n.nextSibling,rw(i)?i:void 0)):void 0}function pyt(n,t,i){var u=i.getNode(),r=u?u.nodeName:null,c=i.getRng(),f,l,a,v,s,h,e,o;return rw(u)||"IMG"===r?{name:r,index:eit(i.dom,r,u)}:(o=yyt((f=c).startContainer,f.startOffset)||yyt(f.endContainer,f.endOffset),o?{name:r=o.tagName,index:eit(i.dom,r,o)}:(h=(a=i).dom,(e={}).start=lyt(h,l=n,v=t,s=c,!0),a.isCollapsed()||(e.end=lyt(h,l,v,s,!1)),dlt(s)&&(e.isFakeCaret=!0),e))}function wyt(n,t,i){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return i?n.create("span",r,"&#xFEFF;"):n.create("span",r)}function byt(n,t){var i=n.dom,r=n.getRng(),u=i.uniqueId(),s=n.isCollapsed(),o=n.getNode(),f=o.nodeName,e;return"IMG"===f?{name:f,index:eit(i,f,o)}:(e=vyt(r.cloneRange()),s||(e.collapse(!1),fit(i,e,wyt(i,u+"_end",t))),(r=vyt(r)).collapse(!0),fit(i,r,wyt(i,u+"_start",t)),n.moveToBookmark({id:u,keep:!0}),{id:u})}function kyt(n,t,i){var r=n.getParam(t,i);return-1===r.indexOf("=")?r:at(n.getParam(t,"","hash"),n.id).getOr(i)}function dyt(n){return n.getParam("content_security_policy","")}function oi(n){if(n.getParam("force_p_newlines",!1))return"p";var t=n.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t}function ya(n){return n.getParam("forced_root_block_attrs",{})}function gyt(n){return n.getParam("automatic_uploads",!0,"boolean")}function npt(n){return n.getParam("icons","","string")}function tpt(n){return n.getParam("referrer_policy","","string")}function ipt(n){return n.getParam("language","en","string")}function rpt(n){return n.getParam("indent_use_margin",!1)}function upt(n){var t=n.getParam("font_css",[]);return br(t)?t:ut(t.split(","),cg)}function fpt(n){var t=n.getParam("object_resizing");return!1!==t&&!l.iOS&&(ht(t)?t:"table,img,figure.image,div,video,iframe")}function ept(n){return n.getParam("event_root")}function pa(n){return n.getParam("theme")}function wa(n){return!1!==n.getParam("inline_boundaries")}function oit(n){return n.getParam("plugins","","string")}function opt(n){var t=n.parentNode;t&&t.removeChild(n)}function spt(n){var t=ae(n);return{count:n.length-t.length,text:t}}function hpt(n){for(var t;-1!==(t=n.data.lastIndexOf(fi));)n.deleteData(t,1)}function cpt(n,t){return hs(n),t}function lvi(t,r){var u,f=r.container(),e=(-1===(u=wst(bu(f.childNodes),t))?n.none():n.some(u)).map(function(n){return n<r.offset()?i(f,r.offset()-1):r}).getOr(r);return hs(t),e}function avi(n,t){return i.isTextPosition(t)?(u=t,gpt(r=n)&&u.container()===r?(o=spt((f=r).data.substr(0,(e=u).offset())),h=spt(f.data.substr(e.offset())),0<(o.text+h.text).length?(hpt(f),i(f,e.offset()-o.count)):e):cpt(r,u)):(s=n,((c=t).container()===s.parentNode?lvi:cpt)(s,c));var r,u,f,e,o,h,s,c}function lpt(n,t,i){var e,f,o,r=kvt(t.getBoundingClientRect(),i),s="BODY"===n.tagName?(e=n.ownerDocument.documentElement,f=n.scrollLeft||e.scrollLeft,n.scrollTop||e.scrollTop):(o=n.getBoundingClientRect(),f=n.scrollLeft-o.left,n.scrollTop-o.top),u;return r.left+=f,r.right+=f,r.top+=s,r.bottom+=s,r.width=1,u=t.offsetWidth-t.clientWidth,0<u&&(i&&(u*=-1),r.left+=u,r.right+=u),r}function vvi(n,i,r,u){function s(){!function(){for(var f,e,n,u=gi(t.fromDom(i),"*[contentEditable=false],video,audio,embed,object"),r=0;r<u.length;r++)e=u[r].dom,n=e.previousSibling,rp(n)&&(1===(f=n.data).length?n.parentNode.removeChild(n):n.deleteData(f.length-1,1)),n=e.nextSibling,ip(n)&&(1===(f=n.data).length?n.parentNode.removeChild(n):n.deleteData(0,1))}();f&&(hs(f),f=null);o.on(function(n){a(n.caret).remove();o.clear()});e&&(ui.clearInterval(e),e=void 0)}var e,f,o=ec(),h=oi(n),l=0<h.length?h:"p";return{show:function(n,t){var h,v,y;return(s(),kvi(t))?null:r(t)?(f=function(n,t,i){var f,r=t.ownerDocument.createElement(n),u;return r.setAttribute("data-mce-caret",i?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(((f=document.createElement("br")).setAttribute("data-mce-bogus","1"),f)),u=t.parentNode,i?u.insertBefore(r,t):t.nextSibling?u.insertBefore(r,t.nextSibling):u.appendChild(r),r}(l,t,n),v=lpt(i,t,n),a(f).css("top",v.top),y=a('<div class="mce-visual-caret" data-mce-bogus="all"><\/div>').css(c({},v)).appendTo(i)[0],o.set({caret:y,element:t,before:n}),n&&a(y).addClass("mce-visual-caret-before"),e=ui.setInterval(function(){u()?a("div.mce-visual-caret",i).toggleClass("mce-visual-caret-hidden"):a("div.mce-visual-caret",i).addClass("mce-visual-caret-hidden")},500),(h=t.ownerDocument.createRange()).setStart(f,0),h.setEnd(f,0),h):(f=function(n,t){var r=n.ownerDocument.createTextNode(fi),u=n.parentNode,i;if(t){if(i=n.previousSibling,gh(i)){if(hr(i))return i;if(rp(i))return i.splitText(i.data.length-1)}u.insertBefore(r,n)}else{if(i=n.nextSibling,gh(i)){if(hr(i))return i;if(ip(i))return i.splitText(1),i}n.nextSibling?u.insertBefore(r,n.nextSibling):u.appendChild(r)}return r}(t,n),h=t.ownerDocument.createRange(),ka(f.nextSibling)?(h.setStart(f,0),h.setEnd(f,0)):(h.setStart(f,1),h.setEnd(f,1)),h)},hide:s,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){o.on(function(n){var t=lpt(i,n.element,n.before);a(n.caret).css(c({},t))})},destroy:function(){return ui.clearInterval(e)}}}function apt(){return ait.isIE()||ait.isEdge()||ait.isFirefox()}function ss(n){return ka(n)||vh(n)&&apt()}function gp(n,t){for(var i;i=n(t);)if(!twt(i))return i;return null}function lc(n,t,i,r,u){var f=new yt(n,r),e=vit(n)||twt(n);if(t<0){if(e&&i(n=gp(f.prev.bind(f),!0)))return n;for(;n=gp(f.prev.bind(f),u);)if(i(n))return n}if(0<t){if(e&&i(n=gp(f.next.bind(f),!0)))return n;for(;n=gp(f.next.bind(f),u);)if(i(n))return n}return null}function io(n,t){for(;n&&n!==t;){if(gvi(n))return n;n=n.parentNode}return null}function ef(n,t,i){return io(n.container(),i)===io(t.container(),i)}function sit(n,t){if(!t)return null;var i=t.container(),r=t.offset();return iwt(i)?i.childNodes[r+n]:null}function vpt(n,t){var i=t.ownerDocument.createRange();return n?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)),i}function ypt(n,t,i){for(var f,e,r,u=n?"previousSibling":"nextSibling";i&&i!==t;){if(r=i[u],nwt(r)&&(r=r[u]),vit(r)||dvi(r)){if(e=i,io(r,f=t)===io(e,f))return r;break}if(nyi(r))break;i=i.parentNode}return null}function hit(n,t,i){var f,e=u(ypt,!0,t),s=u(ypt,!1,t),r=i.startContainer,h=i.startOffset,c;if(bh(r)){if(c=(r=iwt(r)?r:r.parentNode).getAttribute("data-mce-caret"),"before"===c&&ss(f=r.nextSibling))return da(f);if("after"===c&&ss(f=r.previousSibling))return ga(f)}if(!i.collapsed)return i;if(o(r)){if(nwt(r)){if(1===n){if(f=s(r))return da(f);if(f=e(r))return ga(f)}if(-1===n){if(f=e(r))return ga(f);if(f=s(r))return da(f)}return i}if(rp(r)&&h>=r.data.length-1)return 1===n&&(f=s(r))?da(f):i;if(ip(r)&&h<=1)return-1===n&&(f=e(r))?ga(f):i;if(h===r.data.length)return(f=s(r))?da(f):i;if(0===h)return(f=e(r))?ga(f):i}return i}function ppt(t,i){return n.from(sit(t?0:-1,i)).filter(vit)}function ba(n,t,r){var u=hit(n,t,r);return-1===n?i.fromRangeStart(u):i.fromRangeEnd(u)}function nw(i){return n.from(i.getNode()).map(t.fromDom)}function cit(n,t){for(;t=n(t);)if(t.isVisible())return t;return t}function tw(n,t){var i=ef(n,t);return!(i||!st(n.getNode()))||i}function rwt(n,t){return n.hasChildNodes()&&t<n.childNodes.length?n.childNodes[t]:null}function uwt(n,t){if(0<n){if(bc(t.previousSibling)&&!hf(t.previousSibling))return i.before(t);if(hf(t))return i(t,0)}if(n<0){if(bc(t.nextSibling)&&!hf(t.nextSibling))return i.after(t);if(hf(t))return i(t,t.data.length)}return n<0&&!ert(t)?i.after(t):i.before(t)}function vu(n){return{next:function(t){return ort(bt.Forwards,t,n)},prev:function(t){return ort(bt.Backwards,t,n)}}}function fwt(n){return i.isTextPosition(n)?0===n.offset():nf(n.getNode())}function ewt(n){if(i.isTextPosition(n)){var t=n.container();return n.offset()===t.data.length}return nf(n.getNode(!0))}function owt(n,t){return!i.isTextPosition(n)&&!i.isTextPosition(t)&&n.getNode()===t.getNode(!0)}function uw(t,r,u){return vr(t,r,u).bind(function(f){return ef(u,f,r)&&(e=u,o=f,t?!owt(e,o)&&(i.isTextPosition(s=e)||!st(s.getNode()))&&ewt(e)&&fwt(o):!owt(o,e)&&fwt(e)&&ewt(o))?vr(t,r,f):n.some(f);var e,o,s})}function ac(t,r){var s,h,f,c,e,u=t?r.firstChild:r.lastChild;return o(u)?n.some(i(u,t?0:u.data.length)):u?nf(u)?n.some(t?i.before(u):st(e=u)?i.before(e):i.after(e)):(h=r,f=u,c=(s=t)?i.before(f):i.after(f),vr(s,h,c)):n.none()}function of(n){return h(n)&&n.id===sbt}function cs(n,t){for(;t&&t!==n;){if(t.id===sbt)return t;t=t.parentNode}return null}function swt(n){return r.isArray(n.start)}function hwt(n,t){return h(t)&&n.isBlock(t)&&!t.innerHTML&&!l.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t}function cwt(n,t,i){return!1===t.hasChildNodes()&&cs(n,t)&&(u=i,r=(f=t).ownerDocument.createTextNode(fi),f.appendChild(r),u.setStart(r,0),u.setEnd(r,0),1);var f,u,r}function lwt(n,t,i,r){var e,u,o,s,f=i[t?"start":"end"],h=n.getRoot();if(f){for(o=f[0],u=h,e=f.length-1;1<=e;e--){if(s=u.childNodes,cwt(h,u,r))return 1;if(f[e]>s.length-1)return cwt(h,u,r)||function(n){return lf(u).fold(it,function(t){return n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),!0})}(r);u=s[f[e]]}3===u.nodeType&&(o=Math.min(f[0],u.nodeValue.length));1===u.nodeType&&(o=Math.min(f[0],u.childNodes.length));t?r.setStart(u,o):r.setEnd(u,o)}return 1}function yit(n){return o(n)&&0<n.data.length}function awt(t,u,f){var s,a,c,h,v,y,e=t.get(f.id+"_"+u),p=f.keep;if(e){if(s=e.parentNode,a="start"===u?p?e.hasChildNodes()?(s=e.firstChild,1):yit(e.nextSibling)?(s=e.nextSibling,0):yit(e.previousSibling)?(s=e.previousSibling,e.previousSibling.data.length):(s=e.parentNode,t.nodeIndex(e)+1):t.nodeIndex(e):p?e.hasChildNodes()?(s=e.firstChild,1):yit(e.previousSibling)?(s=e.previousSibling,e.previousSibling.data.length):(s=e.parentNode,t.nodeIndex(e)):t.nodeIndex(e),v=s,y=a,!p){for(h=e.previousSibling,c=e.nextSibling,r.each(r.grep(e.childNodes),function(n){o(n)&&(n.nodeValue=n.nodeValue.replace(/\uFEFF/g,""))});e=t.get(f.id+"_"+u);)t.remove(e,!0);h&&c&&h.nodeType===c.nodeType&&o(h)&&!l.opera&&(a=h.nodeValue.length,h.appendData(c.nodeValue),t.remove(c),v=h,y=a)}return n.some(i(v,y))}return n.none()}function tyi(t,i){!function(t,i){var s,v,u,y,p,h,c,f,r,l,a,e,o=t.dom;if(i){if(swt(i))return a=i,e=(l=o).createRng(),lwt(l,!0,a,e)&&lwt(l,!1,a,e)?n.some(e):n.none();if(ht(i.start))return n.some((c=i,f=(h=o).createRng(),r=cyt(h.getRoot(),c.start),f.setStart(r.container(),r.offset()),r=cyt(h.getRoot(),c.end),f.setEnd(r.container(),r.offset()),f));if(w(i,"id"))return di(p=awt(u=o,"start",y=i),awt(u,"end",y).or(p),function(n,t){var i=u.createRng();return i.setStart(hwt(u,n.container()),n.offset()),i.setEnd(hwt(u,t.container()),t.offset()),i});if(w(i,"name"))return s=o,n.from(s.select((v=i).name)[v.index]).map(function(n){var t=s.createRng();return t.selectNode(n),t});if(w(i,"rng"))return n.some(i.rng)}return n.none()}(t,i).each(function(n){t.setRng(n)})}function ar(n){return h(n)&&"SPAN"===n.tagName&&"bookmark"===n.getAttribute("data-mce-type")}function vc(n){return""!==n&&-1!==" \f\n\r\t\v".indexOf(n)}function pit(n){return!vc(n)&&!rv(n)}function fw(n){return n.nodeType}function vwt(n,t,i){var c,s=i.startOffset,r=i.startContainer,f,e,u;if((r!==i.endContainer||!(c=r.childNodes[s])||!/^(IMG)$/.test(c.nodeName))&&h(r))for(f=r.childNodes,e=void 0,s<f.length?(r=f[s],e=new yt(r,n.getParent(r,n.isBlock))):(r=f[f.length-1],(e=new yt(r,n.getParent(r,n.isBlock))).next(!0)),u=e.current();u;u=e.next())if(o(u)&&!srt(u))return i.setStart(u,0),t.setRng(i),0}function wit(n,t,i){if(n){var r=t?"nextSibling":"previousSibling";for(n=i?n:n[r];n;n=n[r])if(h(n)||!srt(n))return n}}function bit(n,t){return fw(t)&&(t=t.nodeName),!!n.schema.getTextBlockElements()[t.toLowerCase()]}function yc(n,t,i){return n.schema.isValidChild(t,i)}function df(n,t){return ft(n)?n=n(t):tt(t)&&(n=n.replace(/%(\w+)/g,function(n,i){return t[i]||n})),n}function kit(n,t){return n=""+((n=n||"").nodeName||n),t=""+((t=t||"").nodeName||t),n.toLowerCase()===t.toLowerCase()}function dit(n,t,i){return"color"!==i&&"backgroundColor"!==i||(t=n.toHex(t)),"fontWeight"===i&&700===t&&(t="bold"),""+("fontFamily"===i?t.replace(/[\'\"]/g,"").replace(/,\s+/g,","):t)}function ew(n,t,i){return dit(n,n.getStyle(t,i),i)}function ywt(n,t){var i;return n.getParent(t,function(t){return(i=n.getStyle(t,"text-decoration"))&&"none"!==i}),i}function ow(n,t,i){return n.getParents(t,i,n.getRoot())}function iyi(n,t){return vi(n.formatter.get(t),function(n){function t(n){return 1<n.length&&"%"===n.charAt(0)}return vi(["styles","attributes"],function(i){return at(n,i).exists(function(n){var r,i;return vi(br(n)?n:(r=ki,i=[],et(n,function(n,t){i.push(r(n,t))}),i),t)})})})}function sf(n){return sh(n,"block")}function ur(n){return sh(n,"selector")}function kt(n){return sh(n,"inline")}function git(n){return ur(n)&&!1!==n.expand&&!kt(n)}function pwt(n,t){for(var i=t;i;){if(h(i)&&n.getContentEditable(i))return"false"===n.getContentEditable(i)?i:t;i=i.parentNode}return t}function wwt(n,t,i,r){for(var f=t.data,u=i;n?0<=u:u<f.length;n?u--:u++)if(r(f.charAt(u)))return n?u+1:u;return-1}function ryi(n,t,i){return wwt(n,t,i,function(n){return rv(n)||vc(n)})}function uyi(n,t,i){return wwt(n,t,i,pit)}function bwt(t,i,r,u,f,e){function s(i,r,u){var e=bvt(t),s=f?e.backwards:e.forwards;return n.from(s(i,r,function(n,t){return kc(n.parentNode)?-1:u(f,o=n,t)},h))}var o,h=t.getParent(r,t.isBlock)||i;return s(r,u,ryi).bind(function(t){return e?s(t.container,t.offset+(f?-1:0),uyi):n.some(t)}).orThunk(function(){return o?n.some({container:o,offset:f?0:o.length}):n.none()})}function kwt(n,t,i,r,u){var s,f,h,e;for(o(r)&&sht(r.data)&&r[u]&&(r=r[u]),s=hbt(n,r),f=0;f<s.length;f++)for(h=0;h<t.length;h++)if(e=t[h],(!tt(e.collapsed)||e.collapsed===i.collapsed)&&ur(e)&&n.is(s[f],e.selector))return s[f];return r}function dwt(n,t,i,r){var s,u=i,f=n.dom,h=f.getRoot(),e=t[0];if((u=sf(e)?e.wrapper?null:f.getParent(i,e.block,h):u)||(s=f.getParent(i,"LI,TD,TH"),u=f.getParent(o(i)?i.parentNode:i,function(t){return t!==h&&syi(n,t)},s)),!(u=u&&sf(e)&&e.wrapper&&hbt(f,u,"ul,ol").reverse()[0]||u))for(u=i;u[r]&&!f.isBlock(u[r])&&!kit(u=u[r],"br"););return u||i}function sw(n,t,i,r,u){var s,f=i,h=u?"previousSibling":"nextSibling",c=n.getRoot(),e,l;if(o(i)&&!cbt(i)&&(u?0<r:r<i.data.length))return i;for(;;){if(!t[0].block_expand&&n.isBlock(f))return f;for(e=f[h];e;e=e[h])if(l=o(e)&&!lbt(n,c,e,h),!kc(e)&&(!st(s=e)||!s.getAttribute("data-mce-bogus")||s.nextSibling)&&!cbt(e,l))return f;if(f===c||f.parentNode===c){i=f;break}f=f.parentNode}return i}function gwt(n){return kc(n.parentNode)||kc(n)}function pc(n,t,i,r){void 0===r&&(r=!1);var f=t.startContainer,c=t.startOffset,u=t.endContainer,s=t.endOffset,e=n.dom,l=i[0];return h(f)&&f.hasChildNodes()&&(f=no(f,c),o(f)&&(c=0)),h(u)&&u.hasChildNodes()&&(u=no(u,t.collapsed?s:s-1),o(u)&&(s=u.nodeValue.length)),f=pwt(e,f),u=pwt(e,u),gwt(f)&&(f=kc(f)?f:f.parentNode,f=t.collapsed?f.previousSibling||f:f.nextSibling||f,o(f)&&(c=t.collapsed?f.length:0)),gwt(u)&&(u=kc(u)?u:u.parentNode,u=t.collapsed?u.nextSibling||u:u.previousSibling||u,o(u)&&(s=t.collapsed?0:u.length)),t.collapsed&&(bwt(e,n.getBody(),f,c,!0,r).each(function(n){var t=n.container,i=n.offset;f=t;c=i}),bwt(e,n.getBody(),u,s,!1,r).each(function(n){var t=n.container,i=n.offset;u=t;s=i})),(kt(l)||l.block_expand)&&(kt(l)&&o(f)&&0!==c||(f=sw(e,i,f,c,!0)),kt(l)&&o(u)&&s!==u.nodeValue.length||(u=sw(e,i,u,s,!1))),git(l)&&(f=kwt(e,i,t,f,"previousSibling"),u=kwt(e,i,t,u,"nextSibling")),(sf(l)||ur(l))&&(f=dwt(n,i,f,"previousSibling"),u=dwt(n,i,u,"nextSibling"),sf(l)&&(e.isBlock(f)||(f=sw(e,i,f,c,!0)),e.isBlock(u)||(u=sw(e,i,u,s,!1)))),h(f)&&(c=e.nodeIndex(f),f=f.parentNode),h(u)&&(s=e.nodeIndex(u)+1,u=u.parentNode),{startContainer:f,startOffset:c,endContainer:u,endOffset:s}}function nv(n,t,i){function c(n){var t=n[0],i;return o(t)&&t===r&&y>=t.data.length&&n.splice(0,1),i=n[n.length-1],0===p&&0<n.length&&i===u&&o(i)&&n.splice(n.length-1,1),n}function a(n,t,i){for(var r=[];n&&n!==i;n=n[t])r.push(n);return r}function v(t,i){return n.getParent(t,function(n){return n.parentNode===i},i)}function h(n,t,r){var e=r?"nextSibling":"previousSibling",u=n,o,f;for(u.parentNode;u&&u!==t;u=o)o=u.parentNode,f=a(u===n?u:u[e],e),f.length&&(r||f.reverse(),i(c(f)))}var y=t.startOffset,r=no(t.startContainer,y),p=t.endOffset,u=no(t.endContainer,p-1),f,e,s,l;if(r===u)return i(c([r]));if(f=n.findCommonAncestor(r,u),n.isChildOf(r,u))return h(r,f,!0);if(n.isChildOf(u,r))return h(u,f);e=v(r,f)||r;s=v(u,f)||u;h(r,e,!0);l=a(e===r?e:e.nextSibling,"nextSibling",s===u?s.nextSibling:s);l.length&&i(c(l));h(u,s)}function nrt(n){var i=[],t;if(n)for(t=0;t<n.rangeCount;t++)i.push(n.getRangeAt(t));return i}function nbt(n,i){var r=gi(i,"td[data-mce-selected],th[data-mce-selected]");return 0<r.length?r:p(oh(n,function(n){var i=wp(n);return i?[t.fromDom(i)]:[]}),gy)}function wc(n){return nbt(nrt(n.selection.getSel()),t.fromDom(n.getBody()))}function tv(n,t){return py(n,"table",t)}function trt(i,r){return di((e=r.startContainer,h=r.startOffset,o(e)?0===h?n.some(t.fromDom(e)):n.none():n.from(e.childNodes[h]).map(t.fromDom)),(f=r.endContainer,s=r.endOffset,o(f)?s===f.data.length?n.some(t.fromDom(f)):n.none():n.from(f.childNodes[s-1]).map(t.fromDom)),function(n,t){var r=gt(abt(i),u(g,n)),f=gt(hrt(i),u(g,t));return r.isSome()&&f.isSome()}).getOr(!1);var f,s,e,h}function irt(n,t,i,u){var f=i,e=new yt(i,f),s=vl(n.schema.getMoveCaretBeforeOnEnterElements(),function(n,t){return!dt(["td","th","table"],t.toLowerCase())});do{if(o(i)&&0!==r.trim(i.nodeValue).length)return u?t.setStart(i,0):t.setEnd(i,i.nodeValue.length),0;if(s[i.nodeName])return u?t.setStartBefore(i):"BR"===i.nodeName?t.setEndBefore(i):t.setEndAfter(i),0}while(i=u?e.next():e.prev());"BODY"===f.nodeName&&(u?t.setStart(f,0):t.setEnd(f,f.childNodes.length))}function hw(n){var t=n.selection.getSel();return t&&0<t.rangeCount}function rrt(n,t){var i=wc(n);0<i.length?e(i,function(i){var u=i.dom,r=n.dom.createRng();r.setStartBefore(u);r.setEndAfter(u);t(r,!0)}):t(n.selection.getRng(),!1)}function urt(n,t,i){var r=byt(n,t);i(r);n.moveToBookmark(r)}function frt(n){return hyi.get(n)}function tbt(n,i,r,u){var o=i.uid,s=void 0===o?avt("mce-annotation"):o,v=function(n,t){var u={},r;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(u[i[r]]=n[i[r]]);return u}(i,["uid"]),f=t.fromTag("span",n);pp(f,rit());du(f,""+bp(),s);du(f,""+la(),r);var h,c=u(s,v),l=c.attributes,a=c.classes,y=void 0===a?[]:a;return oe(f,void 0===l?{}:l),h=f,e(y,function(n){pp(h,n)}),f}function fyi(n,i,r,u,f){function o(){s.clear()}function h(n){e(n,a)}var c=[],l=tbt(n.getDoc(),f,r,u),s=ec(),a=function(t){var e,a,r,i,u,f;switch(r=n,u="span",f=vt(i=t),eu(i).fold(function(){return"skipping"},function(n){return"br"===f||gr(e=i)&&frt(e)===fi?"valid":su(t=i)&&cvt(t,rit())?"existing":of(i.dom)?"caret":yc(r,u,f)&&yc(r,vt(n),u)?"valid":"invalid-child";var t,e})){case"invalid-child":o();h(nu(t));o();break;case"valid":ou(e=t,a=s.get().getOrThunk(function(){var n=oc(l);return c.push(n),s.set(n),n}));ii(a,e)}};return nv(n.dom,i,function(n){o();h(ut(n,t.fromDom))}),c}function ibt(i){var r,f,o,u=(r={},{register:function(n,t){r[n]={name:n,settings:t}},lookup:function(n){return at(r,n).map(function(n){return n.settings})}}),s;return o=u,(f=i).on("init",function(){f.serializer.addNodeFilter("span",function(t){e(t,function(t){n.from(t.attr(la())).bind(o.lookup).each(function(n){!1===n.persistent&&t.unwrap()})})})}),s=uvi(i),{register:function(n,t){u.register(n,t)},annotate:function(n,t){u.lookup(n).each(function(r){var u,f,e,o;f=n;e=r;o=t;(u=i).undoManager.transact(function(){var s,i,n,r,t=u.selection,h=t.getRng(),c=0<wc(u).length;h.collapsed&&!c&&(n=pc(s=u,i=h,[{inline:"span"}]),i.setStart(n.startContainer,n.startOffset),i.setEnd(n.endContainer,n.endOffset),s.selection.setRng(i));t.getRng().collapsed&&!c?(vvt(r=tbt(u.getDoc(),o,f,e.decorate),ir),t.getRng().insertNode(r.dom),t.select(r.dom)):urt(t,!1,function(){rrt(u,function(n){fyi(u,n,f,e.decorate,o)})})})})},annotationChanged:function(n,t){s.addListener(n,t)},remove:function(t){lvt(i,n.some(t)).each(function(n){e(n.elements,yct)})},getAll:function(n){var u,f,r;return iht((u=n,f=gi(t.fromDom(i.getBody()),"["+la()+'="'+u+'"]'),r={},e(f,function(n){var t=gl(n,bp()),i=at(r,t).getOr([]);r[t]=i.concat([n])}),r),function(n){return ut(n,function(n){return n.dom})})}}}function iv(n){return{getBookmark:u(oyi,n),moveToBookmark:u(tyi,n)}}function rbt(n){return sat(n)||!!dn(t=n)&&!0!==fu(bu(t.getElementsByTagName("*")),function(n,t){return n||oat(t)},!1);var t}function dc(n,t){for(;t&&t!==n;){if(gu(t)||rt(t))return t;t=t.parentNode}return null}function crt(n,t,i){if(!i.collapsed){if(l.browser.isIE()&&i.startOffset===i.endOffset-1&&i.startContainer===i.endContainer){var r=i.startContainer.childNodes[i.startOffset];if(h(r))return vi(r.getClientRects(),function(i){return gvt(i,n,t)})}return vi(i.getClientRects(),function(i){return gvt(i,n,t)})}}function vbt(n,t,i){return n.fire(t,i)}function ybt(n,t,i,r){return n.fire("FormatApply",{format:t,node:i,vars:r})}function lrt(n,t,i,r){return n.fire("FormatRemove",{format:t,node:i,vars:r})}function pbt(n,i){function ht(n){return n&&("IMG"===n.nodeName||i.dom.is(n,"figure.image"))}function vt(n){return tu(n)||u.hasClass(n,"mce-preview-object")}function ei(n){var t=n.target;!function(n,t){if("longpress"!==n.type&&0!==n.type.indexOf("touch"))return ht(n.target)&&!crt(n.clientX,n.clientY,t);var i=n.touches[0];return ht(n.target)&&!crt(i.clientX,i.clientY,t)}(n,i.selection.getRng())||n.isDefaultPrevented()||i.selection.select(t)}function yt(n){return u.is(n,"figure.image")?[n.querySelector("img")]:u.hasClass(n,"mce-preview-object")&&tt(n.firstElementChild)?[n,n.firstElementChild]:[n]}function pt(n){var r=fpt(i);return!!r&&"false"!==n.getAttribute("data-mce-resize")&&n!==i.getBody()&&(u.hasClass(n,"mce-preview-object")?lh(t.fromDom(n.firstElementChild),r):lh(t.fromDom(n),r))}function rt(n,t,r){tt(r)&&e(yt(n),function(n){n.style[t]||!i.schema.isValid(n.nodeName.toLowerCase(),t)?u.setStyle(n,t,r):u.setAttrib(n,t,""+r)})}function wt(n,t,i){rt(n,"width",t);rt(n,"height",i)}function ut(n){var t,r,b,k,d,tt,e=n.screenX-gt,l=n.screenY-ni;h=e*v[2]+y;c=l*v[3]+p;h=h<5?5:h;c=c<5?5:c;((ht(f)||vt(f))&&!1!==i.getParam("resize_img_proportional",!0,"boolean")?!s.modifierPressed(n):s.modifierPressed(n))&&(fi(e)>fi(l)?(c=ot(h*nt),h=ot(c/nt)):(h=ot(c/nt),c=ot(h*nt)));wt(o,h,c);t=v.startPos.x+e;r=v.startPos.y+l;u.setStyles(g,{left:t=0<t?t:0,top:r=0<r?r:0,display:"block"});g.innerHTML=h+" &times; "+c;v[2]<0&&o.clientWidth<=h&&u.setStyle(o,"left",void 0+(y-h));v[3]<0&&o.clientHeight<=c&&u.setStyle(o,"top",void 0+(p-c));(e=a.scrollWidth-ti)+(l=a.scrollHeight-ii)!=0&&u.setStyles(g,{left:t-e,top:r-l});w||(b=f,k=y,d=p,tt="corner-"+v.name,i.fire("ObjectResizeStart",{target:b,width:k,height:d,origin:tt}),w=!0)}function bt(t){function f(n,t){if(n)do if(n===t)return 1;while(n=n.parentNode)}var r;w||i.removed||(ri(u.select("img[data-mce-selected],hr[data-mce-selected]"),function(n){n.removeAttribute(b)}),r="mousedown"===t.type?t.target:n.getNode(),f(r=u.$(r).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],a)&&(dt(),f(n.getStart(!0),r)&&f(n.getEnd(!0),r))?lt(r):it())}function kt(n){return dbt(dc(i.getBody(),n))}function dt(){try{i.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(n){}}var f,o,g,v,ft,gt,ni,y,p,nt,w,h,c,ti,ii,b="data-mce-selected",u=i.dom,ri=r.each,k=i.getDoc(),d=document,fi=Math.abs,ot=Math.round,a=i.getBody(),ct={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},st=function(){var n,t,r,e,s=w;w=!1;s&&(rt(f,"width",h),rt(f,"height",c));u.unbind(k,"mousemove",ut);u.unbind(k,"mouseup",st);d!==k&&(u.unbind(d,"mousemove",ut),u.unbind(d,"mouseup",st));u.remove(o);u.remove(g);u.remove(ft);lt(f);s&&(n=f,t=h,r=c,e="corner-"+v.name,i.fire("ObjectResized",{target:n,width:t,height:r,origin:e}),u.setAttrib(f,"style",u.getAttrib(f,"style")));i.nodeChanged()},lt=function(n){var rt,et;at();var tt=u.getPos(n,a),r=tt.x,e=tt.y,t=n.getBoundingClientRect(),s=t.width||t.right-t.left,w=t.height||t.bottom-t.top;f!==n&&(it(),f=n,h=c=0);rt=i.fire("ObjectSelected",{target:n});et=u.getAttrib(f,b,"1");pt(n)&&!rt.isDefaultPrevented()?ri(ct,function(n,t){var i=u.get("mceResizeHandle"+t);i&&u.remove(i);i=u.add(a,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"});11===l.ie&&(i.contentEditable=!1);u.bind(i,"mousedown",function(i){var h,tt,c;i.stopImmediatePropagation();i.preventDefault();h=i;c=yt(f)[0];gt=h.screenX;ni=h.screenY;y=c.clientWidth;p=c.clientHeight;nt=p/y;(v=n).name=t;v.startPos={x:s*n[0]+r,y:w*n[1]+e};ti=a.scrollWidth;ii=a.scrollHeight;ft=u.add(a,"div",{"class":"mce-resize-backdrop","data-mce-bogus":"all"});u.setStyles(ft,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"});o=vt(tt=f)?u.create("img",{src:l.transparentSrc}):tt.cloneNode(!0);u.addClass(o,"mce-clonedresizable");u.setAttrib(o,"data-mce-bogus","all");o.contentEditable="false";u.setStyles(o,{left:r,top:e,margin:0});wt(o,s,w);o.removeAttribute(b);a.appendChild(o);u.bind(k,"mousemove",ut);u.bind(k,"mouseup",st);d!==k&&(u.bind(d,"mousemove",ut),u.bind(d,"mouseup",st));g=u.add(a,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},y+" &times; "+p)});n.elm=i;u.setStyles(i,{left:s*n[0]+r-i.offsetWidth/2,top:w*n[1]+e-i.offsetHeight/2})}):it();u.getAttrib(f,b)||f.setAttribute(b,et)},it=function(){at();f&&f.removeAttribute(b);et(ct,function(n,t){var i=u.get("mceResizeHandle"+t);i&&(u.unbind(i),u.remove(i))})},at=function(){et(ct,function(n){n.elm&&(u.unbind(n.elm),delete n.elm)})};return i.on("init",function(){var t,n;dt();(l.browser.isIE()||l.browser.isEdge())&&(i.on("mousedown click",function(n){var t=n.target,r=t.nodeName;w||!/^(TABLE|IMG|HR)$/.test(r)||kt(t)||(2!==n.button&&i.selection.select(t,"TABLE"===r),"mousedown"===n.type&&i.nodeChanged())}),u.bind(a,"mscontrolselect",t=function(n){function t(n){ui.setEditorTimeout(i,function(){return i.selection.select(n)})}if(kt(n.target)||tu(n.target))return n.preventDefault(),void t(n.target);/^(TABLE|IMG|HR)$/.test(n.target.nodeName)&&(n.preventDefault(),"IMG"===n.target.tagName&&t(n.target))}),i.on("remove",function(){return u.unbind(a,"mscontrolselect",t)}));n=ui.throttle(function(n){i.composing||bt(n)});i.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",n);i.on("keyup compositionend",function(t){f&&"TABLE"===f.nodeName&&n(t)});i.on("hide blur",it);i.on("contextmenu longpress",ei,!0)}),i.on("remove",at),{isResizable:pt,showResizeRect:lt,hideResizeRect:it,updateResizeRect:bt,destroy:function(){f=o=ft=null}}}function cyi(n){return gu(n)||rt(n)}function art(n,t,i){var u,o,e,s,h,f=i;if(f.caretPositionFromPoint)(o=f.caretPositionFromPoint(n,t))&&((u=i.createRange()).setStart(o.offsetNode,o.offset),u.collapse(!0));else if(f.caretRangeFromPoint)u=f.caretRangeFromPoint(n,t);else if(f.body.createTextRange){u=f.body.createTextRange();try{u.moveToPoint(n,t);u.collapse(!0)}catch(o){u=function(n,t,i){var f,e=i.elementFromPoint(n,t),u=i.body.createTextRange();if(e&&"HTML"!==e.tagName||(e=i.body),u.moveToElementText(e),0<(f=(f=r.toArray(u.getClientRects())).sort(function(n,i){return(n=Math.abs(Math.max(n.top-t,n.bottom-t)))-Math.abs(Math.max(i.top-t,i.bottom-t))})).length){t=(f[0].bottom+f[0].top)/2;try{return u.moveToPoint(n,t),u.collapse(!0),u}catch(n){}}return null}(n,t,i)}return e=u,s=i.body,h=e&&e.parentElement?e.parentElement():null,rt(function(n,t,i){for(;n&&n!==t;){if(i(n))return n;n=n.parentNode}return null}(h,s,cyi))?null:e}return u}function vrt(n,t){return n&&t&&n.startContainer===t.startContainer&&n.startOffset===t.startOffset&&n.endContainer===t.endContainer&&n.endOffset===t.endOffset}function wbt(n,t,i){return null!==function(n,t,i){for(;n&&n!==t;){if(i(n))return n;n=n.parentNode}return null}(n,t,i)}function yrt(n){return n&&"TABLE"===n.nodeName}function bbt(n,t,i){for(var r=new yt(t,n.getParent(t.parentNode,n.isBlock)||n.getRoot());t=r[i?"prev":"next"]();)if(st(t))return 1}function prt(t,r,u,f,e){var h,s,c=t.getRoot(),p=t.schema.getNonEmptyElements(),l=t.getParent(e.parentNode,t.isBlock)||c,a,v,y;if(f&&st(e)&&r&&t.isEmpty(l))return n.some(i(e.parentNode,t.nodeIndex(e)));for(y=new yt(e,l);s=y[f?"prev":"next"]();){if("false"===t.getContentEditableParent(s)||(v=c,hr(a=s)&&!1===wbt(a,v,of)))return n.none();if(o(s)&&0<s.nodeValue.length)return!1===wbt(s,c,function(n){return"A"===n.nodeName})?n.some(i(s,f?s.nodeValue.length:0)):n.none();if(t.isBlock(s)||p[s.nodeName.toLowerCase()])return n.none();h=s}return u&&h?n.some(i(h,0)):n.none()}function kbt(t,r,u,f){var w,v=t.getRoot(),l=!1,e=f[(u?"start":"end")+"Container"],c=f[(u?"start":"end")+"Offset"],y=h(e)&&c===e.childNodes.length,b=t.schema.getNonEmptyElements(),a=u,s,p;if(hr(e))return n.none();if(h(e)&&c>e.childNodes.length-1&&(a=!1),gg(e)&&(e=v,c=0),e===v){if(a&&(s=e.childNodes[0<c?c-1:0])&&(hr(s)||b[s.nodeName]||yrt(s)))return n.none();if(e.hasChildNodes()){if((c=Math.min(!a&&0<c?c-1:c,e.childNodes.length-1),e=e.childNodes[c],c=o(e)&&y?e.data.length:0,!r&&e===v.lastChild&&yrt(e))||function(n,t){for(;t&&t!==n;){if(rt(t))return 1;t=t.parentNode}}(v,e)||hr(e))return n.none();if(e.hasChildNodes()&&!1===yrt(e)){s=e;p=new yt(e,v);do{if(rt(s)||hr(s)){l=!1;break}if(o(s)&&0<s.nodeValue.length){c=a?0:s.nodeValue.length;e=s;l=!0;break}if(b[s.nodeName.toLowerCase()]&&(!(w=s)||!/^(TD|TH|CAPTION)$/.test(w.nodeName))){c=t.nodeIndex(s);e=s.parentNode;a||c++;l=!0;break}}while(s=a?p.next():p.prev())}}}return r&&(o(e)&&0===c&&prt(t,y,r,!0,e).each(function(n){e=n.container();c=n.offset();l=!0}),h(e)&&(!(s=(s=e.childNodes[c])||e.childNodes[c-1])||!st(s)||s.previousSibling&&"A"===s.previousSibling.nodeName||bbt(t,s,!1)||bbt(t,s,!0)||prt(t,y,r,!0,s).each(function(n){e=n.container();c=n.offset();l=!0}))),a&&!r&&o(e)&&c===e.nodeValue.length&&prt(t,y,r,!1,e).each(function(n){e=n.container();c=n.offset();l=!0}),l?n.some(i(e,c)):n.none()}function aw(t,r){var f=r.collapsed,u=r.cloneRange(),e=i.fromRangeStart(r);return kbt(t,f,!0,u).each(function(n){f&&i.isAbove(e,n)||u.setStart(n.container(),n.offset())}),f||kbt(t,f,!1,u).each(function(n){u.setEnd(n.container(),n.offset())}),f&&u.collapse(!0),vrt(r,u)?n.none():n.some(u)}function vw(n,t){return n.splitText(t)}function yw(n){var t=n.startContainer,i=n.startOffset,r=n.endContainer,u=n.endOffset;return t===r&&o(t)?0<i&&i<t.nodeValue.length&&(t=(r=vw(t,i)).previousSibling,i<u?(t=r=vw(r,u-=i).previousSibling,u=r.nodeValue.length,i=0):u=0):(o(t)&&0<i&&i<t.nodeValue.length&&(t=vw(t,i),i=0),o(r)&&0<u&&u<r.nodeValue.length&&(u=(r=vw(r,u).previousSibling).nodeValue.length)),{startContainer:t,startOffset:i,endContainer:r,endOffset:u}}function uv(n){return{walk:function(t,i){return nv(n,t,i)},split:yw,normalize:function(t){return aw(n,t).fold(it,function(n){return t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0})}}}function tkt(n){var t=gbt(n),i;return t<=0||null===t?(i=wf(n,pw),parseFloat(i)||0):t}function ikt(n,t){return fu(t,function(t,i){var r=wf(n,i),u=void 0===r?0:parseInt(r,10);return isNaN(u)?t:t+u},0)}function wrt(n){return"textarea"===vt(n)}function rkt(n,t){var i=function(n){var u=n.dom.ownerDocument,t=u.body,i=u.defaultView,r=u.documentElement;if(t===n.dom)return yh(t.offsetLeft,t.offsetTop);var f=sy(null==i?void 0:i.pageYOffset,r.scrollTop),e=sy(null==i?void 0:i.pageXOffset,r.scrollLeft),o=sy(r.clientTop,t.clientTop),s=sy(r.clientLeft,t.clientLeft);return kg(n).translate(e-s,f-o)}(n),r=nkt.get(n);return{element:n,bottom:i.top+r,height:r,pos:i,cleanup:t}}function ukt(n,t,i,r){tpi(n,function(){return npi(n,t,i,r)},i)}function fkt(n,t,i,r,u){var f={elm:r.element.dom,alignToTop:u};n.fire("ScrollIntoView",f).isDefaultPrevented()||(i(t,wg(t).top,r,u),n.fire("AfterScrollIntoView",f))}function ekt(n,i,r,u){var f=t.fromDom(n.getDoc());fkt(n,f,r,rkt(t.fromDom(i),y),u)}function brt(n,t,i,r){var f,u=n.pos;i?pct(u.left,u.top,r):(f=u.top-t+n.height,pct(u.left,f,r))}function okt(n,t,i,r,u){var e=i+t,f=r.pos.top,o=r.bottom,s=i<=o-f;f<t?brt(r,i,!1!==u,n):e<f?brt(r,i,s?!1!==u:!0===u,n):e<o&&!s&&brt(r,i,!0===u,n)}function skt(n,t,i,r){okt(n,t,n.dom.defaultView.innerHeight,i,r)}function hkt(n,i,r,u){okt(n,i,n.dom.defaultView.innerHeight,r,u);var f,h,c,e,l,o,s,a=(f=r.element,e=wg(t.fromDom(document)),c=(h=gyi).owner(f),l=ndt(h,c),o=kg(f),s=dst(l,function(n,t){var i=kg(t);return{left:n.left+i.left,top:n.top+i.top}},{left:0,top:0}),yh(s.left+o.left+e.left,s.top+o.top+e.top)),v=kct(window);a.top<v.y?wct(r.element,!1!==u):a.top>v.bottom&&wct(r.element,!0===u)}function lyi(n,t,i){return ukt(n,skt,t,i)}function ayi(n,t,i){return ekt(n,t,skt,i)}function vyi(n,t,i){return ukt(n,hkt,t,i)}function yyi(n,t,i){return ekt(n,t,hkt,i)}function fv(n,t,i){(n.inline?lyi:vyi)(n,t,i)}function ckt(n){var t=ko(n).dom;return n.dom===t.activeElement}function krt(i){return void 0===i&&(i=t.fromDom(document)),n.from(i.dom.activeElement).map(t.fromDom)}function lkt(n,t){var i=gr(t)?frt(t).length:nu(t).length+1;return i<n?i:n<0?0:n}function pyi(n){return tdt.range(n.start,lkt(n.soffset,n.start),n.finish,lkt(n.foffset,n.finish))}function akt(n,t){return!hy(t.dom)&&(ee(n,t)||g(n,t))}function drt(n){return function(t){return akt(n,t.start)&&akt(n,t.finish)}}function vkt(n){return!0===n.inline||rpi.isIE()}function ykt(n){return tdt.range(t.fromDom(n.startContainer),n.startOffset,t.fromDom(n.endContainer),n.endOffset)}function wyi(t){var i=document.createRange();try{return i.setStart(t.start.dom,t.soffset),i.setEnd(t.finish.dom,t.foffset),n.some(i)}catch(t){return n.none()}}function ww(i){var r,u,f=vkt(i)?(r=t.fromDom(i.getBody()),((u=oct(r).dom.getSelection())&&0!==u.rangeCount?n.from(u.getRangeAt(0)):n.none()).map(ykt).filter(drt(r))):n.none();i.bookmark=f.isSome()?f:i.bookmark}function grt(i){return(i.bookmark||n.none()).bind(function(r){return u=t.fromDom(i.getBody()),n.from(r).filter(drt(u)).map(pyi);var u}).bind(wyi)}function byi(n){var t=dtt(function(){ww(n)},0);n.on("init",function(){function r(){f.throttle()}var u,f,i,e,o,s;n.inline&&(u=n,f=t,d.DOM.bind(document,"mouseup",r),u.on("remove",function(){d.DOM.unbind(document,"mouseup",r)}));i=n;e=t;kr().browser.isIE()?(s=i).on("focusout",function(){ww(s)}):(o=e,i.on("mouseup touchend",function(){o.throttle()}));i.on("keyup NodeChange",function(n){"nodechange"===n.type&&n.selectionChange||ww(i)})});n.on("remove",function(){t.cancel()})}function bw(n,t){var i=n.getParam("custom_ui_selector","","string");return null!==rut.getParent(t,function(t){return idt.isEditorUIElement(t)||!!i&&n.dom.is(t,i)})}function kyi(i,r){var u=r.editor;byi(u);u.on("focusin",function(){var n=i.focusedEditor;n!==u&&(n&&n.fire("blur",{focusedEditor:u}),i.setActive(u),(i.focusedEditor=u).fire("focus",{blurredEditor:n}),u.focus(!0))});u.on("focusout",function(){ui.setEditorTimeout(u,function(){var n=i.focusedEditor;bw(u,function(n){try{return krt(ko(t.fromDom(n.getElement()))).fold(function(){return document.body},function(n){return n.dom})}catch(n){return document.body}}(u))||n!==u||(u.fire("blur",{focusedEditor:null}),i.focusedEditor=null)})});ev||(ev=function(r){var u=i.activeEditor;u&&!function(i){var r,u;return vci()&&tt(i.target)&&(r=t.fromDom(i.target),su(r)&&tt(r.dom.shadowRoot)&&i.composed&&i.composedPath&&(u=i.composedPath(),u))?or(u):n.from(i.target)}(r).each(function(n){n.ownerDocument===document&&(n===document.body||bw(u,n)||i.focusedEditor!==u||(u.fire("blur",{focusedEditor:null}),i.focusedEditor=null))})},rut.bind(document,"focusin",ev))}function dyi(n,t){n.focusedEditor===t.editor&&(n.focusedEditor=null);n.activeEditor||(rut.unbind(document,"focusin",ev),ev=null)}function pkt(i,r){var u,f;u=t.fromDom(i.getBody());((f=r).collapsed?n.from(no(f.startContainer,f.startOffset)).map(t.fromDom):n.none()).bind(function(t){return nli(t)?n.some(t):!1===ee(u,t)?n.some(u):n.none()}).bind(function(n){return wi(n.dom)}).fold(function(){i.selection.normalize()},function(n){return i.selection.setRng(n.toRange())})}function nut(n){if(n.setActive)try{n.setActive()}catch(t){n.focus()}else n.focus()}function ls(n){return n.inline?(u=n.getBody())&&(ckt(i=t.fromDom(u))||krt(ko(r=i)).filter(function(n){return r.dom.contains(n.dom)}).isSome()):n.iframeElement&&ckt(t.fromDom(n.iframeElement));var i,r,u}function wkt(i,r,u,f,e){var o=u?r.startContainer:r.endContainer,s=u?r.startOffset:r.endOffset;return n.from(o).map(t.fromDom).map(function(n){return f&&r.collapsed?n:ey(n,e(n,s)).getOr(n)}).bind(function(t){return su(t)?n.some(t):eu(t).filter(su)}).map(function(n){return n.dom}).getOr(i)}function bkt(n,t,i){return wkt(n,t,!0,i,function(n,t){return Math.min(lct(n),t)})}function kkt(n,t,i){return wkt(n,t,!1,i,function(n,t){return 0<t?t-1:t})}function dkt(n,t){for(var i=n;n&&o(n)&&0===n.length;)n=t?n.nextSibling:n.previousSibling;return n||i}function tut(n,t){return ut(t,function(t){var i=n.fire("GetSelectionRange",{range:t});return i.range!==t?i.range:t})}function kw(n,t,i){var f=i?"lastChild":"firstChild",e=i?"prev":"next",u,r;if(n[f])return n[f];if(n!==t){if(u=n[e],u)return u;for(r=n.parent;r&&r!==t;r=r.parent)if(u=r[e])return u}}function gkt(n){var t="a"===n.name&&!n.attr("href")&&n.attr("id");return n.attr("name")||n.attr("id")&&!n.firstChild||n.attr("data-mce-bookmark")||t}function ci(n,t){this.name=n;1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}function fut(n,t){return n.replace(t.re,function(n){return at(t.uris,n).getOr(n)})}function fr(n,t){n=fpi(n);this.settings=t||{};var u,f,e,o,r=this.settings.base_uri,i=this;/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)?i.source=n:(u=0===n.indexOf("//"),0!==n.indexOf("/")||u||(n=(r&&r.protocol||"http")+"://mce_host"+n),/^[\w\-]*:?\/\//.test(n)||(f=this.settings.base_uri?this.settings.base_uri.path:new fr(document.location.href).directory,n=this.settings.base_uri&&""==this.settings.base_uri.protocol?"//mce_host"+i.toAbsPath(f,n):(e=/([^#?]*)([#?]?.*)/.exec(n),(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(f,e[1])+e[2])),n=n.replace(/@@/g,"(mce_at)"),o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n),rdt(epi,function(n,t){var r=(r=o[t])&&r.replace(/\(mce_at\)/g,"@@");i[n]=r}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),i.port||"mce_host"!==i.host||(i.port=r.port),i.host&&"mce_host"!==i.host||(i.host=r.host),i.source=""),u&&(i.protocol=""))}function eut(n,t,i){for(var r,e,u=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,s=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,h=n.getShortEndedElements(),o=1,f=i;0!==o;)for(u.lastIndex=f;;){if(r=u.exec(t),null===r)return f;if("!"===r[1]){f=po(r[2],"--")?nb(t,!1,r.index+3):nb(t,!0,r.index+1);break}if(s.lastIndex=u.lastIndex,e=s.exec(t),!ll(e)&&e.index===u.lastIndex){"/"===r[1]?--o:w(h,r[2])||(o+=1);f=u.lastIndex+e[0].length;break}}return f}function gw(n,t){function o(u,o){var ut,gt;void 0===o&&(o="html");for(var p,y,bt,g,b,st,ft,ht,kt,rt,nt,et,ot,ni,ct,lt,at,vt,it,k=u.html,w=0,d=[],ti=0,yt=ve.decode,ii=r.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),ri="html"===o?0:1,ui=function(n){for(var r,t=d.length;t--&&d[t].name!==n;);if(0<=t){for(r=d.length-1;t<=r;r--)(n=d[r]).valid&&i(n.name);d.length=t}},pt=function(n,t){return c(fut(n,u),t)},fi=function(t){""!==t&&(">"===t.charAt(0)&&(t=" "+t),n.allow_conditional_comments||"[if"!==t.substr(0,3).toLowerCase()||(t=" "+t),s(fut(t,u)))},dt=function(n,t){var i=n||"",r=!po(i,"--"),u=nb(k,r,t);return n=k.substr(t,u-t),fi(r?i+n:n),u+1},tt=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),ei=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,oi=t.getShortEndedElements(),si=n.self_closing_elements||t.getSelfClosingElements(),hi=t.getBoolAttrs(),wt=n.validate,ci=n.remove_internals,li=n.fix_self_closing,ai=t.getSpecialElements(),vi=k+">";p=tt.exec(vi);){if(ut=p[0],w<p.index&&pt(yt(k.substr(w,p.index-w))),y=p[7])ui(y=":"===(y=y.toLowerCase()).charAt(0)?y.substr(1):y);else if(y=p[8]){if(p.index+ut.length>k.length){pt(yt(k.substr(p.index)));w=p.index+ut.length;continue}if(kt=(y=":"===(y=y.toLowerCase()).charAt(0)?y.substr(1):y)in oi,li&&si[y]&&0<d.length&&d[d.length-1].name===y&&ui(y),gt=function(n,t){var i=n.exec(t),r,u;return i?(r=i[1],u=i[2],"string"==typeof r&&"data-mce-bogus"===r.toLowerCase()?u:null):null}(ei,p[9]),null!==gt){if("all"===gt){w=eut(t,k,tt.lastIndex);tt.lastIndex=w;continue}nt=!1}if(!wt||(rt=t.getElementRule(y))){if(nt=!0,wt&&(ni=rt.attributes,ct=rt.attributePatterns),(ot=p[9])?((ht=-1!==ot.indexOf("data-mce-type"))&&ci&&(nt=!1),(g=[]).map={},ot.replace(ei,function(t,i,r,o,s){return function(t,i,r,o,s){var l,h,c;if(r=fut((i=i.toLowerCase())in hi?i:yt(r||o||s||""),u),wt&&!ht&&0==(0===(l=i).indexOf("data-")||0===l.indexOf("aria-"))){if(h=ni[i],!h&&ct){for(c=ct.length;c--&&!(h=ct[c]).pattern.test(i););-1===c&&(h=null)}if(!h)return;if(h.validValues&&!(r in h.validValues))return}("name"===i||"id"===i)&&t in udt&&(r in f||r in e)||ii[i]&&!ro.isDomSafe(r,t,n)||ht&&(i in ii||0===i.indexOf("on"))||(g.map[i]=r,g.push({name:i,value:r}))}(y,i,r,o,s),""})):(g=[]).map={},wt&&!ht){if(lt=rt.attributesRequired,at=rt.attributesDefault,vt=rt.attributesForced,rt.removeEmptyAttrs&&!g.length&&(nt=!1),vt)for(b=vt.length;b--;)ft=(et=vt[b]).name,"{$uid}"===(it=et.value)&&(it="mce_"+ti++),g.map[ft]=it,g.push({name:ft,value:it});if(at)for(b=at.length;b--;)(ft=(et=at[b]).name)in g.map||("{$uid}"===(it=et.value)&&(it="mce_"+ti++),g.map[ft]=it,g.push({name:ft,value:it}));if(lt){for(b=lt.length;b--&&!(lt[b]in g.map););-1===b&&(nt=!1)}if(et=g.map["data-mce-bogus"]){if("all"===et){w=eut(t,k,tt.lastIndex);tt.lastIndex=w;continue}nt=!1}}nt&&l(y,g,kt)}else nt=!1;if(bt=ai[y]){bt.lastIndex=w=p.index+ut.length;w=(p=bt.exec(k))?(nt&&(st=k.substr(w,p.index-w)),p.index+p[0].length):(st=k.substr(w),k.length);nt&&(0<st.length&&pt(st,!0),i(y));tt.lastIndex=w;continue}kt||(ot&&ot.indexOf("/")===ot.length-1?nt&&i(y):d.push({name:y,valid:nt}))}else if(y=p[1])fi(y);else if(y=p[2]){if(!(1==ri||n.preserve_cdata||0<d.length&&t.isValidChild(d[d.length-1].name,"#cdata"))){w=dt("",p.index+2);tt.lastIndex=w;continue}h(y)}else if(y=p[3])v(y);else{if((y=p[4])||"<!"===ut){w=dt(y,p.index+ut.length);tt.lastIndex=w;continue}if(y=p[5]){if(1!=ri){w=dt("?",p.index+2);tt.lastIndex=w;continue}a(y,p[6])}}w=p.index+ut.length}for(w<k.length&&pt(yt(k.substr(w))),b=d.length-1;0<=b;b--)(y=d[b]).valid&&i(y.name)}var u,f,e;void 0===t&&(t=le());f=null!==(u=(n=n||{}).document)&&void 0!==u?u:document;e=f.createElement("form");!1!==n.fix_self_closing&&(n.fix_self_closing=!0);var s=n.comment||y,h=n.cdata||y,c=n.text||y,l=n.start||y,i=n.end||y,a=n.pi||y,v=n.doctype||y;return{parse:function(n,t){void 0===t&&(t="html");o(function(n){for(var e,o,s,i,h=/data:[^;]+;base64,([a-z0-9\+\/=\s]+)/gi,r=[],f={},u=avt("img"),t=0,c=0;i=h.exec(n);)e=i[0],o=u+"_"+c++,f[o]=e,t<i.index&&r.push(n.substr(t,i.index-t)),r.push(o),t=i.index+e.length;return s=new RegExp(u+"_[0-9]+","g"),0===t?{prefix:u,uris:f,html:n,re:s}:(t<n.length&&r.push(n.substr(t)),{prefix:u,uris:f,html:r.join(""),re:s})}(n),t)}}}function fdt(n,t){for(var e,o,s,u,f=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,h=n.schema,i=(e=n.getTempAttrs(),o=t,s=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi"),o.replace(s,"")),l=h.getShortEndedElements();u=f.exec(i);){var r=f.lastIndex,c=u[0].length,a=l[u[1]]?r:gw.findEndTag(h,i,r),i=i.substring(0,r-c)+i.substring(a);f.lastIndex=r-c}return ae(i)}function edt(n){return{compare:function(t,i){function r(t){var i={};return cpi(n.getAttribs(t),function(r){var u=r.nodeName.toLowerCase();0!==u.indexOf("_")&&"style"!==u&&0!==u.indexOf("data-")&&(i[u]=n.getAttrib(t,u))}),i}function u(n,t){var r;for(var i in n)if(w(n,i)){if(void 0===(r=t[i]))return;if(n[i]!==r)return;delete t[i]}for(i in t)if(w(t,i))return;return 1}return t.nodeName===i.nodeName&&!(!u(r(t),r(i))||!u(n.parseStyle(n.getAttrib(t,"style")),n.parseStyle(n.getAttrib(i,"style")))||ar(t)||ar(i))}}}function odt(n){var t=[],i=(n=n||{}).indent,f=sdt(n.indent_before||""),u=sdt(n.indent_after||""),r=ve.getEncodeFunc(n.entity_encoding||"raw",n.entities),e="html"===n.element_format;return{start:function(n,o,s){var h,a,l,c;if(i&&f[n]&&0<t.length&&0<(c=t[t.length-1]).length&&"\n"!==c&&t.push("\n"),t.push("<",n),o)for(h=0,a=o.length;h<a;h++)l=o[h],t.push(" ",l.name,'="',r(l.value,!0),'"');t[t.length]=!s||e?">":" />";s&&i&&u[n]&&0<t.length&&0<(c=t[t.length-1]).length&&"\n"!==c&&t.push("\n")},end:function(n){var r;t.push("<\/",n,">");i&&u[n]&&0<t.length&&0<(r=t[t.length-1]).length&&"\n"!==r&&t.push("\n")},text:function(n,i){0<n.length&&(t[t.length]=i?n:r(n))},cdata:function(n){t.push("<![CDATA[",n,"]\]>")},comment:function(n){t.push("<!--",n,"-->")},pi:function(n,u){u?t.push("<?",n," ",r(u),"?>"):t.push("<?",n,"?>");i&&t.push("\n")},doctype:function(n){t.push("<!DOCTYPE",n,">",i?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}}function gc(n,t){void 0===t&&(t=le());var i=odt(n);return(n=n||{}).validate=!("validate"in n)||n.validate,{serialize:function(r){var e=n.validate,f={3:function(n){i.text(n.value,n.raw)},8:function(n){i.comment(n.value)},7:function(n){i.pi(n.name,n.value)},10:function(n){i.doctype(n.value)},4:function(n){i.cdata(n.value)},11:function(n){if(n=n.firstChild)for(;u(n),n=n.next;);}},u;return i.reset(),u=function(n){var v=f[n.type],o,l,h,c,s,a;if(v)v(n);else{var p=n.name,y=n.shortEnded,r=n.attributes;if(e&&r&&1<r.length&&(o=[],o.map={},l=t.getElementRule(n.name),l)){for(s=0,a=l.attributesOrder.length;s<a;s++)(h=l.attributesOrder[s])in r.map&&(c=r.map[h],o.map[h]=c,o.push({name:h,value:c}));for(s=0,a=r.length;s<a;s++)(h=r[s].name)in o.map||(c=r.map[h],o.map[h]=c,o.push({name:h,value:c}));r=o}if(i.start(n.name,r,y),!y){if(n=n.firstChild)for(;u(n),n=n.next;);i.end(p)}}},1!==r.type||n.inner?f[11](r):u(r),i.getContent()}}}function out(n,t){return ch(n.parseStyle(n.getAttrib(t,"style")))}function cdt(t,i,r){return n.from(r.container()).filter(o).exists(function(n){var u=t?0:-1;return i(n.data.charAt(r.offset()+u))})}function lpi(n){var t=n.container();return o(t)&&(0===t.data.length||tp(t.data)&&iv.isBookmarkNode(t.parentNode))}function uo(t,i){return function(r){return n.from(sit(t?0:-1,r)).filter(i).isSome()}}function ldt(n){return pci(n)&&"block"===wf(t.fromDom(n),"display")}function adt(n){return rt(n)&&!(h(t=n)&&"all"===t.getAttribute("data-mce-bogus"));var t}function as(n){pg(n);ii(n,t.fromHtml('<br data-mce-bogus="1">'))}function api(n){vg(n).each(function(t){wo(t).each(function(i){tf(n)&&wh(t)&&tf(i)&&ni(t)})})}function vdt(n,i){return f=it,ee(u=i,r=n)?function(n,i){for(var u,f,o=ft(i)?i:it,r=n.dom,e=[];null!==r.parentNode&&void 0!==r.parentNode;){if(u=r.parentNode,f=t.fromDom(u),e.push(f),!0===o(f))break;r=u}return e}(r,function(n){return f(n)||g(n,u)}).slice(0,-1):[];var r,u,f}function gf(n,t){return[n].concat(vdt(n,t))}function sut(n,t,i){return obt(n,t,i,lpi)}function ydt(n,i){return gt(gf(t.fromDom(i.container()),n),tf)}function pdt(n,i,r){return sut(n,i.dom,r).forall(function(n){return ydt(i,r).fold(function(){return!1===ef(n,r,i.dom)},function(u){return!1===ef(n,r,i.dom)&&ee(u,t.fromDom(n.container()))})})}function wdt(n,t,i){return ydt(t,i).fold(function(){return sut(n,t.dom,i).forall(function(n){return!1===ef(n,i,t.dom)})},function(t){return sut(n,t.dom,i).isNone()})}function vpi(n){return nw(n).exists(wh)}function tb(n,i,r){var u=or(p(gf(t.fromDom(r.container()),i),tf)).getOr(i);return vr(n,u.dom,r).filter(vpi)}function hut(n,t){return nw(t).exists(wh)||tb(!0,n,t).isSome()}function cut(i,r){return n.from(r.getNode(!0)).map(t.fromDom).exists(wh)||tb(!1,i,r).isSome()}function bdt(n){return i.isTextPosition(n)&&!n.isAtStart()&&!n.isAtEnd()}function kdt(n,i){return or(p(gf(t.fromDom(i.container()),n),tf)).getOr(n)}function ddt(n,t){return bdt(t)?cft(t):cft(t)||cf(kdt(n,t).dom,t).exists(cft)}function gdt(n,t){return bdt(t)?hft(t):hft(t)||yu(kdt(n,t).dom,t).exists(hft)}function lut(n){return nw(n).bind(function(n){return yy(n,su)}).exists(function(n){return dt(["pre","pre-wrap"],wf(n,"white-space"))})}function ib(n,t){return!lut(t)&&(lft(n,t)||ywi(n,t)||cut(n,t)||ddt(n,t))}function rb(n,t){return!lut(t)&&(snt(n,t)||pwi(n,t)||hut(n,t)||gdt(n,t))}function ngt(n,t){return ib(n,t)||rb(n,(r=(u=t).container(),f=u.offset(),o(r)&&f<r.data.length?i(r,f+1):u));var u,r,f}function tgt(n,t){return rv(n.charAt(t))}function ypi(n){var t=n.container();return o(t)&&yi(t.data,ir)}function ppi(t,r){return n.some(r).filter(ypi).bind(function(r){var c,e,u,l,o,a,f,s,v,h=r.container(),p=t,y=(o=h).data,w=i(o,0);return(!tgt(y,0)||ngt(p,w)?(s=(a=h).data,(v=ut(f=s.split(""),function(n,t){return rv(n)&&0<t&&t<f.length-1&&pit(f[t-1])&&pit(f[t+1])?" ":n}).join(""))!==s&&(a.data=v,1)):(o.data=" "+y.slice(1),1))||(c=t,u=(e=h).data,l=i(e,u.length-1),tgt(u,u.length-1)&&!ngt(c,l)&&(e.data=u.slice(0,-1)+" ",1))?n.some(r):n.none()})}function igt(n){var r=t.fromDom(n.getBody());n.selection.isCollapsed()&&ppi(r,i.fromRangeStart(n.selection.getRng())).each(function(t){n.selection.setRng(t.toRange())})}function rgt(n,r,u){var e,f,o,s,h,c,l,a;0!==u&&(f=ra(e=t.fromDom(n),tf).getOr(e),o=n.data.slice(r,r+u),s=r+u>=n.data.length&&rb(f,i(n,n.data.length)),h=0===r&&ib(f,i(n,0)),n.replaceData(r,u,(l=h,a=s,fu(c=o,function(n,t){return vc(t)||rv(t)?n.previousCharIsSpace||""===n.str&&l||n.str.length===c.length-1&&a?{previousCharIsSpace:!1,str:n.str+ir}:{previousCharIsSpace:!0,str:n.str+" "}:{previousCharIsSpace:!1,str:n.str+t}},{previousCharIsSpace:!1,str:""}).str)))}function ub(n,t){var i=n.data.slice(t);rgt(n,t,i.length-nci(i).length)}function aut(n,t){var i=n.data.slice(0,t),r=i.length-wht(i).length;rgt(n,t-r,r)}function vut(n,i,r,u){void 0===u&&(u=!0);var o=wht(n.data).length,f=u?n:i,e=u?i:n;return u?f.appendData(e.data):f.insertData(0,e.data),ni(t.fromDom(e)),r&&ub(f,o),f}function wpi(n,t){return u=n,f=(r=t).container(),e=r.offset(),!1===i.isTextPosition(r)&&f===u.parentNode&&e>i.before(u).offset()?i(t.container(),t.offset()-1):t;var r,u,f,e}function ugt(t){return nf(t.previousSibling)?n.some((r=t.previousSibling,o(r)?i(r,r.data.length):i.after(r))):t.previousSibling?lf(t.previousSibling):n.none();var r}function fgt(t){return nf(t.nextSibling)?n.some((r=t.nextSibling,o(r)?i(r,0):i.before(r))):t.nextSibling?wi(t.nextSibling):n.none();var r}function bpi(t,r){return ugt(r).orThunk(function(){return fgt(r)}).orThunk(function(){return u=t,e=i.before((f=r).previousSibling||f.parentNode),cf(u,e).fold(function(){return yu(u,i.after(f))},n.some);var u,f,e})}function kpi(t,r){return fgt(r).orThunk(function(){return ugt(r)}).orThunk(function(){return yu(u=t,i.after(f=r)).fold(function(){return cf(u,i.before(f))},n.some);var u,f})}function egt(n,t,i){i.fold(function(){n.focus()},function(i){n.selection.setRng(i.toRange(),t)})}function dpi(n,t){return t&&w(n.schema.getBlockElements(),vt(t))}function gpi(r){if(pt(r)){var u=t.fromHtml('<br data-mce-bogus="1">');return pg(r),ii(r,u),n.some(i.before(u.dom))}return n.none()}function vs(t,r,f,e){void 0===e&&(e=!0);var p,b,o,s,h,k,c,l,d,a,v,g,nt,y,tt=(g=r,nt=t.getBody(),y=f.dom,(g?kpi:bpi)(nt,y).map(u(wpi,y))),it=ra(f,u(dpi,t),(p=t.getBody(),function(n){return n.dom===p})),rt=(s=tt,b=o=f,h=w(t.schema.getTextInlineElements(),vt(b)),a=wo(o).filter(gr),v=bl(o).filter(gr),ni(o),c=v,l=s,d=function(n,t,r){var u=n.dom,f=t.dom,e=u.data.length;return vut(u,f,h),r.container()===f?i(u,e):r},((k=a).isSome()&&c.isSome()&&l.isSome()?n.some(d(k.getOrDie(),c.getOrDie(),l.getOrDie())):n.none()).orThunk(function(){return h&&(a.each(function(n){return aut(n.dom,n.dom.length)}),v.each(function(n){return ub(n.dom,0)})),s}));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):it.bind(gpi).fold(function(){e&&egt(t,r,rt)},function(i){e&&egt(t,r,n.some(i))})}function yut(n){return gi(n,"td,th")}function put(n,t){return{start:n,end:t}}function fb(n,i){return un(t.fromDom(n),"td,th",i)}function ogt(n){return!g(n.start,n.end)}function sgt(t,i){return tv(t.start,i).bind(function(r){return tv(t.end,i).bind(function(t){return g(r,t)?n.some(r):n.none()})})}function wut(n){return function(t){return sgt(t,n).map(function(n){return{rng:t,table:n,cells:yut(n)}})}}function hgt(t,i,r,u){var f;if(r.collapsed||!t.forall(ogt))return n.none();if(i.isSameTable)return f=t.bind(wut(u)),n.some({start:f,end:f});var e,o,s=fb(r.startContainer,u),h=fb(r.endContainer,u),c=s.bind((o=u,function(n){return tv(n,o).bind(function(t){return vo(yut(t)).map(function(t){return put(n,t)})})})).bind(wut(u)),l=h.bind((e=u,function(n){return tv(n,e).bind(function(t){return or(yut(t)).map(function(t){return put(t,n)})})})).bind(wut(u));return n.some({start:c,end:l})}function cgt(n,t){return ty(n,function(n){return g(n,t)})}function but(n){return di(cgt(n.cells,n.rng.start),cgt(n.cells,n.rng.end),function(t,i){return n.cells.slice(t,i+1)})}function lgt(n,t){var r=t.startTable,u=t.endTable,i=n.cloneRange();return r.each(function(n){return i.setStartAfter(n.dom)}),u.each(function(n){return i.setEndBefore(n.dom)}),i}function nwi(i,r){function ut(n){return tv(t.fromDom(n),tt)}var y,p,w,f,b,k,d,nt,tt,e,o,h,l,a,it,rt,u=(y=i,function(n){return g(y,n)}),s=di(fb((p=r).startContainer,w=u),fb(p.endContainer,w),put),v=(tt=u,e=ut((nt=r).startContainer),o=ut(nt.endContainer),h=e.isSome(),l=o.isSome(),a=di(e,o,g).getOr(!1),{startTable:e,endTable:o,isStartInTable:h,isEndInTable:l,isSameTable:a,isMultiTable:!a&&h&&l});return it=r,rt=u,s.exists(function(n){return!ogt(t=n)&&sgt(t,rt).exists(function(n){var t=n.dom.rows;return 1===t.length&&1===t[0].cells.length})&&trt(n.start,it);var t})?s.map(function(n){return ov.singleCellTable(r,n.start)}):v.isMultiTable?hgt(s,k=v,d=r,u).bind(function(t){var f=t.start,e=t.end,i=f.bind(but).getOr([]),r=e.bind(but).getOr([]),u;return 0<i.length&&0<r.length?(u=lgt(d,k),n.some(ov.multiTable(i,r,u))):n.none()}):hgt(s,f=v,b=r,u).bind(function(n){var t=n.start,i=n.end;return t.or(i)}).bind(function(t){var r=f.isSameTable,i=but(t).getOr([]),u;return r&&t.cells.length===i.length?n.some(ov.fullTable(t.table)):0<i.length?r?n.some(ov.partialTable(i,n.none())):(u=lgt(b,f),n.some(ov.partialTable(i,n.some(c(c({},f),{rng:u}))))):n.none()})}function agt(n){return e(n,function(n){se(n,"contenteditable");as(n)}),0}function kut(n,t,i,r){var u=i.cloneRange();r?(u.setStart(i.startContainer,i.startOffset),u.setEndAfter(t.dom.lastChild)):(u.setStartBefore(t.dom.firstChild),u.setEnd(i.endContainer,i.endOffset));aft(n,u,t,!1)}function vgt(n){var r=wc(n),i=t.fromDom(n.selection.getNode());vy(i.dom)&&pt(i)?n.selection.setCursorLocation(i.dom,0):n.selection.collapse(!0);1<r.length&&vi(r,function(n){return g(n,i)})&&du(i,"data-mce-selected","1")}function ygt(i,r,u){var f=i.selection.getRng();return agt(u.bind(function(u){var h,c,l,o=u.rng,e=u.isStartInTable,a=(h=e?o.endContainer:o.startContainer,n.from(i.dom.getParent(h,i.dom.isBlock)).map(t.fromDom)),s;return o.deleteContents(),c=i,l=e,a.filter(pt).each(function(n){l?ni(n):(as(n),c.selection.setCursorLocation(n.dom,0))}),s=e?r[0]:r[r.length-1],kut(i,s,f,e),pt(s)?n.none():n.some(e?r.slice(1):r.slice(0,-1))}).getOr(r)),vgt(i),!0}function twi(n,t,i,r){var u=n.selection.getRng(),f=t[0],e=i[i.length-1],o,s;return kut(n,f,u,!0),kut(n,e,u,!1),o=pt(f)?t:t.slice(1),s=pt(e)?i:i.slice(0,-1),agt(o.concat(s)),r.deleteContents(),vgt(n),!0}function iwi(n,t){return vs(n,!1,t),!0}function pgt(n,t){return gt(gf(t,n),gy)}function wgt(n,t){return(n?ent:ont)(t)}function rwi(r,u,f){var e=t.fromDom(r.getBody());return vft(e,f).fold(function(){return n=r,c=u,s=e,l=f,a=i.fromRangeStart(n.selection.getRng()),pgt(s,l).bind(function(i){return pt(i)?ob(n,i):(r=s,u=i,f=a,uw(c,n.getBody(),f).bind(function(n){return pgt(r,t.fromDom(n.getNode())).map(function(n){return!1===g(n,u)})}));var r,u,f}).getOr(!1)||(o=u,h=i.fromRangeStart((v=r).selection.getRng()),wgt(o,h)||vr(o,v.getBody(),h).exists(function(n){return wgt(o,n)}));var n,c,s,l,a,v,o,h},function(f){return y=u,p=e,s=f,w=i.fromRangeStart((c=r).selection.getRng()),(pt(s)?ob(c,s):(a=p,o=s,h=w,uw(v=y,(l=c).getBody(),h).bind(function(n){return e=v,i=h,r=n,wi((f=o).dom).bind(function(n){return lf(f.dom).map(function(t){return e?i.isEqual(n)&&r.isEqual(t):i.isEqual(t)&&r.isEqual(n)})}).getOr(!0)?ob(l,o):(u=o,vft(a,t.fromDom(n.getNode())).map(function(n){return!1===g(n,u)}));var u,f,e,i,r}).or(n.some(!0)))).getOr(!1);var l,a,v,o,h,c,y,p,s,w})}function eb(i,r){var f,s,e,h,c,o,l,a,v=t.fromDom(i.selection.getStart(!0)),y=wc(i);return i.selection.isCollapsed()&&0===y.length?rwi(i,r,v):(s=v,e=y,h=t.fromDom((f=i).getBody()),c=f.selection.getRng(),0!==e.length?ygt(f,e,n.none()):(o=f,a=c,vft(l=h,s).fold(function(){return n=o,nwi(l,a).map(function(t){return t.fold(u(aft,n),u(iwi,n),u(ygt,n),u(twi,n))});var n},function(n){return ob(o,n)}).getOr(!1)))}function dut(n){return n.collapsed?n:(t=n,r=i.fromRangeStart(t),f=i.fromRangeEnd(t),u=t.commonAncestorContainer,vr(!1,u,f).map(function(n){return!ef(r,f,u)&&ef(r,n,u)?(e=r.container(),o=r.offset(),s=n.container(),h=n.offset(),(i=document.createRange()).setStart(e,o),i.setEnd(s,h),i):t;var e,o,s,h,i}).getOr(t));var t,r,f,u}function uwi(n,t){var e,f,o,u,s,i=t.firstChild,r=t.lastChild;return i&&"meta"===i.name&&(i=i.next),f=r=r&&"mce_marker"===r.attr("id")?r.prev:r,o=(e=n).getNonEmptyElements(),f&&(f.isEmpty(o)||(u=f,e.getBlockElements()[u.name]&&u.firstChild&&u.firstChild===u.lastChild&&("br"===(s=u.firstChild).name||s.value===ir)))&&(r=r.prev),i&&i===r&&("ul"===i.name||"ol"===i.name)}function fwi(n){return 0<n.length&&(!(r=n[n.length-1]).firstChild||(t=r)&&t.firstChild&&t.firstChild===t.lastChild&&((i=t.firstChild).data===ir||st(i)))?n.slice(0,-1):n;var t,i,r}function gut(n,t){var i=n.getParent(t,n.isBlock);return i&&"LI"===i.nodeName?i:null}function bgt(n,t){var u=i.after(n),r=vu(t).prev(u);return r?r.toRange():null}function ewi(n,t,u,f){function nt(n){var r=i.fromRangeStart(u),f=vu(t.getRoot()),e=1===n?f.prev(r):f.next(r);return!e||gut(t,e.getNode())!==l}var tt,a,o,s,it,rt,ut,ft,e,h,et,v,ot,y,w,b,c,k,st,ht,ct,lt,at,vt=(tt=t,it=n.serialize(f),o=(a=tt.createFragment(it)).firstChild,s=a.lastChild,o&&"META"===o.nodeName&&o.parentNode.removeChild(o),s&&"mce_marker"===s.id&&s.parentNode.removeChild(s),a),l=gut(t,u.startContainer),d=fwi(p(vt.firstChild.childNodes,function(n){return"LI"===n.nodeName})),g=t.getRoot();return nt(1)?(st=g,at=(k=l).parentNode,r.each(d,function(n){at.insertBefore(n,k)}),ht=st,ct=i.before(k),(lt=vu(ht).next(ct))?lt.toRange():null):nt(2)?(rt=l,ft=g,t.insertAfter((ut=d).reverse(),rt),bgt(ut[0],ft)):(h=d,et=g,v=e=l,y=(ot=u).cloneRange(),w=ot.cloneRange(),y.setStartBefore(v),w.setEndAfter(v),b=[y.cloneContents(),w.cloneContents()],(c=e.parentNode).insertBefore(b[0],e),r.each(h,function(n){c.insertBefore(n,e)}),c.insertBefore(b[1],e),c.removeChild(e),bgt(h[h.length-1],et))}function owi(u,f,e){var ht,et,y,ct,a=u.selection,c=u.dom,v,vt,yt,w,rt,ut,d,ft,pt,ot,wt,bt,kt,dt,g,gt,ni,ti,st,b,ii,s,h,k;/^ | $/.test(f)&&(ht=c,et=a.getRng(),y=f,y=ib(ct=t.fromDom(ht.getRoot()),i.fromRangeStart(et))?y.replace(/^ /,"&nbsp;"):y.replace(/^&nbsp;/," "),f=y=rb(ct,i.fromRangeEnd(et))?y.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):y.replace(/&nbsp;(<br( \/)?>)?$/," "));var lt=u.parser,ri=e.merge,it=gc({validate:u.getParam("validate")},u.schema),at='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;<\/span>',nt=u.fire("BeforeSetContent",{content:f,format:"html",selection:!0,paste:e.paste});if(nt.isDefaultPrevented())u.fire("SetContent",{content:nt.content,format:"html",selection:!0,paste:e.paste});else{if(-1===(f=nt.content).indexOf("{$caret}")&&(f+="{$caret}"),f=f.replace(/\{\$caret\}/,at),yt=(v=a.getRng()).startContainer||(v.parentElement?v.parentElement():null),w=u.getBody(),yt===w&&a.isCollapsed()&&c.isBlock(w.firstChild)&&(vt=w.firstChild)&&!u.schema.getShortEndedElements()[vt.nodeName]&&c.isEmpty(w.firstChild)&&((v=c.createRng()).setStart(w.firstChild,0),v.setEnd(w.firstChild,0),a.setRng(v)),a.isCollapsed()||function(n){var e=n.dom,i=dut(n.selection.getRng()),r,u,f;n.selection.setRng(i);u=e.getParent(i.startContainer,yft);f=i;null!==(r=u)&&r===e.getParent(f.endContainer,yft)&&trt(t.fromDom(r),f)?aft(n,i,t.fromDom(u)):n.getDoc().execCommand("Delete",!1,null)}(u),st={context:(h=a.getNode()).nodeName.toLowerCase(),data:e.data,insert:!0},b=lt.parse(f,st),!0===e.paste&&uwi(u.schema,b)&&gut(c,h))return v=ewi(it,c,a.getRng(),b),a.setRng(v),void u.fire("SetContent",nt);if(function(){for(var n=b;n=n.walk();)1===n.type&&n.attr("data-mce-fragment","1")}(),"mce_marker"===(s=b.lastChild).attr("id"))for(ii=s,s=s.prev;s;s=s.walk(!0))if(3===s.type||!c.isBlock(s.name)){u.schema.isValidChild(s.parent.name,"span")&&s.parent.insert(ii,s,"br"===s.name);break}if(u._selectionOverrides.showBlockCaretContainer(h),st.invalid){for(u.selection.setContent(at),h=a.getNode(),k=u.getBody(),9===h.nodeType?h=s=k:s=h;s!==k;)s=(h=s).parentNode;f=h===k?k.innerHTML:c.getOuterHTML(h);f=it.serialize(lt.parse(f.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return it.serialize(b)})));h===k?c.setHTML(k,f):c.setOuterHTML(h,f)}else rt=u,ut=f=it.serialize(b),"all"===(d=h).getAttribute("data-mce-bogus")?d.parentNode.insertBefore(rt.dom.createFragment(ut),d):(ft=d.firstChild,pt=d.lastChild,!ft||ft===pt&&"BR"===ft.nodeName?rt.dom.setHTML(d,ut):rt.selection.setContent(ut));wt=ri;dt=(ot=u).schema.getTextInlineElements();g=ot.dom;wt&&(bt=ot.getBody(),kt=edt(g),r.each(g.select("*[data-mce-fragment]"),function(n){if(tt(dt[n.nodeName.toLowerCase()])&&al(out(g,n),function(n){return!hdt.has(n)}))for(var t=n.parentNode;tt(t)&&t!==bt&&!function(n,t,i){function r(r){var u=n.getStyle(t,r),f=n.getStyle(i,r);return uy(u)&&uy(f)&&u!==f}var f=out(n,t),u=out(n,i);return vi(f,function(n){function t(t){return vi(t,function(t){return t===n})}if(t(u)||!t(fnt))return r(n);var i=p(u,function(n){return vi(fnt,function(t){return po(n,t)})});return vi(i,r)})}(g,n,t);t=t.parentNode)if(kt.compare(t,n)){g.remove(n,!0);break}})),function(n,t){var a,r=n.dom,h=n.selection,c,e,f,s,u;if(t){if(h.scrollIntoView(t),c=dc(n.getBody(),t),"false"===r.getContentEditable(c))return r.remove(t),h.select(c);f=r.createRng();s=t.previousSibling;o(s)?(f.setStart(s,s.nodeValue.length),l.ie||(e=t.nextSibling,o(e)&&(s.appendData(e.data),e.parentNode.removeChild(e)))):(f.setStartBefore(t),f.setEndBefore(t));u=r.getParent(t,r.isBlock);r.remove(t);u&&r.isEmpty(u)&&(n.$(u).empty(),f.setStart(u,0),f.setEnd(u,0),yft(u)||u.getAttribute("data-mce-fragment")||!(a=function(t){var r=i.fromRangeStart(t);if(r=vu(n.getBody()).next(r))return r.toRange()}(f))?r.add(u,r.create("br",{"data-mce-bogus":"1"})):(f=a,r.remove(u)));h.setRng(f)}}(u,c.get("mce_marker"));gt=u.getBody();r.each(gt.getElementsByTagName("*"),function(n){n.removeAttribute("data-mce-fragment")});ni=c;ti=a.getStart();n.from(ni.getParent(ti,"td,th")).map(t.fromDom).each(api);u.fire("SetContent",nt);u.addVisual()}}function nft(n){return n instanceof ru}function tft(n,t,i){var r;n.dom.setHTML(n.getBody(),t);!0!==i&&ls(r=n)&&wi(r.getBody()).each(function(n){var t=n.getNode(),i=vh(t)?wi(t).getOr(n):n;r.selection.setRng(i.toRange())})}function swi(i,u,o){var s,l=(s=u,c(c({format:"html"},o),{set:!0,content:nft(s)?"":s})),h=o.no_events?l:i.fire("BeforeSetContent",l);return nft(u)||(u=h.content),n.from(i.getBody()).fold(f(u),function(n){return nft(u)?function(n,i,u,f){var h,c,o,l,s;return h=n.parser.getNodeFilters(),c=n.parser.getAttributeFilters(),o=u,l=function(n,t){var u,f,i={},r={},s=[];for(u in o.firstChild&&pft(o.firstChild,function(u){e(n,function(n){n.name===u.name&&(i[n.name]?i[n.name].nodes.push(u):i[n.name]={filter:n,nodes:[u]})});e(t,function(n){"string"==typeof u.attr(n.name)&&(r[n.name]?r[n.name].nodes.push(u):r[n.name]={filter:n,nodes:[u]})})}),i)w(i,u)&&s.push(i[u]);for(f in r)w(r,f)&&s.push(r[f]);return s}(h,c),e(l,function(n){e(n.filter.callbacks,function(t){t(n.nodes,n.filter.name,{})})}),s=gc({validate:n.validate},n.schema).serialize(u),f.content=np(t.fromDom(i))?s:r.trim(s),tft(n,f.content,f.no_selection),f.no_events||n.fire("SetContent",f),u}(i,n,u,h):(o=i,c=n,s=h,0===(f=u).length||/^\s+$/.test(f)?(l='<br data-mce-bogus="1">',"TABLE"===c.nodeName?f="<tr><td>"+l+"<\/td><\/tr>":/^(UL|OL)$/.test(c.nodeName)&&(f="<li>"+l+"<\/li>"),f=(a=oi(o))&&o.schema.isValidChild(c.nodeName.toLowerCase(),a.toLowerCase())?(f=l,o.dom.createHTML(a,ya(o),f)):f||'<br data-mce-bogus="1">',tft(o,f,s.no_selection),o.fire("SetContent",s)):("raw"!==s.format&&(f=gc({validate:o.validate},o.schema).serialize(o.parser.parse(f,{isRootContent:!0,insert:!0}))),s.content=np(t.fromDom(c))?f:r.trim(f),tft(o,s.content,s.no_selection),s.no_events||o.fire("SetContent",s)),s.content);var o,c,f,s,l,a})}function kgt(n){return ft(n)?n:it}function ift(i,r,u){var e=r(i),f=kgt(u);return e.orThunk(function(){return f(i)?n.none():function(r){for(var u=i.dom,e=kgt(f);u.parentNode;){var u=u.parentNode,o=t.fromDom(u),s=r(o);if(s.isSome())return s;if(e(o))break}return n.none()}(r)})}function dgt(n,t,i){var f=n.formatter.get(i),r,u;if(f)for(r=0;r<f.length;r++)if(u=f[r],ur(u)&&!1===u.inherit&&n.dom.is(t,u.selector))return 1}function rft(n,t,i,r,u){var f=n.dom.getRoot();return t!==f&&(t=n.dom.getParent(t,function(t){return!!dgt(n,t,i)||t.parentNode===f||!!af(n,t,i,r,!0)}),!!af(n,t,i,r,u))}function uft(n,t,i){return!!wft(t,i.inline)||!!wft(t,i.block)||(i.selector?1===t.nodeType&&n.is(t,i.selector):void 0)}function ggt(n,t,i,r,u,f){var e=i[r],o,s;if(ft(i.onmatch))return i.onmatch(t,i,r);if(e)if(tr(e.length)){for(o in e)if(w(e,o)){var h="attributes"===r?n.getAttrib(t,o):ew(n,t,o),c=df(e[o],f),l=wu(h)||sht(h);if(!l||!wu(c)){if(u&&l&&!i.exact)return;if((!u||i.exact)&&!wft(h,dit(n,c,o)))return}}}else for(s=0;s<e.length;s++)if("attributes"===r?n.getAttrib(t,e[s]):ew(n,t,e[s]))return 1;return 1}function fft(n,t,i,r,u){if(r)return rft(n,r,t,i,u);if(r=n.selection.getNode(),rft(n,r,t,i,u))return!0;var f=n.selection.getStart();return!(f===r||!rft(n,f,t,i,u))}function nnt(n){return 0<function(n){for(var t=[];n;){if(3===n.nodeType&&n.nodeValue!==il||1<n.childNodes.length)return[];1===n.nodeType&&t.push(n);n=n.firstChild}return t}(n).length}function tnt(n){if(n){var t=new yt(n,n);for(n=t.current();n;n=t.next())if(o(n))return n}return null}function eft(n){var i=t.fromTag("span");return oe(i,{id:cnt,"data-mce-bogus":"1","data-mce-type":"format-caret"}),n&&ii(i,t.fromText(il)),i}function oft(n,i,r){void 0===r&&(r=!0);var u,e,l,h,a,c,f,o,s=n.dom,v=n.selection;nnt(i)?vs(n,!1,t.fromDom(i),r):(u=v.getRng(),e=s.getParent(i,s.isBlock),l=u.startContainer,h=u.startOffset,a=u.endContainer,c=u.endOffset,(o=tnt(i))&&o.nodeValue.charAt(0)===il&&o.deleteData(0,1),f=o,s.remove(i,!0),l===f&&0<h&&u.setStart(f,h-1),a===f&&0<c&&u.setEnd(f,c-1),e&&s.isEmpty(e)&&as(t.fromDom(e)),v.setRng(u))}function sft(n,t,i){void 0===i&&(i=!0);var r=n.dom,u=n.selection;if(t)oft(n,t,i);else if(!(t=cs(n.getBody(),u.getStart())))for(;t=r.get(cnt);)oft(n,t,!1)}function int(n,t){return n.appendChild(t),t}function rnt(n,t){var i=dst(n,function(n,t){return int(n,t.cloneNode(!1))},t);return int(i,i.ownerDocument.createTextNode(il))}function hwi(t,i,r,u,f,e){var s,h,c=t.formatter,l=t.dom,a=p(ch(c.get()),function(n){return n!==u&&!yi(n,"removeformat")}),o;return 0<p((s=t,h=r,fu(a,function(n,t){var i=iyi(s,t);return s.formatter.matchNode(h,t,{},i)?n.concat([t]):n},[])),function(n){function i(n){return vl(n,function(n,t){return vi(e,function(n){return n===t})})}return f=u,e=["inline","block","selector","attributes","styles","classes"],!vi((r=t).formatter.get(n),function(n){var t=i(n);return vi(r.formatter.get(f),function(n){var r,u=i(n),f=t,e=u;return lst(r=void 0===r?dd:r).eq(f,e)})});var r,f,e}).length?(o=r.cloneNode(!1),l.add(i,o),c.remove(u,f,o,e),l.remove(o),n.some(o)):n.none()}function cwi(n,i,r,f){var w,h,nt,tt,c,b,it,rt,l,s,a,ut,k,ft,d,et=n.dom,v=n.selection,ot=[],y=v.getRng(),g=y.startContainer,st=y.startOffset,o=g;for(3===g.nodeType&&(st!==g.nodeValue.length&&(w=!0),o=o.parentNode);o;){if(af(n,o,i,r,f)){h=o;break}o.nextSibling&&(w=!0);ot.push(o);o=o.parentNode}h&&(w?(nt=v.getBookmark(),y.collapse(!0),tt=yw(pc(n,y,n.formatter.get(i),!0)),n.formatter.remove(i,r,tt,f),v.moveToBookmark(nt)):(c=cs(n.getBody(),h),l=b=eft(!1).dom,(ut=(a=n.dom).getParent(s=null!==c?c:h,u(bit,n)))&&a.isEmpty(ut)?s.parentNode.replaceChild(l,s):(k=t.fromDom(s),ft=gi(k,"br"),d=p(function(){for(var i=[],n=k.dom;n;)i.push(t.fromDom(n)),n=n.lastChild;return i}().slice(-1),wh),ft.length===d.length&&e(d,ni),a.isEmpty(s)?s.parentNode.replaceChild(l,s):a.insertAfter(l,s)),it=hwi(n,b,h,i,r,f),rt=rnt(ot.concat(it.toArray()),b),oft(n,c,!1),v.setCursorLocation(rt,1),et.isEmpty(h)&&et.remove(h)))}function lwi(n,t){var i=n.schema.getTextInlineElements();return w(i,vt(t))&&!of(t.dom)&&!bo(t.dom)}function bft(n){return h(n)&&!ar(n)&&!of(n)&&!bo(n)}function vnt(n,t){for(var i=n;i;i=i[t]){if(o(i)&&uy(i.data))return n;if(h(i)&&!ar(i))return i}return n}function ynt(n,t,i){var e=edt(n),f,u;if(t&&i&&(t=vnt(t,"previousSibling"),i=vnt(i,"nextSibling"),e.compare(t,i))){for(u=t.nextSibling;u&&u!==i;)f=u,u=u.nextSibling,t.appendChild(f);return n.remove(i),r.each(r.grep(i.childNodes),function(n){t.appendChild(n)}),t}return i}function pnt(n,t,i,r){var u;r&&!1!==t.merge_siblings&&(u=ynt(n,wit(r),r),ynt(n,u,wit(u,!0)))}function wnt(n,t){return function(i){return!(!i||!ew(n,i,t))}}function bnt(n,t,i){return function(r){var u,f;n.setStyle(r,t,i);""===r.getAttribute("style")&&r.removeAttribute("style");u=n;"SPAN"===(f=r).nodeName&&0===u.getAttribs(f).length&&u.remove(f,!0)}}function knt(n,t,i){return n.isChildOf(t,i)&&t!==i&&!n.isBlock(i)}function dnt(n,t,i){var f,r=t[i?"startContainer":"endContainer"],u=t[i?"startOffset":"endOffset"];return h(r)&&(f=r.childNodes.length-1,!i&&u&&u--,r=r.childNodes[f<u?f:u]),o(r)&&i&&u>=r.nodeValue.length&&(r=new yt(r,n.getBody()).next()||r),o(r)&&!i&&0===u&&new yt(r,n.getBody()).prev()||r}function gnt(n,t){var i=t?"firstChild":"lastChild",r;return/^(TR|TH|TD)$/.test(n.nodeName)&&n[i]?(r=n[i],"TR"===n.nodeName&&r[i]||r):n}function kft(n,t,i,r){var u=n.create(i,r);return t.parentNode.insertBefore(u,t),u.appendChild(t),u}function nti(n,i,r,u,f){var o=t.fromDom(i),e=t.fromDom(n.create(u,f));return oy(e,(r?hct:sct)(o)),r?(ou(o,e),vct(e,o)):(kl(o,e),ii(e,o)),e.dom}function hb(n,t,i,r){var u=wit(t,i,r);return wu(u)||"BR"===u.nodeName||n.isBlock(u)}function tti(n,t,i,r,u){var rt,l,o=n.dom,ut=o,w=r,v,s,a,y,d,g,c,b,f,nt,tt,k,it;if(!(kt(l=t)&&ul(w,l.inline)||sf(l)&&ul(w,l.block)||ur(l)&&h(w)&&ut.is(w,l.selector)||t.links&&"A"===r.nodeName))return sv.keep();if(f=r,kt(t)&&"all"===t.remove&&br(t.preserve_attributes)&&(nt=p(o.getAttribs(f),function(n){return dt(t.preserve_attributes,n.name.toLowerCase())}),o.removeAllAttribs(f),e(nt,function(n){return o.setAttrib(f,n.name,n.value)}),0<nt.length))return sv.rename("span");if("all"!==t.remove)for(oet(t.styles,function(n,r){n=dit(o,df(n,i),r+"");eh(r)&&(r=n,u=null);!t.remove_similar&&u&&!ul(ew(o,u,r),n)||o.setStyle(f,r,"");rt=!0}),rt&&""===o.getAttrib(f,"style")&&(f.removeAttribute("style"),f.removeAttribute("data-mce-style")),oet(t.attributes,function(n,r){var s;if(n=df(n,i),eh(r)&&(r=n,u=null),t.remove_similar||!u||ul(o.getAttrib(u,r),n))if("class"===r&&(n=o.getAttrib(f,r))&&(s="",e(n.split(/\s+/),function(n){/mce\-\w+/.test(n)&&(s+=(s?" ":"")+n)}),s))o.setAttrib(f,r,s);else{if(ebi.test(r)&&f.removeAttribute("data-mce-"+r),"style"===r&&dr(["li"])(f)&&"none"===o.getStyle(f,"list-style-type"))return f.removeAttribute(r),void o.setStyle(f,"list-style-type","none");"class"===r&&f.removeAttribute("className");f.removeAttribute(r)}}),oet(t.classes,function(n){n=df(n,i);u&&!o.hasClass(u,n)||o.removeClass(f,n)}),tt=o.getAttribs(f),k=0;k<tt.length;k++)if(it=tt[k].nodeName,0!==it.indexOf("_")&&0!==it.indexOf("data-"))return sv.keep();return"none"!==t.remove?(v=n,a=t,g=(s=f).parentNode,c=v.dom,b=oi(v),sf(a)&&(b?g===c.getRoot()&&(a.list_block&&ul(s,a.list_block)||e(bu(s.childNodes),function(n){yc(v,b,n.nodeName.toLowerCase())?y?y.appendChild(n):(y=kft(c,n,b),c.setAttribs(y,v.settings.forced_root_block_attrs)):y=null})):c.isBlock(s)&&!c.isBlock(g)&&(hb(c,s,!1)||hb(c,s.firstChild,!0,!0)||s.insertBefore(c.create("br"),s.firstChild),hb(c,s,!0)||hb(c,s.lastChild,!1,!0)||s.appendChild(c.create("br")))),ur(d=a)&&kt(d)&&ly(at(d,"mixed"),!0)&&!ul(a.inline,s)||c.remove(s,!0),sv.removed()):sv.keep()}function rl(n,t,i,r,u){return tti(n,t,i,r,u).fold(it,function(t){return n.dom.rename(r,t),!0},lt)}function iti(t,i,r,u,s){function v(n){var o,h,c,a,u,v=(h=i,c=r,a=s,e(ow((o=t).dom,n.parentNode).reverse(),function(n){var t;u||"_start"===n.id||"_end"===n.id||(t=af(o,n,h,c,a))&&!1!==t.split&&(u=n)}),u);return function(n,t,i,r,u,e,o,s){var c,y,a=n.dom,p,l,h,v;if(i){for(p=i.parentNode,l=r.parentNode;l&&l!==p;l=l.parentNode){for(h=a.clone(l,!1),v=0;v<t.length&&null!==(h=function(n,t,i){return tti(n,t,s,i,i).fold(f(i),function(t){return n.dom.createFragment().appendChild(i),n.dom.rename(i,t)},f(null))}(n,t[v],h));v++);h&&(c&&h.appendChild(c),y=y||h,c=h)}!e||o.mixed&&a.isBlock(i)||(r=a.split(i,r));c&&(u.parentNode.insertBefore(c,u),y.appendChild(u),kt(o)&&pnt(a,o,0,c))}return r}(t,l,v,n,n,!0,y,r)}function g(n){return vi(l,function(i){return rl(t,i,r,n,n)})}function w(n){var r,i=c.get(n?"_start":"_end"),t=i[n?"firstChild":"lastChild"];return ar(r=t)&&h(r)&&("_start"===r.id||"_end"===r.id)&&(t=t[n?"firstChild":"lastChild"]),o(t)&&0===t.data.length&&(t=n?i.previousSibling||i.nextSibling:i.nextSibling||i.previousSibling),c.remove(i,!0),t}function k(i){var f=pc(t,i,l,i.collapsed),o;if(y.split){if(f=yw(f),(r=dnt(t,f,!0))!==(u=dnt(t,f))){if(r=gnt(r,!0),u=gnt(u,!1),knt(c,r,u))return o=n.from(r.firstChild).getOr(r),v(nti(c,o,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void w(!0);if(knt(c,u,r))return o=n.from(u.lastChild).getOr(u),v(nti(c,o,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void w(!1);var r=kft(c,r,"span",{id:"_start","data-mce-type":"bookmark"}),u=kft(c,u,"span",{id:"_end","data-mce-type":"bookmark"}),s=c.createRng();s.setStartAfter(r);s.setEndBefore(u);nv(c,s,function(n){e(n,function(n){ar(n)||ar(n.parentNode)||v(n)})});v(r);v(u);r=w(!0);u=w()}else r=u=v(r);f.startContainer=r.parentNode||r;f.startOffset=c.nodeIndex(r);f.endContainer=u.parentNode||u;f.endOffset=c.nodeIndex(u)+1}nv(c,f,function(n){e(n,nt)})}var d,l=t.formatter.get(i),y=l[0],b=!0,c=t.dom,a=t.selection,nt=function(n){var o=!0,u=!1,s,f,i,r;if(h(n)&&c.getContentEditable(n)&&(o=b,b="true"===c.getContentEditable(n),u=!0),i=bu(n.childNodes),b&&!u&&(s=g(n)||vi(l,function(t){return uft(c,n,t)}),f=n.parentNode,!s&&tt(f)&&git(y)&&g(f)),y.deep&&i.length){for(r=0;r<i.length;r++)nt(i[r]);u&&(b=o)}e(["underline","line-through","overline"],function(i){h(n)&&t.dom.getStyle(n,"text-decoration")===i&&n.parentNode&&ywt(c,n.parentNode)===i&&rl(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:i}},null,n)})},p;if(u)return fw(u)?((d=c.createRng()).setStartBefore(u),d.setEndAfter(u),k(d)):k(u),void lrt(t,i,u,r);if("false"!==c.getContentEditable(a.getNode()))a.isCollapsed()&&kt(y)&&!wc(t).length?cwi(t,i,r,s):(urt(a,!0,function(){rrt(t,k)}),kt(y)&&fft(t,i,r,a.getStart())&&vwt(c,a,a.getRng()),t.nodeChanged()),lrt(t,i,u,r);else{for(u=a.getNode(),p=0;p<l.length&&(!l[p].ceFalseOverride||!rl(t,l[p],r,u,u));p++);lrt(t,i,u,r)}}function kwi(n){return h(n)&&!ar(n)&&!of(n)&&!bo(n)}function rti(n){return w(n,"vars")}function uti(n,t,i,r,u){return gst(t,function(t){var f=n.formatter.matchNode(t,i,null!=u?u:{},r);return!tr(f)},function(t){return dgt(n,t,i)||!r&&tt(n.formatter.matchNode(t,i,u,!0))})}function fti(n,t){var i=null!=t?t:nii(n);return p(ow(n.dom,i),function(n){return h(n)&&!bo(n)})}function dwi(t,i,r,u,f,o){var y,s,w,k,d,b,l,a,v;return null===i.get()&&(s=t,(y=i).set({}),s.on("NodeChange",function(n){tii(s,n.element,y.get())}),s.on("FormatApply FormatRemove",function(t){var i=n.from(t.node).map(function(n){return fw(n)?n:n.startContainer}).bind(function(t){return h(t)?n.some(t):n.from(t.parentElement)}).getOrThunk(function(){return nii(s)});tii(s,i,y.get())})),w=t,d=r,b=u,l=f,a=o,v=(k=i).get(),e(d.split(","),function(n){function r(){var t=fti(w);return uti(w,t,n,l,a).isSome()}var t,i=at(v,n).getOrThunk(function(){var t={withSimilar:{state:hi(!1),similar:!0,callbacks:[]},withoutSimilar:{state:hi(!1),similar:!1,callbacks:[]},withVars:[]};return v[n]=t});tr(a)?((t=l?i.withSimilar:i.withoutSimilar).callbacks.push(b),1===t.callbacks.length&&t.state.set(r())):i.withVars.push({state:hi(r()),similar:l,vars:a,callback:b})}),k.set(v),{unbind:function(){var f,o=r,n=u,t=(f=i).get();e(o.split(","),function(i){return at(t,i).each(function(r){t[i]={withSimilar:c(c({},r.withSimilar),{callbacks:p(r.withSimilar.callbacks,function(t){return t!==n})}),withoutSimilar:c(c({},r.withoutSimilar),{callbacks:p(r.withoutSimilar.callbacks,function(t){return t!==n})}),withVars:p(r.withVars,function(t){return t.callback!==n})}})});f.set(t)}}}function dft(n,i){var r=(i||document).createDocumentFragment();return e(n,function(n){r.appendChild(n.dom)}),t.fromDom(r)}function gft(n,t,i){return{element:n,width:t,rows:i}}function eti(n,t){return{element:n,cells:t}}function oti(n,t){var i=parseInt(gl(n,t),10);return isNaN(i)?1:i}function sti(n){return fu(n,function(n,t){return t.cells.length>n?t.cells.length:n},0)}function hti(t,i){for(var e,u,f=t.rows,r=0;r<f.length;r++)for(e=f[r].cells,u=0;u<e.length;u++)if(g(e[u],i))return n.some({x:u,y:r});return n.none()}function cti(n,t,i,r,u){for(var e,h,o=[],s=n.rows,f=i;f<=u;f++)e=s[f].cells,h=t<r?e.slice(t,r+1):e.slice(r,t+1),o.push(eti(s[f].element,h));return o}function gwi(n){var t=gft(oc(n),0,[]);return e(gi(n,"tr"),function(n,i){e(gi(n,"td,th"),function(r,u){!function(n,t,i,r,u){for(var e,s=oti(u,"rowspan"),h=oti(u,"colspan"),o=n.rows,f=i;f<i+s;f++)for(o[f]||(o[f]=eti(pvt(r),[])),e=t;e<t+h;e++)o[f].cells[e]=f===i&&e===t?u:oc(u)}(t,function(n,t,i){for(;r=t,((u=n.rows)[i]?u[i].cells:[])[r];)t++;var r,u;return t}(t,u,i),i,n,r)})}),gft(t.element,sti(t.rows),t.rows)}function nbi(n,i){var r,u,e,o=t.fromDom(i.commonAncestorContainer),s=gf(o,n),c=p(s,function(n){return sn(n)||gci(n)}),h=(e=i,gt(u=s,function(n){return"li"===vt(n)&&trt(n,e)}).fold(f([]),function(){return gt(u,function(n){return"ul"===vt(n)||"ol"===vt(n)}).map(function(n){var i=t.fromTag(vt(n));return cci(i,vl(ilt(n),function(n,t){return po(t,"list-style")})),[t.fromTag("li"),i]}).getOr([])}));return ut(c.concat(h.length?h:ua(r=o)?eu(r).filter(bn).fold(f([]),function(n){return[r,n]}):bn(r)?[r]:[]),oc)}function lti(){return dft([])}function tbi(n,i){return py(i[0],"table",u(g,n)).bind(function(n){var r,u,f=i[0],e=i[i.length-1],o=gwi(n);return u=e,hti(r=o,f).bind(function(n){return hti(r,u).map(function(t){return i=r,f=n.x,u=n.y,e=t.x,s=u<(o=t.y)?cti(i,f,u,e,o):cti(i,f,o,e,u),gft(i.element,sti(s),s);var i,f,u,e,o,s})}).map(function(n){return dft([(u=ut((r=n).rows,function(n){var i=ut(n.cells,function(n){var t=pvt(n);return se(t,"colspan"),se(t,"rowspan"),t}),t=oc(n.element);return oy(t,i),t}),i=oc(r.element),oy(f=t.fromTag("tbody"),u),ii(i,f),i)]);var r,u,i,f})}).getOrThunk(lti)}function ibi(n,i){var e,r,o,u,s,h,f,c=nbt(i,n);return 0<c.length?tbi(n,c):(e=n,0<(r=i).length&&r[0].collapsed?lti():(o=e,u=r[0],s=t.fromDom(u.cloneContents()),f=fu(h=nbi(o,u),function(n,t){return ii(t,n),t},s),0<h.length?dft([f]):f))}function cb(n,t){return 0<=t&&t<n.length&&vc(n.charAt(t))}function ati(n,t){var i=ae(n.innerText);return t?i.replace(/^[ \f\n\r\t\v]+/,""):i}function vti(n){return h(n)?n.outerHTML:o(n)?ve.encodeRaw(n.data,!1):yci(n)?"<!--"+n.data+"-->":""}function rbi(n,t){var i=0;e(n,function(n){var u,f,s,r,h,e,c,o;0===n[0]?i++:1===n[0]?(r=t,h=n[1],e=i,o=function(n){var t,i=document.createElement("div"),r=document.createDocumentFragment();for(n&&(i.innerHTML=n);t=i.firstChild;)r.appendChild(t);return r}(h),r.hasChildNodes()&&e<r.childNodes.length?(c=r.childNodes[e]).parentNode.insertBefore(o,c):r.appendChild(o),i++):2===n[0]&&(f=i,(u=t).hasChildNodes()&&f<u.childNodes.length&&(s=u.childNodes[f]).parentNode.removeChild(s))})}function net(n){var t,i=oh((t=n.getBody(),p(ut(bu(t.childNodes),vti),function(n){return 0<n.length})),function(t){var i=fdt(n.serializer,t);return 0<i.length?[i]:[]}),r=i.join("");return-1!==r.indexOf("<\/iframe>")?{type:"fragmented",fragments:i,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:r,bookmark:null,beforeBookmark:null}}function tet(n,t,i){function p(n,t,i,r){for(var u=n;u-t<r&&u<i&&f[u]===e[u-t];)++u;return{start:n,end:u,diag:t}}var a,h,v,f,e,c,u,r,o,y,l,s=i?t.beforeBookmark:t.bookmark;"fragmented"===t.type?(a=t.fragments,h=n.getBody(),v=ut(bu(h.childNodes),vti),rbi((e=a,c=(f=v).length+e.length+2,u=new Array(c),r=new Array(c),o=function(n,t,i,r,u){var s=y(n,t,i,r),h,c,l;if(null===s||s.start===t&&s.diag===t-r||s.end===n&&s.diag===n-i)for(h=n,c=i;h<t||c<r;)h<t&&c<r&&f[h]===e[c]?(u.push([0,f[h]]),++h,++c):r-i<t-n?(u.push([2,f[h]]),++h):(u.push([1,e[c]]),++c);else{for(o(n,s.start,i,s.start-s.diag,u),l=s.start;l<s.end;++l)u.push([0,f[l]]);o(s.end,t,s.end-s.diag,r,u)}},y=function(n,t,i,o){var w=t-n,b=o-i;if(0==w||0==b)return null;var c,h,s,a,v,l=w-b,k=b+w,y=(k%2==0?k:1+k)/2;for(u[1+y]=n,r[1+y]=t+1,c=0;c<=y;++c){for(h=-c;h<=c;h+=2){for(s=h+y,u[s]=h===-c||h!==c&&u[s-1]<u[s+1]?u[s+1]:u[s-1]+1,v=(a=u[s])-n+i-h;a<t&&v<o&&f[a]===e[v];)u[s]=++a,++v;if(l%2!=0&&l-c<=h&&h<=l+c&&r[s-l]<=u[s])return p(r[s-l],h+n-i,t,o)}for(h=l-c;h<=l+c;h+=2){for(s=h+y-l,r[s]=h===l-c||h!==l+c&&r[s+1]<=r[s-1]?r[s+1]-1:r[s-1],v=(a=r[s]-1)-n+i-h;n<=a&&i<=v&&f[a]===e[v];)r[s]=a--,v--;if(l%2==0&&-c<=h&&h<=c&&r[s]<=u[s+l])return p(r[s],h+n-i,t,o)}}},l=[],o(0,f.length,0,e.length,l),l),h)):n.setContent(t.content,{format:"raw",no_selection:!tt(s)||!swt(s)||!s.isFakeCaret});n.selection.moveToBookmark(s)}function iet(n){return"fragmented"===n.type?n.fragments.join(""):n.content}function yti(n){var i=t.fromTag("body",obi());return vvt(i,iet(n)),e(gi(i,"*[data-mce-bogus]"),yct),i.dom.innerHTML}function lb(n,t){return!(!n||!t)&&(r=t,iet(n)===iet(r)||(i=t,yti(n)===yti(i)));var i,r}function ret(n){return 0===n.get()}function ab(n,t,i){ret(i)&&(n.typing=t)}function pti(n,t){n.typing&&(ab(n,!1,t),n.add())}function wti(i){return{undoManager:{beforeChange:function(n,t){var r=i,u=t;ret(n)&&u.set(dpt(r.selection))},add:function(n,t,u,f,e,o){return function(n,t,i,u,f,e,o){var a=net(n),s,l,h,c;if((e=r.extend(e=e||{},a),!1===ret(u)||n.removed)||(s=t.data[i.get()],n.fire("BeforeAddUndo",{level:e,lastLevel:s,originalEvent:o}).isDefaultPrevented())||s&&lb(s,e))return null;if(t.data[i.get()]&&f.get().each(function(n){t.data[i.get()].beforeBookmark=n}),l=n.getParam("custom_undo_redo_levels",0,"number"),l&&t.data.length>l){for(h=0;h<t.data.length-1;h++)t.data[h]=t.data[h+1];t.data.length--;i.set(t.data.length)}return e.bookmark=dpt(n.selection),i.get()<t.data.length-1&&(t.data.length=i.get()+1),t.data.push(e),i.set(t.data.length-1),c={level:e,lastLevel:s,originalEvent:o},0<i.get()?(n.setDirty(!0),n.fire("AddUndo",c),n.fire("change",c)):n.fire("AddUndo",c),e}(i,n,t,u,f,e,o)},undo:function(n,t,r){return e=i,s=t,f=r,(u=n).typing&&(u.add(),u.typing=!1,ab(u,!1,s)),0<f.get()&&(f.set(f.get()-1),tet(e,o=u.data[f.get()],!0),e.setDirty(!0),e.fire("Undo",{level:o})),o;var e,u,s,f,o},redo:function(n,t){return r=i,f=t,(u=n).get()<f.length-1&&(u.set(u.get()+1),tet(r,e=f[u.get()],!1),r.setDirty(!0),r.fire("Redo",{level:e})),e;var r,u,f,e},clear:function(n,t){var r,u=i,f=t;(r=n).data=[];f.set(0);r.typing=!1;u.fire("ClearUndos")},reset:function(n){var t;(t=n).clear();t.add()},hasUndo:function(n,t){return u=i,r=n,0<t.get()||r.typing&&r.data[0]&&!lb(net(u),r.data[0]);var u,r},hasRedo:function(n,t){return i=n,t.get()<i.data.length-1&&!i.typing;var i},transact:function(n,t,i){return u=i,pti(r=n,t),r.beforeChange(),r.ignore(u),r.add();var r,u},ignore:function(n,t){try{n.set(n.get()+1);t()}finally{n.set(n.get()-1)}},extra:function(n,t,r,u){var f,o,s=i,e=t,h=u;(f=n).transact(r)&&(o=f.data[e.get()].bookmark,tet(s,f.data[e.get()-1],!0),f.transact(h)&&(f.data[e.get()-1].beforeBookmark=o))}},formatter:{match:function(n,t,r,u){return fft(i,n,t,r,u)},matchAll:function(n,t){return u=n,o=t,f=[],e={},s=(r=i).selection.getStart(),r.dom.getParent(s,function(n){for(var t,i=0;i<u.length;i++)t=u[i],!e[t]&&af(r,n,t,o)&&(e[t]=!0,f.push(t))},r.dom.getRoot()),f;var r,u,o,f,e,s},matchNode:function(n,t,r,u){return af(i,n,t,r,u)},canApply:function(n){return function(t){var f=t.formatter.get(n),o=t.dom,e,i,r,u;if(f)for(e=ow(o,t.selection.getStart()),i=f.length-1;0<=i;i--){if(r=f[i],!ur(r)||tt(r.defaultBlock))return!0;for(u=e.length-1;0<=u;u--)if(o.is(e[u],r.selector))return!0}return!1}(i)},closest:function(r){function e(n){return g(n,t.fromDom(u.getBody()))}return u=i,f=r,n.from(u.selection.getStart(!0)).bind(function(i){return ift(t.fromDom(i),function(t){return tht(f,function(i){return af(u,t.dom,r=i)?n.some(r):n.none();var r})},e)}).getOrNull();var u,f},apply:function(n,t,r){return set(i,n,t,r)},remove:function(n,t,r,u){return iti(i,n,t,r,u)},toggle:function(n,t,r){var u,f=n,e=t,o=r,s=(u=i).formatter.get(f);(!fft(u,f,e,o)||"toggle"in s[0]&&!s[0].toggle?set:iti)(u,f,e,o)},formatChanged:function(n,t,r,u,f){return dwi(i,n,t,r,u,f)}},editor:{getContent:function(u,e){return o=i,s=u,h=e,n.from(o.getBody()).fold(f("tree"===s.format?new ru("body",11):""),function(n){return f=o,u=n,y=h,l=c(c({},v=s),{format:y,get:!0,getInner:!0}),i=v.no_events?l:f.fire("BeforeGetContent",l),a="raw"===i.format?r.trim(hpi(f.serializer,u.innerHTML)):"text"===i.format?f.dom.isEmpty(u)?"":ae(u.innerText||u.textContent):"tree"===i.format?f.serializer.serialize(u,i):(w=(p=f).serializer.serialize(u,i),e=oi(p),b=new RegExp("^(<"+e+"[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/"+e+">[\r\n]*|<br \\/>[\r\n]*)$"),w.replace(b,"")),i.content=dt(["text","tree"],i.format)||np(t.fromDom(u))?a:r.trim(a),(i.no_events?i:f.fire("GetContent",i)).content;var f,v,u,y,p,w,e,b,l,i,a});var o,s,h},setContent:function(n,t){return swi(i,n,t)},insertContent:function(n,t){return owi(i,n,t)},addVisual:function(n){var t,u=n,r=(t=i).dom,f=tt(u)?u:t.getBody();tr(t.hasVisual)&&(t.hasVisual=t.getParam("visual",!0,"boolean"));e(r.select("table,a",f),function(n){var i,u,e,f;switch(n.nodeName){case"TABLE":i=t.getParam("visual_table_class","mce-item-table","string");u=r.getAttrib(n,"border");u&&"0"!==u||!t.hasVisual?r.removeClass(n,i):r.addClass(n,i);break;case"A":r.getAttrib(n,"href")||(e=r.getAttrib(n,"name")||n.id,f=t.getParam("visual_anchor_class","mce-item-anchor","string"),e&&t.hasVisual?r.addClass(n,f):r.removeClass(n,f))}});t.fire("VisualAid",{element:u,hasVisual:t.hasVisual})}},selection:{getContent:function(r,u){return function(i,r,u){var v,k=(v=r,c(c({},u=void 0===u?{}:u),{format:v,get:!0,selection:!0})),f=i.fire("BeforeGetContent",k),o,s,y,h,p,w,b,e,a;return f.isDefaultPrevented()?(i.fire("GetContent",f),f.content):"text"===f.format?(e=i,n.from(e.selection.getRng()).map(function(t){var s=n.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),h=e.getBody(),c=s.map(function(n){return n.nodeName}).getOr("div").toLowerCase(),a=l.browser.isIE()&&"pre"!==c,f=e.dom.add(h,c,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},t.cloneContents()),i=ati(f,a),o=ae(f.textContent),r,u;return(e.dom.remove(f),cb(o,0)||cb(o,o.length-1))?(r=ati(s.getOr(h),a),u=r.indexOf(i),-1===u?i:(cb(r,u-1)?" ":"")+i+(cb(r,u+i.length)?" ":"")):i}).getOr("")):(f.getInner=!0,a=(s=f,y=(o=i).selection.getRng(),h=o.dom.create("body"),p=o.selection.getSel(),w=tut(o,nrt(p)),(b=s.contextual?ibi(t.fromDom(o.getBody()),w).dom:y.cloneContents())&&h.appendChild(b),o.selection.serializer.serialize(h,s)),"tree"===f.format?a:(f.content=i.selection.isCollapsed()?"":a,i.fire("GetContent",f),f.content))}(i,r,u)}},raw:{getModel:function(){return n.none()}}}}function ne(n){return w(n.plugins,"rtc")}function ubi(t){var i=t;return at(t.plugins,"rtc").bind(function(t){return n.from(t.setup)}).fold(function(){return i.rtcInstance=wti(t),n.none()},function(t){var r,u;return i.rtcInstance=(r=f(null),u=f(""),{undoManager:{beforeChange:y,add:r,undo:r,redo:r,clear:y,reset:y,hasUndo:it,hasRedo:it,transact:r,ignore:y,extra:y},formatter:{match:it,matchAll:f([]),matchNode:f(void 0),canApply:it,closest:u,apply:y,remove:y,toggle:y,formatChanged:f({unbind:y})},editor:{getContent:u,setContent:u,insertContent:y,addVisual:y},selection:{getContent:u},raw:{getModel:f(n.none())}}),n.some(function(){return t().then(function(t){function e(n){return fh(n)?n:{}}return i.rtcInstance=(r=t.undoManager,u=t.formatter,f=t.editor,o=t.selection,s=t.raw,{undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:function(n,t,i){return r.transact(i)},ignore:function(n,t){return r.ignore(t)},extra:function(n,t,i,u){return r.extra(i,u)}},formatter:{match:function(n,t,i,r){return u.match(n,e(t),r)},matchAll:u.matchAll,matchNode:u.matchNode,canApply:function(n){return u.canApply(n)},closest:function(n){return u.closest(n)},apply:function(n,t){return u.apply(n,e(t))},remove:function(n,t){return u.remove(n,e(t))},toggle:function(n,t){return u.toggle(n,e(t))},formatChanged:function(n,t,i,r,f){return u.formatChanged(t,i,r,f)}},editor:{getContent:function(n){return f.getContent(n)},setContent:function(n,t){return f.setContent(n,t)},insertContent:function(n){return f.insertContent(n)},addVisual:f.addVisual},selection:{getContent:function(n,t){return o.getContent(t)}},raw:{getModel:function(){return n.some(s.getRawModel())}}}),t.rtc.isRemote;var r,u,f,o,s})})})}function uet(n){return n.rtcInstance||wti(n)}function ct(n){var t=n.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.");}function bti(t){return 0===t.dom.length?(ni(t),n.none()):n.some(t)}function kti(n,t,r,u){n.bind(function(n){return(u?aut:ub)(n.dom,u?n.dom.length:0),t.filter(gr).map(function(t){var o=r,f=u,e=n.dom,i=t.dom,s=(f?e:i).length;f?(vut(e,i,!1,!f),o.setStart(i,s)):(vut(i,e,!1,!f),o.setEnd(i,s))})}).orThunk(function(){var n=u;return t.filter(function(n){return iv.isBookmarkNode(n.dom)}).bind(n?bl:wo).or(t).filter(gr).map(function(n){var t,r=u;eu(t=n).each(function(n){var u=t.dom;r&&ib(n,i(u,0))?ub(u,0):!r&&rb(n,i(u,u.length))&&aut(u,u.length)})})})}function fbi(i,r,u){var h,s=(h=r,c(c({format:"html"},u=void 0===u?{}:u),{set:!0,selection:!0,content:h})),f=s,o,e;if(!s.no_events){if(o=i.fire("BeforeSetContent",s),o.isDefaultPrevented())return void i.fire("SetContent",o);f=o}f.content=function(n,t){if("raw"===t.format)return t.content;var r=n.selection.getRng(),i=n.dom.getParent(r.commonAncestorContainer,n.dom.isBlock),u=i?{context:i.nodeName.toLowerCase()}:{},f=n.parser.parse(t.content,c(c({isRootContent:!0,forced_root_block:!1},u),t));return gc({validate:n.validate},n.schema).serialize(f)}(i,f);e=i.selection.getRng();!function(i,r){var u=n.from(r.firstChild).map(t.fromDom),f=n.from(r.lastChild).map(t.fromDom),e,o;i.deleteContents();i.insertNode(r);e=u.bind(wo).filter(gr).bind(bti);o=f.bind(bl).filter(gr).bind(bti);kti(e,u,i,!0);kti(o,f,i,!1);i.collapse(!1)}(e,e.createContextualFragment(f.content));i.selection.setRng(e);fv(i,e);f.no_events||i.fire("SetContent",f)}function dti(n,t,i){var r;n&&w(n,t)&&(0===(r=p(n[t],function(n){return n!==i})).length?delete n[t]:n[t]=r)}function iii(n){return n.select}function rii(n){return n&&n.ownerDocument&&ee(t.fromDom(n.ownerDocument),t.fromDom(n))}function uii(t,u,f,o){function g(n,t){return fbi(o,n,t)}function nt(){var n=v(),u=null==n?void 0:n.anchorNode,f=null==n?void 0:n.focusNode,i,r;return!n||!u||!f||hy(u)||hy(f)?!0:(i=t.createRng(),i.setStart(u,n.anchorOffset),i.collapse(!0),r=t.createRng(),r.setStart(f,n.focusOffset),r.collapse(!0),i.compareBoundaryPoints(i.START_TO_START,r)<=0)}function it(n){var t=s();t.collapse(!!n);a(t)}function v(){return u.getSelection?u.getSelection():u.document.selection}function ft(n,t){return gt(t,function(t){return b.is(t,n)})}function et(n){return b.getParents(n,null,b.getRoot())}var y,p,b,k,h,c,rt=function(n,t){return h||(h={},c={},k.on("NodeChange",function(n){var i=n.element,t=et(i),u={};r.each(h,function(n,i){ft(i,t).each(function(r){c[i]||(e(n,function(n){n(!0,{node:r,selector:i,parents:t})}),c[i]=n);u[i]=n})});r.each(c,function(n,f){u[f]||(delete c[f],r.each(n,function(n){n(!1,{node:i,selector:f,parents:t})}))})})),h[n]||(h[n]=[]),h[n].push(t),ft(n,et(k.selection.getStart())).each(function(){c[n]=h[n]}),{unbind:function(){dti(h,n,t);dti(c,n,t)}}},s=function(){function s(n,t,i){try{return t.compareBoundaryPoints(n,i)}catch(n){return-1}}var i,n,f,r=u.document,e;if(void 0!==o.bookmark&&!1===ls(o)&&(e=grt(o),e.isSome()))return e.map(function(n){return tut(o,[n])[0]}).getOr(r.createRange());try{(i=v())&&!hy(i.anchorNode)&&(n=0<i.rangeCount?i.getRangeAt(0):(i.createRange?i:r).createRange(),n=tut(o,[n])[0])}catch(s){}return(n=n||(r.createRange?r.createRange():r.body.createTextRange())).setStart&&9===n.startContainer.nodeType&&n.collapsed&&(f=t.getRoot(),n.setStart(f,0),n.setEnd(f,0)),y&&p&&(0===s(n.START_TO_START,n,y)&&0===s(n.END_TO_END,n,y)?n=p:p=y=null),n},a=function(n,t){var r,u,f,i;if((u=n)&&(iii(u)||rii(u.startContainer)&&rii(u.endContainer)))if(f=iii(n)?n:null,f){p=null;try{f.select()}catch(n){}}else{if(i=v(),n=o.fire("SetSelectionRange",{range:n,forward:t}).range,i){p=n;try{i.removeAllRanges();i.addRange(n)}catch(n){}!1===t&&i.extend&&(i.collapse(n.endContainer,n.endOffset),i.extend(n.startContainer,n.startOffset));y=0<i.rangeCount?i.getRangeAt(0):null}n.collapsed||n.startContainer!==n.endContainer||!i.setBaseAndExtent||l.ie||n.endOffset-n.startOffset<2&&n.startContainer.hasChildNodes()&&(r=n.startContainer.childNodes[n.startOffset])&&"IMG"===r.tagName&&(i.setBaseAndExtent(n.startContainer,n.startOffset,n.endContainer,n.endOffset),i.anchorNode===n.startContainer&&i.focusNode===n.endContainer||i.setBaseAndExtent(r,0,r,1));o.fire("AfterSetSelectionRange",{range:n,forward:t})}},w={bookmarkManager:null,controlSelection:null,dom:b=t,win:u,serializer:f,editor:k=o,collapse:it,setCursorLocation:function(n,i){var r=t.createRng();tt(n)&&tt(i)?(r.setStart(n,i),r.setEnd(n,i),a(r),it(!1)):(irt(t,r,o.getBody(),!0),a(r))},getContent:function(n){return i=(t=void 0===(t=n)?{}:t).format||"html",r=t,ct(o).selection.getContent(i,r);var t,i,r},setContent:g,getBookmark:function(n,t){return d.getBookmark(n,t)},moveToBookmark:function(n){return d.moveToBookmark(n)},select:function(i,r){var u=t,f=r;return n.from(i).map(function(n){var i=u.nodeIndex(n),t=u.createRng();return t.setStart(n.parentNode,i),t.setEnd(n.parentNode,i+1),f&&(irt(u,t,n,!0),irt(u,t,n,!1)),t}).each(a),i},isCollapsed:function(){var n=s(),t=v();return!(!n||n.item)&&(n.compareEndPoints?0===n.compareEndPoints("StartToEnd",n):!t||n.collapsed)},isForward:nt,setNode:function(n){return g(t.getOuterHTML(n)),n},getNode:function(){return function(n,t){if(!t)return n;var i=t.startContainer,r=t.endContainer,f=t.startOffset,e=t.endOffset,u=t.commonAncestorContainer;return!t.collapsed&&(i===r&&e-f<2&&i.hasChildNodes()&&(u=i.childNodes[f]),3===i.nodeType&&3===r.nodeType&&(i=i.length===f?dkt(i.nextSibling,!0):i.parentNode,r=0===e?dkt(r.previousSibling,!1):r.parentNode,i&&i===r))?i:u&&3===u.nodeType?u.parentNode:u}(o.getBody(),s())},getSel:v,setRng:a,getRng:s,getStart:function(n){return bkt(o.getBody(),s(),n)},getEnd:function(n){return kkt(o.getBody(),s(),n)},getSelectedBlocks:function(n,i){return function(n,t,i,r){var f=[],u=n.getRoot(),e,o;if(i=n.getParent(i||bkt(u,t,t.collapsed),n.isBlock),r=n.getParent(r||kkt(u,t,t.collapsed),n.isBlock),i&&i!==u&&f.push(i),i&&r&&i!==r)for(o=new yt(i,u);(e=o.next())&&e!==r;)n.isBlock(e)&&f.push(e);return r&&i!==r&&r!==u&&f.push(r),f}(t,s(),n,i)},normalize:function(){var n=s(),i;return 1<nrt(v()).length||!hw(o)?n:(i=aw(t,n),i.each(function(n){a(n,nt())}),i.getOr(n))},selectorChanged:function(n,t){return rt(n,t),w},selectorChangedWithUnbind:rt,getScrollContainer:function(){for(var i,n=t.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){i=n;break}n=n.parentNode}return i},scrollIntoView:function(n,t){tt(n)?(o.inline?ayi:yyi)(o,n,t):fv(o,s(),t)},placeCaretAt:function(n,t){return a(art(n,t,o.getDoc()))},getBoundingClientRect:function(){var n=s();return n.collapsed?i.fromRangeStart(n).getClientRects()[0]:n.getBoundingClientRect()},destroy:function(){u=y=p=null;ut.destroy()}},d=iv(w),ut=pbt(w,o);return w.bookmarkManager=d,w.controlSelection=ut,w}function sbi(n,t){var i,f,u,o,s=yn();t.convert_fonts_to_spans&&(f=n,u=s,o=r.explode(t.font_size_legacy_values),f.addNodeFilter("font",function(n){e(n,function(n){var i,t=u.parse(n.attr("style")),r=n.attr("color"),f=n.attr("face"),s=n.attr("size");r&&(t.color=r);f&&(t["font-family"]=f);s&&(t["font-size"]=o[parseInt(n.attr("size"),10)-1]);n.name="span";n.attr("style",u.serialize(t));i=n;e(["color","face","size"],function(n){i.attr(n,null)})})}));i=s;n.addNodeFilter("strike",function(n){e(n,function(n){var t=i.parse(n.attr("style"));t["text-decoration"]="line-through";n.name="span";n.attr("style",i.serialize(t))})})}function het(n){var t,i=decodeURIComponent(n).split(","),r=/data:([^;]+)/.exec(i[0]);return{type:t=r?r[1]:t,data:i[1]}}function fii(t,i){var f,u,r;try{f=atob(i)}catch(t){return n.none()}for(u=new Uint8Array(f.length),r=0;r<u.length;r++)u[r]=f.charCodeAt(r);return n.some(new Blob([u],{type:t}))}function eii(n){return 0===n.indexOf("blob:")?(t=n,new ri(function(n,i){function u(){i("Cannot convert "+t+" to Blob. Resource might not exist or is inaccessible.")}try{var r=new XMLHttpRequest;r.open("GET",t,!0);r.responseType="blob";r.onload=function(){200===r.status?n(r.response):u()};r.onerror=u;r.send()}catch(n){u()}})):0===n.indexOf("data:")?(i=n,new ri(function(n){var t=het(i);fii(t.type,t.data).fold(function(){return n(new Blob([]))},n)})):null;var t,i}function cet(n){return(n||"blobid")+wbi++}function hbi(n,t){var i={};return{findAll:function(r,u){u=u||lt;var f=ut(p(r?bu(r.getElementsByTagName("img")):[],function(t){var i=t.src;return l.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&i&&i!==l.transparentSrc&&(0===i.indexOf("blob:")?!n.isUploaded(i)&&u(t):0===i.indexOf("data:")&&u(t))}),function(n){if(void 0!==i[n.src])return new ri(function(t){i[n.src].then(function(i){return"string"==typeof i?i:void t({image:n,blobInfo:i.blobInfo})})});var r=new ri(function(i,r){var e,f,o,h,c,l,a,s,u;e=t;o=i;h=r;0!==(f=n).src.indexOf("blob:")?(l=(c=het(f.src)).data,a=c.type,s=l,(u=e.getByData(s,a))?o({image:f,blobInfo:u}):eii(f.src).then(function(n){u=e.create(cet(),n,s);e.add(u);o({image:f,blobInfo:u})},function(n){h(n)})):(u=e.getByUri(f.src))?o({image:f,blobInfo:u}):eii(f.src).then(function(n){var t=n;new ri(function(n){var i=new FileReader;i.onloadend=function(){n(i.result)};i.readAsDataURL(t)}).then(function(t){s=het(t).data;u=e.create(cet(),n,s);e.add(u);o({image:f,blobInfo:u})})},function(n){h(n)})}).then(function(n){return delete i[n.image.src],n}).catch(function(t){return delete i[n.src],t});return i[n.src]=r});return ri.all(f)}}}function oii(n,t,i,r){(n.padd_empty_with_br||t.insert)&&i[r.name]?r.empty().append(new ru("br",1)).shortEnded=!0:r.empty().append(new ru("#text",3)).value=ir}function hv(n,t,i,r){return r.isEmpty(t,i,function(t){return(i=n.getElementRule(t.name))&&i.paddEmpty;var i})}function cbi(t,i){function h(t){var r,i,u=t.attr("src");(r=t).attr("src")===l.transparentSrc||tt(r.attr("data-mce-placeholder"))||tt(t.attr("data-mce-bogus"))||((i=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(u))?n.some({type:i[1],data:decodeURIComponent(i[2])}):n.none()).filter(function(){return function(n,t){if(t.images_dataimg_filter){var i=new Image;return i.src=n.attr("src"),et(n.attributes.map,function(n,t){i.setAttribute(t,n)}),t.images_dataimg_filter(i)}return!0}(t,s)}).bind(function(t){var r=t.type,i=t.data;return n.from(f.getByData(i,r)).orThunk(function(){return fii(r,i).map(function(n){var t=f.create(cet(),n,i);return f.add(t),t})})}).each(function(n){t.attr("src",n.blobUri())})}var o,s,f,u=t.schema;i.remove_trailing_brs&&t.addNodeFilter("br",function(n,t,f){var c,o,e,h,s,v,a,y,p=n.length,l=r.extend({},u.getBlockElements()),w=u.getNonEmptyElements(),b=u.getWhiteSpaceElements();for(l.body=1,c=0;c<p;c++)if(e=(o=n[c]).parent,l[o.parent.name]&&o===e.lastChild){for(s=o.prev;s;){if("span"!==(v=s.name)||"bookmark"!==s.attr("data-mce-type")){"br"===v&&(o=null);break}s=s.prev}o&&(o.remove(),hv(u,w,b,e)&&(a=u.getElementRule(e.name))&&(a.removeEmpty?e.remove():a.paddEmpty&&oii(i,f,l,e)))}else{for(h=o;e&&e.firstChild===h&&e.lastChild===h&&!l[(h=e).name];)e=e.parent;h===e&&!0!==i.padd_empty_with_br&&((y=new ru("#text",3)).value=ir,o.replace(y))}});t.addAttributeFilter("href",function(n){var f,t,e=n.length,u;if(!i.allow_unsafe_link_target)for(;e--;)u=n[e],"a"===u.name&&"_blank"===u.attr("target")&&u.attr("rel",(t=void 0,t=(f=u.attr("rel"))?r.trim(f):"",/\b(noopener)\b/g.test(t)?t:t.split(" ").filter(function(n){return 0<n.length}).concat(["noopener"]).sort().join(" ")))});i.allow_html_in_named_anchor||t.addAttributeFilter("id,name",function(n){for(var i,r,u,t,f=n.length;f--;)if("a"===(t=n[f]).name&&t.firstChild&&!t.attr("href"))for(u=t.parent,i=t.lastChild;r=i.prev,u.insert(i,t),i=r;);});i.fix_list_elements&&t.addNodeFilter("ul,ol",function(n){for(var i,t,r,u=n.length;u--;)"ul"!==(r=(t=n[u]).parent).name&&"ol"!==r.name||(t.prev&&"li"===t.prev.name?t.prev.append(t):((i=new ru("li",1)).attr("style","list-style-type: none"),t.wrap(i)))});i.validate&&u.getValidClasses()&&t.addAttributeFilter("class",function(n){for(var f=u.getValidClasses(),e=n.length;e--;){for(var o=n[e],c=o.attr("class").split(" "),t="",s=0;s<c.length;s++){var h=c[s],r=!1,i=f["*"];i&&i[h]&&(r=!0);i=f[o.name];(r=!(r||!i||!i[h])||r)&&(t&&(t+=" "),t+=h)}t.length||(t=null);o.attr("class",t)}});o=t;(f=(s=i).blob_cache)&&o.addAttributeFilter("src",function(n){return e(n,h)})}function aet(n,t){function e(n){var o=n.name,s,t,e;for((o in r)&&((t=u[o])?t.push(n):u[o]=[n]),s=i.length;s--;)e=i[s].name,e in n.attributes.map&&((t=f[e])?t.push(n):f[e]=[n]);return n}var o;void 0===t&&(t=le());var r={},i=[],u={},f={};return(n=n||{}).validate=!("validate"in n)||n.validate,n.root_name=n.root_name||"body",o={schema:t,addAttributeFilter:function(n,t){bii(kii(n),function(n){for(var r=0;r<i.length;r++)if(i[r].name===n)return void i[r].callbacks.push(t);i.push({name:n,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(i)},addNodeFilter:function(n,t){bii(kii(n),function(n){var i=r[n];i||(r[n]=i=[]);i.push(t)})},getNodeFilters:function(){var n,t=[];for(n in r)w(r,n)&&t.push({name:n,callbacks:r[n]});return t},filterNode:e,parse:function(o,s){function rt(n){for(var u,r,e,f=t.getBlockElements(),i=n.prev;i&&3===i.type;){if(u=i.value.replace(ot,""),0<u.length)return i.value=u,0;if(r=i.next,r){if(3===r.type&&r.value.length){i=i.prev;continue}if(!f[r.name]&&"script"!==r.name&&"style"!==r.name){i=i.prev;continue}}e=i.prev;i.remove();i=e}}function y(n,t){var f,i=new ru(n,t);return n in r&&((f=u[n])?f.push(i):u[n]=[i]),i}var a,v,nt,c,st,l,d,h,it=[];s=s||{};u={};f={};var p=bbi(wii("script,style,head,html,body,title,meta,param"),t.getBlockElements()),ht=t.getNonEmptyElements(),ct=t.children,tt=n.validate,ut=("forced_root_block"in s?s:n).forced_root_block,ft=!1===ut?"":!0===ut?"p":ut,b=t.getWhiteSpaceElements(),et=/^[ \t\r\n]+/,ot=/[ \t\r\n]+$/,at=/[ \t\r\n]+/g,lt=/^[ \t\r\n]+$/,k=w(b,s.context)||w(b,n.root_name),vt=gw({validate:tt,document:n.document,allow_html_data_urls:n.allow_html_data_urls,allow_svg_data_urls:n.allow_svg_data_urls,allow_script_urls:n.allow_script_urls,allow_conditional_comments:n.allow_conditional_comments,preserve_cdata:n.preserve_cdata,self_closing_elements:function(n){var t,i={};for(t in n)"li"!==t&&"p"!==t&&(i[t]=n[t]);return i}(t.getSelfClosingElements()),cdata:function(n){h.append(y("#cdata",4)).value=n},text:function(n,t){var r,i;k||(n=n.replace(at," "),(i=h.lastChild)&&(w(p,i.name)||"br"===i.name)&&(n=n.replace(et,"")));0!==n.length&&((r=y("#text",3)).raw=!!t,h.append(r).value=n)},comment:function(n){h.append(y("#comment",8)).value=n},pi:function(n,t){h.append(y(n,7)).value=t;rt(h)},doctype:function(n){h.append(y("#doctype",10)).value=n;rt(h)},start:function(n,r,u){var a=tt?t.getElementRule(n):{},e,s,c,o;if(a){for(e=y(a.outputName||n,1),e.attributes=r,e.shortEnded=u,h.append(e),s=ct[h.name],s&&ct[e.name]&&!s[e.name]&&it.push(e),c=i.length;c--;)o=i[c].name,o in r.map&&((l=f[o])?l.push(e):f[o]=[e]);p[n]&&rt(e);u||(h=e);!k&&b[n]&&(k=!0)}},end:function(i){var r,u,f,o,c,e=tt?t.getElementRule(i):{};if(e){if(p[i]&&!k){if((r=h.firstChild)&&3===r.type)if(0<(u=r.value.replace(et,"")).length)r.value=u,r=r.next;else for(f=r.next,r.remove(),r=f;r&&3===r.type;)u=r.value,f=r.next,0!==u.length&&!lt.test(u)||(r.remove(),r=f),r=f;if((r=h.lastChild)&&3===r.type)if(0<(u=r.value.replace(ot,"")).length)r.value=u,r=r.prev;else for(f=r.prev,r.remove(),r=f;r&&3===r.type;)u=r.value,f=r.prev,0!==u.length&&!lt.test(u)||(r.remove(),r=f),r=f}if(k&&b[i]&&(k=!1),e.removeEmpty&&hv(t,ht,b,h))return o=h.parent,p[h.name]?h.empty().remove():h.unwrap(),void(h=o);e.paddEmpty&&(pii(c=h,"#text")&&c.firstChild.value===ir||hv(t,ht,b,h))&&oii(n,s,p,h);h=h.parent}}},t),g=h=new ru(s.context||n.root_name,11);if(vt.parse(o,s.format),tt&&it.length&&(s.context?s.invalid=!0:function(n){for(var r,f,u,c,o,s,b,k=wii("tr,td,th,tbody,thead,tfoot,table"),y=t.getNonEmptyElements(),p=t.getWhiteSpaceElements(),w=t.getTextBlockElements(),d=t.getSpecialElements(),a=function(n,i){var r,u,f;if(void 0===i&&(i=n.parent),d[n.name])n.empty().remove();else{for(r=0,u=n.children();r<u.length;r++)f=u[r],t.isValidChild(i.name,f.name)||a(f,i);n.unwrap()}},v=0;v<n.length;v++){var l,i=n[v],u=void 0,h=void 0;if(i.parent&&!i.fixed)if(w[i.name]&&"li"===i.parent.name){for(r=i.next;r&&w[r.name];)r.name="li",r.fixed=!0,i.parent.insert(r,i.parent),r=r.next;i.unwrap()}else{for(f=[i],u=i.parent;u&&!t.isValidChild(u.name,i.name)&&!k[u.name];u=u.parent)f.push(u);if(u&&1<f.length)if(t.isValidChild(u.name,i.name)){for(f.reverse(),c=l=e(f[0].clone()),o=0;o<f.length-1;o++){for(t.isValidChild(c.name,f[o].name)?(h=e(f[o].clone()),c.append(h)):h=c,s=f[o].firstChild;s&&s!==f[o+1];)b=s.next,h.append(s),s=b;c=h}hv(t,y,p,l)?u.insert(i,f[0],!0):(u.insert(l,f[0],!0),u.insert(i,l));u=f[0];(hv(t,y,p,u)||pii(u,"br"))&&u.empty().remove()}else a(i);else i.parent&&("li"!==i.name?t.isValidChild(i.parent.name,"div")&&t.isValidChild("div",i.name)?i.wrap(e(new ru("div",1))):a(i):!(r=i.prev)||"ul"!==r.name&&"ol"!==r.name?!(r=i.next)||"ul"!==r.name&&"ol"!==r.name?i.wrap(e(new ru("ul",1))):r.insert(i,r.firstChild,!0):r.append(i))}}}(it)),ft&&("body"===g.name||s.isRootContent)&&function(){function u(n){n&&((i=n.firstChild)&&3===i.type&&(i.value=i.value.replace(et,"")),(i=n.lastChild)&&3===i.type&&(i.value=i.value.replace(ot,"")))}var i=g.firstChild,r=null,f;if(t.isValidChild(g.name,ft.toLowerCase())){for(;i;)f=i.next,3===i.type||1===i.type&&"p"!==i.name&&!p[i.name]&&!i.attr("data-mce-type")?(r||((r=y(ft,1)).attr(n.forced_root_block_attrs),g.insert(r,i)),r.append(i)):(u(r),r=null),i=f;u(r)}}(),!s.invalid){for(d in u)if(w(u,d)){for(l=r[d],c=(a=u[d]).length;c--;)a[c].parent||a.splice(c,1);for(v=0,nt=l.length;v<nt;v++)l[v](a,d,s)}for(v=0,nt=i.length;v<nt;v++)if((l=i[v]).name in f){for(c=(a=f[l.name]).length;c--;)a[c].parent||a.splice(c,1);for(c=0,st=l.callbacks.length;c<st;c++)l.callbacks[c](a,l.name,s)}}return g}},cbi(o,n),n.inline_styles&&sbi(o,n),o}function lbi(n,t,i){-1===r.inArray(t,i)&&(n.addAttributeFilter(i,function(n,t){for(var i=n.length;i--;)n[i].attr(t,null)}),t.push(i))}function abi(i,o){var y=["data-mce-selected"],p=o&&o.dom?o.dom:d.DOM,l=o&&o.schema?o.schema:le(i);i.entity_encoding=i.entity_encoding||"named";i.remove_trailing_brs=!("remove_trailing_brs"in i)||i.remove_trailing_brs;var s,h=aet(i,l),a=i,v=p;return(s=h).addAttributeFilter("data-mce-tabindex",function(n,t){for(var i,r=n.length;r--;)i=n[r],i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(t,null)}),s.addAttributeFilter("src,href,style",function(n,t){for(var r,i,u="data-mce-"+t,f=a.url_converter,o=a.url_converter_scope,e=n.length;e--;)r=n[e],i=r.attr(u),void 0!==i?(r.attr(t,0<i.length?i:null),r.attr(u,null)):(i=r.attr(t),"style"===t?i=v.serializeStyle(v.parseStyle(i),r.name):f&&(i=f.call(o,i,t,r.name)),r.attr(t,0<i.length?i:null))}),s.addAttributeFilter("class",function(n){for(var r,t,i=n.length;i--;)t=n[i],t.attr("class")&&(r=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<r.length?r:null))}),s.addAttributeFilter("data-mce-type",function(t,i,r){for(var u,f=t.length;f--;)u=t[f],"bookmark"!==u.attr("data-mce-type")||r.cleanup||(n.from(u.firstChild).exists(function(n){return!tp(n.value)})?u.unwrap():u.remove())}),s.addNodeFilter("noscript",function(n){for(var t,i=n.length;i--;)t=n[i].firstChild,t&&(t.value=ve.decode(t.value))}),s.addNodeFilter("script,style",function(n,t){for(var e,i,r,u=function(n){return n.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},f=n.length;f--;)i=n[f],r=i.firstChild?i.firstChild.value:"","script"===t?((e=i.attr("type"))&&i.attr("type","mce-no/type"===e?null:e.replace(/^mce\-/,"")),"xhtml"===a.element_format&&0<r.length&&(i.firstChild.value="// <![CDATA[\n"+u(r)+"\n// ]\]>")):"xhtml"===a.element_format&&0<r.length&&(i.firstChild.value="<!--\n"+u(r)+"\n-->")}),s.addNodeFilter("#comment",function(n){for(var t,i=n.length;i--;)t=n[i],a.preserve_cdata&&0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=v.decode(t.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),s.addNodeFilter("xml:namespace,input",function(n,t){for(var i,r=n.length;r--;)i=n[r],7===i.type?i.remove():1===i.type&&("input"!==t||i.attr("type")||i.attr("type","text"))}),s.addAttributeFilter("data-mce-type",function(n){e(n,function(n){"format-caret"===n.attr("data-mce-type")&&(n.isEmpty(s.schema.getNonEmptyElements())?n.remove():n.unwrap())})}),s.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(n,t){for(var i=n.length;i--;)n[i].attr(t,null)}),{schema:l,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:function(n,u){function gt(n){return n&&"br"===n.name}var a,ut,y,ft,et,w,ot,b,st,k,d,g,ht,ct,lt,nt,e,at,vt,v,f,yt,pt,tt,it,wt,bt,kt,rt,s=c({format:"html"},u=void 0===u?{}:u),ni=(a=(g=n,pt=ht=s,(d=o)&&d.hasEventListeners("PreProcess")&&!pt.no_events?(lt=ht,v=(ct=d).dom,f=g.cloneNode(!0),(yt=document.implementation).createHTMLDocument&&(e=yt.createHTMLDocument(""),r.each("BODY"===f.nodeName?f.childNodes:[f],function(n){e.body.appendChild(e.importNode(n,!0))}),f="BODY"!==f.nodeName?e.body.firstChild:e.body,nt=v.doc,v.doc=e),at=ct,vt=c(c({},lt),{node:f}),at.fire("PreProcess",vt),nt&&(v.doc=nt),f):g),y=ae((ut=s).getInner?a.innerHTML:p.getOuterHTML(a)),ut.selection||np(t.fromDom(a))?y:r.trim(y)),dt=(ft=h,et=ni,ot=(w=s).selection?c({forced_root_block:!1},w):w,b=ft.parse(et,ot),!gt(k=b.lastChild)||gt(st=k.prev)&&(k.remove(),st.remove()),b);return"tree"===s.format?dt:(tt=o,it=s,wt=dt,rt=gc(i,l).serialize(wt),it.no_events||!tt?rt:(bt=tt,kt=c(c({},it),{content:rt}),bt.fire("PostProcess",kt).content))},addRules:l.addValidElements,setRules:l.setValidElements,addTempAttr:u(lbi,h,y),getTempAttrs:f(y),getNodeFilters:h.getNodeFilters,getAttributeFilters:h.getAttributeFilters}}function sii(n,t){var i=abi(n,t);return{schema:i.schema,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:i.serialize,addRules:i.addRules,setRules:i.setRules,addTempAttr:i.addTempAttr,getTempAttrs:i.getTempAttrs,getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters}}function vet(n,t,i){return r=i=void 0===i?{}:i,uet(n).editor.setContent(t,r);var r}function yb(t){return n.from(t).each(function(n){return n.destroy()})}function vbi(n,t){function b(n){return w(h,n)}var i,u,f,e,o,s,h,c=(i=n,u=p(kbi,function(n){return w(i,n)}),!1!==(f=i.forced_root_block)&&""!==f||u.push("forced_root_block (false only)"),tg(u)),l=(h=r.makeMap(t.plugins," "),tg(fe(fe([],p(dbi,b),!0),oh(gbi,function(n){return b(n)?[n+" (moving to premium)"]:[]}),!0))),a=0<l.length,v=0<c.length,y="mobile"===t.theme;(a||v||y)&&(e=y?"\n\nThemes:\n- mobile":"",o=a?"\n\nPlugins:\n- "+l.join("\n- "):"",s=v?"\n\nSettings:\n- "+c.join("\n- "):"",console.warn("The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information."+e+o+s))}function cv(n){var t=br(n)?n.join(" "):n;return p(ut(ht(t)?t.split(" "):[],cg),function(n){return 0<n.length})}function pb(n,t){return w(n.sections(),t)}function hii(n,t){return at(n,"toolbar_mode").orThunk(function(){return at(n,"toolbar_drawer").map(function(n){return!1===n?"wrap":n})}).getOr(t)}function ybi(n,t,i,f){var s,h,c,e,a,o,v,y,d=cv(i.forced_plugins),w=cv(f.plugins),b=pb(s=t,"mobile")?s.sections().mobile:{},g=b.plugins?cv(b.plugins):w,k=(h=(e=t,a=w,o=g,(c=n)&&(y=(v=e).sections(),pb(v,"mobile")&&"mobile"===y.mobile.theme)?p(o,u(dt,iki)):c&&pb(e,"mobile")?o:a),[].concat(cv(d)).concat(cv(h)));if(l.browser.isIE()&&dt(k,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return r.extend(f,{plugins:k.join(" ")})}function pbi(n,t,i,u,e){var l,a,s,h,v,y,p,w,b=n?{mobile:(l=t,a={resize:!1,toolbar_mode:hii(e.mobile||{},"scrolling"),toolbar_sticky:!1},c(c(c({},nri),a),l?{menubar:!1}:{}))}:{},o=(v=["mobile"],rht(dii(b,e),function(n,t){return dt(v,t)},rg(y={}),rg(p={})),{sections:f((w={t:y,f:p}).t),settings:f(w.f)}),k=r.extend(i,u,o.settings(),n&&pb(o,"mobile")?function(n){void 0===n&&(n={});var t=at(o.sections(),"mobile").getOr({});return r.extend({},n,t)}():{},{validate:!0,external_plugins:(s=u,h=o.settings().external_plugins||{},s&&s.external_plugins?r.extend({},s.external_plugins,h):h)});return ybi(n,o,u,k)}function ys(t,i,r){return n.from(i.settings[r]).filter(t)}function cii(n,t){return t.dom[n]}function lii(n,t){return parseInt(wf(t,n),10)}function aii(n,i,r){var f,u,o,s,e,h,c=t.fromDom(n.getBody()),l=n.inline?c:t.fromDom(ah(c).dom.documentElement),a=(f=n.inline,o=i,s=r,e=(u=l).dom.getBoundingClientRect(),{x:o-(f?e.left+u.dom.clientLeft+eki(u):0),y:s-(f?e.top+u.dom.clientTop+fki(u):0)}),v=a.x,y=a.y,p=rki(h=l),w=uki(h);return 0<=v&&0<=y&&v<=p&&y<=w}function vii(i){function u(){function n(){throw new Error("Theme did not provide a NotificationManager implementation.");}var t=i.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():{open:n,close:n,reposition:n,getArgs:n}}function h(){return n.from(r[0])}function o(){0<r.length&&u().reposition(r)}function l(n){ty(r,function(t){return t===n}).each(function(n){r.splice(n,1)})}function a(f,e){if(void 0===e&&(e=!0),!i.removed&&(a=(s=i).inline?s.getBody():s.getContentAreaContainer(),n.from(a).map(t.fromDom).map(na).getOr(!1)))return e&&i.fire("BeforeOpenNotification",{notification:f}),gt(r,function(n){return!((t=u().getArgs(n)).type!==f.type||t.text!==f.text||t.progressBar||t.timeout||f.progressBar||f.timeout);var t}).getOrThunk(function(){i.editorManager.setActive(i);var n=u().open(f,function(){l(n);o();h().fold(function(){return i.focus()},function(n){return t.fromDom(n.getEl()).dom.focus()})});return r.push(n),o(),i.fire("OpenNotification",{notification:c({},n)}),n});var s,a}var s,r=[],v=f(r);return(s=i).on("SkinLoaded",function(){var n=s.getParam("service_message");n&&a({text:n,type:"warning",timeout:0},!1);o()}),s.on("show ResizeEditor ResizeWindow NodeChange",function(){ui.requestAnimationFrame(o)}),s.on("remove",function(){e(r.slice(),function(n){u().close(n)})}),{open:a,close:function(){h().each(function(n){u().close(n);l(n);o()})},getNotifications:v}}function tri(t){function i(){function n(){throw new Error("Theme did not provide a WindowManager implementation.");}var i=t.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():{open:n,openUrl:n,alert:n,confirm:n,close:n,getParams:n,setParams:n}}function f(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t)return t.apply(n,r)}}function u(n){t.fire("CloseWindow",{dialog:n});0===(r=p(r,function(t){return t!==n})).length&&t.focus()}function o(n){t.editorManager.setActive(t);ww(t);var i,u=n();return i=u,r.push(i),t.fire("OpenWindow",{dialog:i}),u}var r=[];return t.on("remove",function(){e(r,function(n){i().close(n)})}),{open:function(n,t){return o(function(){return i().open(n,t,u)})},openUrl:function(n){return o(function(){return i().openUrl(n,u)})},alert:function(n,t,r){var u=i();u.alert(n,f(r||u,t))},confirm:function(n,t,r){var u=i();u.confirm(n,f(r||u,t))},close:function(){n.from(r[r.length-1]).each(function(n){i().close(n);u(n)})}}}function iri(n,t){n.notificationManager.open({type:"error",text:t})}function db(n,t){n._skinLoaded?iri(n,t):n.on("SkinLoaded",function(){iri(n,t)})}function pet(n,t,i){vbt(n,t,{message:i});console.error(i)}function wet(n,t,i){return i?"Failed to load "+n+": "+i+" from url "+t:"Failed to load "+n+" url: "+t}function bet(n,t,i){pet(n,"PluginLoadError",wet("plugin",t,i))}function oki(n){var i,t;n.contentCSS=n.contentCSS.concat(yui(n,(t=(i=n).getParam("content_css"),ht(t)?ut(t.split(","),cg):br(t)?t:!1===t||i.inline?[]:["default"])),yui(n,upt(n)))}function rri(){function i(n,t){return{status:n,resultUri:t}}function t(t){return t in n}var n={};return{hasBlobUri:t,getResultUri:function(t){var i=n[t];return i?i.resultUri:null},isPending:function(i){return!!t(i)&&1===n[i].status},isUploaded:function(i){return!!t(i)&&2===n[i].status},markPending:function(t){n[t]=i(1,null)},markUploaded:function(t,r){n[t]=i(2,r)},removeFailed:function(t){delete n[t]},destroy:function(){n={}}}}function uri(n){function t(){return Math.round(4294967295*Math.random()).toString(36)}return n+hdi+++("s"+(new Date).getTime().toString(36)+t()+t()+t())}function ski(){function t(t){return gt(n,t).getOrUndefined()}function i(n){if(!n.blob||!n.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var i=n.id||uri("blobid"),r=n.name||i,t=n.blob;return{id:f(i),name:f(r),filename:f(n.filename||r+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[t.type.toLowerCase()]||"dat")),blob:f(t),base64:f(n.base64),blobUri:f(n.blobUri||URL.createObjectURL(t)),uri:f(n.uri)}}function r(n){return t(function(t){return t.id()===n})}var n=[];return{create:function(n,t,r,u,f){if(ht(n))return i({id:n,name:u,filename:f,blob:t,base64:r});if(fh(n))return i(n);throw new Error("Unknown input type");},add:function(t){r(t.id())||n.push(t)},get:r,getByUri:function(n){return t(function(t){return t.blobUri()===n})},getByData:function(n,i){return t(function(t){return t.base64()===n&&t.blob().type===i})},findFirst:t,removeByUri:function(t){n=p(n,function(n){return n.blobUri()!==t||void URL.revokeObjectURL(n.blobUri())})},destroy:function(){e(n,function(n){URL.revokeObjectURL(n.blobUri())});n=[]}}}function hki(t,i){function e(n,t,r,u){var f=new XMLHttpRequest,e;f.open("POST",i.url);f.withCredentials=i.credentials;f.upload.onprogress=function(n){u(n.loaded/n.total*100)};f.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+f.status)};f.onload=function(){var n,u,e;f.status<200||300<=f.status?r("HTTP Error: "+f.status):(n=JSON.parse(f.responseText))&&"string"==typeof n.location?t((u=i.basePath,e=n.location,u?u.replace(/\/$/,"")+"/"+e.replace(/^\//,""):e)):r("Invalid JSON: "+f.responseText)};e=new FormData;e.append("file",n.blob(),n.filename());f.send(e)}function o(n,t){return{url:t,blobInfo:n,status:!0}}function f(n,t,i){return{url:"",blobInfo:n,status:!1,error:{message:t,options:i}}}function s(n,t){r.each(u[n],function(n){n(t)});delete u[n]}var u={};return!1===ft(i.handler)&&(i.handler=e),{upload:function(h,c){return i.url||i.handler!==e?(l=h,a=c,l=r.grep(h,function(n){return!t.isUploaded(n.blobUri())}),ri.all(r.map(l,function(r){return t.isPending(r.blobUri())?(h=r.blobUri(),new ri(function(n){u[h]=u[h]||[];u[h].push(n)})):(e=r,c=i.handler,l=a,t.markPending(e.blobUri()),new ri(function(i){var r,u;try{u=function(){r&&r.close()};c(e,function(n){u();t.markUploaded(e.blobUri(),n);s(e.blobUri(),o(e,n));i(o(e,n))},function(n,r){var o=r||{};u();t.removeFailed(e.blobUri());s(e.blobUri(),f(e,n,o));i(f(e,n,o))},function(t){t<0||100<t||n.from(r).orThunk(function(){return n.from(l).map(yhi)}).each(function(n){(r=n).progressBar.value(t)})})}catch(h){i(f(e,h.message,{}))}}));var e,c,l,h}))):new ri(function(n){n([])});var l,a}}}function fri(n){return function(){return n.notificationManager.open({text:n.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}}function eri(n,t){return hki(t,{url:n.getParam("images_upload_url","","string"),basePath:n.getParam("images_upload_base_path","","string"),credentials:n.getParam("images_upload_credentials",!1,"boolean"),handler:n.getParam("images_upload_handler",null,"function")})}function cki(n){function f(t){return function(i){return n.selection?t(i):[]}}function v(n,t,i){for(var r=0;-1!==(r=n.indexOf(t,r))&&(n=n.substring(0,r)+i+n.substr(r+t.length),r+=i.length-t.length+1),-1!==r;);return n}function y(n,t,i){return n=v(n,'src="'+t+'"','src="'+i+'"'+(i===l.transparentSrc?' data-mce-placeholder="1"':"")),v(n,'data-mce-src="'+t+'"','data-mce-src="'+i+'"')}function o(t,i){e(n.undoManager.data,function(n){"fragmented"===n.type?n.fragments=ut(n.fragments,function(n){return y(n,t,i)}):n.content=y(n.content,t,i)})}function w(u){return r=r||eri(n,i),a().then(f(function(i){var s=ut(i,function(n){return n.blobInfo});return r.upload(s,fri(n)).then(f(function(r){var f=[],s=ut(r,function(r,u){var c,h,e,a,v=i[u].blobInfo,s=i[u].image;return r.status&&n.getParam("images_replace_blob_uris",!0,"boolean")?(t.removeByUri(s.src),ne(n)||(h=s,e=r.url,a=n.convertURL(e,"src"),o(h.src,e),n.$(h).attr({src:n.getParam("images_reuse_filename",!1,"boolean")?e+(-1===e.indexOf("?")?"?":"&")+(new Date).getTime():e,"data-mce-src":a}))):r.error&&(r.error.options.remove&&(o(s.getAttribute("src"),l.transparentSrc),f.push(s)),c=r.error.message,db(n,lu.translate(["Failed to upload image: {0}",c]))),{element:s,status:r.status,uploadUri:r.url,blobInfo:v}});return 0<s.length&&nt.fireIfChanged(),0<f.length&&(ne(n)?console.error("Removing images on failed uploads is currently unsupported for RTC"):n.undoManager.transact(function(){e(f,function(i){n.dom.remove(i);t.removeByUri(i.src)})})),u&&u(s),s}))}))}function b(t){if(gyt(n))return w(t)}function g(t){return!1!==al(d,function(n){return n(t)})&&(0!==t.getAttribute("src").indexOf("data:")||n.getParam("images_dataimg_filter",lt,"function")(t))}function k(r){return r.replace(/src="(blob:[^"]+)"/g,function(r,u){var e=i.getResultUri(u),f;return e?'src="'+e+'"':(f=(f=t.getByUri(u))||fu(n.editorManager.get(),function(n,t){return n||t.editorUpload&&t.editorUpload.blobCache.getByUri(u)},null),f?'src="data:'+f.blob().type+";base64,"+f.base64()+'"':r)})}var r,s,u,h,t=ski(),i=rri(),d=[],nt=(h=hi(null),(u=n).on("change AddUndo",function(n){h.set(c({},n.level))}),{fireIfChanged:function(){var n=u.undoManager.data;vo(n).filter(function(n){return!lb(h.get(),n)}).each(function(t){u.setDirty(!0);u.fire("change",{level:t,lastLevel:ig(n,n.length-2).getOrNull()})})}}),a=function(){return(s=s||hbi(i,t)).findAll(n.getBody(),g).then(f(function(t){return t=p(t,function(t){return"string"!=typeof t||void db(n,t)}),ne(n)||e(t,function(n){o(n.image.src,n.blobInfo.blobUri());n.image.src=n.blobInfo.blobUri();n.image.removeAttribute("data-mce-src")}),t}))};return n.on("SetContent",function(){(gyt(n)?b:a)()}),n.on("RawSaveContent",function(n){n.content=k(n.content)}),n.on("GetContent",function(n){n.source_view||"raw"===n.format||"tree"===n.format||(n.content=k(n.content))}),n.on("PostRender",function(){n.parser.addNodeFilter("img",function(n){e(n,function(n){var r,u=n.attr("src");t.getByUri(u)||(r=i.getResultUri(u))&&n.attr("src",r)})})}),{blobCache:t,addFilter:function(n){d.push(n)},uploadImages:w,uploadImagesAuto:b,scanForImages:a,destroy:function(){t.destroy();i.destroy();s=r=null}}}function ori(n,t){function u(n){i="string"==typeof n?{name:n,classes:[],attrs:{}}:n;var t,r=li.create(i.name),u=r;return(t=i).classes.length&&li.addClass(u,t.classes.join(" ")),li.setAttribs(u,t.attrs),r}var f,i,e,s=t&&t.schema||le({}),o=function(n,t,i){var e,f,l,h,y,p,c,a=0<t.length&&t[0],w=a&&a.name,v=(h=w,y="string"!=typeof(l=n)?l.nodeName.toLowerCase():l,!(!(c=(p=s.getElementRule(y))&&p.parentsRequired)||!c.length)&&(h&&-1!==r.inArray(c,h)?h:c[0]));if(v)w===v?(f=t[0],t=t.slice(1)):f=v;else if(a)f=t[0],t=t.slice(1);else if(!i)return n;return f&&(e=u(f)).appendChild(n),i&&(e||(e=li.create("div")).appendChild(n),r.each(i,function(t){var i=u(t);e.insertBefore(i,n)})),o(e,t,f&&f.siblings)};return n&&n.length?(f=u(i=n[0]),(e=li.create("div")).appendChild(o(f,n.slice(1),i.siblings)),e):""}function lki(n){var i,t={classes:[],attrs:{}};return"*"!==(n=t.selector=r.trim(n))&&(i=n.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(n,i,u,f,e){switch(i){case"#":t.attrs.id=u;break;case".":t.classes.push(u);break;case":":-1!==r.inArray("checked disabled enabled read-only required".split(" "),u)&&(t.attrs[u]=u)}var o;return"["!==f||(o=e.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(t.attrs[o[1]]=o[2]),""})),t.name=i||"div",t}function aki(n,t){function a(n){return n.replace(/%(\w+)/g,"")}var i,c,l="",o=(c=n.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),ht(c)?c:""),v;if(""===o)return"";if("string"==typeof t){if(!(t=n.formatter.get(t)))return;t=t[0]}if("preview"in t){if(v=at(t,"preview"),ly(v,!1))return"";o=v.getOr(o)}var u,s=t.block||t.inline||"span",h=(u=t.selector)&&"string"==typeof u?(u=(u=u.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),r.map(u.split(/(?:>|\s+(?![^\[\]]+\]))/),function(n){var t=r.map(n.split(/(?:~\+|~|\+)/),lki),i=t.pop();return t.length&&(i.siblings=t),i}).reverse()):[],f=h.length?(h[0].name||(h[0].name=s),s=t.selector,ori(h,n)):ori([s],n),e=li.select(s,f)[0]||f.firstChild;return sk(t.styles,function(n,t){var i=a(n);i&&li.setStyle(e,t,i)}),sk(t.attributes,function(n,t){var i=a(n);i&&li.setAttrib(e,t,i)}),sk(t.classes,function(n){var t=a(n);li.hasClass(e,t)||li.addClass(e,t)}),n.fire("PreviewFormats"),li.setStyles(f,{position:"absolute",left:-65535}),n.getBody().appendChild(f),i=li.getStyle(n.getBody(),"fontSize",!0),i=/px$/.test(i)?parseInt(i,10):0,sk(o.split(" "),function(t){var r=li.getStyle(e,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(r)&&(r=li.getStyle(n.getBody(),t,!0),"#ffffff"===li.toHex(r).toLowerCase())||"color"===t&&"#000000"===li.toHex(r).toLowerCase())){if("font-size"===t&&/em|%$/.test(r)){if(0===i)return;r=parseFloat(r)/(/%$/.test(r)?100:1)*i+"px"}"border"===t&&r&&(l+="padding:0 2px;");l+=t+":"+r+";"}}),n.fire("AfterPreviewFormats"),li.remove(f),l}function sri(n){var s,c,o,t,i,l,f=(t={},(i=function(n,r){n&&(ht(n)?(e(r=br(r)?r:[r],function(n){tr(n.deep)&&(n.deep=!ur(n));tr(n.split)&&(n.split=!ur(n)||kt(n));tr(n.remove)&&ur(n)&&!kt(n)&&(n.remove="none");ur(n)&&kt(n)&&(n.mixed=!0,n.block_expand=!0);ht(n.classes)&&(n.classes=n.classes.split(/\s+/))}),t[n]=r):et(n,function(n,t){i(t,n)}))})((c=(s=n).dom,o={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(n){return h(n)&&n.hasAttribute("href")},onformat:function(n,t,i){r.each(i,function(t,i){c.setAttrib(n,i,t)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(n){var t;return null!==(t=null==n?void 0:n.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]},r.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(n){o[n]={block:n,remove:"all"}}),o)),i(s.getParam("formats")),{get:function(n){return tt(n)?t[n]:t},has:function(n){return w(t,n)},register:i,unregister:function(n){return n&&t[n]&&delete t[n],t}}),a=hi(null);return function(n){n.addShortcut("meta+b","","Bold");n.addShortcut("meta+i","","Italic");n.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)n.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);n.addShortcut("access+7","",["FormatBlock",!1,"p"]);n.addShortcut("access+8","",["FormatBlock",!1,"div"]);n.addShortcut("access+9","",["FormatBlock",!1,"address"])}(n),(l=n).on("mouseup keydown",function(n){var t=l,i=n.keyCode,r=t.selection,u=t.getBody();sft(t,null,!1);8!==i&&46!==i||!r.isCollapsed()||r.getStart().innerHTML!==il||sft(t,cs(u,r.getStart()));37!==i&&39!==i||sft(t,cs(u,r.getStart()))}),{get:f.get,has:f.has,register:f.register,unregister:f.unregister,apply:function(t,i,r){var u=t,f=i,e=r;ct(n).formatter.apply(u,f,e)},remove:function(t,i,r,u){var f=t,e=i,o=r,s=u;ct(n).formatter.remove(f,e,o,s)},toggle:function(t,i,r){var u=t,f=i,e=r;ct(n).formatter.toggle(u,f,e)},match:function(t,i,r,u){return f=t,e=i,o=r,s=u,ct(n).formatter.match(f,e,o,s);var f,e,o,s},closest:function(t){return i=t,ct(n).formatter.closest(i);var i},matchAll:function(t,i){return r=t,u=i,ct(n).formatter.matchAll(r,u);var r,u},matchNode:function(t,i,r,u){return f=t,e=i,o=r,s=u,ct(n).formatter.matchNode(f,e,o,s);var f,e,o,s},canApply:function(t){return i=t,ct(n).formatter.canApply(i);var i},formatChanged:function(t,i,r,u){return f=a,e=t,o=i,s=r,h=u,ct(n).formatter.formatChanged(f,e,o,s,h);var f,e,o,s,h},getCssText:u(aki,n)}}function hri(n){switch(n.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return 1;default:return}}function cri(n){function f(n){ab(i,!1,o);i.add({},n)}var h,t,i,o,s,c=ec(),e=hi(0),u=hi(0),r={data:[],typing:!1,beforeChange:function(){var t=e,i=c;ct(n).undoManager.beforeChange(t,i)},add:function(t,i){return f=r,o=u,s=e,h=c,l=t,a=i,ct(n).undoManager.add(f,o,s,h,l,a);var f,o,s,h,l,a},undo:function(){return t=r,i=e,f=u,ct(n).undoManager.undo(t,i,f);var t,i,f},redo:function(){return t=u,i=r.data,ct(n).undoManager.redo(t,i);var t,i},clear:function(){var t=r,i=u;ct(n).undoManager.clear(t,i)},reset:function(){var t=r;ct(n).undoManager.reset(t)},hasUndo:function(){return t=r,i=u,ct(n).undoManager.hasUndo(t,i);var t,i},hasRedo:function(){return t=r,i=u,ct(n).undoManager.hasRedo(t,i);var t,i},transact:function(t){return i=r,u=e,f=t,ct(n).undoManager.transact(i,u,f);var i,u,f},ignore:function(t){var i=e,r=t;ct(n).undoManager.ignore(i,r)},extra:function(t,i){var f=r,e=u,o=t,s=i;ct(n).undoManager.extra(f,e,o,s)}};return ne(n)||(i=r,o=e,s=hi(!1),(t=n).on("init",function(){i.add()}),t.on("BeforeExecCommand",function(n){hri(n.command)||(pti(i,o),i.beforeChange())}),t.on("ExecCommand",function(n){hri(n.command)||f(n)}),t.on("ObjectResizeStart cut",function(){i.beforeChange()}),t.on("SaveContent ObjectResized blur",f),t.on("dragend",f),t.on("keyup",function(n){var r=n.keyCode;n.isDefaultPrevented()||((33<=r&&r<=36||37<=r&&r<=40||45===r||n.ctrlKey)&&(f(),t.nodeChanged()),46!==r&&8!==r||t.nodeChanged(),s.get()&&i.typing&&!1===lb(net(t),i.data[0])&&(!1===t.isDirty()&&(t.setDirty(!0),t.fire("change",{level:i.data[0],lastLevel:null})),t.fire("TypingUndo"),s.set(!1),t.nodeChanged()))}),t.on("keydown",function(n){var r,t=n.keyCode;n.isDefaultPrevented()||(33<=t&&t<=36||37<=t&&t<=40||45===t?i.typing&&f(n):(r=n.ctrlKey&&!n.altKey||n.metaKey,!(t<16||20<t)||224===t||91===t||i.typing||r||(i.beforeChange(),ab(i,!0,o),i.add({},n),s.set(!0))))}),t.on("mousedown",function(n){i.typing&&f(n)}),t.on("input",function(n){n.inputType&&("insertReplacementText"===n.inputType||"insertText"===n.inputType&&null===n.data||"insertFromPaste"===n.inputType||"insertFromDrop"===n.inputType)&&f(n)}),t.on("AddUndo Undo Redo ClearUndos",function(n){n.isDefaultPrevented()||t.nodeChanged()})),(h=n).addShortcut("meta+z","","Undo"),h.addShortcut("meta+y,meta+shift+z","","Redo"),r}function lri(n){return"keydown"===n.type||"keyup"===n.type}function ari(n){var t=n.keyCode;return t===s.BACKSPACE||t===s.DELETE}function ps(n,i){return lh(t.fromDom(i),n.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string"))}function so(t,i,r){var u,f,e=(u=t,f=i,p(d.DOM.getParents(r.container(),"*",f),u));return n.from(e[e.length-1])}function yr(n,t){if(!t)return t;var r=t.container(),u=t.offset();return n?kh(r)?o(r.nextSibling)?i(r.nextSibling,0):i.after(r):hn(t)?i(r,u+1):t:kh(r)?o(r.previousSibling)?i(r.previousSibling,r.previousSibling.data.length):i.before(r):cn(t)?i(r,u-1):t}function vki(n){return eat(n)||ua(n)}function gb(i,r){return ee(i,r)?yy(r,vki,(u=i,function(n){return g(u,t.fromDom(n.dom.parentNode))})):n.none();var u}function vri(n){var i,t,r;n.dom.isEmpty(n.getBody())&&(n.setContent(""),r=(t=(i=n).getBody()).firstChild&&i.dom.isBlock(t.firstChild)?t.firstChild:t,i.selection.setCursorLocation(r,0))}function yki(n,t){return{from:n,to:t}}function ket(n,i){return gb(t.fromDom(n),t.fromDom(i.container())).map(function(n){return{block:n,position:i}})}function yri(n){var t,i=ty(t=nu(n),tf).fold(f(t),function(n){return t.slice(0,n)});return e(i,ni),i}function pri(n,t){return gt(gf(t,n).reverse(),function(n){return pt(n)}).each(ni)}function pki(n,r,u,f){if(pt(u))return as(u),wi(u.dom);0===p(sct(f),function(n){return!pt(n)}).length&&pt(r)&&ou(f,t.fromTag("br"));var o=cf(u.dom,i.before(f.dom));return e(yri(r),function(n){ou(f,n)}),pri(n,r),o}function wki(n,t,i){if(pt(i))return ni(i),pt(t)&&as(t),wi(t.dom);var r=lf(i.dom);return e(yri(t),function(n){ii(i,n)}),pri(n,t),r}function wri(n,i){ac(n,i.dom).map(function(n){return n.getNode()}).map(t.fromDom).filter(wh).each(ni)}function bri(t,i,r){return wri(!0,i),wri(!1,r),(ee(o=r,e=i)?(f=gf(e,o),n.from(f[f.length-1])):n.none()).fold(u(wki,t,i,r),u(pki,t,i,r));var e,o,f}function kri(n,t,i,r){return t?bri(n,r,i):bri(n,i,r)}function nk(r,u){var s,h,c,f,e,o,l,a=t.fromDom(r.getBody()),v=(s=a.dom,h=u,((c=r.selection.getRng()).collapsed?(e=h,o=ket(f=s,i.fromRangeStart(c)),l=o.bind(function(t){return vr(e,f,t.position).bind(function(t){return ket(f,t).map(function(t){return r=f,u=e,st((i=t).position.getNode())&&!1===pt(i.block)?ac(!1,i.block.dom).bind(function(t){return t.isEqual(i.position)?vr(u,r,t).bind(function(n){return ket(r,n)}):n.some(i)}).getOr(i):i;var r,u,i})})}),di(o,l,yki).filter(function(n){return!1===g(n.from.block,n.to.block)&&eu((i=n).from.block).bind(function(n){return eu(i.to.block).filter(function(t){return g(n,t)})}).isSome()&&!1===rt((t=n).from.block.dom)&&!1===rt(t.to.block.dom);var t,i})):n.none()).bind(function(n){return kri(a,u,n.from.block,n.to.block)}));return v.each(function(n){r.selection.setRng(n.toRange())}),v.isSome()}function dri(n,i){var r=t.fromDom(i),f=u(g,n);return ra(r,gy,f).isSome()}function bki(n){var r,e,u,s,o,f,h,c,l,a,v=t.fromDom(n.getBody()),y=n.selection.getRng();return f=y,l=cf((o=v).dom,i.fromRangeStart(f)).isNone(),a=yu(o.dom,i.fromRangeEnd(f)).isNone(),!dri(h=o,(c=f).startContainer)&&!dri(h,c.endContainer)&&l&&a?((s=n).setContent(""),s.selection.setCursorLocation(),!0):(r=v,e=n.selection,u=e.getRng(),di(gb(r,t.fromDom(u.startContainer)),gb(r,t.fromDom(u.endContainer)),function(n,t){return!1===g(n,t)&&(u.deleteContents(),kri(r,!0,n,t).each(function(n){e.setRng(n.toRange())}),!0)}).getOr(!1))}function tk(n){return!n.selection.isCollapsed()&&bki(n)}function te(t,i,r,u,f){return n.from(i._selectionOverrides.showCaret(t,r,u,f))}function fl(t,i){var r,u;return t.fire("BeforeObjectSelected",{target:i}).isDefaultPrevented()?n.none():n.some(((u=(r=i).ownerDocument.createRange()).selectNode(r),u))}function gri(t,r,u){var h=hit(1,t.getBody(),r),f=i.fromRangeStart(h),s=f.getNode(),e,o;return ka(s)?te(1,t,s,!f.isAtEnd(),!1):(e=f.getNode(!0),ka(e))?te(1,t,e,!1,!1):(o=t.dom.getParent(f.getNode(),function(n){return vdi(n)||adi(n)}),ka(o)?te(1,t,o,!1,u):n.none())}function det(n,t,i){return t.collapsed?gri(n,t,i).getOr(t):t}function kki(n){return fo(n)||nl(n)}function dki(n){return eo(n)||tl(n)}function nui(n,t,i,r,u,f){var s,e;return te(r,n,f.getNode(!u),u,!0).each(function(i){var r;t.collapsed?(r=t.cloneRange(),u?r.setEnd(i.startContainer,i.startOffset):r.setStart(i.endContainer,i.endOffset),r.deleteContents()):t.deleteContents();n.selection.setRng(i)}),s=n.dom,o(e=i)&&0===e.data.length&&s.remove(e),!0}function ik(n,t){var f=n.selection.getRng(),r;if(!o(f.commonAncestorContainer))return!1;var s=t?bt.Forwards:bt.Backwards,h=vu(n.getBody()),c=u(cit,t?h.next:h.prev),l=t?kki:dki,e=ba(s,n.getBody(),f),i=yr(t,c(e));return!i||!tw(e,i)?!1:l(i)?nui(n,f,e.getNode(),s,t,i):(r=c(i),!!(r&&l(r)&&tw(i,r))&&nui(n,f,e.getNode(),s,t,r))}function tui(i,r,u){return vr(r,i,u).bind(function(f){function y(n){return sn(t.fromDom(n))&&!ef(v,o,l)}return s=f.getNode(),gy(t.fromDom(s))||ua(t.fromDom(s))||(l=i,o=f,ppt(!(a=r),v=u).fold(function(){return ppt(a,o).fold(it,y)},y))?n.none():r&&rt(f.getNode())||!1===r&&rt(f.getNode(!0))?(h=i,c=u,e=f.getNode(!1===r),gb(t.fromDom(h),t.fromDom(c.getNode())).map(function(n){return pt(n)?pr.remove(n.dom):pr.moveToElement(e)}).orThunk(function(){return n.some(pr.moveToElement(e))})):r&&eo(u)||!1===r&&fo(u)?n.some(pr.moveToPosition(f)):n.none();var h,c,e,l,a,v,o,s})}function iui(t,i){return n.from(dc(t.getBody(),i))}function gki(r,u){var f=r.selection.getNode();return iui(r,f).filter(rt).fold(function(){return v=r.getBody(),k=hit((e=u)?1:-1,v,r.selection.getRng()),f=i.fromRangeStart(k),l=t.fromDom(v),(!1===e&&eo(f)?n.some(pr.remove(f.getNode(!0))):e&&fo(f)?n.some(pr.remove(f.getNode())):!1===e&&fo(f)&&cut(l,f)?wwi(l,f).map(function(n){return pr.remove(n.getNode())}):e&&eo(f)&&hut(l,f)?bwi(l,f).map(function(n){return pr.remove(n.getNode())}):(a=v,o=e,p=(s=f).getNode(!1===(w=o)),b=w?"after":"before",h(p)&&p.getAttribute("data-mce-caret")===b?(c=s.getNode(!1===(y=o)),(y&&rt(c.nextSibling)?n.some(pr.moveToElement(c.nextSibling)):!1===y&&rt(c.previousSibling)?n.some(pr.moveToElement(c.previousSibling)):n.none()).fold(function(){return tui(a,o,s)},n.some)):tui(a,o,s).bind(function(t){return i=a,r=s,t.fold(function(t){return n.some(pr.remove(t))},function(t){return n.some(pr.moveToElement(t))},function(t){return ef(r,t,i)?n.none():n.some(pr.moveToPosition(t))});var i,r}))).exists(function(n){return n.fold(function(n){return f._selectionOverrides.hideFakeCaret(),vs(f,h,t.fromDom(n)),!0},(s=h=u,function(n){var t=s?i.before(n):i.after(n);return o.selection.setRng(t.toRange()),!0}),(e=o=f=r,function(n){return e.selection.setRng(n.toRange()),!0}));var e,o,s,f,h});var a,o,s,y,c,w,p,b,v,e,k,f,l},lt)}function ndi(n,i){var r=n.selection.getNode();return!(!rt(r)||vy(r))&&iui(n,r.parentNode).filter(rt).fold(function(){return e(gi(t.fromDom(n.getBody()),".mce-offscreen-selection"),ni),vs(n,i,t.fromDom(n.selection.getNode())),vri(n),!0},lt)}function rui(n){var u,r=n.dom,f=n.selection,t=dc(n.getBody(),f.getNode());return gu(t)&&r.isBlock(t)&&r.isEmpty(t)&&(u=r.create("br",{"data-mce-bogus":"1"}),r.setHTML(t,""),t.appendChild(u),f.setRng(i.before(u).toRange())),!0}function rk(n,t){return(n.selection.isCollapsed()?gki:ndi)(n,t)}function uk(t,r){return!!t.selection.isCollapsed()&&(u=t,f=r,e=i.fromRangeStart(u.selection.getRng()),vr(f,u.getBody(),e).filter(function(n){return(f?awi:vwi)(n)}).bind(function(t){return n.from(sit(f?0:-1,t))}).exists(function(n){return u.selection.select(n),!0}));var u,f,e}function uui(n){return el(n)&&n.data[0]===fi}function fui(n){return el(n)&&n.data[n.data.length-1]===fi}function eui(n){return n.ownerDocument.createTextNode(fi)}function fk(n,t){return(n?function(n){if(el(n.previousSibling))return fui(n.previousSibling)||n.previousSibling.appendData(fi),n.previousSibling;if(el(n))return uui(n)||n.insertData(0,fi),n;var t=eui(n);return n.parentNode.insertBefore(t,n),t}:function(n){if(el(n.nextSibling))return uui(n.nextSibling)||n.nextSibling.insertData(0,fi),n.nextSibling;if(el(n))return fui(n)||n.appendData(fi),n;var t=eui(n);return n.nextSibling?n.parentNode.insertBefore(t,n.nextSibling):n.parentNode.appendChild(t),t})(t)}function oui(n,t){return o(n.container())?fk(t,n.container()):fk(t,n.getNode())}function sui(n,t){var i=t.get();return i&&n.container()===i&&kh(i)}function get(t,r){return r.fold(function(r){hs(t.get());var u=ydi(r);return t.set(u),n.some(i(u,u.length-1))},function(n){return wi(n).map(function(n){if(sui(n,t))return i(t.get(),1);hs(t.get());var r=oui(n,!0);return t.set(r),i(r,1)})},function(n){return lf(n).map(function(n){if(sui(n,t))return i(t.get(),t.get().length-1);hs(t.get());var r=oui(n,!1);return t.set(r),i(r,r.length-1)})},function(r){hs(t.get());var u=pdi(r);return t.set(u),n.some(i(u,1))})}function hui(t,i){for(var u,r=0;r<t.length;r++)if(u=t[r].apply(null,i),u.isSome())return u;return n.none()}function cui(n,t){return io(t,n)||n}function tdi(t,i,r){var f=wui(r),e=cui(i,f.container());return so(t,e,f).fold(function(){return yu(e,f).bind(u(so,t,e)).map(function(n){return ai.before(n)})},n.none)}function idi(n,t){return null===cs(n,t)}function lui(n,t,i){return so(n,t,i).filter(u(idi,t))}function rdi(t,i,r){var u=bui(r);return lui(t,i,u).bind(function(t){return cf(t,u).isNone()?n.some(ai.start(t)):n.none()})}function udi(t,i,r){var u=wui(r);return lui(t,i,u).bind(function(t){return yu(t,u).isNone()?n.some(ai.end(t)):n.none()})}function fdi(t,i,r){var f=bui(r),e=cui(i,f.container());return so(t,e,f).fold(function(){return cf(e,f).bind(u(so,t,e)).map(function(n){return ai.after(n)})},n.none)}function aui(n){return!1===(t=iot(n),"rtl"===d.DOM.getStyle(t,"direction",!0)||(i=t.textContent,ldi.test(i)));var t,i}function vf(n,t,i){return hui([tdi,rdi,udi,fdi],[n,t,i]).filter(aui)}function vui(n){return n.fold(f("before"),f("start"),f("end"),f("after"))}function ek(n){return n.fold(ai.before,ai.before,ai.after,ai.after)}function not(n){return n.fold(ai.start,ai.start,ai.end,ai.end)}function edi(n,t,i,r,u,f){return di(so(t,i,r),so(t,i,u),function(t,r){return t!==r&&(o=r,u=io(t,e=i),s=io(o,e),u&&u===s)?ai.after(n?t:r):f;var e,o,u,s}).getOr(f)}function odi(n,t){return n.fold(lt,function(n){return i=t,!(vui(r=n)===vui(i)&&iot(r)===iot(i));var r,i})}function sdi(t,i){return t?i.fold(ao(n.some,ai.start),n.none,ao(n.some,ai.after),n.none):i.fold(n.none,ao(n.some,ai.before),n.none,ao(n.some,ai.end))}function tot(n,t,i,r){var f=yr(n,r),e=vf(t,i,f);return vf(t,i,f).bind(u(sdi,n)).orThunk(function(){return s=t,o=i,h=e,c=yr(f=n,r),vr(f,o,c).map(u(yr,f)).fold(function(){return h.map(ek)},function(n){return vf(s,o,n).map(u(edi,f,s,o,c,n)).filter(u(odi,h))}).filter(aui);var f,s,o,h,c})}function ok(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];i=window.console;i&&(i.error||i.log).apply(i,fe([n],r,!1))}function kui(n,t,r){var u=n?1:-1;return t.setRng(i(r.container(),r.offset()+u).toRange()),t.getSel().modify("move",n?"forward":"backward","word"),!0}function hk(n,t){return n===bt.Backwards?iy(t):t}function dui(t,i,r,u){for(var f,a,c,l,s,h,v=vu(r),e=u,o=[];e;){if(f=(s=v,h=e,i===bt.Forwards?s.next(h):s.prev(h)),!f)break;if(st(f.getNode(!1)))return i===bt.Forwards?{positions:hk(i,o).concat([f]),breakType:ie.Br,breakAt:n.some(f)}:{positions:hk(i,o),breakType:ie.Br,breakAt:n.some(f)};if(f.isVisible()){if(t(e,f))return a=(c=e,st((l=f).getNode(i===bt.Forwards))?ie.Br:!1===ef(c,l)?ie.Block:ie.Wrap),{positions:hk(i,o),breakType:a,breakAt:n.some(f)};o.push(f);e=f}else e=f}return{positions:hk(i,o),breakType:ie.Eol,breakAt:n.none()}}function gui(n,t,i,r){return t(i,r).breakAt.map(function(r){var u=t(i,r).positions;return n===bt.Backwards?u.concat(r):[r].concat(u)}).getOr([])}function rot(t,i){return fu(t,function(t,r){return t.fold(function(){return n.some(r)},function(n){return di(or(n.getClientRects()),or(r.getClientRects()),function(t,u){var f=Math.abs(i-t.left);return Math.abs(i-u.left)<=f?r:n}).or(t)})},n.none())}function nfi(n,t){return or(t.getClientRects()).bind(function(t){return rot(n,t.left)})}function wdi(n){function i(t){return ut(t,function(t){var i=es(t);return i.node=n,i})}if(h(n))return i(n.getClientRects());if(o(n)){var t=n.ownerDocument.createRange();return t.setStart(n,0),t.setEnd(n,n.data.length),i(t.getClientRects())}}function uot(n){return oh(n,wdi)}function tfi(n,t,i,r,u,f){function s(r){var o=uot([r]),s,f;for(-1===n&&(o=o.reverse()),s=0;s<o.length;s++)if(f=o[s],!i(f,c)){if(0<e.length&&t(f,yo(e))&&h++,f.line=h,u(f))return!0;e.push(f)}}var h=0,e=[],c=yo(f.getClientRects()),o;return c?(o=f.getNode(),s(o),function(n,t,i,r){for(;r=lc(r,n,by,t);)if(i(r))return}(n,r,s,o),e):e}function ifi(n){return function(t){return t.line>n}}function fot(n){return function(t){return t.line===n}}function eot(n,t){return Math.abs(n.left-t)}function oot(n,t){return Math.abs(n.right-t)}function rfi(n,t){return n>=t.left&&n<=t.right}function ddi(n,t){return n>=t.top&&n<=t.bottom}function lk(n,t,i){return void 0===i&&(i=lt),ry(n,function(n,r){if(rfi(t,r))return i(r)?r:n;if(rfi(t,n))return i(n)?n:r;var u=Math.min(eot(n,t),oot(n,t)),f=Math.min(eot(r,t),oot(r,t));return f===u&&sh(r,"node")&&nni(r.node)||f<u?r:n})}function ufi(n,t,i,r,u){var f=aoi(r,n,by,t,!u);do if(!f||i(f))return;while(f=aoi(f,n,by,t))}function gdi(n,t,i){function f(n){return!vh(n.node)&&!tu(n.node)}var e,o,r,s=uot(p(bu(n.getElementsByTagName("*")),ss)),h=p(s,u(ddi,i));return(r=lk(h,t,f))&&(r=lk(function(n,t,i){function f(n,i){var u=p(uot([i]),function(i){return!n(i,t)});return r=r.concat(u),0===u.length}void 0===i&&(i=!0);var r=[];return r.push(t),ufi(ws.Up,n,u(f,sc),t.node,i),ufi(ws.Down,n,u(f,hc),t.node,i),r}(n,r,f(r)),t,f))&&ss(r.node)?{node:(e=r).node,before:eot(e,o=t)<oot(e,o)}:null}function re(n,t){n.selection.setRng(t);fv(n,n.selection.getRng())}function sot(t,i,r){return n.some(det(t,i,r))}function ffi(t,i,r,f,e,o){var s=i===bt.Forwards,p=vu(t.getBody()),w=u(cit,s?p.next:p.prev),a=s?f:e,v,l,h,y,c;return!r.collapsed&&(v=wp(r),o(v))?te(i,t,v,i===bt.Backwards,!1):(l=ba(i,t.getBody(),r),a(l))?fl(t,l.getNode(!s)):(h=yr(s,w(l)),y=dlt(r),!h)?y?n.some(r):n.none():a(h)?te(i,t,h.getNode(!s),s,!1):(c=w(h),c&&a(c)&&tw(h,c)?te(i,t,c.getNode(!s),s,!1):y?sot(t,h.toRange(),!1):n.none())}function efi(t,r,u,f,e,o){var s=ba(r,t.getBody(),u),y=yo(s.getClientRects()),a=r===ws.Down,k,d,v,l;if(!y)return n.none();var w,b=p((a?ggi:dgi)(t.getBody(),ifi(1),s),fot(1)),c=y.left,h=lk(b,c);return h&&o(h.node)?(k=Math.abs(c-h.left),d=Math.abs(c-h.right),te(r,t,h.node,k<d,!1)):(w=f(s)?s.getNode():e(s)?s.getNode(!0):wp(u))&&((v=function(n,t,r,u){function a(n){return yo(n.getClientRects())}var h,c,l,v=vu(t),e=[],y=0,f=1===n?(h=v.next,c=hc,l=sc,i.after(u)):(h=v.prev,c=sc,l=hc,i.before(u)),p=a(f),s,o;do if(f.isVisible()&&(s=a(f),!l(s,p))){if(0<e.length&&c(s,yo(e))&&y++,o=es(s),o.position=f,o.line=y,r(o))return e;e.push(o)}while(f=h(f));return e}(r,t.getBody(),ifi(1),w),l=lk(p(v,fot(1)),c),l)||(l=yo(p(v,fot(0)))))?sot(t,l.position.toRange(),!1):0===b.length?bot(t,a).filter(a?e:f).map(function(n){return det(t,n.toRange(),!1)}):n.none()}function ofi(n,t,i){return bot(n,t).filter(i).exists(function(t){return n.selection.setRng(t.toRange()),!0})}function ak(n,t){var i=n.dom.createRng();i.setStart(t.container(),t.offset());i.setEnd(t.container(),t.offset());n.selection.setRng(i)}function sfi(n,t){n?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")}function hfi(n,t,i){return get(t,i).map(function(t){return ak(n,t),i})}function cfi(n,t,r){return!!wa(n)&&(e=t,o=r,s=(f=n).getBody(),h=i.fromRangeStart(f.selection.getRng()),tot(o,u(ps,f),s,h).bind(function(n){return hfi(f,e,n)}).isSome());var f,e,o,s,h}function lfi(n,t){return!!wa(t)&&(u=n,e=(f=t).selection.getRng(),r=u?i.fromRangeEnd(e):i.fromRangeStart(e),!!ft(f.selection.getSel().modify)&&(u&&hn(r)?kui(!0,f.selection,r):!(u||!cn(r))&&kui(!1,f.selection,r)));var u,f,e,r}function ngi(n){var r=hi(null),f=u(ps,n);return n.on("NodeChange",function(o){var v,s,w,b,y,k,d,g,nt,h,c,a,tt;!wa(n)||l.browser.isIE()&&o.initial||(y=f,k=n.dom,d=o.parents,e(nht(g=p(ut(gi(t.fromDom(k.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(n){return n.dom}),y),nt=p(d,y)),u(sfi,!1)),e(nht(nt,g),u(sfi,!0)),c=r,(h=n).selection.isCollapsed()&&!0!==h.composing&&c.get()&&(a=i.fromRangeStart(h.selection.getRng()),i.isTextPosition(a)&&!1===(hn(tt=a)||cn(tt))&&(ak(h,avi(c.get(),a)),c.set(null))),v=f,s=n,w=r,b=o.parents,s.selection.isCollapsed()&&e(p(b,v),function(){var n=i.fromRangeStart(s.selection.getRng());vf(v,s.getBody(),n).bind(function(n){return hfi(s,w,n)})}))}),r}function vk(n,t,r){if(wa(n)){var f=bot(n,t).getOrThunk(function(){var r=n.selection.getRng();return t?i.fromRangeEnd(r):i.fromRangeStart(r)});return vf(u(ps,n),n.getBody(),f).exists(function(t){var i=ek(t);return get(r,i).exists(function(t){return ak(n,t),!0})})}return!1}function afi(n,t){return function(i){return get(t,i).exists(function(t){return ak(n,t),!0})}}function vfi(n,t,r,f){var e=n.getBody(),o=u(ps,n);n.undoManager.ignore(function(){var u,s,h;n.selection.setRng((u=r,s=f,(h=document.createRange()).setStart(u.container(),u.offset()),h.setEnd(s.container(),s.offset()),h));n.execCommand("Delete");vf(o,e,i.fromRangeStart(n.selection.getRng())).map(not).map(afi(n,t))});n.nodeChanged()}function yk(r,e,o){var p,h,a,c,s,y,l,v,w;return r.selection.isCollapsed()&&wa(r)?(p=i.fromRangeStart(r.selection.getRng()),a=e,c=o,s=p,y=(h=r).getBody(),l=io(s.container(),y)||y,v=u(ps,h),(w=vf(v,l,s)).bind(function(t){return c?t.fold(f(n.some(not(t))),n.none,f(n.some(ek(t))),n.none):t.fold(n.none,f(n.some(ek(t))),n.none,f(n.some(not(t))))}).map(afi(h,a)).getOrThunk(function(){var n=uw(c,l,s),i=n.bind(function(n){return vf(v,l,n)});return di(w,i,function(){return so(v,l,s).exists(function(n){return!!di(wi(i=n),lf(i),function(n,t){var r=yr(!0,n),u=yr(!1,t);return yu(i,r).forall(function(n){return n.isEqual(u)})}).getOr(!0)&&(vs(h,c,t.fromDom(n)),!0);var i})}).orThunk(function(){return i.bind(function(){return n.map(function(n){return c?vfi(h,a,s,n):vfi(h,a,n,s),!0})})}).getOr(!1)})):!1}function tgi(n){return 1===lct(n)}function igi(n,r){var e,s=t.fromDom(n.getBody()),h=t.fromDom(n.selection.getStart()),o=p(ty(e=gf(h,s),tf).fold(f(e),function(n){return e.slice(0,n)}),tgi);return vo(o).exists(function(f){var a,v,s,h,y,c,w,b,k,d=i.fromRangeStart(n.selection.getRng()),g=r,l=d,e=f.dom;return!(!di(wi(e),lf(e),function(n,t){var i=yr(!0,n),r=yr(!1,t),u=yr(!1,l);return g?yu(e,u).exists(function(n){return n.isEqual(r)&&l.isEqual(i)}):cf(e,u).exists(function(n){return n.isEqual(i)&&l.isEqual(r)})}).getOr(!0)||of((a=f).dom)&&nnt(a.dom)||(v=r,h=f,0===(k=ut(p(o,u(lwi,s=n)),function(n){return n.dom})).length?vs(s,v,h):(c=h.dom,b=rnt(k,(w=eft(!1)).dom),ou(t.fromDom(c),w),ni(t.fromDom(c)),y=i(b,0),s.selection.setRng(y.toRange())),0))})}function pk(n,t){return!!n.selection.isCollapsed()&&igi(n,t)}function hot(n,i,r){return n._selectionOverrides.hideFakeCaret(),vs(n,i,t.fromDom(r)),!0}function wk(t,i){return t.selection.isCollapsed()?(u=t,o=(r=i)?nl:tl,c=r?bt.Forwards:bt.Backwards,f=ba(c,u.getBody(),u.selection.getRng()),o(f)?hot(u,r,f.getNode(!r)):n.from(yr(r,f)).filter(function(n){return o(n)&&tw(f,n)}).exists(function(n){return hot(u,r,n.getNode(!r))})):(h=i,e=(s=t).selection.getNode(),!!tu(e)&&hot(s,h,e));var s,h,e,u,r,o,c,f}function cot(n){var t=parseInt(n,10);return isNaN(t)?0:t}function yfi(n,t){return(n||"table"===vt(t)?"margin":"padding")+("rtl"===wf(t,"direction")?"-right":"-left")}function pfi(n){var t,i=voi(n);return!n.mode.isReadOnly()&&(1<i.length||(t=n,al(i,function(n){var i=bg(n,yfi(rpt(t),n)).map(cot).getOr(0);return"false"!==t.dom.getContentEditable(n.dom)&&0<i})))}function wfi(n){return bn(n)||ua(n)}function bfi(n,i){var r=n.dom,f=n.selection,o=n.formatter,u=n.getParam("indentation","40px","string"),s=/[a-z%]+$/i.exec(u)[0],h=parseInt(u,10),c=rpt(n),l=oi(n);n.queryCommandState("InsertUnorderedList")||n.queryCommandState("InsertOrderedList")||""!==l||r.getParent(f.getNode(),r.isBlock)||o.apply("div");e(voi(n),function(n){var u,o=r,v=i,l=h,a=s,f=n.dom,e=yfi(c,t.fromDom(f));"outdent"===v?(u=Math.max(0,cot(f.style[e])-l),o.setStyle(f,e,u?u+a:"")):(u=cot(f.style[e])+l+a,o.setStyle(f,e,u))})}function kfi(n){if(n.selection.isCollapsed()&&pfi(n)){var r=n.dom,u=n.selection.getRng(),e=i.fromRangeStart(u),f=r.getParent(u.startContainer,r.isBlock);if(null!==f&&lft(t.fromDom(f),e))return bfi(n,"outdent"),!0}return!1}function dfi(n,t){n.getDoc().execCommand(t,!1,null)}function gfi(t){return void 0===t.touches||1!==t.touches.length?n.none():n.some(t.touches[0])}function lot(n,t){return w(n,t.nodeName)}function rgi(n){var u,f,v,y=n.dom,s=n.selection,p=n.schema,c=p.getBlockElements(),i=s.getStart(),l=n.getBody(),a=oi(n),w;if(i&&h(i)&&a&&(w=l.nodeName.toLowerCase(),p.isValidChild(w,a.toLowerCase())&&(b=c,k=l,d=i,!vi(vdt(t.fromDom(d),t.fromDom(k)),function(n){return lot(b,n.dom)})))){for(var b,k,d,g,e,r=s.getRng(),nt=r.startContainer,tt=r.startOffset,it=r.endContainer,rt=r.endOffset,ut=ls(n),i=l.firstChild;i;)g=c,o(e=i)||h(e)&&!lot(g,e)&&!ar(e)?function(n,t){if(o(t)&&(0===t.nodeValue.length||/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||lot(n,t.nextSibling))))return 1}(c,i)?(i=(f=i).nextSibling,y.remove(f)):(u||(u=y.create(a,ya(n)),i.parentNode.insertBefore(u,i),v=!0),i=(f=i).nextSibling,u.appendChild(f)):(u=null,i=i.nextSibling);v&&ut&&(r.setStart(nt,tt),r.setEnd(it,rt),s.setRng(r),n.nodeChanged())}}function nei(n,t){t.hasAttribute("data-mce-caret")&&(ln(t),n.selection.setRng(n.selection.getRng()),n.selection.scrollIntoView(t))}function ugi(n,i){var r=wy(t.fromDom(n.getBody()),"*[data-mce-caret]").map(function(n){return n.dom}).getOrNull();if(r)return"compositionstart"===i.type?(i.preventDefault(),i.stopPropagation(),void nei(n,r)):void(klt(r)&&(nei(n,r),n.undoManager.add()))}function tei(n,t,r){var e,f,o,s=vu(n.getBody()),h=u(cit,1===t?s.next:s.prev);r.collapsed&&""!==oi(n)&&(e=n.dom.getParent(r.startContainer,"PRE"))&&(h(i.fromRangeStart(r))||(o=n.dom.create(oi(n)),(!l.ie||11<=l.ie)&&(o.innerHTML='<br data-mce-bogus="1">'),f=o,1===t?n.$(e).after(f):n.$(e).before(f),n.selection.select(f,!0),n.selection.collapse()))}function iei(t,i){return r=t,u=i?bt.Forwards:bt.Backwards,f=r.selection.getRng(),ffi(r,u,f,fo,eo,yoi).orThunk(function(){return tei(r,u,f),n.none()}).exists(function(n){return re(t,n),!0});var r,u,f}function rei(t,i){return u=i?1:-1,f=(r=t).selection.getRng(),efi(r,u,f,function(n){return fo(n)||ent(n)},function(n){return eo(n)||ont(n)},yoi).orThunk(function(){return tei(r,u,f),n.none()}).exists(function(n){return re(t,n),!0});var r,u,f}function uei(n,t){return ofi(n,t,t?eo:fo)}function fgi(n){return dt(["figcaption"],vt(n))}function fei(n){var t=document.createRange();return t.setStartBefore(n.dom),t.setEndBefore(n.dom),t}function eei(n,t,i){(i?ii:vct)(n,t)}function egi(n,r){var f=t.fromDom(n.getBody()),e=i.fromRangeStart(n.selection.getRng()),o=oi(n),s=ya(n),h=e,c=u(g,f);return yy(t.fromDom(h.container()),tf,c).filter(fgi).exists(function(){var v,u,y,p,h,w,b,k,i,c,d,g,l,a,nt,tt;return(l=f,a=e,r?(tt=l.dom,av(tt,a).breakAt.isNone()):(nt=l.dom,lv(nt,a).breakAt.isNone()))?(v=(u=f,p=s,h=r,""===(y=o)?(d=h,eei(u,g=t.fromTag("br"),d),fei(g)):(w=u,b=h,k=p,i=t.fromTag(y),c=t.fromTag("br"),oe(i,k),ii(i,c),eei(w,i,b),fei(c))),n.selection.setRng(v),!0):!1})}function oei(n,t){return!!n.selection.isCollapsed()&&egi(n,t)}function v(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){return n.apply(null,i)}}function ol(n,t){return gt((i=t,oh(ut(n,function(n){return c({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:y},n)}),function(n){return i.keyCode===n.keyCode&&i.shiftKey===n.shiftKey&&i.altKey===n.altKey&&i.ctrlKey===n.ctrlKey&&i.metaKey===n.metaKey?[n]:[]})),function(n){return n.action()});var i}function sei(n,t){var i=t?bt.Forwards:bt.Backwards,r=n.selection.getRng();return ffi(n,i,r,nl,tl,tu).exists(function(t){return re(n,t),!0})}function hei(n,t){var i=t?1:-1,r=n.selection.getRng();return efi(n,i,r,nl,tl,tu).exists(function(t){return re(n,t),!0})}function cei(n,t){return ofi(n,t,t?tl:nl)}function lei(i,r,u,f,e){var o,c=gi(t.fromDom(u),"td,th,caption").map(function(n){return n.dom}),l=p((o=i,oh(c,function(n){var t,i={left:(t=es(n.getBoundingClientRect())).left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1};return[{x:i.left,y:o(i),cell:n},{x:i.right,y:o(i),cell:n}]})),function(n){return r(n,e)}),s=f,h=e;return fu(l,function(t,i){return t.fold(function(){return n.some(i)},function(t){var r=Math.sqrt(Math.abs(t.x-s)+Math.abs(t.y-h)),u=Math.sqrt(Math.abs(i.x-s)+Math.abs(i.y-h));return n.some(u<r?i:t)})},n.none()).map(function(n){return n.cell})}function aei(n,t,i){var u,f,r=n(t,i);return r.breakType===ie.Wrap&&0===r.positions.length||!st(i.getNode())&&r.breakType===ie.Br&&1===r.positions.length?(u=n,f=t,!r.breakAt.exists(function(n){return u(f,n).breakAt.isSome()})):r.breakAt.isNone()}function ogi(n,t,r){var u,f,e,o=n.selection.getRng(),s=t?1:-1;return!(!apt()||(u=t,f=r,e=i.fromRangeStart(o),!ac(!u,f).exists(function(n){return n.isEqual(e)}))||(te(s,n,r,!t,!1).each(function(t){re(n,t)}),0))}function vei(i,r,u){var e,f,o=(e=!!r,f=u.getNode(e),h(f)&&"TABLE"===f.nodeName?n.some(f):n.none()),s=!1===r;o.fold(function(){return re(i,u.toRange())},function(n){return ac(s,i.getBody()).filter(function(n){return n.isEqual(u)}).fold(function(){return re(i,u.toRange())},function(){var f,e,o=r,s=n,h=u;(e=oi(f=i))?f.undoManager.transact(function(){var n=t.fromTag(e),i;oe(n,ya(f));ii(n,t.fromTag("br"));(o?kl:ou)(t.fromDom(s),n);i=f.dom.createRng();i.setStart(n.dom,0);i.setEnd(n.dom,0);re(f,i)}):re(f,h.toRange())})})}function sgi(n,t,r,u){var h,e,c,l,o,a,v,y,p,w,k=n.selection.getRng(),f=i.fromRangeStart(k),b=n.getBody(),s;return t||!fni(u,f)?!(!t||!eni(u,f))&&(h=b,p=e=r,vei(n,t,s=vo((w=c=f).getClientRects()).bind(function(n){return uni(p,n.left,n.top)}).bind(function(n){return nfi(wi(t=n).map(function(n){return[n].concat(av(t,n).positions)}).getOr([]),w);var t}).orThunk(function(){return or(c.getClientRects()).bind(function(n){return rot(kdi(h,i.after(e)),n.left)})}).getOr(i.after(e))),!0):(s=(l=b,v=o=r,or((y=a=f).getClientRects()).bind(function(n){return rni(v,n.left,n.top)}).bind(function(n){return nfi(lf(t=n).map(function(n){return lv(t,n).positions.concat(n)}).getOr([]),y);var t}).orThunk(function(){return or(a.getClientRects()).bind(function(n){return rot(bdi(l,i.before(o)),n.left)})}).getOr(i.before(o))),vei(n,t,s),!0)}function yei(t,i,r){return n.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(function(u){return n.from(t.dom.getParent(u,"table")).map(function(n){return r(t,i,n,u)})}).getOr(!1)}function pei(n,t){return yei(n,t,ogi)}function wei(n,t){return yei(n,t,sgi)}function vv(n,t){var r,s,u=t,f=n.dom,h=n.schema.getMoveCaretBeforeOnEnterElements(),i,e;if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)&&(s=function(n){for(;n;){if(1===n.nodeType||3===n.nodeType&&n.data&&/[\r\n\s]/.test(n.data))return n;n=n.nextSibling}}(t.firstChild))&&/^(UL|OL|DL)$/.test(s.nodeName)&&t.insertBefore(f.doc.createTextNode(ir),t.firstChild),i=f.createRng(),t.normalize(),t.hasChildNodes()){for(e=new yt(t,t);r=e.current();){if(o(r)){i.setStart(r,0);i.setEnd(r,0);break}if(h[r.nodeName.toLowerCase()]){i.setStartBefore(r);i.setEndBefore(r);break}u=r;r=e.next()}r||(i.setStart(u,0),i.setEnd(u,0))}else st(t)?t.nextSibling&&f.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));n.selection.setRng(i);fv(n,i)}}function aot(t){return n.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock))}function bei(n,t){return n&&n.parentNode&&n.parentNode.nodeName===t}function kei(n){return n&&/^(OL|UL|LI)$/.test(n.nodeName)}function bk(n){var t=n.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:n}function kk(n,t,i){for(var r=n[i?"firstChild":"lastChild"];r&&!h(r);)r=r[i?"nextSibling":"previousSibling"];return r===t}function vot(n){n.innerHTML='<br data-mce-bogus="1">'}function yot(n,t){return n.nodeName===t||n.previousSibling&&n.previousSibling.nodeName===t}function dei(n,t){return t&&n.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==n.getContentEditable(t)}function pot(n,t,i){return!1===o(t)?i:n?1===i&&t.data.charAt(i-1)===fi?0:i:i===t.data.length-1&&t.data.charAt(i)===fi?t.data.length:i}function gei(n,t){for(var u,r=n.getRoot(),i=t;i!==r&&"false"!==n.getContentEditable(i);)"true"===n.getContentEditable(i)&&(u=i),i=i.parentNode;return i!==r?u:r}function yv(i,r){var u=oi(i);u&&u.toLowerCase()===r.tagName.toLowerCase()&&function(i,r,u){var f=i.dom,e,o;n.from(u.style).map(f.parseStyle).each(function(n){var i=ilt(t.fromDom(r)),u=c(c({},i),n);f.setStyles(r,u)});di(n.from(u.class).map(function(n){return n.split(/\s+/)}),n.from(r.className).map(function(n){return p(n.split(/\s+/),function(n){return""!==n})}),function(n,t){var i=p(t,function(t){return!dt(n,t)}),u=fe(fe([],n,!0),i,!0);f.setAttrib(r,"class",u.join(" "))});e=["style","class"];o=vl(u,function(n,t){return!dt(e,t)});f.setAttribs(r,o)}(i,r,ya(i))}function hgi(n,i){function rt(t){var e,f=u,h=pt.getTextInlineElements(),i=t||"TABLE"===k||"HR"===k?s.create(t||v):r.cloneNode(!1),o=i;if(!1===n.getParam("keep_styles",!0))s.setAttrib(i,"style",null),s.setAttrib(i,"class",null);else for(;h[f.nodeName]&&(of(f)||ar(f)||(e=f.cloneNode(!1),s.setAttrib(e,"id",""),i.hasChildNodes()?e.appendChild(i.firstChild):o=e,i.appendChild(e))),(f=f.parentNode)&&f!==ct;);return yv(n,i),vot(o),i}function lt(n){var t,e,f=pot(n,u,tt),i;if(!o(u)||!(n?0<f:f<u.nodeValue.length)){if(u.parentNode===r&&nt&&!n||n&&h(u)&&u===r.firstChild)return 1;if(yot(u,"TABLE")||yot(u,"HR"))return nt&&!n||!nt&&n;for(i=new yt(u,r),o(u)&&(n&&0===f?i.prev():n||f!==u.nodeValue.length||i.next());t=i.current();){if(h(t)){if(!t.getAttribute("data-mce-bogus")&&(e=t.nodeName.toLowerCase(),wt[e]&&"br"!==e))return}else if(o(t)&&!ns(t.nodeValue))return;n?i.prev():i.next()}return 1}}function at(){c=/^(H[1-6]|PRE|FIGURE)$/.test(k)&&"HGROUP"!==ft?rt(v):rt();n.getParam("end_container_on_empty_block",!1)&&dei(s,y)&&s.isEmpty(r)?c=s.split(y,r):s.insertAfter(c,r);vv(n,c)}var vt,c,g,nt,s=n.dom,pt=n.schema,wt=pt.getNonEmptyElements(),p=n.selection.getRng(),r,y,k,ft,w,et,v,ut,kt,f,b,it,dt,a,ot,st,d,gt,ht,l,ni,ct;aw(s,p).each(function(n){p.setStart(n.startContainer,n.startOffset);p.setEnd(n.endContainer,n.endOffset)});var u=p.startContainer,tt=p.startOffset,v=oi(n),bt=!(!i||!i.shiftKey),ti=!(!i||!i.ctrlKey);h(u)&&u.hasChildNodes()&&(nt=tt>u.childNodes.length-1,u=u.childNodes[Math.min(tt,u.childNodes.length-1)]||u,tt=nt&&o(u)?u.nodeValue.length:0);ct=gei(s,u);ct&&((v&&!bt||!v&&bt)&&(u=function(n,t,i,r){var e,s,u,c,l,a,h=v||"P",o=n.dom,y=gei(o,i),f=o.getParent(i,o.isBlock);if(!f||!dei(o,f)){if(l=((f=f||y)===n.getBody()||(a=f)&&/^(TD|TH|CAPTION)$/.test(a.nodeName)?f:f.parentNode).nodeName.toLowerCase(),!f.hasChildNodes())return yv(n,e=o.create(h)),f.appendChild(e),t.setStart(e,0),t.setEnd(e,0),e;for(u=i;u.parentNode!==f;)u=u.parentNode;for(;u&&!o.isBlock(u);)u=(s=u).previousSibling;if(s&&n.schema.isValidChild(l,h.toLowerCase())){for(yv(n,e=o.create(h)),s.parentNode.insertBefore(e,s),u=s;u&&!o.isBlock(u);)c=u.nextSibling,e.appendChild(u),u=c;t.setStart(i,r);t.setEnd(i,r)}}return i}(n,p,u,tt)),y=(r=s.getParent(u,s.isBlock))?s.getParent(r.parentNode,s.isBlock):null,k=r?r.nodeName.toUpperCase():"","LI"!==(ft=y?y.nodeName.toUpperCase():"")||ti||(y=(r=y).parentNode,k=ft),/^(LI|DT|DD)$/.test(k)&&s.isEmpty(r)?(kt=rt,f=y,b=r,it=v,l=(ut=n).dom,ni=ut.selection.getRng(),f!==ut.getBody()&&(a=(it=kei(dt=f)&&kei(dt.parentNode)?"LI":it)?kt(it):l.create("BR"),kk(f,b,!0)&&kk(f,b,!1)?bei(f,"LI")?(ot=bk(f),l.insertAfter(a,ot),(null===(ht=(gt=f).parentNode)||void 0===ht?void 0:ht.firstChild)===gt?l.remove(ot):l.remove(f)):l.replace(a,f):(kk(f,b,!0)?bei(f,"LI")?(l.insertAfter(a,bk(f)),a.appendChild(l.doc.createTextNode(" ")),a.appendChild(f)):f.parentNode.insertBefore(a,f):kk(f,b,!1)?l.insertAfter(a,bk(f)):(f=bk(f),(st=ni.cloneRange()).setStartAfter(b),st.setEndAfter(f),d=st.extractContents(),"LI"===it&&d.firstChild&&"LI"===d.firstChild.nodeName?(a=d.firstChild,l.insertAfter(d,f)):(l.insertAfter(d,f),l.insertAfter(a,f))),l.remove(b)),vv(ut,a))):v&&r===n.getBody()||(v=v||"P",bh(r)?(c=ln(r),s.isEmpty(r)&&vot(r),yv(n,c),vv(n,c)):lt()?at():lt(!0)?(c=r.parentNode.insertBefore(rt(),r),vv(n,yot(r,"HR")?c:r)):((et=(w=p).cloneRange()).setStart(w.startContainer,pot(!0,w.startContainer,w.startOffset)),et.setEnd(w.endContainer,pot(!1,w.endContainer,w.endOffset)),(vt=et.cloneRange()).setEndAfter(r),g=vt.extractContents(),e(ryt(t.fromDom(g),gr),function(n){var t=n.dom;t.nodeValue=ae(t.nodeValue)}),function(n){for(;o(n)&&(n.nodeValue=n.nodeValue.replace(/^[\r\n]+/,"")),n=n.firstChild;);}(g),c=g.firstChild,s.insertAfter(g,r),function(n,t){var r,u,i=c,f=[];if(i){for(;i=i.firstChild;){if(n.isBlock(i))return;h(i)&&!t[i.nodeName.toLowerCase()]&&f.push(i)}for(r=f.length;r--;)!(i=f[r]).hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue?n.remove(i):(u=i)&&"A"===u.nodeName&&n.isEmpty(u)&&n.remove(i)}}(s,wt),function(n,t){t.normalize();var i=t.lastChild;i&&!/^(left|right)$/gi.test(n.getStyle(i,"float",!0))||n.add(t,"br")}(s,r),s.isEmpty(r)&&vot(r),c.normalize(),s.isEmpty(c)?(s.remove(c),at()):(yv(n,c),vv(n,c))),s.setAttrib(c,"id",""),n.fire("NewBlock",{newBlock:c})))}function noi(n,t,i){var r=n.dom.createRng();i?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t));n.selection.setRng(r);fv(n,r)}function cgi(n,i){var r=t.fromTag("br");ou(t.fromDom(i),r);n.undoManager.add()}function lgi(n,i){oni(n.getBody(),i)||kl(t.fromDom(i),t.fromTag("br"));var r=t.fromTag("br");kl(t.fromDom(i),r);noi(n,r.dom,!1);n.undoManager.add()}function toi(n){return n&&"A"===n.nodeName&&"href"in n}function agi(n){return n.fold(it,toi,toi,it)}function vgi(n,t){t.fold(y,u(cgi,n),u(lgi,n),y)}function ioi(n,t){var r,f,e,o=(f=u(ps,r=n),e=i.fromRangeStart(r.selection.getRng()),vf(f,r.getBody(),e).filter(agi));o.isSome()?o.each(u(vgi,n)):function(n,t){var f,h,l=n.selection,u=n.dom,r=l.getRng(),c,e,i;aw(u,r).each(function(n){r.setStart(n.startContainer,n.startOffset);r.setEnd(n.endContainer,n.endOffset)});e=r.startOffset;i=r.startContainer;1===i.nodeType&&i.hasChildNodes()&&(c=e>i.childNodes.length-1,i=i.childNodes[Math.min(e,i.childNodes.length-1)]||i,e=c&&3===i.nodeType?i.nodeValue.length:0);var o=u.getParent(i,u.isBlock),s=o?u.getParent(o.parentNode,u.isBlock):null,a=s?s.nodeName.toUpperCase():"",v=!(!t||!t.ctrlKey);"LI"!==a||v||(o=s);i&&3===i.nodeType&&e>=i.nodeValue.length&&!function(n){for(var t,r=new yt(i,o),u=n.getNonEmptyElements();t=r.next();)if(u[t.nodeName.toLowerCase()]||0<t.length)return 1}(n.schema)&&(f=u.create("br"),r.insertNode(f),r.setStartAfter(f),r.setEndAfter(f),h=!0);f=u.create("br");fit(u,r,f);noi(n,f,h);n.undoManager.add()}(n,t)}function roi(n,i){return aot(n).filter(function(n){return 0<i.length&&lh(t.fromDom(n),i)}).isSome()}function ygi(n){return roi(n,n.getParam("no_newline_selector",""))}function wot(n){return function(t){return""===oi(t)===n}}function uoi(n){return function(i){return aot(i).filter(function(n){return ua(t.fromDom(n))}).isSome()===n}}function foi(n,t){return function(i){return aot(i).fold(f(""),function(n){return n.nodeName.toUpperCase()})===n.toUpperCase()===t}}function dk(n){return foi("pre",n)}function gk(n){return function(t){return t.getParam("br_in_pre",!0)===n}}function pgi(n){return roi(n,n.getParam("br_newline_selector",".mce-toc h2,figcaption,caption"))}function pv(n,t){return t}function eoi(n){var i=oi(n),t=function(n,t){for(var u,r=n.getRoot(),i=t;i!==r&&"false"!==n.getContentEditable(i);)"true"===n.getContentEditable(i)&&(u=i),i=i.parentNode;return i!==r?u:r}(n.dom,n.selection.getStart());return t&&n.schema.isValidChild(t.nodeName,i||"P")}function wr(t,i){return function(r,u){return fu(t,function(n,t){return n&&t(r,u)},!0)?n.some(i):n.none()}}function ooi(n,t){var r,i;r=n;i=t;hui([wr([ygi],er.none()),wr([foi("summary",!0)],er.br()),wr([dk(!0),gk(!1),pv],er.br()),wr([dk(!0),gk(!1)],er.block()),wr([dk(!0),gk(!0),pv],er.block()),wr([dk(!0),gk(!0)],er.br()),wr([uoi(!0),pv],er.br()),wr([uoi(!0)],er.block()),wr([wot(!0),pv,eoi],er.block()),wr([wot(!0)],er.br()),wr([pgi],er.br()),wr([wot(!1),pv],er.br()),wr([eoi],er.block())],[r,!(!i||!i.shiftKey)]).getOr(er.none()).fold(function(){ioi(n,t)},function(){hgi(n,t)},y)}function soi(n){return n.stopImmediatePropagation()}function hoi(n){return n.keyCode===s.PAGE_UP||n.keyCode===s.PAGE_DOWN}function coi(n,t,i){i&&!n.get()?t.on("NodeChange",soi,!0):!i&&n.get()&&t.off("NodeChange",soi);n.set(i)}function loi(r,u){var f=u.container(),e=u.offset();return o(f)?(f.insertData(e,r),n.some(i(f,e+r.length))):nw(u).map(function(n){var f=t.fromText(r);return(u.isAtEnd()?kl:ou)(n,f),i(f.dom,r.length)})}function wgi(n,t){return function(i){return f=n,(!lut(e=i)&&(r=e,cf((u=f).dom,r).isNone()||yu(u.dom,r).isNone()||lft(u,r)||snt(u,r)||cut(u,r)||hut(u,r)||ddt(f,e)||gdt(f,e))?cni:lni)(t);var u,r,f,e}}function bgi(n){var r,f,h=i.fromRangeStart(n.selection.getRng()),e=t.fromDom(n.getBody()),o,s;return n.selection.isCollapsed()?(o=u(ps,n),s=i.fromRangeStart(n.selection.getRng()),vf(o,n.getBody(),s).bind((f=e,function(n){return n.fold(function(n){return cf(f.dom,i.before(n))},function(n){return wi(n)},function(n){return lf(n)},function(n){return yu(f.dom,i.after(n))})})).bind(wgi(e,h)).exists((r=n,function(n){return r.selection.setRng(n.toRange()),r.nodeChanged(),!0}))):!1}function kgi(n){var t,c,f,l,a,o,i,h,y,p,e,w,b,k,r=ngi(n);return n.on("keyup compositionstart",u(ugi,n)),k=r,(b=n).on("keydown",function(n){var t,i,u,r;!1===n.isDefaultPrevented()&&(t=b,i=k,u=n,r=kr().os,ol([{keyCode:s.RIGHT,action:v(iei,t,!0)},{keyCode:s.LEFT,action:v(iei,t,!1)},{keyCode:s.UP,action:v(rei,t,!1)},{keyCode:s.DOWN,action:v(rei,t,!0)},{keyCode:s.RIGHT,action:v(pei,t,!0)},{keyCode:s.LEFT,action:v(pei,t,!1)},{keyCode:s.UP,action:v(wei,t,!1)},{keyCode:s.DOWN,action:v(wei,t,!0)},{keyCode:s.RIGHT,action:v(sei,t,!0)},{keyCode:s.LEFT,action:v(sei,t,!1)},{keyCode:s.UP,action:v(hei,t,!1)},{keyCode:s.DOWN,action:v(hei,t,!0)},{keyCode:s.RIGHT,action:v(cfi,t,i,!0)},{keyCode:s.LEFT,action:v(cfi,t,i,!1)},{keyCode:s.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:v(tni,t,i)},{keyCode:s.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:v(ini,t,i)},{keyCode:s.UP,action:v(oei,t,!1)},{keyCode:s.DOWN,action:v(oei,t,!0)}],u).each(function(){u.preventDefault()}))}),w=r,(e=n).on("keydown",function(n){var t,i,r;!1===n.isDefaultPrevented()&&(i=w,r=n,ol([{keyCode:s.BACKSPACE,action:v(kfi,t=e,!1)},{keyCode:s.BACKSPACE,action:v(rk,t,!1)},{keyCode:s.DELETE,action:v(rk,t,!0)},{keyCode:s.BACKSPACE,action:v(ik,t,!1)},{keyCode:s.DELETE,action:v(ik,t,!0)},{keyCode:s.BACKSPACE,action:v(yk,t,i,!1)},{keyCode:s.DELETE,action:v(yk,t,i,!0)},{keyCode:s.BACKSPACE,action:v(eb,t,!1)},{keyCode:s.DELETE,action:v(eb,t,!0)},{keyCode:s.BACKSPACE,action:v(uk,t,!1)},{keyCode:s.DELETE,action:v(uk,t,!0)},{keyCode:s.BACKSPACE,action:v(wk,t,!1)},{keyCode:s.DELETE,action:v(wk,t,!0)},{keyCode:s.BACKSPACE,action:v(tk,t,!1)},{keyCode:s.DELETE,action:v(tk,t,!0)},{keyCode:s.BACKSPACE,action:v(nk,t,!1)},{keyCode:s.DELETE,action:v(nk,t,!0)},{keyCode:s.BACKSPACE,action:v(pk,t,!1)},{keyCode:s.DELETE,action:v(pk,t,!0)}],r).each(function(){r.preventDefault()}))}),e.on("keyup",function(n){var t,i;!1===n.isDefaultPrevented()&&(i=n,ol([{keyCode:s.BACKSPACE,action:v(rui,t=e)},{keyCode:s.DELETE,action:v(rui,t)}],i))}),(p=n).on("keydown",function(n){var t,i,r;n.keyCode===s.ENTER&&(t=p,(i=n).isDefaultPrevented()||(i.preventDefault(),(r=t.undoManager).typing&&(r.typing=!1,r.add()),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete");ooi(t,i)})))}),(y=n).on("keydown",function(n){var t;!1===n.isDefaultPrevented()&&(t=n,ol([{keyCode:s.SPACEBAR,action:v(bgi,y)}],t).each(function(){t.preventDefault()}))}),i=o=n,h=dtt(function(){i.composing||igt(i)},0),sni.isIE()&&(i.on("keypress",function(){h.throttle()}),i.on("remove",function(){h.cancel()})),o.on("input",function(n){!1===n.isComposing&&igt(o)}),a=r,(l=n).on("keydown",function(n){var t,i,r;!1===n.isDefaultPrevented()&&(i=a,r=n,ol([{keyCode:s.END,action:v(uei,t=l,!0)},{keyCode:s.HOME,action:v(uei,t,!1)},{keyCode:s.END,action:v(cei,t,!0)},{keyCode:s.HOME,action:v(cei,t,!1)},{keyCode:s.END,action:v(vk,t,!0,i)},{keyCode:s.HOME,action:v(vk,t,!1,i)}],r).each(function(){r.preventDefault()}))}),t=n,c=r,hni.os.isOSX()||(f=hi(!1),t.on("keydown",function(n){hoi(n)&&coi(f,t,!0)}),t.on("keyup",function(n){var i,r,u;!1===n.isDefaultPrevented()&&(u=n,ol([{keyCode:s.PAGE_UP,action:v(vk,i=t,!1,r=c)},{keyCode:s.PAGE_DOWN,action:v(vk,i,!0,r)}],u));hoi(n)&&f.get()&&(coi(f,t,!1),t.nodeChanged())})),r}function kot(n){var t,i;this.lastPath=[];this.editor=n;i=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",function(i){var r=n.selection.getRng(),u={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!==i.type&&vrt(u,t)||n.fire("SelectionChange");t=u});n.on("contextmenu",function(){n.fire("SelectionChange")});n.on("SelectionChange",function(){var t=n.selection.getStart(!0);t&&(l.range||!n.selection.isCollapsed())&&hw(n)&&!i.isSameElementPath(t)&&n.dom.isChildOf(t,n.getBody())&&n.nodeChanged({selectionChange:!0})});n.on("mouseup",function(t){!t.isDefaultPrevented()&&hw(n)&&("IMG"===n.selection.getNode().nodeName?ui.setEditorTimeout(n,function(){n.nodeChanged()}):n.nodeChanged())})}function poi(n){return h(n)&&eat(t.fromDom(n))}function woi(n){var t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.documentElement,u=i.defaultView;return{top:t.top+u.pageYOffset-r.clientTop,left:t.left+u.pageXOffset-r.clientLeft}}function boi(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function vni(n,t){var i=ui.throttle(function(n,i){t._selectionOverrides.hideFakeCaret();t.selection.placeCaretAt(n,i)},0);return t.on("remove",i.stop),function(r){return n.on(function(n){var k,f,u,e,o,h,c,l,a,v,y,d,g,s,nt,p,w,tt,it,b,rt=Math.max(Math.abs(r.screenX-n.screenX),Math.abs(r.screenY-n.screenY));if(!n.dragging&&10<rt){if(t.fire("dragstart",{target:n.element}).isDefaultPrevented())return;n.dragging=!0;t.focus()}n.dragging&&(d=n,k={pageX:(nt=r,p=(s=t).inline?woi(s.getBody()):{left:0,top:0},b=(it=s).getBody(),w=it.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0},(g={pageX:(tt=function(n,t){if(t.target.ownerDocument===n.getDoc())return{left:t.pageX,top:t.pageY};var r,i,u,f,e,o=woi(n.getContentAreaContainer()),s=(i=(r=n).getBody(),u=r.getDoc().documentElement,f={left:i.scrollLeft,top:i.scrollTop},e={left:i.scrollLeft||u.scrollLeft,top:i.scrollTop||u.scrollTop},r.inline?f:e);return{left:t.pageX-o.left+s.left,top:t.pageY-o.top+s.top}}(s,nt)).left-p.left+w.left,pageY:tt.top-p.top+w.top}).pageX-d.relX),pageY:g.pageY+5},v=n.ghost,y=t.getBody(),v.parentNode!==y&&y.appendChild(v),f=n.ghost,e=n.width,o=n.height,h=n.maxX,c=n.maxY,a=l=0,f.style.left=(u=k).pageX+"px",f.style.top=u.pageY+"px",c<u.pageY+o&&(a=u.pageY+o-c),f.style.width=e-(l=h<u.pageX+e?u.pageX+e-h:l)+"px",f.style.height=o-a+"px",i(r.clientX,r.clientY))})}}function yni(n){function v(n){var i,r,u,f,e,o;0===n.button&&(i=gt(t.dom.getParents(n.target),function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){for(var i=0;i<t.length;i++)if(t[i](n))return!0;return!1}}(td,itr)).getOr(null),e=t.getBody(),td(o=i)&&o!==e&&(r=t.dom.getPos(i),u=t.getBody(),f=t.getDoc().documentElement,l.set({element:i,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(t.inline?u.scrollHeight:f.offsetHeight)-2,relX:n.pageX-r.x,relY:n.pageY-r.y,width:i.offsetWidth,height:i.offsetHeight,ghost:function(n,i,r){var u=t.dom,f=n.cloneNode(!0),e;return u.setStyles(f,{width:i,height:r}),u.setAttrib(f,"data-mce-selected",null),e=u.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}),u.setStyles(e,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:i,height:r}),u.setStyles(f,{margin:0,boxSizing:"border-box"}),e.appendChild(f),e}(i,i.offsetWidth,i.offsetHeight)})))}function y(n){e.on(function(t){var f,e,o,r,s,u;t.dragging&&((r=3===(u=(o=i).selection.getSel().getRangeAt(0).startContainer).nodeType?u.parentNode:u)===(s=t.element)||o.dom.isChildOf(r,s)||td(r)||((e=t.element.cloneNode(!0)).removeAttribute("data-mce-selected"),f=e,i.fire("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||i.undoManager.transact(function(){boi(t.element);i.insertContent(i.dom.getOuterHTML(f));i._selectionOverrides.hideFakeCaret()})),i.fire("dragend"))});ssi(e)}var f,c,e,i,l,t,a=ec(),r=d.DOM,u=document,o=vni(l=a,t=n),h=(f=e=a,function(){f.on(function(n){n.dragging&&c.fire("dragend")});ssi(f)});(c=i=n).on("mousedown",v);n.on("mousemove",o);n.on("mouseup",y);r.bind(u,"mousemove",o);r.bind(u,"mouseup",h);n.on("remove",function(){r.unbind(u,"mousemove",o);r.unbind(u,"mouseup",h)});n.on("keydown",function(n){n.keyCode===s.ESC&&h()})}function pni(n){function r(n){var i;n.isDefaultPrevented()||(i=n.dataTransfer)&&(dt(i.types,"Files")||0<i.files.length)&&(n.preventDefault(),"drop"===n.type&&db(t,"Dropped file type is not supported"))}function u(n){bw(t,n.target)&&r(n)}function f(){var n=d.DOM,i=t.dom,f=document,o=t.inline?t.getBody():t.getDoc(),s=["drop","dragover"];e(s,function(t){n.bind(f,t,u);i.bind(o,t,r)});t.on("remove",function(){e(s,function(t){n.unbind(f,t,u);i.unbind(o,t,r)})})}var i,t;yni(n);(i=n).on("drop",function(n){var t=void 0!==n.clientX?i.getDoc().elementFromPoint(n.clientX,n.clientY):null;(td(t)||"false"===i.dom.getContentEditableParent(t))&&n.preventDefault()});n.getParam("block_unsupported_drop",!0,"boolean")&&(t=n).on("init",function(){ui.setEditorTimeout(t,f,0)})}function nd(n,t){return dc(n.getBody(),t)}function wni(n){function tt(n){return n!==h&&(bs(n)||tu(n))&&r.isChildOf(n,h)}function ft(n){return fo(n)||eo(n)||nl(n)||tl(n)}function it(n){n&&f.setRng(n)}function b(t,i,r,u){return void 0===u&&(u=!0),n.fire("ShowCaret",{target:i,direction:t,before:r}).isDefaultPrevented()?null:(u&&f.scrollIntoView(i,-1===t),k.show(r,i))}function et(n){return hr(n)||ip(n)||rp(n)}function ot(n){return et(n.startContainer)||et(n.endContainer)}function a(i,o){var y,w;if(!i)return null;if(i.collapsed){if(!ot(i)){var v=o?1:-1,c=ba(v,h,i),k=c.getNode(!o);if(ss(k))return b(v,k,!!o&&!c.isAtEnd(),!1);if(y=c.getNode(o),ss(y))return b(v,y,!o&&!c.isAtEnd(),!1)}return null}var s=i.startContainer,a=i.startOffset,it=i.endOffset;return(3===s.nodeType&&0===a&&bs(s.parentNode)&&(s=s.parentNode,a=r.nodeIndex(s),s=s.parentNode),1!==s.nodeType)?null:it===a+1&&s===i.endContainer&&(w=s.childNodes[a],tt(w))?function(i){var o=i.cloneNode(!0),s=n.fire("ObjectSelected",{target:i,targetClone:o}),h,c;return s.isDefaultPrevented()?null:(h=function(i,u,e){var h=n.$,o=wy(t.fromDom(n.getBody()),"#"+d).fold(function(){return h([])},function(n){return h([n.dom])}),s,c;return 0===o.length&&(o=h('<div data-mce-bogus="all" class="mce-offscreen-selection"><\/div>').attr("id",d)).appendTo(n.getBody()),s=r.createRng(),u===e&&l.ie?(o.empty().append('<p style="font-size: 0" data-mce-bogus="all"><\/p>').append(u),s.setStartAfter(o[0].firstChild.firstChild),s.setEndAfter(u)):(o.empty().append(ir).append(u).append(ir),s.setStart(o[0].firstChild,1),s.setEnd(o[0].lastChild,0)),o.css({top:r.getPos(i,n.getBody()).y}),o[0].focus(),c=f.getSel(),c.removeAllRanges(),c.addRange(s),s}(i,s.targetClone,o),c=t.fromDom(i),e(gi(t.fromDom(n.getBody()),"*[data-mce-selected]"),function(n){g(c,n)||se(n,nt)}),r.getAttrib(i,nt)||i.setAttribute(nt,"1"),u=i,p(),h)}(w):null}function v(){u&&u.removeAttribute(nt);wy(t.fromDom(n.getBody()),"#"+d).each(ni);u=null}var u,o,ut,c,f=n.selection,r=n.dom,y=r.isBlock,h=n.getBody(),k=vvi(n,h,y,function(){return ls(n)}),d="sel-"+r.uniqueId(),nt="data-mce-selected",ht=f.getRng,p=function(){k.hide()};return l.ceFalse&&!ne(n)&&(n.on("mouseup",function(t){var i=ht();i.collapsed&&aii(n,t.clientX,t.clientY)&&gri(n,i,!1).each(it)}),n.on("click",function(t){var i=nd(n,t.target);i&&(bs(i)&&(t.preventDefault(),n.focus()),hsi(i)&&r.isChildOf(i,f.getNode())&&v())}),n.on("blur NewBlock",v),n.on("ResizeWindow FullscreenStateChanged",k.reposition),n.on("tap",function(t){var i=t.target,r=nd(n,i);bs(r)?(t.preventDefault(),fl(n,r).each(a)):tt(i)&&fl(n,i).each(a)},!0),n.on("mousedown",function(t){var s,c,l,w,k,e,o,u=t.target;(u===h||"HTML"===u.nodeName||r.isChildOf(u,h))&&!1!==aii(n,t.clientX,t.clientY)&&((s=nd(n,u))?bs(s)?(t.preventDefault(),fl(n,s).each(a)):(v(),hsi(s)&&t.shiftKey||crt(t.clientX,t.clientY,f.getRng())||(p(),f.placeCaretAt(t.clientX,t.clientY))):tt(u)?fl(n,u).each(a):!1===ss(u)&&(v(),p(),(c=gdi(h,t.clientX,t.clientY))&&(l=u,w=c.node,e=r.getParent(l,y),o=r.getParent(w,y),!wu(e)&&(l!==o&&r.isChildOf(e,o)&&!1===bs(nd(n,e))||!r.isChildOf(o,e)&&(k=o,r.getParent(e,y)!==r.getParent(k,y))&&function(n){var u=n.firstChild,t,r;if(!wu(u))return(t=i.before(u),st(t.getNode())&&1===n.childNodes.length)?!ft(t):(r=vu(n).next(t),r&&!ft(r))}(e))||(t.preventDefault(),it(b(1,c.node,c.before,!1)),n.getBody().focus()))))}),n.on("keypress",function(n){s.modifierPressed(n)||bs(f.getNode())&&n.preventDefault()}),n.on("GetSelectionRange",function(n){var t=n.range;u&&(u.parentNode?((t=t.cloneRange()).selectNode(u),n.range=t):u=null)}),n.on("SetSelectionRange",function(t){var u,o,i,f,s,e,h,c;t.range=(u=t.range,o=n.schema.getShortEndedElements(),i=r.createRng(),f=u.startContainer,s=u.startOffset,e=u.endContainer,h=u.endOffset,w(o,f.nodeName.toLowerCase())?0===s?i.setStartBefore(f):i.setStartAfter(f):i.setStart(f,s),w(o,e.nodeName.toLowerCase())?0===h?i.setEndBefore(e):i.setEndAfter(e):i.setEnd(e,h),i);c=a(t.range,t.forward);c&&(t.range=c)}),n.on("AfterSetSelectionRange",function(n){var t=n.range,i=t.startContainer.parentNode;ot(t)||"mcepastebin"===i.id||p();r.hasClass(i,"mce-offscreen-selection")||v()}),n.on("copy",function(n){var t,u,i=n.clipboardData;n.isDefaultPrevented()||!n.clipboardData||l.ie||(t=(u=r.get(d))&&u.getElementsByTagName("*")[0])&&(n.preventDefault(),i.clearData(),i.setData("text/html",t.outerHTML),i.setData("text/plain",t.outerText||t.innerText))}),pni(n),ut=dtt(function(){var n,t;o.removed||!o.getBody().contains(document.activeElement)||(n=o.selection.getRng()).collapsed&&(t=det(o,n,!1),o.selection.setRng(t))},0),(o=n).on("focus",function(){ut.throttle()}),o.on("blur",function(){ut.cancel()}),(c=n).on("init",function(){c.on("focusin",function(n){var t,i,r=n.target;tu(r)&&(t=dc(c.getBody(),r),i=rt(t)?t:r,c.selection.getNode()!==i&&fl(c,i).each(function(n){return c.selection.setRng(n)}))})})),{showCaret:b,showBlockCaretContainer:function(n){n.hasAttribute("data-mce-caret")&&(ln(n),it(ht()),f.scrollIntoView(n))},hideFakeCaret:p,destroy:function(){k.destroy();u=null}}}function bni(n){function f(t,i){try{n.getDoc().execCommand(t,!1,i)}catch(t){}}function u(n){return n.isDefaultPrevented()}function e(){n.shortcuts.add("meta+a",null,"SelectAll")}function p(){n.inline||t.bind(n.getDoc(),"mousedown mouseup",function(t){var r;t.target===n.getDoc().documentElement&&(r=i.getRng(),n.getBody().focus(),"mousedown"===t.type?hr(r.startContainer)||i.placeCaretAt(t.clientX,t.clientY):i.setRng(r))})}function w(){Range.prototype.getClientRects||n.on("mousedown",function(t){var i;u(t)||"HTML"!==t.target.nodeName||((i=n.getBody()).blur(),ui.setEditorTimeout(n,function(){i.focus()}))})}function b(){n.on("click",function(r){var u=r.target;/^(IMG|HR)$/.test(u.nodeName)&&"false"!==t.getContentEditableParent(u)&&(r.preventDefault(),n.selection.select(u),n.nodeChanged());"A"===u.nodeName&&t.hasClass(u,"mce-item-anchor")&&(r.preventDefault(),i.select(u))})}function o(){n.on("keydown",function(n){if(!u(n)&&n.keyCode===c&&i.isCollapsed()&&0===i.getRng().startOffset){var t=i.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return n.preventDefault(),!1}})}function k(){n.getParam("readonly")||n.on("BeforeExecCommand mousedown",function(){f("StyleWithCSS",!1);f("enableInlineTableEditing",!1);fpt(n)||f("enableObjectResizing",!1)})}function d(){n.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function g(){n.inline||n.on("keydown",function(){document.activeElement===document.body&&n.getWin().focus()})}function h(){n.inline||(n.contentStyles.push("body {min-height: 150px}"),n.on("click",function(t){var i;"HTML"===t.target.nodeName&&(11<l.ie?n.getBody().focus():(i=n.selection.getRng(),n.getBody().focus(),n.selection.setRng(i),n.selection.normalize(),n.nodeChanged()))}))}function nt(){l.mac&&n.on("keydown",function(t){!s.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),n.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))})}function tt(){n.on("click",function(n){var t=n.target;do if("A"===t.tagName)return void n.preventDefault();while(t=t.parentNode)});n.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function it(){n.on("init",function(){n.dom.bind(n.getBody(),"submit",function(n){n.preventDefault()})})}function et(){var r=t.getAttribs(i.getStart().cloneNode(!1));return function(){var u=i.getStart();u!==n.getBody()&&(t.setAttrib(u,"style",null),rt(r,function(n){u.setAttributeNode(n.cloneNode(!0))}))}}function ot(){return!i.isCollapsed()&&t.getParent(i.getStart(),t.isBlock)!==t.getParent(i.getEnd(),t.isBlock)}function st(n){var r=t.create("body"),u=n.cloneContents();return r.appendChild(u),i.serializer.serialize(r,{format:"html"})}var rt=r.each,c=s.BACKSPACE,ht=s.DELETE,t=n.dom,i=n.selection,ct=n.parser,a=l.gecko,lt=l.ie,ut=l.webkit,v="data:text/mce-internal,",ft=lt?"Text":"URL",at=y;return ne(n)?(ut&&(p(),b(),it(),e(),l.iOS&&(g(),h(),tt())),a&&(w(),k(),d(),nt())):(n.on("keydown",function(r){if(!u(r)&&r.keyCode===s.BACKSPACE){var e,o=(e=i.getRng()).startContainer,h=e.startOffset,c=t.getRoot(),f=o;if(e.collapsed&&0===h){for(;f&&f.parentNode&&f.parentNode.firstChild===f&&f.parentNode!==c;)f=f.parentNode;"BLOCKQUOTE"===f.tagName&&(n.formatter.toggle("blockquote",null,f),(e=t.createRng()).setStart(o,0),e.setEnd(o,0),i.setRng(e))}}}),n.on("keydown",function(i){var f,r,e,o,s=i.keyCode;u(i)||s!==ht&&s!==c||(f=n.selection.isCollapsed(),r=n.getBody(),f&&!t.isEmpty(r)||!f&&(e=st(n.selection.getRng()),(o=t.createRng()).selectNode(n.getBody()),e!==st(o))||(i.preventDefault(),n.setContent(""),r.firstChild&&t.isBlock(r.firstChild)?n.selection.setCursorLocation(r.firstChild,0):n.selection.setCursorLocation(r,0),n.nodeChanged()))}),l.windowsPhone||n.on("keyup focusin mouseup",function(n){s.modifierPressed(n)||i.normalize()},!0),ut&&(p(),b(),oi(n)&&n.on("init",function(){f("DefaultParagraphSeparator",oi(n))}),it(),o(),ct.addNodeFilter("br",function(n){for(var t=n.length;t--;)"Apple-interchange-newline"===n[t].attr("class")&&n[t].remove()}),l.iOS?(g(),h(),tt()):e()),11<=l.ie&&(h(),o()),l.ie&&(e(),f("AutoUrlDetect",!1),n.on("dragstart",function(t){var r,u,f;(r=t).dataTransfer&&(n.selection.isCollapsed()&&"IMG"===r.target.tagName&&i.select(r.target),0<(u=n.selection.getContent()).length&&(f=v+escape(n.id)+","+escape(u),r.dataTransfer.setData(ft,f)))}),n.on("drop",function(t){var f,o,e,r;u(t)||(f=t.dataTransfer&&(r=t.dataTransfer.getData(ft))&&0<=r.indexOf(v)?(r=r.substr(v.length).split(","),{id:unescape(r[0]),html:unescape(r[1])}):null)&&f.id!==n.id&&(t.preventDefault(),o=art(t.x,t.y,n.getDoc()),i.setRng(o),e=f.html,n.queryCommandSupported("mceInsertClipboardContent")?n.execCommand("mceInsertClipboardContent",!1,{content:e,internal:!0}):n.execCommand("mceInsertContent",!1,e))})),a&&(n.on("keydown",function(r){if(!u(r)&&r.keyCode===c&&n.getBody().getElementsByTagName("hr").length&&i.isCollapsed()&&0===i.getRng().startOffset){var e=i.getNode(),f=e.previousSibling;if("HR"===e.nodeName)return t.remove(e),void r.preventDefault();f&&f.nodeName&&"hr"===f.nodeName.toLowerCase()&&(t.remove(f),r.preventDefault())}}),w(),n.on("keypress",function(t){var i;if(!u(t)&&(8===t.keyCode||46===t.keyCode)&&ot())return i=et(),n.getDoc().execCommand("delete",!1,null),i(),t.preventDefault(),!1}),t.bind(n.getDoc(),"cut",function(t){var i;!u(t)&&ot()&&(i=et(),ui.setEditorTimeout(n,function(){i()}))}),k(),n.on("SetContent ExecCommand",function(n){"setcontent"!==n.type&&"mceInsertLink"!==n.command||rt(t.select("a"),function(n){var i=n.parentNode,r=t.getRoot();if(i.lastChild===n){for(;i&&!t.isBlock(i);){if(i.parentNode.lastChild!==i||i===r)return;i=i.parentNode}t.add(i,"br",{"data-mce-bogus":1})}})}),d(),nt(),o())),{refreshContentEditable:at,isHidden:function(){if(!a||n.removed)return!1;var t=n.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}}function koi(n){return vl(n,function(n){return!1===tr(n)})}function doi(n){var t=n.settings,i=n.editorUpload.blobCache;return koi({allow_conditional_comments:t.allow_conditional_comments,allow_html_data_urls:t.allow_html_data_urls,allow_svg_data_urls:t.allow_svg_data_urls,allow_html_in_named_anchor:t.allow_html_in_named_anchor,allow_script_urls:t.allow_script_urls,allow_unsafe_link_target:t.allow_unsafe_link_target,convert_fonts_to_spans:t.convert_fonts_to_spans,fix_list_elements:t.fix_list_elements,font_size_legacy_values:t.font_size_legacy_values,forced_root_block:t.forced_root_block,forced_root_block_attrs:t.forced_root_block_attrs,padd_empty_with_br:t.padd_empty_with_br,preserve_cdata:t.preserve_cdata,remove_trailing_brs:t.remove_trailing_brs,inline_styles:t.inline_styles,root_name:n.inline?n.getElement().nodeName.toLowerCase():void 0,validate:!0,blob_cache:i,document:n.getDoc(),images_dataimg_filter:t.images_dataimg_filter})}function kni(i){var r,u,f;i.bindPendingEventDelegates();i.initialized=!0;i.fire("Init");i.focus(!0);f=(u=i).dom.getRoot();u.inline||hw(u)&&u.selection.getStart(!0)!==f||wi(f).each(function(i){var r,e,o,f,s=i.getNode(),h=vh(s)?wi(s).getOr(i):i;l.browser.isIE()?(r=u,e=h.toRange(),o=t.fromDom(r.getBody()),f=(vkt(r)?n.from(e):n.none()).map(ykt).filter(drt(o)),r.bookmark=f.isSome()?f:r.bookmark):u.selection.setRng(h.toRange())});i.nodeChanged({initial:!0});i.execCallback("init_instance_callback",i);(r=i).settings.auto_focus&&ui.setEditorTimeout(r,function(){var n=!0===r.settings.auto_focus?r:r.editorManager.get(r.settings.auto_focus);n.destroyed||n.focus()},100)}function goi(n){return(n.inline?n.ui:n.dom).styleSheetLoader}function nsi(n){function s(){k.unloadAll(l);n.inline||n.ui.styleSheetLoader.unloadAll(c)}function h(){n.removed?s():n.on("remove",s)}var f,k=goi(n),c=upt(n),l=n.contentCSS,i,a,v,e,o,y,p,w,u,b;return 0<n.contentStyles.length&&(f="",r.each(n.contentStyles,function(n){f+=n+"\r\n"}),n.dom.addStyle(f)),b=ri.all((i=n,a=l,v=c,e=[new ri(function(n,t){return goi(i).loadAll(a,n,t)})],i.inline?e:e.concat([new ri(function(n,t){return i.ui.styleSheetLoader.loadAll(v,n,t)})]))).then(h).catch(h),n.settings.content_style&&(y=(o=n).settings.content_style,p=t.fromDom(o.getBody()),w=yg(ko(p)),du(u=t.fromTag("style"),"type","text/css"),ii(u,t.fromText(y)),ii(w,u),o.on("remove",function(){ni(u)})),b}function dot(n){var t;!0!==n.removed&&(ne(t=n)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),kni(n))}function got(n,f){var tt=n.settings,ut=n.getElement(),p=n.getDoc(),l,w,o,ot,st,ct,lt,a,b,k,g,v,at,ft,h,nt,vt,it,y,rt,et,yt,wt;tt.inline||(n.getElement().style.visibility=n.orgVisibility);f||n.inline||(p.open(),p.write(n.iframeHTML),p.close());n.inline&&(tst.addClass(ut,"mce-content-body"),n.contentDocument=p=document,n.contentWindow=window,n.bodyElement=ut,n.contentAreaContainer=ut);v=n.getBody();v.disabled=!0;n.readonly=!!tt.readonly;n.readonly||(n.inline&&"static"===tst.getStyle(v,"position",!0)&&(v.style.position="relative"),v.contentEditable=n.getParam("content_editable_state",!0));v.disabled=!1;n.editorUpload=cki(n);n.schema=le(tt);n.dom=d(p,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,hex_colors:tt.force_hex_style_colors,update_styles:!0,root_element:n.inline?n.getBody():null,collect:function(){return n.inline},schema:n.schema,contentCssCors:n.getParam("content_css_cors",!1,"boolean"),referrerPolicy:tpt(n),onSetAttrib:function(t){n.fire("SetAttrib",t)}});n.parser=((w=aet(doi(l=n),l.schema)).addAttributeFilter("src,href,style,tabindex",function(n,t){for(var r,i,f=n.length,e=l.dom,u="data-mce-"+t;f--;)(i=(r=n[f]).attr(t))&&!r.attr(u)&&0!==i.indexOf("data:")&&0!==i.indexOf("blob:")&&("style"===t?((i=e.serializeStyle(e.parseStyle(i),r.name)).length||(i=null),r.attr(u,i),r.attr(t,i)):"tabindex"===t?(r.attr(u,i),r.attr(t,null)):r.attr(u,l.convertURL(i,t,r.name)))}),w.addNodeFilter("script",function(n){for(var i,r,t=n.length;t--;)i=n[t],r=i.attr("type")||"no/type",0!==r.indexOf("mce-")&&i.attr("type","mce-"+r)}),l.settings.preserve_cdata&&w.addNodeFilter("#cdata",function(n){for(var t,i=n.length;i--;)t=n[i],t.type=8,t.name="#comment",t.value="[CDATA["+l.dom.encode(t.value)+"]]"}),w.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(n){for(var t,i=n.length,r=l.schema.getNonEmptyElements();i--;)t=n[i],t.isEmpty(r)&&0===t.getAll("br").length&&(t.append(new ru("br",1)).shortEnded=!0)}),w);n.serializer=sii((o=n.settings,c(c({},doi(n)),koi({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope,element_format:o.element_format,entities:o.entities,entity_encoding:o.entity_encoding,indent:o.indent,indent_after:o.indent_after,indent_before:o.indent_before,block_elements:o.block_elements,boolean_attributes:o.boolean_attributes,custom_elements:o.custom_elements,extended_valid_elements:o.extended_valid_elements,invalid_elements:o.invalid_elements,invalid_styles:o.invalid_styles,move_caret_before_on_enter_elements:o.move_caret_before_on_enter_elements,non_empty_elements:o.non_empty_elements,schema:o.schema,self_closing_elements:o.self_closing_elements,short_ended_elements:o.short_ended_elements,special:o.special,text_block_elements:o.text_block_elements,text_inline_elements:o.text_inline_elements,valid_children:o.valid_children,valid_classes:o.valid_classes,valid_elements:o.valid_elements,valid_styles:o.valid_styles,verify_html:o.verify_html,whitespace_elements:o.whitespace_elements}))),n);n.selection=uii(n.dom,n.getWin(),n.serializer,n);n.annotator=ibt(n);n.formatter=sri(n);n.undoManager=cri(n);n._nodeChangeDispatcher=new ani(n);n._selectionOverrides=wni(n);a=n;b=ec();k=hi(!1);g=hvt(function(n){a.fire("longpress",c(c({},n),{type:"longpress"}));k.set(!0)},400);a.on("touchstart",function(n){gfi(n).each(function(t){g.cancel();var i={x:t.clientX,y:t.clientY,target:n.target};g.throttle(n);k.set(!1);b.set(i)})},!0);a.on("touchmove",function(n){g.cancel();gfi(n).each(function(n){b.on(function(t){var i=n,r=t,u=Math.abs(i.clientX-r.x),f=Math.abs(i.clientY-r.y);(5<u||5<f)&&(b.clear(),k.set(!1),a.fire("longpresscancel"))})})},!0);a.on("touchend touchcancel",function(n){g.cancel();"touchcancel"!==n.type&&b.get().filter(function(t){return t.target.isEqualNode(n.target)}).each(function(){k.get()?n.preventDefault():a.fire("tap",c(c({},n),{type:"tap"}))})},!0);(ct=st=n).on("click",function(n){ct.dom.getParent(n.target,"details")&&n.preventDefault()});(lt=st).parser.addNodeFilter("details",function(n){e(n,function(n){n.attr("data-mce-open",n.attr("open"));n.attr("open","open")})});lt.serializer.addNodeFilter("details",function(n){e(n,function(n){var t=n.attr("data-mce-open");n.attr("open",ht(t)?t:null);n.attr("data-mce-open",null)})});ne(n)||(ot=n).on("click",function(n){var f,r,t,u,e;3<=n.detail&&(t=(f=ot).selection.getRng(),u=i.fromRangeStart(t),e=i.fromRangeEnd(t),!i.isElementPosition(u)||poi(r=u.container())&&wi(r).each(function(n){return t.setStart(n.container(),n.offset())}),!i.isElementPosition(e)||poi(r=u.container())&&lf(r).each(function(n){return t.setEnd(n.container(),n.offset())}),f.selection.setRng(dut(t)))});yt=ne(at=n)?hi(null):kgi(at);et=yt;(rt=n).addCommand("delete",function(){var n,t=et;kfi(n=rt)||rk(n,!1)||ik(n,!1)||yk(n,t,!1)||nk(n,!1)||eb(n)||uk(n,!1)||wk(n,!1)||tk(n)||pk(n,!1)||(dfi(n,"Delete"),vri(n))});rt.addCommand("forwardDelete",function(){var n,t=et;rk(n=rt,!0)||ik(n,!0)||yk(n,t,!0)||nk(n,!0)||eb(n)||uk(n,!0)||wk(n,!0)||tk(n)||pk(n,!0)||dfi(n,"ForwardDelete")});oi(ft=n)&&ft.on("NodeChange",u(rgi,ft));nt=(h=n).dom;vt=oi(h);it=h.getParam("placeholder",yvi.getAttrib(h.getElement(),"placeholder"),"string");y=function(n,i){var u,r,f;(function(n){if(lri(n)){var t=n.keyCode;return!ari(n)&&(s.metaKeyPressed(n)||n.altKey||112<=t&&t<=123||dt(cdi,t))}})(n)||(u=h.getBody(),r=!(lri(f=n)&&!(ari(f)||"keyup"===f.type&&229===f.keyCode))&&function(n,i,r){if(pt(t.fromDom(i),!1)){var f=""===r,u=i.firstElementChild;return!u||!n.getStyle(i.firstElementChild,"padding-left")&&!n.getStyle(i.firstElementChild,"padding-right")&&(f?!n.isBlock(u):r===u.nodeName.toLowerCase())}return!1}(nt,u,vt),""!==nt.getAttrib(u,pui)===r&&!i||(nt.setAttrib(u,pui,r?it:null),nt.setAttrib(u,"aria-placeholder",r?it:null),h.fire("PlaceholderToggle",{state:r}),h.on(r?"keydown":"keyup",y),h.off(r?"keyup":"keydown",y)))};it&&h.on("init",function(n){y(n,!0);h.on("change SetContent ExecCommand",y);h.on("paste",function(n){return ui.setEditorTimeout(h,function(){return y(n)})})});wt=ubi(n),function(n){var t=n.settings,f=n.getDoc(),u=n.getBody(),i;n.fire("PreInit");t.browser_spellcheck||t.gecko_spellcheck||(f.body.spellcheck=!1,tst.setAttrib(u,"spellcheck","false"));n.quirks=bni(n);n.fire("PostRender");i=n.getParam("directionality",lu.isRtl()?"rtl":void 0);void 0!==i&&(u.dir=i);t.protect&&n.on("BeforeSetContent",function(n){r.each(t.protect,function(t){n.content=n.content.replace(t,function(n){return"<!--mce:protected "+escape(n)+"-->"})})});n.on("SetContent",function(){n.addVisual(n.getBody())});n.on("compositionstart compositionend",function(t){n.composing="compositionstart"===t.type})}(n);wt.fold(function(){nsi(n).then(function(){return dot(n)})},function(t){n.setProgressState(!0);nsi(n).then(function(){t().then(function(){n.setProgressState(!1);dot(n)},function(t){n.notificationManager.open({type:"error",text:String(t)});dot(n)})})})}function dni(n,i){var f,e,o,u,h=n.translate("Rich Text Area"),r=(f=n.id,e=h,i.height,o=n.getParam("iframe_attrs",{}),oe(u=t.fromTag("iframe"),o),oe(u,{id:f+"_ifr",frameBorder:"0",allowTransparency:"true",title:e}),pp(u,"tox-edit-area__iframe"),u.dom),s;return r.onload=function(){r.onload=null;n.fire("load")},s=function(n,t){var i,r;return document.domain!==window.location.hostname&&l.browser.isIE()?(i=uri("mce"),n[i]=function(){got(n)},r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+n.id+'");document.write(ed.iframeHTML);document.close();ed.'+i+"(true);})()",wv.setAttrib(t,"src",r),!0):!1}(n,r),n.contentAreaContainer=i.iframeContainer,n.iframeElement=r,n.iframeHTML=function(n){var t=n.getParam("doctype","<!DOCTYPE html>")+"<html><head>";n.getParam("document_base_url","")!==n.documentBaseUrl&&(t+='<base href="'+n.documentBaseURI.getURI()+'" />');t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var i=kyt(n,"body_id","tinymce"),r=kyt(n,"body_class",""),u=n.translate(n.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string"));return dyt(n)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+dyt(n)+'" />'),t+('<\/head><body id="'+i+'" class="mce-content-body '+r+'" data-id="'+n.id)+'" aria-label="'+u+'"><br><\/body><\/html>'}(n),wv.add(i.iframeContainer,r),s}function tsi(n){return n.replace(/^\-/,"")}function isi(n){return{editorContainer:n,iframeContainer:n,api:{}}}function gni(n){var i,r,t,f,e,u,o,s=n.getElement();return n.orgDisplay=s.style.display,ht(pa(n))?n.theme.renderUI():ft(pa(n))?(r=(i=n).getElement(),(t=pa(i)(i,r)).editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||i.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||i.id+"_iframecontainer"),t.height=t.iframeHeight||r.offsetHeight,t):(o=(f=n).getElement(),f.inline?isi(null):(e=o,u=csi.create("div"),csi.insertAfter(u,e),isi(u)))}function rsi(t){var o,v,p,i,b,u,k,d,f,s,g,a;t.fire("ScriptsLoaded");o=t;v=r.trim(npt(o));p=o.ui.registry.getAll().icons;et(c(c({},kb.get("default").icons),kb.get(v).icons),function(n,t){w(p,t)||o.ui.registry.addIcon(t,n)});u=pa(i=t);ht(u)?(i.settings.theme=tsi(u),b=oo.get(u),i.theme=new b(i,oo.urls[u]),i.theme.init&&i.theme.init(i,oo.urls[u]||i.documentBaseUrl.replace(/\/$/,""),i.$)):i.theme={};d=[];r.each(oit(k=t).split(/[ ,]/),function(n){lsi(k,d,tsi(n))});var h=gni(t),l=t,e=n.from(h.api).getOr({}),nt={show:n.from(e.show).getOr(y),hide:n.from(e.hide).getOr(y),disable:n.from(e.disable).getOr(y),isDisabled:n.from(e.isDisabled).getOr(it),enable:function(){l.mode.isReadOnly()||n.from(e.enable).map(phi)}};return l.ui=c(c({},l.ui),nt),a={editorContainer:h.editorContainer,iframeContainer:h.iframeContainer},t.editorContainer=a.editorContainer||null,oki(t),t.inline?got(t):(g=dni(f=t,s=a),s.editorContainer&&(wv.get(s.editorContainer).style.display=f.orgDisplay,f.hidden=wv.isHidden(s.editorContainer)),f.getElement().style.display="none",wv.setAttrib(f.id,"aria-hidden","true"),void(g||got(f)))}function usi(n){return"-"===n.charAt(0)}function fsi(t,i,r){return n.from(i).filter(function(n){return 0<n.length&&!kb.has(n)}).map(function(i){return{url:t.editorManager.baseURL+"/icons/"+i+"/icons"+r+".js",name:n.some(i)}})}function ntr(t,i){var o,s,f=kf.ScriptLoader,c=f,l=i,h=function(){var u,c,v,o,p,h,l,s,a;p=f;s=ipt(h=t);a=h.getParam("language_url","","string");!1===lu.hasCode(s)&&"en"!==s&&(l=""!==a?a:h.editorManager.baseURL+"/langs/"+s+".js",p.add(l,y,void 0,function(){pet(h,"LanguageLoadError",wet("language",l,s))}));v=f;e(function(n){for(var i=[],r=function(n){i.push(n)},t=0;t<n.length;t++)n[t].each(r);return i}([fsi(o=t,"default",i),n.from(o.getParam("icons_url","","string")).filter(function(n){return 0<n.length}).map(function(t){return{url:t,name:n.none()}}).orThunk(function(){return fsi(o,npt(o),"")})]),function(n){v.add(n.url,y,void 0,function(){pet(o,"IconsLoadError",wet("icons",n.url,n.name.getOrUndefined()))})});u=t;c=i;r.each(u.getParam("external_plugins"),function(n,t){pu.load(t,n,y,void 0,function(){bet(u,n,t)});u.settings.plugins+=" "+t});r.each(oit(u).split(/[ ,]/),function(n){var i,t;(n=r.trim(n))&&!pu.urls[n]&&(usi(n)?(n=n.substr(1,n.length),i=pu.dependencies(n),r.each(i,function(n){var t=pu.createUrl({prefix:"plugins/",resource:n,suffix:"/plugin"+c+".js"},n);pu.load(t.resource,t,y,void 0,function(){bet(u,t.prefix+t.resource+t.suffix,t.resource)})})):(t={prefix:"plugins/",resource:n,suffix:"/plugin"+c+".js"},pu.load(n,t,y,void 0,function(){bet(u,t.prefix+t.resource+t.suffix,n)})))});f.loadQueue(function(){t.removed||rsi(t)},t,function(){t.removed||rsi(t)})},u=pa(o=t);ht(u)?(usi(u)||w(oo.urls,u)||((s=o.getParam("theme_url"))?oo.load(u,o.documentBaseURI.toAbsolute(s)):oo.load(u,"themes/"+u+"/theme"+l+".js")),c.loadQueue(function(){oo.waitFor(u,h)})):h()}function esi(i){return function(r,u){return n.from(u).map(t.fromDom).filter(su).bind(function(u){return f=i,e=r,o=u.dom,ift(t.fromDom(o),function(t){return bg(i=t,f).orThunk(function(){return"font"===vt(i)?at(rtr,f).bind(function(n){return tlt(i,n)}):n.none()});var i},function(n){return g(t.fromDom(e),n)}).or((s=u.dom,n.from(d.DOM.getStyle(s,i,!0))));var f,e,o,s}).getOr("")}}function ttr(n){return wi(n.getBody()).map(function(n){var t=n.container();return o(t)?t.parentNode:t})}function nst(i,r){return e=i,o=vst(n.some,r),f=e,n.from(f.selection.getRng()).bind(function(t){var i=f.getBody();return t.startContainer===i&&0===t.startOffset?n.none():n.from(f.selection.getStart(!0))}).orThunk(u(ttr,e)).map(t.fromDom).filter(su).bind(o);var e,o,f}function osi(n,t){var i,f,u;return/^[0-9.]+$/.test(t)?(i=parseInt(t,10),1<=i&&i<=7)?(f=r.explode(n.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large")),u=r.explode(n.getParam("font_size_classes","")),u?u[i-1]||t:f[i-1]||t):t:t}function bi(n){this.commands={state:{},exec:{},value:{}};this.editor=n;this.setupCommands(n)}function str(n,t,i){var r,f,u,e,o,s;cvt(n,t)&&!1===i?(f=t,yp(r=n)?r.dom.classList.remove(f):(o=f,0<(s=p(gtt(e=r,"class"),function(n){return n!==o})).length?du(e,"class",s.join(" ")):se(e,"class")),0===(yp(u=r)?u.dom.classList:gtt(u,"class")).length&&se(u,"class")):i&&pp(n,t)}function ist(n,t,i){try{n.getDoc().execCommand(t,!1,String(i))}catch(n){}}function rd(n,t){n.dom.contentEditable=t?"true":"false"}function htr(i,r){var o,f,u=t.fromDom(i.getBody());str(u,"mce-content-readonly",r);r?(i.selection.controlSelection.hideResizeRect(),i._selectionOverrides.hideFakeCaret(),n.from(i.selection.getNode()).each(function(n){n.removeAttribute("data-mce-selected")}),rd(u,!(i.readonly=!0)),e(gi(u,'*[contenteditable="true"]'),function(n){du(n,gs,"true");rd(n,!1)})):(rd(u,!(i.readonly=!1)),e(gi(u,"*["+gs+'="true"]'),function(n){se(n,gs);rd(n,!0)}),ist(i,"StyleWithCSS",!1),ist(i,"enableInlineTableEditing",!1),ist(i,"enableObjectResizing",!1),(ls(o=i)||(f=o,krt(ko(t.fromDom(f.getElement()))).filter(function(n){return!(void 0!==(t=n.dom.classList)&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body")))&&bw(f,n.dom);var t}).isSome()))&&i.focus(),i.selection.setRng(i.selection.getRng()),i.nodeChanged())}function ds(n){return n.readonly}function vsi(n){n.parser.addAttributeFilter("contenteditable",function(t){ds(n)&&e(t,function(n){n.attr(gs,n.attr("contenteditable"));n.attr("contenteditable","false")})});n.serializer.addAttributeFilter(gs,function(t){ds(n)&&e(t,function(n){n.attr("contenteditable",n.attr(gs))})});n.serializer.addTempAttr(gs)}function nh(n){this.bindings={};this.settings=n||{};this.scope=this.settings.scope||this;this.toggleEvent=this.settings.toggleEvent||it}function bv(n){return n._eventDispatcher||(n._eventDispatcher=new rst({scope:n,toggleEvent:function(t,i){rst.isNative(t)&&n.toggleNativeEvent&&n.toggleNativeEvent(t,i)}})),n._eventDispatcher}function ud(n,t){if("selectionchange"===t)return n.getDoc();if(!n.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return n.getDoc().documentElement;var i=ept(n);return i?(n.eventRoot||(n.eventRoot=ed.select(i)[0]),n.eventRoot):n.getBody()}function ysi(n,i,r){var u,f,e,o;n.hidden||ds(n)?ds(n)&&(u=n,"click"!==(f=r).type||s.metaKeyPressed(f)||(e=t.fromDom(f.target),o=u,un(e,"a",function(n){return g(n,t.fromDom(o.getBody()))}).bind(function(n){return tlt(n,"href")}).each(function(n){var i,t;f.preventDefault();/^#/.test(n)?(i=u.dom.select(n+',[name="'+(po(t=n,"#")?t.substring(1):t)+'"]')).length&&u.selection.scrollIntoView(i[0],!0):window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))):n.fire(i,r)}function psi(n,t){var i,r;n.delegates||(n.delegates={});n.delegates[t]||n.removed||(r=ud(n,t),ept(n)?(th||(th={},n.editorManager.on("removeEditor",function(){n.editorManager.activeEditor||th&&(et(th,function(t,i){n.dom.unbind(ud(n,i))}),th=null)})),th[t]||(th[t]=i=function(i){for(var f,e=i.target,r=n.editorManager.get(),u=r.length;u--;)f=r[u].getBody(),(f===e||ed.isChildOf(e,f))&&ysi(r[u],t,i)},ed.bind(r,t,i))):(ed.bind(r,t,i=function(i){ysi(n,t,i)}),n.delegates[t]=i))}function wsi(n,t,i,r){var f=i[t.get()],u=i[r];try{u.activate()}catch(n){return void console.error("problem while activating editor mode "+r+":",n)}f.deactivate();f.editorReadOnly!==u.editorReadOnly&&htr(n,u.editorReadOnly);t.set(r);n.fire("SwitchMode",{mode:r})}function ltr(n){var i,t={},r;ust(fst(n.toLowerCase(),"+"),function(n){n in ksi?t[n]=!0:/^[0-9]{2,}$/.test(n)?t.keyCode=parseInt(n,10):(t.charCode=n.charCodeAt(0),t.keyCode=vtr[n]||n.toUpperCase().charCodeAt(0))});r=[t.keyCode];for(i in ksi)t[i]?r.push(i):t[i]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,l.mac?t.ctrl=!0:t.shift=!0),t.meta&&(l.mac?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t}function ue(n){this.shortcuts={};this.pendingPatterns=[];this.editor=n;var t=this;n.on("keyup keypress keydown",function(n){(t.hasModifier(n)||t.isFunctionKey(n))&&!n.isDefaultPrevented()&&(ust(t.shortcuts,function(i){if(t.matchShortcut(n,i))return t.pendingPatterns=i.subpatterns.slice(0),"keydown"===n.type&&t.executeShortcutAction(i),!0}),t.matchShortcut(n,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===n.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))})}function b(n,t,i){function u(n,t){return function(i,r){return n[i.toLowerCase()]=c(c({},r),{type:t})}}var r,f,e,ft,b,et,k,ot,st,ht,ct,g,lt,at,nt,vt,yt,tt,o=this,s,h,v,rt,p,ut;this.plugins={};this.contentCSS=[];this.contentStyles=[];this.loadedCSS={};this.isNotDirty=!1;this.editorManager=i;this.documentBaseUrl=i.documentBaseURL;gsi(this,bsi);this.settings=(ht=(st=this).documentBaseUrl,ct=i.defaultSettings,lt=ht,at=nki,nt=st,vt={id:n,theme:"silver",toolbar_mode:hii(g=t,"floating"),plugins:"",document_base_url:lt,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:nt.convertURL,url_converter_scope:nt},yt=c(c({},vt),at?nri:{}),!1!==(tt=pbi(gii||tki,gii,yt,ct,g)).deprecation_warnings&&vbi(g,tt),tt);this.settings.suffix&&(i.suffix=this.settings.suffix);this.suffix=i.suffix;this.settings.base_url&&i._setBaseUrl(this.settings.base_url);this.baseUri=i.baseURI;this.settings.referrer_policy&&(kf.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),d.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy));rr.languageLoad=this.settings.language_load;rr.baseURL=i.baseURL;this.id=n;this.setDirty(!1);this.documentBaseURI=new ro(this.settings.document_base_url,{base_uri:this.baseUri});this.baseURI=this.baseUri;this.inline=!!this.settings.inline;this.shortcuts=new dsi(this);this.editorCommands=new asi(this);this.settings.cache_suffix&&(l.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,""));this.ui={registry:{addAutocompleter:(b={},(r={addButton:u(f={},"button"),addGroupToolbarButton:u(f,"grouptoolbarbutton"),addToggleButton:u(f,"togglebutton"),addMenuButton:u(f,"menubutton"),addSplitButton:u(f,"splitbutton"),addMenuItem:u(e={},"menuitem"),addNestedMenuItem:u(e,"nestedmenuitem"),addToggleMenuItem:u(e,"togglemenuitem"),addAutocompleter:u(ft={},"autocompleter"),addContextMenu:u(et={},"contextmenu"),addContextToolbar:u(k={},"contexttoolbar"),addContextForm:u(k,"contextform"),addSidebar:u(ot={},"sidebar"),addIcon:function(n,t){return b[n.toLowerCase()]=t},getAll:function(){return{buttons:f,menuItems:e,icons:b,popups:ft,contextMenus:et,contextToolbars:k,sidebars:ot}}}).addAutocompleter),addButton:r.addButton,addContextForm:r.addContextForm,addContextMenu:r.addContextMenu,addContextToolbar:r.addContextToolbar,addIcon:r.addIcon,addMenuButton:r.addMenuButton,addMenuItem:r.addMenuItem,addNestedMenuItem:r.addNestedMenuItem,addSidebar:r.addSidebar,addSplitButton:r.addSplitButton,addToggleButton:r.addToggleButton,addGroupToolbarButton:r.addGroupToolbarButton,addToggleMenuItem:r.addToggleMenuItem,getAll:r.getAll},styleSheetLoader:void 0,show:y,hide:y,enable:y,disable:y,isDisabled:it};ut=(rt=hi("design"),p=hi({design:{activate:y,deactivate:y,editorReadOnly:!1},readonly:{activate:y,deactivate:y,editorReadOnly:!0}}),(h=s=this).serializer?vsi(h):h.on("PreInit",function(){vsi(h)}),(v=s).on("ShowCaret",function(n){ds(v)&&n.preventDefault()}),v.on("ObjectSelected",function(n){ds(v)&&n.preventDefault()}),{isReadOnly:function(){return ds(s)},set:function(n){return function(n,t,i,r){if(r!==i.get()){if(!w(t,r))throw new Error("Editor mode '"+r+"' is invalid");n.initialized?wsi(n,i,t,r):n.on("init",function(){return wsi(n,i,t,r)})}}(s,p.get(),rt,n)},get:function(){return rt.get()},register:function(n,t){p.set(function(n,t,i){var r;if(dt(atr,t))throw new Error("Cannot override default mode "+t);return c(c({},n),((r={})[t]=c(c({},i),{deactivate:function(){try{i.deactivate()}catch(n){console.error("problem while deactivating editor mode "+t+":",n)}}}),r))}(p.get(),n,t))}});this.mode=ut;this.setMode=ut.set;i.fire("SetupEditor",{editor:this});this.execCallback("setup",this);this.$=a.overrideDefaults(function(){return{context:o.inline?o.getBody():o.getDoc(),element:o.getBody()}})}function thi(n){var t=n.type;yf(lo.get(),function(i){switch(t){case"scroll":i.fire("ScrollWindow",n);break;case"resize":i.fire("ResizeWindow",n)}})}function ihi(n){n!==uhi&&(n?a(window).on("resize scroll",thi):a(window).off("resize scroll",thi),uhi=n)}function rhi(n){var i=nr,t;for(delete co[n.id],t=0;t<co.length;t++)if(co[t]===n){co.splice(t,1);break}return nr=p(nr,function(t){return n!==t}),lo.activeEditor===n&&(lo.activeEditor=0<nr.length?nr[0]:null),lo.focusedEditor===n&&(lo.focusedEditor=null),i.length!==nr.length}function fhi(n,t,i){var u=t.x,f=t.y,e=n.w,o=n.h,s=t.w,h=t.h,r=(i||"").split("");return"b"===r[0]&&(f+=h),"r"===r[1]&&(u+=s),"c"===r[0]&&(f+=hd(h/2)),"c"===r[1]&&(u+=hd(s/2)),"b"===r[3]&&(f-=o),"r"===r[4]&&(u-=e),"c"===r[3]&&(f-=hd(o/2)),"c"===r[4]&&(u-=hd(e/2)),sl(u,f,e,o)}function ehi(){}function sl(n,t,i,r){return{x:n,y:t,w:i,h:r}}function yd(n){this.settings=hhi({},n);this.count=0}var cl=function(n){return{eq:n}},vhi=cl(function(n,t){return n===t}),dd=cl(function(n,t){if(n===t)return!0;var i=hst(n);return i===hst(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(i)?n===t:"array"===i?cst(dd).eq(n,t):"object"===i&&lst(dd).eq(n,t))}),ht=bd("string"),fh=bd("object"),br=bd("array"),ll=ast(null),yst=kd("boolean"),tr=ast(void 0),ft=kd("function"),eh=kd("number"),it=f(!1),lt=f(!0),ny={fold:function(n){return n()},isSome:it,isNone:lt,getOr:ki,getOrThunk:pst,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},getOrNull:f(null),getOrUndefined:f(void 0),or:ki,orThunk:pst,map:ng,each:y,bind:ng,exists:it,forall:lt,filter:function(){return ny},toArray:function(){return[]},toString:f("none()")},fg=function(n){function u(){return r}function i(t){return t(n)}var t=f(n),r={fold:function(t,i){return i(n)},isSome:lt,isNone:it,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:u,orThunk:u,map:function(t){return fg(t(n))},each:function(t){t(n)},bind:i,exists:i,forall:i,filter:function(t){return t(n)?r:ny},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},n={some:fg,none:ng,from:function(n){return null==n?ny:fg(n)}},eg=Array.prototype.slice,whi=Array.prototype.indexOf,bhi=Array.prototype.push,bu=ft(Array.from)?Array.from:function(n){return eg.call(n)},ch=Object.keys,khi=Object.hasOwnProperty,dhi=function(n,t){var i={};return et(n,function(n,r){var u=t(n,r);i[u.k]=u.v}),i},w=function(n,t){return khi.call(n,t)},og=Array.isArray,c=function(){return(c=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)},hg=function(n,t){return{major:n,minor:t}},wl={nu:hg,detect:function(n,t){function u(n){return Number(i.replace(r,"$"+n))}var i,r,f=String(t).toLowerCase();return 0===n.length?vht():(r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r}(n,i=f))?hg(u(1),u(2)):{major:0,minor:0}},unknown:vht},po=function(n,t){return""===(i=t)||n.length>=i.length&&n.substr(0,0+i.length)===i;var i},cg=sg(/^\s+|\s+$/g),nci=sg(/^\s+/g),wht=sg(/\s+$/g),lg=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,bht={browsers:f([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return yi(n,"edge/")&&yi(n,"chrome")&&yi(n,"safari")&&yi(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,lg],search:function(n){return yi(n,"chrome")&&!yi(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return yi(n,"msie")||yi(n,"trident")}},{name:"Opera",versionRegexes:[lg,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pf("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pf("firefox")},{name:"Safari",versionRegexes:[lg,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(yi(n,"safari")||yi(n,"mobile/"))&&yi(n,"applewebkit")}}]),oses:f([{name:"Windows",search:pf("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return yi(n,"iphone")||yi(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pf("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:pf("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pf("linux"),versionRegexes:[]},{name:"Solaris",search:pf("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pf("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pf("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},kht="Firefox",tci=function(){return yht({current:void 0,version:wl.unknown()})},ici=yht,dht=(f("Edge"),f("Chrome"),f("IE"),f("Opera"),f(kht),f("Safari"),"Windows"),ght="Android",nct="Solaris",tct="FreeBSD",ict="ChromeOS",rci=function(){return pht({current:void 0,version:wl.unknown()})},uci=pht,kr=(f(dht),f("iOS"),f(ght),f("Linux"),f("OSX"),f(nct),f(tct),f(ict),eht(function(){return i=navigator.userAgent,p=n.from(navigator.userAgentData),w=ghi,a=bht.browsers(),g=bht.oses(),v=p.bind(function(n){return t=a,tht(n.brands,function(n){var i=n.brand.toLowerCase();return gt(t,function(n){var t;return i===(null===(t=n.brand)||void 0===t?void 0:t.toLowerCase())}).map(function(t){return{current:t.name,version:wl.nu(parseInt(n.version,10),0)}})});var t}).orThunk(function(){return oht(a,n=i).map(function(t){var i=wl.detect(t.versionRegexes,n);return{current:t.name,version:i}});var n}).fold(tci,ici),y=oht(g,b=i).map(function(n){var t=wl.detect(n.versionRegexes,b);return{current:n.name,version:t}}).fold(rci,uci),{browser:v,os:y,deviceType:(k=v,o=i,s=w,r=(t=y).isiOS()&&!0===/ipad/i.test(o),u=t.isiOS()&&!r,d=(h=t.isiOS()||t.isAndroid())||s("(pointer:coarse)"),e=r||!u&&h&&s("(min-device-width:768px)"),c=u||h&&!e,l=k.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),{isiPad:f(r),isiPhone:f(u),isTablet:f(e),isPhone:f(c),isTouch:f(d),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:f(l),isDesktop:f(!c&&!e&&!l)})};var i,p,w,b,t,k,o,s,r,u,h,d,e,c,l,a,g,v,y})),rct=navigator.userAgent,ag=kr(),pi=ag.browser,sr=ag.os,ku=ag.deviceType,fci=/WebKit/.test(rct)&&!pi.isEdge(),eci="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,oci=-1!==rct.indexOf("Windows Phone"),l={opera:pi.isOpera(),webkit:fci,ie:!(!pi.isIE()&&!pi.isEdge())&&pi.version.major,gecko:pi.isFirefox(),mac:sr.isOSX()||sr.isiOS(),iOS:ku.isiPad()||ku.isiPhone(),android:sr.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:pi.isIE()?document.documentMode||7:10,fileApi:eci,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!pi.isIE(),desktop:ku.isDesktop(),windowsPhone:oci,browser:{current:pi.current,version:pi.version,isChrome:pi.isChrome,isEdge:pi.isEdge,isFirefox:pi.isFirefox,isIE:pi.isIE,isOpera:pi.isOpera,isSafari:pi.isSafari},os:{current:sr.current,version:sr.version,isAndroid:sr.isAndroid,isChromeOS:sr.isChromeOS,isFreeBSD:sr.isFreeBSD,isiOS:sr.isiOS,isLinux:sr.isLinux,isOSX:sr.isOSX,isSolaris:sr.isSolaris,isWindows:sr.isWindows},deviceType:{isDesktop:ku.isDesktop,isiPad:ku.isiPad,isiPhone:ku.isiPhone,isPhone:ku.isPhone,isTablet:ku.isTablet,isTouch:ku.isTouch,isWebView:ku.isWebView}},sci=/^\s*|\s*$/g,uct=function(n,t,i,r){r=r||this;n&&yl(n=i?n[i]:n,function(n,u){return!1!==t.call(r,n,u,i)&&void uct(n,t,i,r)})},r={trim:hht,isArray:og,is:cht,toArray:function(n){if(og(n))return n;for(var i=[],t=0,r=n.length;t<r;t++)i[t]=n[t];return i},makeMap:function(n,t,i){var r;for(t=t||",",i=i||{},r=(n="string"==typeof(n=n||[])?n.split(t):n).length;r--;)i[n[r]]={};return i},each:yl,map:ug,grep:hh,inArray:uht,hasOwn:w,extend:function(n){for(var r,u,e,f,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];for(r=0;r<i.length;r++){f=i[r];for(u in f)w(f,u)&&void 0!==(e=f[u])&&(n[u]=e)}return n},create:function(n,t,i){var f,o,s,e=this,h=0,r=(n=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(n))[3].match(/(^|\.)(\w+)$/i)[2],u=e.createNS(n[3].replace(/\.\w+$/,""),i);if(!u[r]){if("static"===n[2])return u[r]=t,void(this.onCreate&&this.onCreate(n[2],n[3],u[r]));t[r]||(t[r]=function(){},h=1);u[r]=t[r];e.extend(u[r].prototype,t);n[5]&&(f=e.resolve(n[5]).prototype,o=n[5].match(/\.(\w+)$/i)[1],s=u[r],u[r]=h?function(){return f[o].apply(this,arguments)}:function(){return this.parent=f[o],s.apply(this,arguments)},u[r].prototype[r]=u[r],e.each(f,function(n,t){u[r].prototype[t]=f[t]}),e.each(t,function(n,t){f[t]?u[r].prototype[t]=function(){return this.parent=f[t],n.apply(this,arguments)}:t!==r&&(u[r].prototype[t]=n)}));e.each(t.static,function(n,t){u[r][t]=n})}},walk:uct,createNS:function(n,t){var i,r;for(t=t||window,n=n.split("."),i=0;i<n.length;i++)t[r=n[i]]||(t[r]={}),t=t[r];return t},resolve:function(n,t){var i,r;for(t=t||window,i=0,r=(n=n.split(".")).length;i<r&&(t=t[n[i]]);i++);return t},explode:function(n,t){return!n||cht(n,"array")?n:ug(n.split(t||","),hht)},_addCacheSuffix:function(n){var t=l.cacheSuffix;return t&&(n+=(-1===n.indexOf("?")?"?":"&")+t),n}},t={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return pl(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return pl(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return pl(i)},fromDom:pl,fromPoint:function(t,i,r){return n.from(t.dom.elementFromPoint(i,r)).map(pl)}},k,s,dbt,pw,gbt,nkt,udt,nb,pd,wd;"undefined"!=typeof window||Function("return this;")();var su=fy(1),gr=fy(3),lci=fy(9),aci=fy(11),nu=function(n){return ut(n.dom.childNodes,t.fromDom)},flt=ft(Element.prototype.attachShadow)&&ft(Node.prototype.getRootNode),vci=f(flt),ko=flt?function(n){return t.fromDom(n.dom.getRootNode())}:ah,ii=function(n,t){n.dom.appendChild(t.dom)},ni=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},na=function(i){var r=gr(i)?i.dom.parentNode:i.dom;if(null==r||null===r.ownerDocument)return!1;var f=r.ownerDocument,e=t.fromDom(r),u=ko(e);return(act(u)?n.some(u):n.none()).fold(function(){return f.body.contains(r)},vst(na,hci))},elt=function(n,t){return{left:n,top:t,translate:function(i,r){return elt(n+i,t+r)}}},yh=elt,kg=function(n){var t,i=n.dom,r=i.ownerDocument.body;return r===i?yh(r.offsetLeft,r.offsetTop):na(n)?(t=i.getBoundingClientRect(),yh(t.left,t.top)):yh(0,0)},h=dl(1),dg=dr(["textarea","input"]),o=dl(3),yci=dl(8),gg=dl(9),nn=dl(11),st=dr(["br"]),pci=dr(["img"]),gu=gct("true"),rt=gct("false"),vy=dr(["td","th"]),tu=dr(["video","audio","object","embed"]),olt=function(n,t){return ay(n)?n.style.getPropertyValue(t):""},wci=kr().browser,slt={},tn={exports:slt};!function(){var n=this,t=function(){function l(){}function n(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];h(n,this)}function s(i,r){for(;3===i._state;)i=i._value;0!==i._state?(i._handled=!0,n._immediateFn(function(){var n,f=1===i._state?r.onFulfilled:r.onRejected;if(null!==f){try{n=f(i._value)}catch(n){return void t(r.promise,n)}u(r.promise,n)}else(1===i._state?u:t)(r.promise,i._value)})):i._deferreds.push(r)}function u(i,r){var u,e,o;try{if(r===i)throw new TypeError("A promise cannot be resolved with itself.");if(r&&("object"==typeof r||"function"==typeof r)){if(u=r.then,r instanceof n)return i._state=3,i._value=r,void f(i);if("function"==typeof u)return void h((e=u,o=r,function(){e.apply(o,arguments)}),i)}i._state=1;i._value=r;f(i)}catch(r){t(i,r)}}function t(n,t){n._state=2;n._value=t;f(n)}function f(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var i=0,r=t._deferreds.length;i<r;i++)s(t,t._deferreds[i]);t._deferreds=null}function a(n,t,i){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.promise=i}function h(n,i){var r=!1;try{n(function(n){r||(r=!0,u(i,n))},function(n){r||(r=!0,t(i,n))})}catch(n){if(r)return;r=!0;t(i,n)}}var i,r,e,o={exports:{}},c;return i=o,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=setTimeout,n.prototype.catch=function(n){return this.then(null,n)},n.prototype.then=function(n,t){var i=new this.constructor(l);return s(this,new a(n,t,i)),i},n.all=function(t){var i=Array.prototype.slice.call(t);return new n(function(n,t){if(0===i.length)return n([]);for(var u=i.length,r=0;r<i.length;r++)!function f(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return o.call(e,function(n){f(r,n)},t),0}i[r]=e;0==--u&&n(i)}catch(e){t(e)}}(r,i[r])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(n){n(t)})},n.reject=function(t){return new n(function(n,i){i(t)})},n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;r<u;r++)t[r].then(n,i)})},n._immediateFn="function"==typeof setImmediate?function(n){setImmediate(n)}:function(n){e(n,0)},n._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},n._setImmediateFn=function(t){n._immediateFn=t},n._setUnhandledRejectionFn=function(t){n._unhandledRejectionFn=t},i.exports?i.exports=n:r.Promise||(r.Promise=n),c=o.exports,{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||c}};"object"==typeof slt&&void 0!==tn?tn.exports=t():(n="undefined"!=typeof globalThis?globalThis:n||self).EphoxContactWrapper=t()}();var clt=tn.exports.boltExport,rn=function(t){function f(n){u()?o(n):r.push(n)}var i=n.none(),r=[],u=function(){return i.isSome()},o=function(n){i.each(function(t){setTimeout(function(){n(t)},0)})};return t(function(t){u()||(i=n.some(t),e(r,o),r=[])}),{get:f,map:function(n){return rn(function(t){f(function(i){t(n(i))})})},isReady:u}},kci={nu:rn,pure:function(n){return rn(function(t){t(n)})}},ta=function(n){function t(t){n().then(t,bci)}return{map:function(t){return ta(function(){return n().then(t)})},bind:function(t){return ta(function(){return n().then(function(n){return t(n).toPromise()})})},anonBind:function(t){return ta(function(){return n().then(function(){return t.toPromise()})})},toLazy:function(){return kci.nu(t)},toCached:function(){var t=null;return ta(function(){return t=null===t?n():t})},toPromise:n,get:t}},ph=function(t){return{isValue:lt,isError:it,getOr:f(t),getOrThunk:f(t),getOrDie:f(t),or:function(){return ph(t)},orThunk:function(){return ph(t)},fold:function(n,i){return i(t)},map:function(n){return ph(n(t))},mapError:function(){return ph(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return n.some(t)}}},ia=function(t){return{isValue:it,isError:lt,getOr:ki,getOrThunk:function(n){return n()},getOrDie:function(){return n=String(t),function(){throw new Error(n);}();var n},or:ki,orThunk:function(n){return n()},fold:function(n){return n(t)},map:function(){return ia(t)},mapError:function(n){return ia(n(t))},each:y,bind:function(){return ia(t)},exists:it,forall:lt,toOptional:n.none}},llt={value:ph,error:ia,fromOption:function(n,t){return n.fold(function(){return ia(t)},ph)}};he([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var en,on,dci=function(n,i){return gt(n.dom.childNodes,function(n){return i(t.fromDom(n))}).map(t.fromDom)},ri=window.Promise||clt,ui={requestAnimationFrame:function(n,t){en?en.then(n):en=new ri(function(n){(function(n,t){for(var i=window.requestAnimationFrame,u=["ms","moz","webkit"],r=0;r<u.length&&!i;r++)i=window[u[r]+"RequestAnimationFrame"];(i=i||function(n){window.setTimeout(n,0)})(n,t)})(n,t=t||document.body)}).then(n)},setTimeout:fn,setInterval:ylt,setEditorTimeout:function(n,t,i){return fn(function(){n.removed||t()},i)},setEditorInterval:function(n,t,i){var r=ylt(function(){n.removed?clearInterval(r):t()},i);return r},debounce:plt,throttle:plt,clearInterval:function(n){return clearInterval(n)},clearTimeout:function(n){return clearTimeout(n)}},blt=(on=new WeakMap,{forElement:function(t,i){var r=ko(t).dom;return n.from(on.get(r)).getOrThunk(function(){var n=wlt(r,i);return on.set(r,n),n})}}),yt=(go.prototype.current=function(){return this.node},go.prototype.next=function(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node},go.prototype.prev=function(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node},go.prototype.prev2=function(n){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",n),this.node},go.prototype.findSibling=function(n,t,i,r){var f,u;if(n){if(!r&&n[t])return n[t];if(n!==this.rootNode){if(f=n[i])return f;for(u=n.parentNode;u&&u!==this.rootNode;u=u.parentNode)if(f=u[i])return f}}},go.prototype.findPreviousNode=function(n,t,i,r){var f,e,u;if(n&&(f=n[i],!this.rootNode||f!==this.rootNode)){if(f){if(!r)for(u=f[t];u;u=u[t])if(!u[t])return u;return f}return(e=n.parentNode)&&e!==this.rootNode?e:void 0}},go);var gci=ce(["h1","h2","h3","h4","h5","h6"]),tf=ce(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),eat=ce(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),bn=ce(["ul","ol","dl"]),ua=ce(["li","dd","dt"]),nli=ce(["thead","tbody","tfoot"]),gy=ce(["td","th"]),np=ce(["pre","script","textarea","style"]),kn="",ir="",fi=kn,tp=function(n){return n===kn},ae=function(n){return n.replace(/\uFEFF/g,"")},tli=h,gh=o,ip=function(n){return gh(n)&&n.data[0]===fi},rp=function(n){return gh(n)&&n.data[n.data.length-1]===fi},oat=gu,ili=rt,rli=st,uli=o,fli=dr(["script","style","textarea"]),sat=dr(["img","input","textarea","hr","iframe","video","audio","object","embed"]),eli=dr(["table"]),oli=hr,dn=function(n){return!1===(h(t=n)&&"true"===t.getAttribute("unselectable"))&&ili(n);var t},sli=/^[ \t\r\n]*$/,hli=dct("data-mce-bookmark"),cli=dct("data-mce-bogus"),lli=function(n){return h(n)&&"all"===n.getAttribute("data-mce-bogus")},gn=function(n,t,i){var f=i||t,e,v,y,s,p,w,r,c,l,b,k,a,u;if(h(t)&&nat(t))return t;for(a=t.childNodes,u=a.length-1;0<=u;u--)gn(n,a[u],f);return!h(t)||1===(e=t.childNodes).length&&nat(e[0])&&t.parentNode.insertBefore(e[0],t),nn(y=t)||gg(y)||ky(t,f)||h(v=t)&&0<v.childNodes.length||(p=f,o(s=t)&&0<s.data.length&&(c=new yt(w=s,r=p).prev(!1),l=new yt(w,r).next(!1),b=tr(c)||glt(c,r),k=tr(l)||glt(l,r),b&&k))||n.remove(t),t},ali=r.makeMap,up=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vli=/[<>&\"\']/g,yli=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,pli={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},ts={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},wli={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ntt=tat("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ve={encodeRaw:iat,encodeAllRaw:function(n){return(""+n).replace(vli,function(n){return ts[n]||n})},encodeNumeric:rat,encodeNamed:an,getEncodeFunc:function(n,t){var r=tat(t)||ntt,i=ali(n.replace(/\+/g,","));return i.named&&i.numeric?function(n,t){return n.replace(t?up:fp,function(n){return void 0!==ts[n]?ts[n]:void 0!==r[n]?r[n]:1<n.length?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":"&#"+n.charCodeAt(0)+";"})}:i.named?t?function(n,t){return an(n,t,r)}:an:i.numeric?rat:iat},decode:function(n){return n.replace(yli,function(n,i){return i?65535<(i="x"===i.charAt(0).toLowerCase()?parseInt(i.substr(1),16):parseInt(i,10))?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i))):pli[i]||String.fromCharCode(i):wli[n]||ntt[n]||(r=n,(u=t.fromTag("div").dom).innerHTML=r,u.textContent||u.innerText||r);var r,u})}},is={},bli={},nc=r.makeMap,si=r.each,ttt=r.extend,hat=r.explode,kli=r.inArray,dli={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},gli=/^(?:mouse|contextmenu)|click/,tc=(rf.prototype.bind=function(n,t,i,r){function y(n){u.executeHandlers(dh(n||l.event),e)}var e,o,f,h,s,c,u=this,l=window,a,v;if(n&&3!==n.nodeType&&8!==n.nodeType){for(n[u.expando]?e=n[u.expando]:(e=u.count++,n[u.expando]=e,u.events[e]={}),r=r||n,a=t.split(" "),v=a.length;v--;)s=y,h=c=!1,"DOMContentLoaded"===(f=a[v])&&(f="ready"),u.domLoaded&&"ready"===f&&"complete"===n.readyState?i.call(r,dh({type:f})):(u.hasMouseEnterLeave||(h=u.mouseEnterLeave[f])&&(s=function(n){var i=n.currentTarget,t=n.relatedTarget;if(t&&i.contains)t=i.contains(t);else for(;t&&t!==i;)t=t.parentNode;t||((n=dh(n||l.event)).type="mouseout"===n.type?"mouseleave":"mouseenter",n.target=i,u.executeHandlers(n,e))}),u.hasFocusIn||"focusin"!==f&&"focusout"!==f||(c=!0,h="focusin"===f?"focus":"blur",s=function(n){(n=dh(n||l.event)).type="focus"===n.type?"focusin":"focusout";u.executeHandlers(n,e)}),(o=u.events[e][f])?"ready"===f&&u.domLoaded?i(dh({type:f})):o.push({func:i,scope:r}):(u.events[e][f]=o=[{func:i,scope:r}],o.fakeName=h,o.capture=c,o.nativeHandler=s,"ready"===f?function(n,t,i){var r,u=n.document,f={type:"ready"};i.domLoaded?t(f):(r=function(){dy(n,"DOMContentLoaded",r);dy(n,"load",r);i.domLoaded||(i.domLoaded=!0,t(f));n=null},"complete"===u.readyState||"interactive"===u.readyState&&u.body?r():wn(n,"DOMContentLoaded",r),i.domLoaded||wn(n,"load",r))}(n,s,u):wn(n,h||f,s,c)));return n=o=null,i}},rf.prototype.unbind=function(n,t,i){var e,f,u,o,c,l,a,r,s,h;if(!n||3===n.nodeType||8===n.nodeType)return this;if(o=n[this.expando],o){if(u=this.events[o],t){for(s=t.split(" "),h=s.length;h--;)if(r=u[f=s[h]]){if(i)for(e=r.length;e--;)r[e].func===i&&(c=r.nativeHandler,l=r.fakeName,a=r.capture,(r=r.slice(0,e).concat(r.slice(e+1))).nativeHandler=c,r.fakeName=l,r.capture=a,u[f]=r);i&&0!==r.length||(delete u[f],dy(n,r.fakeName||f,r.nativeHandler,r.capture))}}else et(u,function(t,i){dy(n,t.fakeName||i,t.nativeHandler,t.capture)}),u={};for(f in u)if(w(u,f))return this;delete this.events[o];try{delete n[this.expando]}catch(t){n[this.expando]=null}}return this},rf.prototype.fire=function(n,t,i){var u,r;if(!n||3===n.nodeType||8===n.nodeType)return this;for(r=dh({type:t,target:n},i);(u=n[this.expando])&&this.executeHandlers(r,u),(n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow)&&!r.isPropagationStopped(););return this},rf.prototype.clean=function(n){var t,i;if(!n||3===n.nodeType||8===n.nodeType)return this;if(n[this.expando]&&this.unbind(n),(n=n.getElementsByTagName?n:n.document)&&n.getElementsByTagName)for(this.unbind(n),t=(i=n.getElementsByTagName("*")).length;t--;)(n=i[t])[this.expando]&&this.unbind(n);return this},rf.prototype.destroy=function(){this.events={}},rf.prototype.cancel=function(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1},rf.prototype.executeHandlers=function(n,t){var f=this.events[t],u=f&&f[n.type],i,e,r;if(u)for(i=0,e=u.length;i<e;i++)if(r=u[i],r&&!1===r.func.call(r.scope,n)&&n.preventDefault(),n.isImmediatePropagationStopped())return},rf.Event=new rf,rf);var wt,nt,ep,cat,fa,itt,lat,op,pe,ic,we,cr,sp,uf,be,rc,ea,ei="sizzle"+-new Date,hu=window.document,ff=0,nai=0,aat=ett(),vat=ett(),yat=ett(),rtt=function(n,t){return n===t&&(ic=!0),0},hp="undefined",tai={}.hasOwnProperty,ke=[],iai=ke.pop,rai=ke.push,de=ke.push,pat=ke.slice,rs=ke.indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]===n)return t;return-1},ot="[\\x20\\t\\r\\n\\f]",us="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",wat="\\["+ot+"*("+us+")(?:"+ot+"*([*^$|!~]?=)"+ot+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+us+"))|)"+ot+"*\\]",bat=":("+us+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+wat+")*)|.*)\\)|)",cp=new RegExp("^"+ot+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ot+"+$","g"),uai=new RegExp("^"+ot+"*,"+ot+"*"),fai=new RegExp("^"+ot+"*([>+~]|"+ot+")"+ot+"*"),eai=new RegExp("="+ot+"*([^\\]'\"]*?)"+ot+"*\\]","g"),oai=new RegExp(bat),sai=new RegExp("^"+us+"$"),lp={ID:new RegExp("^#("+us+")"),CLASS:new RegExp("^\\.("+us+")"),TAG:new RegExp("^("+us+"|[*])"),ATTR:new RegExp("^"+wat),PSEUDO:new RegExp("^"+bat),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ot+"*(even|odd|(([+-]|)(\\d*)n|)"+ot+"*(?:([+-]|)"+ot+"*(\\d+)|))"+ot+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+ot+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ot+"*((?:-\\d)?\\d*)"+ot+"*\\)|)(?=[^-]|$)","i")},hai=/^(?:input|select|textarea|button)$/i,cai=/^h\d$/i,utt=/^[^{]+\{\s*\[native \w/,lai=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ftt=/[+~]/,aai=/'|\\/g,ge=new RegExp("\\\\([\\da-f]{1,6}"+ot+"?|("+ot+")|.)","ig");try{de.apply(ke=pat.call(hu.childNodes),hu.childNodes);ke[hu.childNodes.length].nodeType}catch(bd){de={apply:ke.length?function(n,t){rai.apply(n,pat.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}k=function(n,t,i,r){var h,u,f,o,c,s,l,e,v,a;if((t?t.ownerDocument||t:hu)!==cr&&we(t),i=i||[],!n||"string"!=typeof n)return i;if(1!==(o=(t=t||cr).nodeType)&&9!==o)return[];if(uf&&!r){if(h=lai.exec(n))if(f=h[1]){if(9===o){if(!(u=t.getElementById(f))||!u.parentNode)return i;if(u.id===f)return i.push(u),i}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&ea(t,u)&&u.id===f)return i.push(u),i}else{if(h[2])return de.apply(i,t.getElementsByTagName(n)),i;if((f=h[3])&&wt.getElementsByClassName)return de.apply(i,t.getElementsByClassName(f)),i}if(wt.qsa&&(!be||!be.test(n))){if(e=l=ei,v=t,a=9===o&&n,1===o&&"object"!==t.nodeName.toLowerCase()){for(s=fa(n),(l=t.getAttribute("id"))?e=l.replace(aai,"\\$&"):t.setAttribute("id",e),e="[id='"+e+"'] ",c=s.length;c--;)s[c]=e+ap(s[c]);v=ftt.test(n)&&ott(t.parentNode)||t;a=s.join(",")}if(a)try{return de.apply(i,v.querySelectorAll(a)),i}catch(n){}finally{l||t.removeAttribute("id")}}}return lat(n.replace(cp,"$1"),t,i,r)};wt=k.support={};cat=k.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return!!t&&"HTML"!==t.nodeName};we=k.setDocument=function(n){var r,t=n?n.ownerDocument||n:hu,i=t.defaultView;return t!==cr&&9===t.nodeType&&t.documentElement?(sp=(cr=t).documentElement,uf=!cat(t),i&&i!==function(n){try{return n.top}catch(n){}return null}(i)&&(i.addEventListener?i.addEventListener("unload",function(){we()},!1):i.attachEvent&&i.attachEvent("onunload",function(){we()})),wt.attributes=!0,wt.getElementsByTagName=!0,wt.getElementsByClassName=utt.test(t.getElementsByClassName),wt.getById=!0,nt.find.ID=function(n,t){if(typeof t.getElementById!=hp&&uf){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},nt.filter.ID=function(n){var t=n.replace(ge,ye);return function(n){return n.getAttribute("id")===t}},nt.find.TAG=wt.getElementsByTagName?function(n,t){if(typeof t.getElementsByTagName!=hp)return t.getElementsByTagName(n)}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"!==n)return u;for(;i=u[f++];)1===i.nodeType&&r.push(i);return r},nt.find.CLASS=wt.getElementsByClassName&&function(n,t){if(uf)return t.getElementsByClassName(n)},rc=[],be=[],wt.disconnectedMatch=!0,be=be.length&&new RegExp(be.join("|")),rc=rc.length&&new RegExp(rc.join("|")),r=utt.test(sp.compareDocumentPosition),ea=r||utt.test(sp.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)for(;t=t.parentNode;)if(t===n)return!0;return!1},rtt=r?function(n,i){return n===i?(ic=!0,0):(r=!n.compareDocumentPosition-!i.compareDocumentPosition)||(1&(r=(n.ownerDocument||n)===(i.ownerDocument||i)?n.compareDocumentPosition(i):1)||!wt.sortDetached&&i.compareDocumentPosition(n)===r?n===t||n.ownerDocument===hu&&ea(hu,n)?-1:i===t||i.ownerDocument===hu&&ea(hu,i)?1:pe?rs.call(pe,n)-rs.call(pe,i):0:4&r?-1:1);var r}:function(n,i){if(n===i)return ic=!0,0;var r,u=0,o=n.parentNode,s=i.parentNode,f=[n],e=[i];if(!o||!s)return n===t?-1:i===t?1:o?-1:s?1:pe?rs.call(pe,n)-rs.call(pe,i):0;if(o===s)return kat(n,i);for(r=n;r=r.parentNode;)f.unshift(r);for(r=i;r=r.parentNode;)e.unshift(r);for(;f[u]===e[u];)u++;return u?kat(f[u],e[u]):f[u]===hu?-1:e[u]===hu?1:0},t):cr};k.matches=function(n,t){return k(n,null,null,t)};k.matchesSelector=function(n,t){if((n.ownerDocument||n)!==cr&&we(n),t=t.replace(eai,"='$1']"),wt.matchesSelector&&uf&&(!rc||!rc.test(t))&&(!be||!be.test(t)))try{var i=(void 0).call(n,t);if(i||wt.disconnectedMatch||n.document&&11!==n.document.nodeType)return i}catch(n){}return 0<k(t,cr,null,[n]).length};k.contains=function(n,t){return(n.ownerDocument||n)!==cr&&we(n),ea(n,t)};k.attr=function(n,t){(n.ownerDocument||n)!==cr&&we(n);var r=nt.attrHandle[t.toLowerCase()],i=r&&tai.call(nt.attrHandle,t.toLowerCase())?r(n,t,!uf):void 0;return void 0!==i?i:wt.attributes||!uf?n.getAttribute(t):(i=n.getAttributeNode(t))&&i.specified?i.value:null};k.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};k.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ic=!wt.detectDuplicates,pe=!wt.sortStable&&n.slice(0),n.sort(rtt),ic){for(;r=n[i++];)r===n[i]&&(t=u.push(i));for(;t--;)n.splice(u[t],1)}return pe=null,n};ep=k.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=ep(n)}else if(3===t||4===t)return n.nodeValue}else for(;r=n[u++];)i+=ep(r);return i};(nt=k.selectors={cacheLength:50,createPseudo:cu,match:lp,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(ge,ye),n[3]=(n[3]||n[4]||n[5]||"").replace(ge,ye),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||k.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&k.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return lp.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&oai.test(t)&&(i=fa(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(ge,ye).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=aat[n+" "];return t||(t=new RegExp("(^|"+ot+")"+n+"("+ot+"|$)"))&&aat(n,function(n){return t.test("string"==typeof n.className&&n.className||typeof n.getAttribute!=hp&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var u=k.attr(r,n);return null==u?"!="===t:!t||(u+="","="===t?u===i:"!="===t?u!==i:"^="===t?i&&0===u.indexOf(i):"*="===t?i&&-1<u.indexOf(i):"$="===t?i&&u.slice(-i.length)===i:"~="===t?-1<(" "+u+" ").indexOf(i):"|="===t&&(u===i||u.slice(0,i.length+1)===i+"-"))}},CHILD:function(n,t,i,r,u){var o="nth"!==n.slice(0,3),e="last"!==n.slice(-4),f="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,s){var a,b,h,c,l,y,p=o!=e?"nextSibling":"previousSibling",v=t.parentNode,k=f&&t.nodeName.toLowerCase(),w=!s&&!f;if(v){if(o){for(;p;){for(h=t;h=h[p];)if(f?h.nodeName.toLowerCase()===k:1===h.nodeType)return!1;y=p="only"===n&&!y&&"nextSibling"}return!0}if(y=[e?v.firstChild:v.lastChild],e&&w){for(l=(a=(b=v[ei]||(v[ei]={}))[n]||[])[0]===ff&&a[1],c=a[0]===ff&&a[2],h=l&&v.childNodes[l];h=++l&&h&&h[p]||(c=l=0)||y.pop();)if(1===h.nodeType&&++c&&h===t){b[n]=[ff,l,c];break}}else if(w&&(a=(t[ei]||(t[ei]={}))[n])&&a[0]===ff)c=a[1];else for(;(h=++l&&h&&h[p]||(c=l=0)||y.pop())&&((f?h.nodeName.toLowerCase()!==k:1!==h.nodeType)||!++c||(w&&((h[ei]||(h[ei]={}))[n]=[ff,c]),h!==t)););return(c-=u)===r||c%r==0&&0<=c/r}}},PSEUDO:function(n,t){var r,i=nt.pseudos[n]||nt.setFilters[n.toLowerCase()]||k.error("unsupported pseudo: "+n);return i[ei]?i(t):1<i.length?(r=[n,n,"",t],nt.setFilters.hasOwnProperty(n.toLowerCase())?cu(function(n,r){for(var e,u=i(n,t),f=u.length;f--;)n[e=rs.call(n,u[f])]=!(r[e]=u[f])}):function(n){return i(n,0,r)}):i}},pseudos:{not:cu(function(n){var t=[],r=[],i=itt(n.replace(cp,"$1"));return i[ei]?cu(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:cu(function(n){return function(t){return 0<k(n,t).length}}),contains:cu(function(n){return n=n.replace(ge,ye),function(t){return-1<(t.textContent||t.innerText||ep(t)).indexOf(n)}}),lang:cu(function(n){return sai.test(n||"")||k.error("unsupported lang: "+n),n=n.replace(ge,ye).toLowerCase(),function(t){var i;do if(i=uf?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(n){var t=window.location&&window.location.hash;return t&&t.slice(1)===n.id},root:function(n){return n===sp},focus:function(n){return n===cr.activeElement&&(!cr.hasFocus||cr.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return!1===n.disabled},disabled:function(n){return!0===n.disabled},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,!0===n.selected},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!nt.pseudos.empty(n)},header:function(n){return cai.test(n.nodeName)},input:function(n){return hai.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:fs(function(){return[0]}),last:fs(function(n,t){return[t-1]}),eq:fs(function(n,t,i){return[i<0?i+t:i]}),even:fs(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:fs(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:fs(function(n,t,i){for(var r=i<0?i+t:i;0<=--r;)n.push(r);return n}),gt:fs(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}}).pseudos.nth=nt.pseudos.eq;e(["radio","checkbox","file","password","image"],function(n){var t;nt.pseudos[n]=(t=n,function(n){return"input"===n.nodeName.toLowerCase()&&n.type===t})});e(["submit","reset"],function(n){var t;nt.pseudos[n]=(t=n,function(n){var i=n.nodeName.toLowerCase();return("input"===i||"button"===i)&&n.type===t})});dat.prototype=nt.filters=nt.pseudos;nt.setFilters=new dat;fa=k.tokenize=function(n,t){var u,r,e,f,i,o,s,h=vat[n+" "];if(h)return t?0:h.slice(0);for(i=n,o=[],s=nt.preFilter;i;){for(f in u&&!(r=uai.exec(i))||(r&&(i=i.slice(r[0].length)||i),o.push(e=[])),u=!1,(r=fai.exec(i))&&(u=r.shift(),e.push({value:u,type:r[0].replace(cp," ")}),i=i.slice(u.length)),nt.filter)nt.filter.hasOwnProperty(f)&&(!(r=lp[f].exec(i))||s[f]&&!(r=s[f](r))||(u=r.shift(),e.push({value:u,type:f,matches:r}),i=i.slice(u.length)));if(!u)break}return t?i.length:i?k.error(n):vat(n,o).slice(0)};itt=k.compile=function(n,t){function c(n,t,i,u,s){var c,y,a,v=0,h="0",p=n&&[],l=[],w=op,b=n||o&&nt.find.TAG("*",s),d=ff+=null==w?1:Math.random()||.1,g=b.length;for(s&&(op=t!==cr&&t);h!==g&&null!=(c=b[h]);h++){if(o&&c){for(y=0;a=f[y++];)if(a(c,t,i)){u.push(c);break}s&&(ff=d)}r&&((c=!a&&c)&&v--,n&&p.push(c))}if(v+=h,r&&h!==v){for(y=0;a=e[y++];)a(p,l,t,i);if(n){if(0<v)for(;h--;)p[h]||l[h]||(l[h]=iai.call(u));l=vp(l)}de.apply(u,l);s&&!n&&0<l.length&&1<v+e.length&&k.uniqueSort(u)}return s&&(ff=d,op=w),p}var u,f,e,r,o,s=[],h=[],i=yat[n+" "];if(!i){for(u=(t=t||fa(n)).length;u--;)((i=function n(t){for(var e,u,r,o=t.length,s=nt.relative[t[0].type],h=s||nt.relative[" "],i=s?1:0,c=stt(function(n){return n===e},h,!0),l=stt(function(n){return-1<rs.call(e,n)},h,!0),f=[function(n,t,i){var r=!s&&(i||t!==op)||((e=t).nodeType?c:l)(n,t,i);return e=null,r}];i<o;i++)if(u=nt.relative[t[i].type])f=[stt(htt(f),u)];else{if((u=nt.filter[t[i].type].apply(null,t[i].matches))[ei]){for(r=++i;r<o&&!nt.relative[t[r].type];r++);return function n(t,i,r,u,f,e){return u&&!u[ei]&&(u=n(u)),f&&!f[ei]&&(f=n(f,e)),cu(function(n,e,o,s){var l,c,a,p=[],y=[],w=e.length,b=n||function(n,t,i){for(var r=0,u=t.length;r<u;r++)k(n,t[r],i);return i}(i||"*",o.nodeType?[o]:o,[]),v=!t||!n&&i?b:vp(b,p,t,o,s),h=r?f||(n?t:w||u)?[]:e:v;if(r&&r(v,h,o,s),u)for(l=vp(h,y),u(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(n){if(f||t){if(f){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);f(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&-1<(l=f?rs.call(n,a):p[c])&&(n[l]=!(e[l]=a))}}else h=vp(h===e?h.splice(w,h.length):h),f?f(null,e,h,s):de.apply(e,h)})}(1<i&&htt(f),1<i&&ap(t.slice(0,i-1).concat({value:" "===t[i-2].type?"*":""})).replace(cp,"$1"),u,i<r&&n(t.slice(i,r)),r<o&&n(t=t.slice(r)),r<o&&ap(t))}f.push(u)}return htt(f)}(t[u]))[ei]?s:h).push(i);(i=yat(n,(f=h,r=0<(e=s).length,o=0<f.length,r?cu(c):c))).selector=n}return i};lat=k.select=function(n,t,i,r){var e,u,f,h,c,s="function"==typeof n&&n,o=!r&&fa(n=s.selector||n);if(i=i||[],1===o.length){if(2<(u=o[0]=o[0].slice(0)).length&&"ID"===(f=u[0]).type&&wt.getById&&9===t.nodeType&&uf&&nt.relative[u[1].type]){if(!(t=(nt.find.ID(f.matches[0].replace(ge,ye),t)||[])[0]))return i;s&&(t=t.parentNode);n=n.slice(u.shift().value.length)}for(e=lp.needsContext.test(n)?0:u.length;e--&&(f=u[e],!nt.relative[h=f.type]);)if((c=nt.find[h])&&(r=c(f.matches[0].replace(ge,ye),ftt.test(u[0].type)&&ott(t.parentNode)||t))){if(u.splice(e,1),!(n=r.length&&ap(u)))return de.apply(i,r),i;break}}return(s||itt(n,o))(r,t,!uf,i,ftt.test(n)&&ott(t.parentNode)||t),i};wt.sortStable=ei.split("").sort(rtt).join("")===ei;wt.detectDuplicates=!!ic;we();wt.sortDetached=!0;var uvt=document,ltt=Array.prototype.push,vai=Array.prototype.slice,yai=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,sa=tc.Event,pai=r.makeMap("children,contents,next,prev"),uc=function(n,t,i,r){var u;if(ctt(t))t=gat(t,ytt(n[0]));else if(t.length&&!t.nodeType){if(t=a.makeArray(t),r)for(u=t.length-1;0<=u;u--)uc(n,t[u],i,r);else for(u=0;u<t.length;u++)uc(n,t[u],i,r);return n}if(t.nodeType)for(u=n.length;u--;)i.call(n[u],t);return n},wai=r.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),bai=r.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),kai={"for":"htmlFor","class":"className",readonly:"readOnly"},dai={float:"cssFloat"},att={},vtt={},gai=/^\s*|\s*$/g,ytt=function(n){return n?9===n.nodeType?n:n.ownerDocument:uvt};lr.fn=lr.prototype={constructor:lr,selector:"",context:null,length:0,init:function(n,t){var u,r,i=this;if(!n)return i;if(n.nodeType)return i.context=i[0]=n,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return a(n).attr(t);i.context=t=document}if(ctt(n)){if(!(u="<"===(i.selector=n).charAt(0)&&">"===n.charAt(n.length-1)&&3<=n.length?[null,n,null]:yai.exec(n)))return a(t).find(n);if(u[1])for(r=gat(n,ytt(t)).firstChild;r;)ltt.call(i,r),r=r.nextSibling;else{if(!(r=ytt(t).getElementById(u[2])))return i;if(r.id!==u[2])return i.find(n);i.length=1;i[0]=r}}else this.add(n,!1);return i},toArray:function(){return r.toArray(this)},add:function(n,t){var r,i;if(ctt(n))return this.add(a(n));if(!1!==t)for(r=a.unique(this.toArray().concat(a.makeArray(n))),this.length=r.length,i=0;i<r.length;i++)this[i]=r[i];else ltt.apply(this,a.makeArray(n));return this},attr:function(n,t){var r,i=this;if("object"==typeof n)bf(n,function(n,t){i.attr(n,t)});else{if(!oa(t)){if(i[0]&&1===i[0].nodeType){if((r=att[n])&&r.get)return r.get(i[0],n);if(bai[n])return i.prop(n)?n:void 0;null===(t=i[0].getAttribute(n,2))&&(t=void 0)}return t}this.each(function(){var i;1===this.nodeType&&((i=att[n])&&i.set?i.set(this,t):null===t?this.removeAttribute(n,2):this.setAttribute(n,t,2))})}return i},removeAttr:function(n){return this.attr(n,null)},prop:function(n,t){var i=this;if("object"==typeof(n=kai[n]||n))bf(n,function(n,t){i.prop(n,t)});else{if(!oa(t))return i[0]&&i[0].nodeType&&n in i[0]?i[0][n]:t;this.each(function(){1===this.nodeType&&(this[n]=t)})}return i},css:function(n,t){function f(n){return n.replace(/-(\D)/g,function(n,t){return t.toUpperCase()})}function e(n){return n.replace(/[A-Z]/g,function(n){return"-"+n})}var i,r,u=this;if("object"==typeof n)bf(n,function(n,t){u.css(n,t)});else if(oa(t))n=f(n),"number"!=typeof t||wai[n]||(t=t.toString()+"px"),u.each(function(){var i=this.style;if((r=vtt[n])&&r.set)r.set(this,t);else{try{this.style[dai[n]||n]=t}catch(i){}null!==t&&""!==t||(i.removeProperty?i.removeProperty(e(n)):i.removeAttribute(n))}});else{if(i=u[0],(r=vtt[n])&&r.get)return r.get(i);if(!i.ownerDocument.defaultView)return i.currentStyle?i.currentStyle[f(n)]:"";try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(e(n))}catch(f){return}}return u},remove:function(){for(var n,t=this.length;t--;)n=this[t],sa.clean(n),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){for(var n,t=this.length;t--;)for(n=this[t];n.firstChild;)n.removeChild(n.firstChild);return this},html:function(n){var t;if(oa(n)){t=this.length;try{for(;t--;)this[t].innerHTML=n}catch(i){a(this[t]).empty().append(n)}return this}return this[0]?this[0].innerHTML:""},text:function(n){var t;if(oa(n)){for(t=this.length;t--;)"innerText"in this[t]?this[t].innerText=n:this[0].textContent=n;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return uc(this,arguments,function(n){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(n)})},prepend:function(){return uc(this,arguments,function(n){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(n,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?uc(this,arguments,function(n){this.parentNode.insertBefore(n,this)}):this},after:function(){return this[0]&&this[0].parentNode?uc(this,arguments,function(n){this.parentNode.insertBefore(n,this.nextSibling)},!0):this},appendTo:function(n){return a(n).append(this),this},prependTo:function(n){return a(n).prepend(this),this},replaceWith:function(n){return this.before(n).remove()},wrap:function(n){return tvt(this,n)},wrapAll:function(n){return tvt(this,n,!0)},wrapInner:function(n){return this.each(function(){a(this).contents().wrapAll(n)}),this},unwrap:function(){return this.parent().each(function(){a(this).replaceWith(this.childNodes)})},clone:function(){var n=[];return this.each(function(){n.push(this.cloneNode(!0))}),a(n)},addClass:function(n){return this.toggleClass(n,!0)},removeClass:function(n){return this.toggleClass(n,!1)},toggleClass:function(n,t){var i=this;return"string"!=typeof n||(-1!==n.indexOf(" ")?bf(n.split(" "),function(){i.toggleClass(this,t)}):i.each(function(i,r){var u,f=nvt(r,n);f!==t&&(u=r.className,f?r.className=ivt((" "+u+" ").replace(" "+n+" "," ")):r.className+=u?" "+n:n)})),i},hasClass:function(n){return nvt(this[0],n)},each:function(n){return bf(this,n)},on:function(n,t){return this.each(function(){sa.bind(this,n,t)})},off:function(n,t){return this.each(function(){sa.unbind(this,n,t)})},trigger:function(n){return this.each(function(){"object"==typeof n?sa.fire(this,n.type,n):sa.fire(this,n)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return a(vai.apply(this,arguments))},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(n){for(var i=[],t=0,r=this.length;t<r;t++)a.find(n,this[t],i);return a(i)},filter:function(n){return a("function"==typeof n?rvt(this.toArray(),function(t,i){return n(i,t)}):a.filter(n,this.toArray()))},closest:function(n){var t=[];return n instanceof a&&(n=n[0]),this.each(function(i,r){for(;r;){if("string"==typeof n&&a(r).is(n)){t.push(r);break}if(r===n){t.push(r);break}r=r.parentNode}}),a(t)},offset:function(n){var i,r,t,u,f=0,e=0;return n?this.css(n):((i=this[0])&&(t=(r=i.ownerDocument).documentElement,i.getBoundingClientRect&&(f=(u=i.getBoundingClientRect()).left+(t.scrollLeft||r.body.scrollLeft)-t.clientLeft,e=u.top+(t.scrollTop||r.body.scrollTop)-t.clientTop)),{left:f,top:e})},push:ltt,sort:Array.prototype.sort,splice:Array.prototype.splice};r.extend(lr,{extend:r.extend,makeArray:function(n){return n&&n===n.window||n.nodeType?[n]:r.toArray(n)},inArray:function(n,t){var i;if(t.indexOf)return t.indexOf(n);for(i=t.length;i--;)if(t[i]===n)return i;return-1},isArray:r.isArray,each:bf,trim:ivt,grep:rvt,find:k,expr:k.selectors,unique:k.uniqueSort,text:k.getText,contains:k.contains,filter:function(n,t,i){var r=t.length;for(i&&(n=":not("+n+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return 1===t.length?a.find.matchesSelector(t[0],n)?[t[0]]:[]:a.find.matches(n,t)}});bf({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return fvt(n,"parentNode")},next:function(n){return evt(n,"nextSibling",1)},prev:function(n){return evt(n,"previousSibling",1)},children:function(n){return ptt(n.firstChild,"nextSibling",1)},contents:function(n){return r.toArray(("iframe"===n.nodeName?n.contentDocument||n.contentWindow.document:n).childNodes)}},function(n,t){lr.fn[n]=function(i){var r=[],u;return this.each(function(){var n=t.call(r,this,i,r);n&&(a.isArray(n)?r.push.apply(r,n):r.push(n))}),1<this.length&&(pai[n]||(r=a.unique(r)),0===n.indexOf("parents")&&(r=r.reverse())),u=a(r),i?u.filter(i):u}});bf({parentsUntil:function(n,t){return fvt(n,"parentNode",t)},nextUntil:function(n,t){return ptt(n,"nextSibling",1,t).slice(1)},prevUntil:function(n,t){return ptt(n,"previousSibling",1,t).slice(1)}},function(n,t){lr.fn[n]=function(i,r){var u=[],f;return this.each(function(){var n=t.call(u,this,i,u);n&&(a.isArray(n)?u.push.apply(u,n):u.push(n))}),1<this.length&&(u=a.unique(u),0!==n.indexOf("parents")&&"prevUntil"!==n||(u=u.reverse())),f=a(u),r?f.filter(r):f}});lr.fn.is=function(n){return!!n&&0<this.filter(n).length};lr.fn.init.prototype=lr.fn;lr.overrideDefaults=function(n){var t,i=function(r,u){return t=t||n(),0===arguments.length&&(r=t.element),u=u||t.context,new i.fn.init(r,u)};return a.extend(i,this),i};lr.attrHooks=att;lr.cssHooks=vtt;var a=lr,ha=r.each,nvi=r.grep,wtt=l.ie,tvi=/^([a-z0-9],?)+$/i,d=function(n,i){function o(t){return t&&n&&ht(t)?n.getElementById(t):t}function u(n){return vi("string"==typeof n?o(n):n)}function c(n,t,i){var r,f,e=u(n);return void 0===(f=e.length?(r=bi[t])&&r.get?r.get(e,t):e.attr(t):f)?i||"":f}function ot(n){var t=o(n);return t?t.attributes:[]}function nt(n,t,r){""===r&&(r=null);var e,f=u(n),o=f.attr(t);f.length&&((e=bi[t])&&e.set?e.set(f,r,t):f.attr(t,r),o!==r&&i.onSetAttrib&&i.onSetAttrib({attrElm:f,attrName:t,attrValue:r}))}function tt(){return i.root_element||n.body}function bt(i,r){return function(n,i,r){var h,e=0,f=0,o=n.ownerDocument,c,u,s;if(r=r||n,i){if(r===n&&i.getBoundingClientRect&&"static"===wf(t.fromDom(n),"position"))return c=i.getBoundingClientRect(),{x:e=c.left+(o.documentElement.scrollLeft||n.scrollLeft)-o.documentElement.clientLeft,y:f=c.top+(o.documentElement.scrollTop||n.scrollTop)-o.documentElement.clientTop};for(u=i;u&&u!==r&&u.nodeType&&!ult(u,r);)s=u,e+=s.offsetLeft||0,f+=s.offsetTop||0,u=s.offsetParent;for(u=i.parentNode;u&&u!==r&&u.nodeType&&!ult(u,r);)e-=u.scrollLeft||0,f-=u.scrollTop||0,u=u.parentNode;f+=(h=t.fromDom(i),wci.isFirefox()&&"table"===vt(h)?rlt(nu(h)).filter(function(n){return"caption"===vt(n)}).bind(function(n){return rlt(hct(n)).map(function(t){var i=t.dom.offsetTop,r=n.dom.offsetTop,u=n.dom.offsetHeight;return i<=r?-u:0})}).getOr(0):0)}return{x:e,y:f}}(n.body,o(i),r)}function st(n,t,i){var r=u(n);return i?r.css(t):("float"===(t=t.replace(/-(\D)/g,function(n,t){return t.toUpperCase()}))&&(t=l.browser.isIE()?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)}function kt(n){var t=st(n=o(n),"width"),i=st(n,"height");return-1===t.indexOf("px")&&(t=0),-1===i.indexOf("px")&&(i=0),{w:parseInt(t,10)||n.offsetWidth||n.clientWidth,h:parseInt(i,10)||n.offsetHeight||n.clientHeight}}function ct(n,t){var i;if(!n)return!1;if(!Array.isArray(n)){if("*"===t)return 1===n.nodeType;if(tvi.test(t)){for(var u=t.toLowerCase().split(/,/),f=n.nodeName.toLowerCase(),r=u.length-1;0<=r;r--)if(u[r]===f)return!0;return!1}if(n.nodeType&&1!==n.nodeType)return!1}return i=Array.isArray(n)?n:[n],0<k(t,i[0].ownerDocument||i[0],null,i).length}function dt(n,t,i,u){var e,s=[],f=o(n);for(u=void 0===u,i=i||("BODY"!==tt().nodeName?tt().parentNode:null),r.is(t,"string")&&(t="*"===(e=t)?function(n){return 1===n.nodeType}:function(n){return ct(n,e)});f&&!(f===i||wu(f.nodeType)||gg(f)||nn(f));){if(!t||"function"==typeof t&&t(f)){if(!u)return[f];s.push(f)}f=f.parentNode}return u?s:null}function gt(n,t,i){var r=t;if(n)for("string"==typeof t&&(r=function(n){return ct(n,t)}),n=n[i];n;n=n[i])if("function"==typeof r&&r(n))return n;return null}function g(n,t,i){var f,u="string"==typeof n?o(n):n;return!!u&&(r.isArray(u)&&(u.length||0===u.length)?(f=[],ha(u,function(n,r){n&&f.push(t.call(i,"string"==typeof n?o(n):n,r))}),f):t.call(i||this,u))}function ni(n,t){u(n).each(function(n,i){ha(t,function(n,t){nt(i,t,n)})})}function ti(n,t){var i=u(n);wtt?i.each(function(n,i){if(!1!==i.canHaveHTML){for(;i.firstChild;)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+t;i.removeChild(i.firstChild)}catch(n){a("<div><\/div>").html("<br>"+t).contents().slice(1).appendTo(i)}return t}}):i.html(t)}function ii(t,i,r,u,f){return g(t,function(t){var e="string"==typeof i?n.createElement(i):i;return ni(e,r),u&&("string"!=typeof u&&u.nodeType?e.appendChild(u):"string"==typeof u&&ti(e,u)),f?e:t.appendChild(e)})}function ri(t,i,r){return ii(n.createElement(t),t,i,r,!0)}function lt(n,t){var i=u(n);return(t?i.each(function(){for(var n;n=this.firstChild;)3===n.nodeType&&0===n.data.length?this.removeChild(n):this.parentNode.insertBefore(n,this)}):i).remove(),1<i.length?i.toArray():i[0]}function ui(n,t,i){u(n).toggleClass(t,i).each(function(){""===this.className&&a(this).attr("class",null)})}function fi(n,t,i){return g(t,function(t){return r.is(t,"array")&&(n=n.cloneNode(!0)),i&&ha(nvi(t.childNodes),function(t){n.appendChild(t)}),t.parentNode.replaceChild(n,t)})}function ei(n){if(h(n)){var t="a"===n.nodeName.toLowerCase()&&!c(n,"href")&&c(n,"id");return c(n,"name")||c(n,"data-mce-bookmark")||t?1:void 0}}function at(){return n.createRange()}function oi(n){if(n&&h(n)){var t=n.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==n.contentEditable?n.contentEditable:null}return null}void 0===i&&(i={});var it,rt,si,hi,ci,ut,li={},pt=window,ft={},ki=0,wt=blt.forElement(t.fromDom(n),{contentCssCors:i.contentCssCors,referrerPolicy:i.referrerPolicy}),s=[],w=i.schema||le({}),v=yn({url_converter:i.url_converter,url_converter_scope:i.url_converter_scope},i.schema),b=i.ownEvents?new tc:tc.Event,ai=w.getBlockElements(),vi=a.overrideDefaults(function(){return{context:n,element:p.getRoot()}}),yi=ve.encodeAllRaw,pi=function(t,u,f,e){if(r.isArray(t)){for(var o=t.length,h=[];o--;)h[o]=pi(t[o],u,f,e);return h}return!i.collect||t!==n&&t!==pt||s.push([t,u,f,e]),b.bind(t,u,f,e||p)},wi=function(t,i,u){var f,o,e;if(r.isArray(t)){for(f=t.length,o=[];f--;)o[f]=wi(t[f],i,u);return o}if(0<s.length&&(t===n||t===pt))for(f=s.length;f--;)e=s[f],t!==e[0]||i&&i!==e[1]||u&&u!==e[2]||b.unbind(e[0],e[1],e[2]);return b.unbind(t,i,u)},p={doc:n,settings:i,win:pt,files:ft,stdMode:!0,boxModel:!0,styleSheetLoader:wt,boundEvents:s,styles:v,schema:w,events:b,isBlock:function(n){if("string"==typeof n)return!!ai[n];if(n){var t=n.nodeType;if(t)return!(1!==t||!ai[n.nodeName])}return!1},$:vi,$$:u,root:null,clone:function(t,i){if(!wtt||1!==t.nodeType||i)return t.cloneNode(i);var r=n.createElement(t.nodeName);return ha(ot(t),function(n){nt(r,n.nodeName,c(t,n.nodeName))}),r},getRoot:tt,getViewPort:function(n){var t=kct(n);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:function(n){var t=bt(n=o(n)),i=kt(n);return{x:t.x,y:t.y,w:i.w,h:i.h}},getSize:kt,getParent:function(n,t,i){var r=dt(n,t,i,!1);return r&&0<r.length?r[0]:null},getParents:dt,get:o,getNext:function(n,t){return gt(n,t,"nextSibling")},getPrev:function(n,t){return gt(n,t,"previousSibling")},select:function(t,r){return k(t,o(r)||i.root_element||n,[])},is:ct,add:ii,create:ri,createHTML:function(n,t,i){var r,u="";for(r in u+="<"+n,t)sh(t,r)&&(u+=" "+r+'="'+yi(t[r])+'"');return void 0!==i?u+">"+i+"<\/"+n+">":u+" />"},createFragment:function(t){var u,i=n.createElement("div"),r=n.createDocumentFragment();for(r.appendChild(i),t&&(i.innerHTML=t);u=i.firstChild;)r.appendChild(u);return r.removeChild(i),r},remove:lt,setStyle:function(n,t,r){var f=ht(t)?u(n).css(t,r):u(n).css(t);i.update_styles&&ovt(v,f)},getStyle:st,setStyles:function(n,t){var r=u(n).css(t);i.update_styles&&ovt(v,r)},removeAllAttribs:function(n){return g(n,function(n){for(var i=n.attributes,t=i.length-1;0<=t;t--)n.removeAttributeNode(i.item(t))})},setAttrib:nt,setAttribs:ni,getAttrib:c,getPos:bt,parseStyle:function(n){return v.parse(n)},serializeStyle:function(n,t){return v.serialize(n,t)},addStyle:function(t){var r,i;if(p!==d.DOM&&n===document){if(li[t])return;li[t]=!0}(i=n.getElementById("mceDefaultStyles"))||((i=n.createElement("style")).id="mceDefaultStyles",i.type="text/css",(r=n.getElementsByTagName("head")[0]).firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i));i.styleSheet?i.styleSheet.cssText+=t:i.appendChild(n.createTextNode(t))},loadCSS:function(n){e((n=n||"").split(","),function(n){ft[n]=!0;wt.load(n,y)})},addClass:function(n,t){u(n).addClass(t)},removeClass:function(n,t){ui(n,t,!1)},hasClass:function(n,t){return u(n).hasClass(t)},toggleClass:ui,show:function(n){u(n).show()},hide:function(n){u(n).hide()},isHidden:function(n){return"none"===u(n).css("display")},uniqueId:function(n){return(n||"mce_")+ki++},setHTML:ti,getOuterHTML:function(n){var t="string"==typeof n?o(n):n;return h(t)?t.outerHTML:a("<div><\/div>").append(a(t).clone()).html()},setOuterHTML:function(n,t){u(n).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(n){}lt(a(this).html(t),!0)})},decode:ve.decode,encode:yi,insertAfter:function(n,t){var i=o(t);return g(n,function(n){var t=i.parentNode,r=i.nextSibling;return r?t.insertBefore(n,r):t.appendChild(n),n})},replace:fi,rename:function(n,t){var i;return n.nodeName!==t.toUpperCase()&&(i=ri(t),ha(ot(n),function(t){nt(i,t.nodeName,c(n,t.nodeName))}),fi(i,n,!0)),i||n},findCommonAncestor:function(n,t){for(var r,i=n;i;){for(r=t;r&&i!==r;)r=r.parentNode;if(i===r)break;i=i.parentNode}return!i&&n.ownerDocument?n.ownerDocument.documentElement:i},toHex:function(n){return v.toHex(r.trim(n))},run:g,getAttribs:ot,isEmpty:function(n,t){var i,u,e=0,r,o,f;if(ei(n))return!1;if(n=n.firstChild){r=new yt(n,n.parentNode);o=w?w.getWhiteSpaceElements():{};t=t||(w?w.getNonEmptyElements():null);do{if(i=n.nodeType,h(n)){if(f=n.getAttribute("data-mce-bogus"),f){n=r.next("all"===f);continue}if(u=n.nodeName.toLowerCase(),t&&t[u]){if("br"!==u)return!1;e++;n=r.next();continue}if(ei(n))return!1}if(8===i||3===i&&!ns(n.nodeValue)||3===i&&n.parentNode&&o[n.parentNode.nodeName]&&ns(n.nodeValue))return!1;n=r.next()}while(n)}return e<=1},createRng:at,nodeIndex:fc,split:function(n,t,i){var f,e,u,r=at();if(n&&t)return r.setStart(n.parentNode,fc(n)),r.setEnd(t.parentNode,fc(t)),f=r.extractContents(),(r=at()).setStart(t.parentNode,fc(t)+1),r.setEnd(n.parentNode,fc(n)+1),e=r.extractContents(),(u=n.parentNode).insertBefore(gn(p,f),n),i?u.insertBefore(i,n):u.insertBefore(t,n),u.insertBefore(gn(p,e),n),lt(n),i||t},bind:pi,unbind:wi,fire:function(n,t,i){return b.fire(n,t,i)},getContentEditable:oi,getContentEditableParent:function(n){for(var i=tt(),t=null;n&&n!==i&&null===(t=oi(n));n=n.parentNode);return t},destroy:function(){var t,n;if(0<s.length)for(t=s.length;t--;)n=s[t],b.unbind(n[0],n[1],n[2]);et(ft,function(n,t){wt.unload(t);delete ft[t]});k.setDocument&&k.setDocument()},isChildOf:function(n,t){if(wtt){for(;n;){if(t===n)return!0;n=n.parentNode}return!1}return n===t||t.contains(n)},dumpRng:function(n){return"startContainer: "+n.startContainer.nodeName+", startOffset: "+n.startOffset+", endContainer: "+n.endContainer.nodeName+", endOffset: "+n.endOffset}},bi=(it=v,si=f(p),ci={set:function(n,t,i){rt.url_converter&&null!==t&&(t=rt.url_converter.call(rt.url_converter_scope||si(),t,i,n[0]));n.attr("data-mce-"+i,t).attr(i,t)},get:function(n,t){return n.attr("data-mce-"+t)||n.attr(t)}},ut={style:{set:function(n,t){null===t||"object"!=typeof t?(hi&&n.attr("data-mce-style",t),null!==t&&"string"==typeof t?(n.removeAttr("style"),n.css(it.parse(t))):n.attr("style",t)):n.css(t)},get:function(n){var t=n.attr("data-mce-style")||n.attr("style");return it.serialize(it.parse(t),n[0].nodeName)}}},(hi=(rt=i).keep_values)&&(ut.href=ut.src=ci),ut);return p};d.DOM=d(document);d.nodeIndex=fc;var ivi=d.DOM,btt=r.each,rvi=r.grep,kf=(iu.prototype._setReferrerPolicy=function(n){this.settings.referrerPolicy=n},iu.prototype.loadScript=function(n,t,i){function e(){f.remove(o);u&&(u.onerror=u.onload=u=null)}var f=ivi,o=f.uniqueId(),u=document.createElement("script");u.id=o;u.type="text/javascript";u.src=r._addCacheSuffix(n);this.settings.referrerPolicy&&f.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy);u.onload=function(){e();t()};u.onerror=function(){e();ft(i)?i():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+n)};(document.getElementsByTagName("head")[0]||document.body).appendChild(u)},iu.prototype.isDone=function(n){return 2===this.states[n]},iu.prototype.markDone=function(n){this.states[n]=2},iu.prototype.add=function(n,t,i,r){var u=this.states[n];this.queue.push(n);void 0===u&&(this.states[n]=0);t&&(this.scriptLoadedCallbacks[n]||(this.scriptLoadedCallbacks[n]=[]),this.scriptLoadedCallbacks[n].push({success:t,failure:r,scope:i||this}))},iu.prototype.load=function(n,t,i,r){return this.add(n,t,i,r)},iu.prototype.remove=function(n){delete this.states[n];delete this.scriptLoadedCallbacks[n]},iu.prototype.loadQueue=function(n,t,i){this.loadScripts(this.queue,n,t,i)},iu.prototype.loadScripts=function(n,t,i,r){function f(n,t){btt(u.scriptLoadedCallbacks[t],function(t){ft(t[n])&&t[n].call(t.scope)});u.scriptLoadedCallbacks[t]=void 0}var u=this,o=[],e;u.queueLoadedCallbacks.push({success:t,failure:r,scope:i||this});e=function(){var t,i=rvi(n);n.length=0;btt(i,function(n){2!==u.states[n]?3!==u.states[n]?1!==u.states[n]&&(u.states[n]=1,u.loading++,u.loadScript(n,function(){u.states[n]=2;u.loading--;f("success",n);e()},function(){u.states[n]=3;u.loading--;o.push(n);f("failure",n);e()})):f("failure",n):f("success",n)});u.loading||(t=u.queueLoadedCallbacks.slice(0),u.queueLoadedCallbacks.length=0,btt(t,function(n){0===o.length?ft(n.success)&&n.success.call(n.scope):ft(n.failure)&&n.failure.call(n.scope,o)}))};e()},iu.ScriptLoader=new iu,iu);var ca={},ktt=hi("en"),lu={getData:function(){return iht(ca,function(n){return c({},n)})},setCode:function(n){n&&ktt.set(n)},getCode:function(){return ktt.get()},add:function(n,t){var i=ca[n];i||(ca[n]=i={});et(t,function(n,t){i[t.toLowerCase()]=n})},translate:function(n){function t(n){return ft(n)?Object.prototype.toString.call(n):o(n)?"":""+n}function r(n){var i=t(n);return at(s,i.toLowerCase()).map(t).getOr(i)}function u(n){return n.replace(/{context:\w+}$/,"")}var f,e,s=svt().getOr({}),o=function(n){return""===n||null==n},i;return o(n)?"":fh(f=n)&&w(f,"raw")?t(n.raw):br(e=n)&&1<e.length?(i=n.slice(1),u(r(n[0]).replace(/\{([0-9]+)\}/g,function(n,r){return w(i,r)?t(i[r]):n}))):u(r(n))},isRtl:function(){return svt().bind(function(n){return at(n,"_dir")}).exists(function(n){return"rtl"===n})},hasCode:function(n){return w(ca,n)}},rr=function(){function r(n,t){e(p(i,function(i){return i.name===n&&i.state===t}),function(n){return n.callback()})}function u(t){var i;return(n[t]?n[t].dependencies:i)||[]}function f(n,t){return"object"==typeof t?t:"string"==typeof n?{prefix:"",resource:t,suffix:""}:{prefix:n.prefix,resource:t,suffix:n.suffix}}function o(r,u,f){void 0===f&&(f="added");w(n,r)&&"added"===f||w(t,r)&&"loaded"===f?u():i.push({name:r,state:f,callback:u})}var s=[],t={},n={},i=[],h=function(i,o,s,c,l){var a,v;t[i]||(0!==(a="string"==typeof o?o:o.prefix+o.resource+o.suffix).indexOf("/")&&-1===a.indexOf("://")&&(a=rr.baseURL+"/"+a),t[i]=a.substring(0,a.lastIndexOf("/")),v=function(){var l,n,t;r(i,"loaded");l=o;n=s;t=c;e(u(i),function(n){var t=f(l,n);h(t.resource,t,void 0,void 0)});n&&(t?n.call(t):n.call(kf))},n[i]?v():kf.ScriptLoader.add(a,v,c,l))};return{items:s,urls:t,lookup:n,_listeners:i,get:function(t){if(n[t])return n[t].instance},dependencies:u,requireLangPack:function(n,i){!1!==rr.languageLoad&&o(n,function(){var r=lu.getCode();!r||i&&-1===(","+(i||"")+",").indexOf(","+r+",")||kf.ScriptLoader.add(t[n]+"/langs/"+r+".js")},"loaded")},add:function(t,i,u){var f=i;return s.push(f),n[t]={instance:f,dependencies:u},r(t,"added"),f},remove:function(i){delete t[i];delete n[i]},createUrl:f,addComponents:function(n,i){var r=t[n];e(i,function(n){kf.ScriptLoader.add(r+"/"+n)})},load:h,waitFor:o}};rr.languageLoad=!0;rr.baseURL="";rr.PluginManager=rr();rr.ThemeManager=rr();var ryt=function(n,t){var i=[];return e(nu(n),function(n){i=(i=t(n)?i.concat([n]):i).concat(ryt(n,t))}),i},rit=f("mce-annotation"),la=f("data-mce-annotation"),bp=f("data-mce-annotation-uid"),fvi=function(n,i){return gi(t.fromDom(n.getBody()),"["+bp()+'="'+i+'"]')},evi=0,cc=Math.round,ovi=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),uyt=h,svi=nf,fyt=cy("display","block table"),hvi=cy("float","left right"),aa=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){for(var i=0;i<t.length;i++)if(!t[i](n))return!1;return!0}}(uyt,svi,gd(hvi)),cvi=gd(cy("white-space","pre pre-line pre-wrap")),va=o,uit=st,eyt=d.nodeIndex,kp=function(n,t){if(!(t<0&&h(n)&&n.hasChildNodes()))return no(n,t)},to=function(n){var i=n.getClientRects(),t=0<i.length?es(i[0]):es(n.getBoundingClientRect());return!tyt(n)&&uit(n)&&iyt(t)?function(n){var r=n.ownerDocument,i=nit(r),t=r.createTextNode(ir),u=n.parentNode,f;return u.insertBefore(t,n),i.setStart(t,0),i.setEnd(t,1),f=es(i.getBoundingClientRect()),u.removeChild(t),f}(n):iyt(t)&&tyt(n)?function(n){var r=n.startContainer,t=n.endContainer,u=n.startOffset,f=n.endOffset,i;return r===t&&o(t)&&0===u&&1===f?(i=n.cloneRange(),i.setEndAfter(t),to(i)):null}(n):t},i=function(n,t,r){function u(){return r=r||function(n){function r(n){var t;0!==n.height&&(0<i.length&&(t=i[i.length-1],n.left===t.left&&n.top===t.top&&n.bottom===t.bottom&&n.right===t.right)||i.push(n))}function e(n,t){var u=nit(n.ownerDocument);if(t<n.data.length){if(nyt(n.data[t]))return i;if(nyt(n.data[t-1])&&(u.setStart(n,t),u.setEnd(n,t+1),!iit(u)))return r(os(to(u),!1)),i}0<t&&(u.setStart(n,t-1),u.setEnd(n,t),iit(u)||r(os(to(u),!1)));t<n.data.length&&(u.setStart(n,t),u.setEnd(n,t+1),iit(u)||r(os(to(u),!0)))}var i=[],u=n.container(),o=n.offset(),t,f;if(va(u))return e(u,o),i;if(uyt(u))if(n.isAtEnd())t=kp(u,o),va(t)&&e(t,t.data.length),aa(t)&&!uit(t)&&r(os(to(t),!1));else{if(t=kp(u,o),va(t)&&e(t,0),aa(t)&&n.isAtEnd())return r(os(to(t),!1)),i;f=kp(n.container(),n.offset()-1);aa(f)&&!uit(f)&&(!fyt(f)&&!fyt(t)&&aa(t)||r(os(to(f),!1)));aa(t)&&r(os(to(t),!0))}return i}(i(n,t))}return{container:f(n),offset:f(t),toRange:function(){var i=nit(n.ownerDocument);return i.setStart(n,t),i.setEnd(n,t),i},getClientRects:u,isVisible:function(){return 0<u().length},isAtStart:function(){return va(n),0===t},isAtEnd:function(){return va(n)?t>=n.data.length:t>=n.childNodes.length},isEqual:function(i){return i&&n===i.container()&&t===i.offset()},getNode:function(i){return kp(n,i?t-1:t)}}};i.fromRangeStart=function(n){return i(n.startContainer,n.startOffset)};i.fromRangeEnd=function(n){return i(n.endContainer,n.endOffset)};i.after=function(n){return i(n.parentNode,eyt(n)+1)};i.before=function(n){return i(n.parentNode,eyt(n))};i.isAbove=function(n,t){return di(or(t.getClientRects()),vo(n.getClientRects()),sc).getOr(!1)};i.isBelow=function(n,t){return di(vo(t.getClientRects()),or(n.getClientRects()),hc).getOr(!1)};i.isAtStart=function(n){return!!n&&n.isAtStart()};i.isAtEnd=function(n){return!!n&&n.isAtEnd()};i.isTextPosition=function(n){return!!n&&o(n.container())};i.isElementPosition=function(n){return!1===i.isTextPosition(n)};var bt,iw,au=o,wpt=bo,bpt=d.nodeIndex,kpt=function(n){var t=n.parentNode;return wpt(t)?kpt(t):t},lit=function(n){return n?ry(n.childNodes,function(n,t){return wpt(t)&&"BR"!==t.nodeName?n=n.concat(lit(t)):n.push(t),n},[]):[]},rw=rt,dpt=u(pyt,ki,!0),yvi=d.DOM,pvi=h,gpt=o,hs=function(n){pvi(n)&&hr(n)&&(klt(n)?n.removeAttribute("data-mce-caret"):opt(n));gpt(n)&&(hpt(n),0===n.data.length&&opt(n))},ait=kr().browser,wvi=rt,bvi=tu,kvi=vy,ka=function(n){return wvi(n)||bvi(n)},vit=rt,dvi=tu,gvi=cy("display","block table table-cell table-caption list-item"),nwt=hr,twt=bh,iwt=h,nyi=nf,da=u(vpt,!0),ga=u(vpt,!1);(iw=bt=bt||{})[iw.Backwards=-1]="Backwards";iw[iw.Forwards=1]="Forwards";var ubt,cw,fbt,eyi=rt,hf=o,ebt=h,ert=st,bc=nf,lw=by,ort=function(n,t,r){var h,e,s,a,v,c,f,o,u,l;if(!ebt(r)||!t)return null;if(t.isEqual(i.after(r))&&r.lastChild){if(s=i.after(r.lastChild),n<0&&bc(r.lastChild)&&ebt(r.lastChild))return ert(r.lastChild)?i.before(r.lastChild):s}else s=t;if(f=s.container(),o=s.offset(),hf(f)){if(n<0&&0<o)return i(f,--o);if(0<n&&o<f.length)return i(f,++o);h=f}else{if(n<0&&0<o&&(u=rwt(f,o-1),bc(u)))return!rbt(u)&&(e=lc(u,n,lw,u))?hf(e)?i(e,e.data.length):i.after(e):hf(u)?i(u,u.data.length):i.before(u);if(0<n&&o<f.childNodes.length&&(u=rwt(f,o),bc(u)))return ert(u)?(a=r,(c=(v=u).nextSibling)&&bc(c)?hf(c)?i(c,0):i.before(c):ort(bt.Forwards,i.after(v),a)):!rbt(u)&&(e=lc(u,n,lw,u))?hf(e)?i(e,0):i.before(e):hf(u)?i(u,0):i.after(u);h=u||s.getNode()}return(0<n&&s.isAtEnd()||n<0&&s.isAtStart())&&(h=lc(h,n,lt,r,!0),lw(h,r))?uwt(n,h):(u=lc(h,n,lw,r),l=yo(p(function(n,t){for(var i=[];n&&n!==t;)i.push(n),n=n.parentNode;return i}(f,r),eyi)),!l||u&&l.contains(u)?u?uwt(n,u):null:0<n?i.after(l):i.before(l))},vr=function(t,i,r){var u=vu(i);return n.from(t?u.next(r):u.prev(r))},obt=function(t,i,r,u){return uw(t,i,r).bind(function(r){return u(r)?obt(t,i,r,u):n.some(r)})},yu=u(vr,!0),cf=u(vr,!1),wi=u(ac,!0),lf=u(ac,!1),sbt="_mce_caret",oyi=function(n,t,r){return 2===t?pyt(ae,r,n):3===t?(f=(u=n).getRng(),{start:hyt(u.dom.getRoot(),i.fromRangeStart(f)),end:hyt(u.dom.getRoot(),i.fromRangeEnd(f))}):t?{rng:n.getRng()}:byt(n,!1);var u,f},rv=(ubt=ir,function(n){return ubt===n}),srt=function(n,t){return void 0===t&&(t=!1),!(!tt(n)||!o(n))&&ns(t?n.data.replace(/ /g,""):n.data)},kc=ar,hbt=ow,cbt=srt,syi=bit,lbt=function(n,t,i,r){var u=i.parentNode;return!tt(i[r])&&(!(u!==t&&!wu(u)&&!n.isBlock(u))||lbt(n,t,u,r))},abt=function(n){return cct(n).fold(f([n]),function(t){return[n].concat(abt(t))})},hrt=function(n){return vg(n).fold(f([n]),function(t){return"br"===vt(t)?wo(t).map(function(t){return[n].concat(hrt(t))}).getOr([]):[n].concat(hrt(t))})},hyi=(cw=gr,{get:function(n){if(!cw(n))throw new Error("Can only get text value of a text node");return fbt(n).getOr("")},getOption:fbt=function(t){return cw(t)?n.from(t.dom.nodeValue):n.none()},set:function(n,t){if(!cw(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=t}});iv.isBookmarkNode=ar;s={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(n){return n.shiftKey||n.ctrlKey||n.altKey||s.metaKeyPressed(n)},metaKeyPressed:function(n){return l.mac?n.metaKey:n.ctrlKey&&!n.altKey}};dbt=rt;uv.compareRanges=vrt;uv.getCaretRangeFromPoint=art;uv.getSelectedNode=wp;uv.getNode=no;nkt=(pw="height",gbt=function(n){var t=n.dom;return na(n)?t.getBoundingClientRect().height:t.offsetHeight},{set:function(n,t){if(!eh(t)&&!t.match(/^[0-9]+$/))throw new Error(pw+".set accepts only positive integer values. Value was "+t);var i=n.dom;ay(i)&&(i.style[pw]=t+"px")},get:tkt,getOuter:tkt,aggregate:ikt,max:function(n,t,i){var r=ikt(n,i);return r<t?t-r:0}});var ev,ndt=function(n,t){return n.view(t).fold(f([]),function(t){var i=n.owner(t),r=ndt(n,i);return[t].concat(r)})},gyi=Object.freeze({__proto__:null,view:function(i){var r;return(i.dom===document?n.none():n.from(null===(r=i.dom.defaultView)||void 0===r?void 0:r.frameElement)).map(t.fromDom)},owner:ah}),npi=function(n,i,r,u){var c=t.fromDom(n.getBody()),l=t.fromDom(n.getDoc()),o,s,h,f,e;c.dom.offsetWidth;e=(o=t.fromDom(r.startContainer),s=r.startOffset,h=function(n,t){var r=nu(n),i;return 0===r.length||wrt(n)?{element:n,offset:t}:t<r.length&&!wrt(r[t])?{element:r[t],offset:0}:(i=r[r.length-1],wrt(i)?{element:n,offset:t}:"img"===vt(i)?{element:i,offset:1}:gr(i)?{element:i,offset:frt(i).length}:{element:i,offset:nu(i).length})}(o,s),f=t.fromHtml('<span data-mce-bogus="all" style="display: inline-block;"><\/span>'),ou(h.element,f),rkt(f,function(){return ni(f)}));fkt(n,l,i,e,u);e.cleanup()},tpi=function(n,i,r){var f=r.startContainer,o=r.startOffset,e=r.endContainer,s=r.endOffset,u;i(t.fromDom(f),t.fromDom(e));u=n.dom.createRng();u.setStart(f,o);u.setEnd(e,s);n.selection.setRng(r)},iut=he([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ipi=(iut.before,iut.on,iut.after,function(n){return n.fold(ki,ki,ki)}),dw=he([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),tdt={domRange:dw.domRange,relative:dw.relative,exact:dw.exact,exactFromRange:function(n){return dw.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){return oct(n.match({domRange:function(n){return t.fromDom(n.startContainer)},relative:function(n){return ipi(n)},exact:function(n){return n}}))},range:function(n,t,i,r){return{start:n,soffset:t,finish:i,foffset:r}}},rpi=kr().browser,idt={isEditorUIElement:function(n){var t=n.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},rut=d.DOM,uut=function(n){return n.editorManager.setActive(n)},upi={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ru=(ci.create=function(n,t){var i=new ci(n,upi[n]||1);return t&&et(t,function(n,t){i.attr(t,n)}),i},ci.prototype.replace=function(n){return n.parent&&n.remove(),this.insert(n,this),this.remove(),this},ci.prototype.attr=function(n,t){var i,u=this,r;if("string"!=typeof n)return null!=n&&et(n,function(n,t){u.attr(t,n)}),u;if(i=u.attributes){if(void 0===t)return i.map[n];if(null===t){if(n in i.map)for(delete i.map[n],r=i.length;r--;)if(i[r].name===n)return i.splice(r,1),u;return u}if(n in i.map){for(r=i.length;r--;)if(i[r].name===n){i[r].value=t;break}}else i.push({name:n,value:t});return i.map[n]=t,u}},ci.prototype.clone=function(){var u,i=new ci(this.name,this.type),n,r,f,t;if(u=this.attributes){for(n=[],n.map={},r=0,f=u.length;r<f;r++)t=u[r],"id"!==t.name&&(n[n.length]={name:t.name,value:t.value},n.map[t.name]=t.value);i.attributes=n}return i.value=this.value,i.shortEnded=this.shortEnded,i},ci.prototype.wrap=function(n){return this.parent.insert(n,this),n.append(this),this},ci.prototype.unwrap=function(){for(var t,n=this.firstChild;n;)t=n.next,this.insert(n,this,!0),n=t;this.remove()},ci.prototype.remove=function(){var n=this.parent,t=this.next,i=this.prev;return n&&(n.firstChild===this?(n.firstChild=t)&&(t.prev=null):i.next=t,n.lastChild===this?(n.lastChild=i)&&(i.next=null):t.prev=i,this.parent=this.next=this.prev=null),this},ci.prototype.append=function(n){n.parent&&n.remove();var t=this.lastChild;return t?((t.next=n).prev=t,this.lastChild=n):this.lastChild=this.firstChild=n,n.parent=this,n},ci.prototype.insert=function(n,t,i){n.parent&&n.remove();var r=t.parent||this;return i?(t===r.firstChild?r.firstChild=n:t.prev.next=n,n.prev=t.prev,(n.next=t).prev=n):(t===r.lastChild?r.lastChild=n:t.next.prev=n,n.next=t.next,(n.prev=t).next=n),n.parent=r,n},ci.prototype.getAll=function(n){for(var i=[],t=this.firstChild;t;t=kw(t,this))t.name===n&&i.push(t);return i},ci.prototype.children=function(){for(var t=[],n=this.firstChild;n;n=n.next)t.push(n);return t},ci.prototype.empty=function(){var t,n,i;if(this.firstChild){for(t=[],n=this.firstChild;n;n=kw(n,this))t.push(n);for(i=t.length;i--;)(n=t[i]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},ci.prototype.isEmpty=function(n,t,i){void 0===t&&(t={});var r=this.firstChild;if(gkt(this))return!1;if(r)do{if(1===r.type){if(r.attr("data-mce-bogus"))continue;if(n[r.name]||gkt(r))return!1}if(8===r.type||3===r.type&&!function(n){if(ns(n.value)){var t=n.parent;return!t||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(n.value)}}(r)||3===r.type&&r.parent&&t[r.parent.name]&&ns(r.value)||i&&i(r))return!1}while(r=kw(r,this));return!0},ci.prototype.walk=function(n){return kw(this,null,n)},ci);var rdt=r.each,fpi=r.trim,epi="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),opi={ftp:21,http:80,https:443,mailto:25},spi=["img","video"],ro=(fr.parseDataUri=function(n){var t,i=decodeURIComponent(n).split(","),r=/data:([^;]+)/.exec(i[0]);return{type:t=r?r[1]:t,data:i[1]}},fr.isDomSafe=function(n,t,i){if((i=void 0===i?{}:i).allow_script_urls)return!0;var e,u,f,o,r=ve.decode(n).replace(/[\s\u0000-\u001F]+/g,"");try{r=decodeURIComponent(r)}catch(n){r=unescape(r)}return!(/((java|vb)script|mhtml):/i.test(r)||(u=r,f=t,!(e=i).allow_html_data_urls&&(/^data:image\//i.test(u)?(tt(o=e.allow_svg_data_urls)?!o:!tt(f)||!dt(spi,f))&&/^data:image\/svg\+xml/i.test(u):/^data:/i.test(u))))},fr.getDocumentBaseUrl=function(n){var t=0!==n.protocol.indexOf("http")&&"file:"!==n.protocol?n.href:n.protocol+"//"+n.host+n.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},fr.prototype.setPath=function(n){var t=/^(.*?)\/?(\w+)?$/.exec(n);this.path=t[0];this.directory=t[1];this.file=t[2];this.source="";this.getURI()},fr.prototype.toRelative=function(n){var r,t,i,u;return"./"===n?n:(t=new fr(n,{base_uri:this}),"mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)?t.getURI():(i=this.getURI(),u=t.getURI(),i===u||"/"===i.charAt(i.length-1)&&i.substr(0,i.length-1)===u?i:(r=this.toRelPath(this.path,t.path),t.query&&(r+="?"+t.query),t.anchor&&(r+="#"+t.anchor),r))},fr.prototype.toAbsolute=function(n,t){var i=new fr(n,{base_uri:this});return i.getURI(t&&this.isSameOrigin(i))},fr.prototype.isSameOrigin=function(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;var t=opi[this.protocol];if(t&&(this.port||t)==(n.port||t))return!0}return!1},fr.prototype.toRelPath=function(n,t){var i,u,e=0,o="",f=n.substring(0,n.lastIndexOf("/")).split("/"),r=t.split("/");if(f.length>=r.length)for(i=0,u=f.length;i<u;i++)if(i>=r.length||f[i]!==r[i]){e=i+1;break}if(f.length<r.length)for(i=0,u=r.length;i<u;i++)if(i>=f.length||f[i]!==r[i]){e=i+1;break}if(1===e)return t;for(i=0,u=f.length-(e-1);i<u;i++)o+="../";for(i=e-1,u=r.length;i<u;i++)o+=i!==e-1?"/"+r[i]:r[i];return o},fr.prototype.toAbsPath=function(n,t){var i,r,e=0,u=[],s=/\/$/.test(t)?"/":"",o=n.split("/"),f=t.split("/");for(rdt(o,function(n){n&&u.push(n)}),o=u,i=f.length-1,u=[];0<=i;i--)0!==f[i].length&&"."!==f[i]&&(".."!==f[i]?0<e?e--:u.push(f[i]):e++);return 0!==(r=(i=o.length-e)<=0?iy(u).join("/"):o.slice(0,i).join("/")+"/"+iy(u).join("/")).indexOf("/")&&(r="/"+r),s&&r.lastIndexOf("/")!==r.length-1&&(r+=s),r},fr.prototype.getURI=function(n){var t;return void 0===n&&(n=!1),this.source&&!n||(t="",n||(t+=this.protocol?this.protocol+"://":"//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source},fr);udt=r.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea");nb=function(n,t,i){var r,o,f,e,s,u;return(void 0===i&&(i=0),r=n.toLowerCase(),-1!==r.indexOf("[if ",i)&&(s=i,/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(r.substr(s))))?(o=r.indexOf("[endif]",i),r.indexOf(">",o)):t?(f=r.indexOf(">",i),-1!==f?f:r.length):(e=/--!?>/g,e.lastIndex=i,u=e.exec(n),u?u.index+u[0].length:r.length)};gw.findEndTag=eut;var hpi=fdt,cpi=r.each,sdt=r.makeMap,hdt=new Set;e(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],function(n){hdt.add(n)});var unt,fnt=["font","text-decoration","text-emphasis"],hft=u(cdt,!0,vc),cft=u(cdt,!1,vc),awi=uo(!0,ldt),vwi=uo(!1,ldt),nl=uo(!0,tu),tl=uo(!1,tu),ent=uo(!0,vh),ont=uo(!1,vh),fo=uo(!0,adt),eo=uo(!1,adt),lft=u(wdt,!1),snt=u(wdt,!0),ywi=u(pdt,!1),pwi=u(pdt,!0),wwi=u(tb,!1),bwi=u(tb,!0),ov=he([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),hnt=function(t){var i;return(8===fct(i=t)||"#comment"===vt(i)?wo:vg)(t).bind(hnt).orThunk(function(){return n.some(t)})},aft=function(n,i,r,u){void 0===u&&(u=!0);i.deleteContents();var o,s=hnt(r).getOr(r),f=t.fromDom(n.dom.getParent(s.dom,n.dom.isBlock));return pt(f)&&(as(f),u&&n.selection.setCursorLocation(f.dom,0)),g(r,f)||e((ly(eu(f),r)?[]:eu(o=f).map(nu).map(function(n){return p(n,function(n){return!g(o,n)})}).getOr([])).concat(nu(r)),function(n){g(n,f)||ee(n,f)||!pt(n)||ni(n)}),!0},vft=function(n,t){return gt(gf(t,n),function(n){return su(n)&&"caption"===vt(n)})},ob=function(t,i){return as(i),t.selection.setCursorLocation(i.dom,0),n.some(!0)},yft=vy,pft=function(n,t){t(n);n.firstChild&&pft(n.firstChild,t);n.next&&pft(n.next,t)},wft=kit,af=function(n,t,i,r,u){var h=n.formatter.get(i),c=n.dom,e,f,o,s;if(h&&t)for(e=0;e<h.length;e++)if(f=h[e],uft(n.dom,t,f)&&ggt(c,t,f,"attributes",u,r)&&ggt(c,t,f,"styles",u,r)){if(o=f.classes,o)for(s=0;s<o.length;s++)if(!n.dom.hasClass(t,df(o[s],r)))return;return f}},il=fi,cnt="_mce_caret",sb={},lnt=hh,ant=yl;unt=function(n){var t,r=n.selection.getRng(),i=dr(["pre"]);r.collapsed||(t=n.selection.getSelectedBlocks(),ant(lnt(lnt(t,i),function(n){return i(n.previousSibling)&&-1!==uht(t,n.previousSibling)}),function(n){var t,i=n.previousSibling;a(t=n).remove();a(i).append("<br><br>").append(t.childNodes)}))};sb.pre||(sb.pre=[]);sb.pre.push(unt);var fet=r.each,eet=function(n,t,i){fet(n.childNodes,function(n){bft(n)&&(t(n)&&i(n),n.hasChildNodes()&&eet(n,t,i))})},sv=he([{keep:[]},{rename:["name"]},{removed:[]}]),ebi=/^(src|href|style)$/,oet=r.each,ul=kit,gti=r.each,vb=r.each,set=function(i,u,f,s){function p(n,t){var i;ft((t=void 0===t?l:t).onformat)&&t.onformat(n,t,f,s);vb(t.styles,function(t,i){a.setStyle(n,i,df(t,f))});!t.styles||(i=a.getAttrib(n,"style"))&&a.setAttrib(n,"data-mce-style",i);vb(t.attributes,function(t,i){a.setAttrib(n,i,df(t,f))});vb(t.classes,function(t){t=df(t,f);a.hasClass(n,t)||a.addClass(n,t)})}function k(n,t){var i=!1;return vb(n,function(n){return!!ur(n)&&(tt(n.collapsed)&&n.collapsed!==et||!a.is(t,n.selector)||of(t)?void 0:(p(t,n),!(i=!0)))}),i}function d(s,y,w){var d=[],b=!0,nt=l.inline||l.block,it=function(n){if(ht(n)){var t=a.create(n);return p(t),t}return null}(nt);nv(s,y,function(r){var a,y=function(r){var rt=!1,ht=b,ct=r.nodeName.toLowerCase(),ft=r.parentNode,et=ft.nodeName.toLowerCase(),ot,ut;if(h(r)&&s.getContentEditable(r)&&(ht=b,b="true"===s.getContentEditable(r),rt=!0),st(r)&&!function(i,r,u,f){var e,o,s,h,l,a;if(i.getParam("format_empty_lines",!1,"boolean")&&kt(r))return e=c(c({},i.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),o=(s=t.fromDom(u),l=function(n){return of(n.dom)},((a=(h=s).dom).parentNode?dci(t.fromDom(a.parentNode),function(n){return!g(h,n)&&l(n)}):n.none()).isSome()),sh(e,f)&&pt(t.fromDom(u.parentNode),!1)&&!o}(i,l,r,et))return a=null,void(sf(l)&&s.remove(r));if(sf(l)&&l.wrapper&&af(i,r,u,f))a=null;else{if(b&&!rt&&sf(l)&&!l.wrapper&&bit(i,ct)&&yc(i,et,nt))return ot=s.rename(r,nt),p(ot),d.push(ot),void(a=null);if(ur(l)&&(ut=k(v,r),!ut&&tt(ft)&&git(l)&&(ut=k(v,ft)),!kt(l)||ut))return void(a=null);!b||rt||!yc(i,nt,ct)||!yc(i,et,nt)||!w&&o(r)&&tp(r.data)||of(r)||kt(l)&&s.isBlock(r)?(a=null,e(bu(r.childNodes),y),rt&&(b=ht),a=null):(a||(a=s.clone(it,!1),r.parentNode.insertBefore(a,r),d.push(a)),a.appendChild(r))}};e(r,y)});!0===l.links&&e(d,function(n){var t=function(n){"A"===n.nodeName&&p(n,l);e(bu(n.childNodes),t)};t(n)});e(d,function(n){function lt(n){var i;1===n.nodeType&&n.parentNode&&1===n.parentNode.nodeType&&(i=ywt(t,n.parentNode),t.getStyle(n,"color")&&i?t.setStyle(n,"text-decoration",i):t.getStyle(n,"text-decoration")===i&&t.setStyle(n,"text-decoration",null))}var g,h,a,nt,it,ot,c,y,st,w,b,rt,t,ut,ft,k,ht,et,ct=(g=0,e(n.childNodes,function(n){var t;tt(t=n)&&o(t)&&0===t.length||ar(n)||g++}),g);!(1<d.length)&&s.isBlock(n)||0!==ct?(kt(l)||sf(l)&&l.wrapper)&&(l.exact||1!==ct||(n=gt((rt=n).childNodes,kwi).filter(function(n){return uft(s,n,l)}).map(function(n){var t=s.clone(n,!1);return p(t),s.replace(t,rt,!0),s.remove(n,!0),t}).getOr(rt)),k=i,ht=f,et=n,gti(v,function(n){var t,i,r;kt(n)&&gti(k.dom.select(n.inline,et),function(t){bft(t)&&rl(k,n,ht,t,n.exact?t:null)});t=k.dom;(i=n).clear_child_styles&&(r=i.links?"*:not(a)":"*",fet(t.select(r,et),function(n){bft(n)&&fet(i.styles,function(i,r){t.setStyle(n,r,"")})}))}),y=l,af(c=i,(b=n).parentNode,st=u,w=f)&&rl(c,y,w,b)||y.merge_with_parents&&c.dom.getParent(b.parentNode,function(n){if(af(c,n,st,w))return rl(c,y,w,b),!0}),ot=n,(it=l).styles&&it.styles.backgroundColor&&eet(ot,wnt(s,"fontSize"),bnt(s,"backgroundColor",df(it.styles.backgroundColor,f))),t=s,ft=n,(ut=l).styles&&(ut.styles.color||ut.styles.textDecoration)&&(r.walk(ft,lt,"childNodes"),lt(ft)),h=s,nt=n,!kt(a=l)||"sub"!==a.inline&&"sup"!==a.inline||(eet(nt,wnt(h,"fontSize"),bnt(h,"fontSize","")),h.remove(h.select("sup"===a.inline?"sub":"sup",nt),!0)),pnt(s,l,0,n)):s.remove(n,!0)})}var nt,rt,it,ut,v=i.formatter.get(u),l=v[0],et=!s&&i.selection.isCollapsed(),a=i.dom,y=i.selection,b,ot,w;if("false"!==a.getContentEditable(y.getNode()))l&&(s?fw(s)?k(v,s)||((nt=a.createRng()).setStartBefore(s),nt.setEndAfter(s),d(a,pc(i,nt,v),!0)):d(a,s,!0):et&&kt(l)&&!wc(i).length?function(n,t,i){var o,f=n.selection,e=f.getRng(),r=e.startOffset,s=e.startContainer.nodeValue,u=cs(n.getBody(),f.getStart()),c,l,a,v,h;u&&(o=tnt(u));h=/[^\s\u00a0\u00ad\u200b\ufeff]/;s&&0<r&&r<s.length&&h.test(s.charAt(r))&&h.test(s.charAt(r-1))?(c=f.getBookmark(),e.collapse(!0),l=yw(pc(n,e,n.formatter.get(t))),n.formatter.apply(t,i,l),f.moveToBookmark(c)):(u&&o.nodeValue===il||(a=n.getDoc(),v=eft(!0).dom,o=(u=a.importNode(v,!0)).firstChild,e.insertNode(u),r=1),n.formatter.apply(t,i,u),f.setCursorLocation(o,r))}(i,u,f):(rt=y.getNode(),it=v[0],i.settings.forced_root_block||!it.defaultBlock||a.getParent(rt,a.isBlock)||set(i,it.defaultBlock),y.setRng(dut(y.getRng())),urt(y,!0,function(){rrt(i,function(n,t){var r=t?n:pc(i,n,v);d(a,r,!1)})}),vwt(a,y,y.getRng()),i.nodeChanged()),ut=i,ant(sb[u],function(n){n(ut)})),ybt(i,u,s,f);else{for(s=y.getNode(),b=0,ot=v.length;b<ot;b++)if(w=v[b],w.ceFalseOverride&&ur(w)&&a.is(s,w.selector)){p(s,w);break}ybt(i,u,s,f)}},nii=function(n){return n.selection.getStart()},tii=function(n,t,i){var r=fti(n,t);et(i,function(i,u){function f(i){var o,s=uti(n,r,u,i.similar,rti(i)?i.vars:void 0),f=s.isSome();i.state.get()!==f&&(i.state.set(f),o=s.getOr(t),rti(i)?i.callback(f,{node:o,format:u,parents:r}):e(i.callbacks,function(n){return n(f,{node:o,format:u,parents:r})}))}e([i.withSimilar,i.withoutSimilar],f);e(i.withVars,f)})},obi=eht(function(){return document.implementation.createHTMLDocument("undo")});var yii,wb,wbi=0,pii=function(n,t){return n&&n.firstChild&&n.firstChild===n.lastChild&&n.firstChild.name===t},wii=r.makeMap,bii=r.each,kii=r.explode,bbi=r.extend,bb=d.DOM,dii=(yii=function(n,t){return fh(n)&&fh(t)?dii(n,t):t},function(){for(var r,u,i,f,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(0===n.length)throw new Error("Can't merge zero objects");for(r={},u=0;u<n.length;u++){f=n[u];for(i in f)w(f,i)&&(r[i]=yii(r[i],f[i]))}return r}),kbi="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),dbi="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),gbi="imagetools,toc".split(","),yet=kr().deviceType,nki=yet.isTouch(),gii=yet.isPhone(),tki=yet.isTablet(),iki=["lists","autolink","autosave"],nri={table_grid:!1,object_resizing:!1,resize:!1},kb=(wb={},{add:function(n,t){wb[n]=t},get:function(n){return wb[n]||{icons:{}}},has:function(n){return w(wb,n)}}),rki=u(cii,"clientWidth"),uki=u(cii,"clientHeight"),fki=u(lii,"margin-top"),eki=u(lii,"margin-left"),pu=rr.PluginManager,oo=rr.ThemeManager;var ie,ho,yui=function(n,t){var i=n.editorManager.baseURL+"/skins/content",r="content"+n.editorManager.suffix+".css",u=!0===n.inline;return ut(t,function(t){return/^[a-z0-9\-]+$/i.test(t)&&!u?i+"/"+t+"/"+r:n.documentBaseURI.toAbsolute(t)})},hdi=0,sk=r.each,li=d.DOM,cdi=[9,27,s.HOME,s.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,s.DOWN,s.UP,s.LEFT,s.RIGHT].concat(l.browser.isFirefox()?[224]:[]),pui="data-mce-placeholder",ldi=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,wui=u(yr,!0),bui=u(yr,!1),adi=gu,vdi=rt,pr=he([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),el=o,ydi=u(fk,!0),pdi=u(fk,!1),ai=he([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),iot=function(n){return n.fold(ki,ki,ki,ki)};u(tot,!1);u(tot,!0);(ho=ie={})[ho.Br=0]="Br";ho[ho.Block=1]="Block";ho[ho.Wrap=2]="Wrap";ho[ho.Eol=3]="Eol";var ws,ck,lv=u(dui,i.isAbove,-1),av=u(dui,i.isBelow,1),bdi=u(gui,-1,lv),kdi=u(gui,1,av);(ck=ws=ws||{})[ck.Up=-1]="Up";ck[ck.Down=1]="Down";var dgi=u(tfi,ws.Up,sc,hc),ggi=u(tfi,ws.Down,hc,sc),nni=rt,aoi=lc,bot=function(n,t){var f=n.selection.getRng(),e=n.getBody(),r,u;return t?(r=i.fromRangeEnd(f),u=av(e,r),vo(u.positions)):(r=i.fromRangeStart(f),or((u=lv(e,r)).positions))},tni=u(lfi,!0),ini=u(lfi,!1),voi=function(n){return p(ut(n.selection.getSelectedBlocks(),t.fromDom),function(n){return!wfi(n)&&!eu(n).exists(wfi)&&yy(n,function(n){return gu(n.dom)||rt(n.dom)}).exists(function(n){return gu(n.dom)})})},yoi=rt,rni=u(lei,function(n){return n.bottom},function(n,t){return n.y<t}),uni=u(lei,function(n){return n.top},function(n,t){return n.y>t}),fni=u(aei,lv),eni=u(aei,av),oni=function(n,t){return r=i.after(t),!!st(r.getNode())||yu(n,i.after(t)).map(function(n){return st(n.getNode())}).getOr(!1);var r},er=he([{br:[]},{block:[]},{none:[]}]),sni=kr().browser,hni=kr(),cni=u(loi,ir),lni=u(loi," "),ani=(kot.prototype.nodeChanged=function(n){var t,r,i,u=this.editor.selection;this.editor.initialized&&u&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(i=this.editor.getBody(),(t=u.getStart(!0)||i).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(t,i)||(t=i),r=[],this.editor.dom.getParent(t,function(n){return n===i||void r.push(n)}),(n=n||{}).element=t,n.parents=r,this.editor.fire("NodeChange",n))},kot.prototype.isSameElementPath=function(n){var t,i=this.editor.$(n).parentsUntil(this.editor.getBody()).add(n);if(i.length===this.lastPath.length){for(t=i.length;0<=t&&i[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=i,!0}return this.lastPath=i,!1},kot);var td=rt,itr=gu,ssi=function(n){n.on(function(n){boi(n.ghost)});n.clear()},hsi=gu,bs=rt,tst=d.DOM,wv=d.DOM,csi=d.DOM,lsi=function(n,t,i){var o,s,h,u,f=pu.get(i),c=pu.urls[i]||n.documentBaseUrl.replace(/\/$/,""),e;if(i=r.trim(i),f&&-1===r.inArray(t,i)&&(r.each(pu.dependencies(i),function(i){lsi(n,t,i)}),!n.plugins[i]))try{e=new f(n,c,n.$);(n.plugins[i]=e).init&&(e.init(n,c),t.push(i))}catch(f){s=i;h=f;vbt(o=n,"PluginLoadError",{message:u=lu.translate(["Failed to initialize plugin: {0}",s])});ok(u,h);db(o,u)}},ks=d.DOM,rtr={"font-size":"size","font-family":"face"},utr=esi("font-size"),ftr=ao(function(n){return n.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},esi("font-family")),id=r.each,etr=r.map,otr=r.inArray,asi=(bi.prototype.execCommand=function(n,t,i,r){var o,s,f=!1,u=this,e;if(!u.editor.removed){if("mcefocus"!==n.toLowerCase()&&(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(n)||r&&r.skip_focus?grt(s=u.editor).each(function(n){return s.selection.setRng(n)}):u.editor.focus()),(r=u.editor.fire("BeforeExecCommand",{command:n,ui:t,value:i})).isDefaultPrevented())return!1;if(e=n.toLowerCase(),o=u.commands.exec[e])return o(e,t,i),u.editor.fire("ExecCommand",{command:n,ui:t,value:i}),!0;if(id(this.editor.plugins,function(r){if(r.execCommand&&r.execCommand(n,t,i))return u.editor.fire("ExecCommand",{command:n,ui:t,value:i}),!(f=!0)}),f)return f;if(u.editor.theme&&u.editor.theme.execCommand&&u.editor.theme.execCommand(n,t,i))return u.editor.fire("ExecCommand",{command:n,ui:t,value:i}),!0;try{f=u.editor.getDoc().execCommand(n,t,i)}catch(r){}return!!f&&(u.editor.fire("ExecCommand",{command:n,ui:t,value:i}),!0)}},bi.prototype.queryCommandState=function(n){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(n=n.toLowerCase(),t=this.commands.state[n])return t(n);try{return this.editor.getDoc().queryCommandState(n)}catch(n){}return!1}},bi.prototype.queryCommandValue=function(n){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(n=n.toLowerCase(),t=this.commands.value[n])return t(n);try{return this.editor.getDoc().queryCommandValue(n)}catch(n){}}},bi.prototype.addCommands=function(n,t){void 0===t&&(t="exec");var i=this;id(n,function(n,r){id(r.toLowerCase().split(","),function(r){i.commands[t][r]=n})})},bi.prototype.addCommand=function(n,t,i){var r=this;n=n.toLowerCase();this.commands.exec[n]=function(n,u,f,e){return t.call(i||r.editor,u,f,e)}},bi.prototype.queryCommandSupported=function(n){if(n=n.toLowerCase(),this.commands.exec[n])return!0;try{return this.editor.getDoc().queryCommandSupported(n)}catch(n){}return!1},bi.prototype.addQueryStateHandler=function(n,t,i){var r=this;n=n.toLowerCase();this.commands.state[n]=function(){return t.call(i||r.editor)}},bi.prototype.addQueryValueHandler=function(n,t,i){var r=this;n=n.toLowerCase();this.commands.value[n]=function(){return t.call(i||r.editor)}},bi.prototype.hasCustomCommand=function(n){return n=n.toLowerCase(),!!this.commands.exec[n]},bi.prototype.execNativeCommand=function(n,t,i){return void 0===t&&(t=!1),void 0===i&&(i=null),this.editor.getDoc().execCommand(n,t,i)},bi.prototype.isFormatMatch=function(n){return this.editor.formatter.match(n)},bi.prototype.toggleFormat=function(n,t){this.editor.formatter.toggle(n,t);this.editor.nodeChanged()},bi.prototype.storeSelection=function(n){this.selectionBookmark=this.editor.selection.getBookmark(n)},bi.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},bi.prototype.setupCommands=function(n){function f(t){return function(){var i=n.selection,r=i.isCollapsed()?[n.dom.getParent(i.getNode(),n.dom.isBlock)]:i.getSelectedBlocks(),u=etr(r,function(i){return!!n.formatter.matchNode(i,t)});return-1!==otr(u,!0)}}var i=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":y,"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},mceFocus:function(t,i,r){var u,f;f=r;(u=n).removed||(f?uut:function(n){var f=n.selection,t=n.getBody(),i=f.getRng(),r,e,u;if(n.quirks.refreshContentEditable(),void 0!==n.bookmark&&!1===ls(n)&&grt(n).each(function(t){n.selection.setRng(t);i=t}),u=(r=n,e=f.getNode(),r.dom.getParent(e,function(n){return"true"===r.dom.getContentEditable(n)})),n.$.contains(t,u))return nut(u),pkt(n,i),uut(n);n.inline||(l.opera||nut(t),n.getWin().focus());(l.gecko||n.inline)&&(nut(t),pkt(n,i));uut(n)})(u)},"Cut,Copy,Paste":function(t){var u,r,f=n.getDoc();try{i.execNativeCommand(t)}catch(t){u=!0}((u="paste"===t&&!f.queryCommandEnabled(t)||u)||!f.queryCommandSupported(t))&&(r=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),l.mac&&(r=r.replace(/Ctrl\+/g,"+")),n.notificationManager.open({text:r,type:"error"}))},unlink:function(){var t;n.selection.isCollapsed()?(t=n.dom.getParent(n.selection.getStart(),"a"))&&n.dom.remove(t,!0):n.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(t){var r=t.substring(7);"full"===r&&(r="justify");id("left,center,right,justify".split(","),function(t){r!==t&&n.formatter.remove("align"+t)});"none"!==r&&i.toggleFormat("align"+r)},"InsertUnorderedList,InsertOrderedList":function(t){var u,r;i.execNativeCommand(t);r=n.dom.getParent(n.selection.getNode(),"ol,ul");r&&(u=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(u.nodeName)&&(i.storeSelection(),n.dom.split(u,r),i.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(n){i.toggleFormat(n)},"ForeColor,HiliteColor":function(n,t,r){i.toggleFormat(n,{value:r})},FontName:function(t,i,r){var u,f;f=osi(u=n,r);u.formatter.toggle("fontname",{value:ut(f.split(/\s*,\s*/),function(n){return-1===n.indexOf(" ")||po(n,'"')||po(n,"'")?n:"'"+n+"'"}).join(",")});u.nodeChanged()},FontSize:function(t,i,r){var u;(u=n).formatter.toggle("fontsize",{value:osi(u,r)});u.nodeChanged()},LineHeight:function(t,i,r){var u;(u=n).formatter.toggle("lineheight",{value:String(r)});u.nodeChanged()},Lang:function(n,t,r){i.toggleFormat(n,{value:r.code,customValue:r.customCode})},RemoveFormat:function(t){n.formatter.remove(t)},mceBlockQuote:function(){i.toggleFormat("blockquote")},FormatBlock:function(n,t,r){return i.toggleFormat(r||"p")},mceCleanup:function(){var t=n.selection.getBookmark();n.setContent(n.getContent());n.selection.moveToBookmark(t)},mceRemoveNode:function(t,r,u){var f=u||n.selection.getNode();f!==n.getBody()&&(i.storeSelection(),n.dom.remove(f,!0),i.restoreSelection())},mceSelectNodeDepth:function(t,i,r){var u=0;n.dom.getParent(n.selection.getNode(),function(t){if(1===t.nodeType&&u++===r)return n.selection.select(t),!1},n.getBody())},mceSelectNode:function(t,i,r){n.selection.select(r)},mceInsertContent:function(t,i,u){var e,f,o,s;e=n;f=function(n){if("string"==typeof n)return{content:n,details:{}};var t=r.extend({paste:n.paste,data:{paste:n.paste}},n);return{content:n.content,details:t}}(u);o=f.content;s=f.details;uet(e).editor.insertContent(o,s)},mceInsertRawHTML:function(t,i,r){n.selection.setContent("tiny_mce_marker");var u=n.getContent();n.setContent(u.replace(/tiny_mce_marker/g,function(){return r}))},mceInsertNewLine:function(t,i,r){ooi(n,r)},mceToggleFormat:function(n,t,r){i.toggleFormat(r)},mceSetContent:function(t,i,r){n.setContent(r)},"Indent,Outdent":function(t){bfi(n,t)},mceRepaint:y,InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual;n.addVisual()},mceReplaceContent:function(t,i,r){n.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,n.selection.getContent({format:"text"})))},mceInsertLink:function(t,i,r){"string"==typeof r&&(r={href:r});var u=n.dom.getParent(n.selection.getNode(),"a");r.href=r.href.replace(/ /g,"%20");u&&r.href||n.formatter.remove("link");r.href&&n.formatter.apply("link",r,u)},selectAll:function(){var t,i=n.dom.getParent(n.selection.getStart(),gu);i&&((t=n.dom.createRng()).selectNodeContents(i),n.selection.setRng(t))},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(t,i,r){return ioi(n,r),!0}});i.addCommands({JustifyLeft:f("alignleft"),JustifyCenter:f("aligncenter"),JustifyRight:f("alignright"),JustifyFull:f("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(n){return i.isFormatMatch(n)},mceBlockQuote:function(){return i.isFormatMatch("blockquote")},Outdent:function(){return pfi(n)},"InsertUnorderedList,InsertOrderedList":function(t){var i=n.dom.getParent(n.selection.getNode(),"ul,ol");return i&&("insertunorderedlist"===t&&"UL"===i.tagName||"insertorderedlist"===t&&"OL"===i.tagName)}},"state");i.addCommands({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}});i.addQueryValueHandler("FontName",function(){return nst(t=n,function(n){return ftr(t.getBody(),n.dom)}).getOr("");var t},this);i.addQueryValueHandler("FontSize",function(){return nst(t=n,function(n){return utr(t.getBody(),n.dom)}).getOr("");var t},this);i.addQueryValueHandler("LineHeight",function(){return nst(i=n,function(n){var r=t.fromDom(i.getBody());return ift(n,function(n){return bg(n,"line-height")},u(g,r)).getOrThunk(function(){var t=parseFloat(wf(n,"line-height")),i=parseFloat(wf(n,"font-size"));return String(t/i)})}).getOr("");var i},this)},bi);var gs="data-mce-contenteditable",ctr=r.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),rst=(nh.isNative=function(n){return!!ctr[n.toLowerCase()]},nh.prototype.fire=function(n,t){var e=n.toLowerCase(),i=fat(e,t||{},this.scope),u,f,o,r;if(this.settings.beforeFire&&this.settings.beforeFire(i),u=this.bindings[e],u)for(f=0,o=u.length;f<o;f++)if(r=u[f],!r.removed){if(r.once&&this.off(e,r.func),i.isImmediatePropagationStopped())return i;if(!1===r.func.call(this.scope,i))return i.preventDefault(),i}return i},nh.prototype.on=function(n,t,i,u){var e,s,h,o,f;if(t=!1===t?it:t)for(e={func:t,removed:!1},u&&r.extend(e,u),s=n.toLowerCase().split(" "),h=s.length;h--;)o=s[h],f=this.bindings[o],f||(f=[],this.toggleEvent(o,!0)),f=i?fe([e],f,!0):fe(fe([],f,!0),[e],!1),this.bindings[o]=f;return this},nh.prototype.off=function(n,t){var u=this,f,o,s,r,i;if(n)for(f=n.toLowerCase().split(" "),o=f.length;o--;){if(r=f[o],i=this.bindings[r],!r)return et(this.bindings,function(n,t){u.toggleEvent(t,!1);delete u.bindings[t]}),this;i&&(t?(i=(s=kst(i,function(n){return n.func===t})).fail,this.bindings[r]=i,e(s.pass,function(n){n.removed=!0})):i.length=0,i.length||(this.toggleEvent(n,!1),delete this.bindings[r]))}else et(this.bindings,function(n,t){u.toggleEvent(t,!1)}),this.bindings={};return this},nh.prototype.once=function(n,t,i){return this.on(n,t,i,{once:!0})},nh.prototype.has=function(n){return n=n.toLowerCase(),!(!this.bindings[n]||0===this.bindings[n].length)},nh);var th,fd={fire:function(n,t,i){var u,r;if(this.removed&&"remove"!==n&&"detach"!==n)return t;if(u=bv(this).fire(n,t),!1!==i&&this.parent)for(r=this.parent();r&&!u.isPropagationStopped();)r.fire(n,u,!1),r=r.parent();return u},on:function(n,t,i){return bv(this).on(n,t,i)},off:function(n,t){return bv(this).off(n,t)},once:function(n,t){return bv(this).once(n,t)},hasEventListeners:function(n){return bv(this).has(n)}},ed=d.DOM,bsi=c(c({},fd),{bindPendingEventDelegates:function(){var n=this;r.each(n._pendingNativeEvents,function(t){psi(n,t)})},toggleNativeEvent:function(n,t){var i=this;"focus"!==n&&"blur"!==n&&(i.removed||(t?i.initialized?psi(i,n):i._pendingNativeEvents?i._pendingNativeEvents.push(n):i._pendingNativeEvents=[n]:i.initialized&&(i.dom.unbind(ud(i,n),n,i.delegates[n]),delete i.delegates[n])))},unbindAllNativeEvents:function(){var n=this,i=n.getBody(),t=n.dom;n.delegates&&(et(n.delegates,function(t,i){n.dom.unbind(ud(n,i),i,t)}),delete n.delegates);!n.inline&&i&&t&&(i.onload=null,t.unbind(n.getWin()),t.unbind(n.getDoc()));t&&(t.unbind(i),t.unbind(n.getContainer()))}}),atr=["design","readonly"],ust=r.each,fst=r.explode,vtr={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},ksi=r.makeMap("alt,ctrl,shift,meta,access"),dsi=(ue.prototype.add=function(n,t,i,u){var f=this,e=f.normalizeCommandFunc(i);return ust(fst(r.trim(n)),function(n){var i=f.createShortcut(n,t,e,u);f.shortcuts[i.id]=i}),!0},ue.prototype.remove=function(n){var t=this.createShortcut(n);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)},ue.prototype.normalizeCommandFunc=function(n){var i=this,t=n;return"string"==typeof t?function(){i.editor.execCommand(t,!1,null)}:r.isArray(t)?function(){i.editor.execCommand(t[0],t[1],t[2])}:t},ue.prototype.createShortcut=function(n,t,i,u){var f=r.map(fst(n,">"),ltr);return f[f.length-1]=r.extend(f[f.length-1],{func:i,scope:u||this.editor}),r.extend(f[0],{desc:this.editor.translate(t),subpatterns:f.slice(1)})},ue.prototype.hasModifier=function(n){return n.altKey||n.ctrlKey||n.metaKey},ue.prototype.isFunctionKey=function(n){return"keydown"===n.type&&112<=n.keyCode&&n.keyCode<=123},ue.prototype.matchShortcut=function(n,t){return!!t&&t.ctrl===n.ctrlKey&&t.meta===n.metaKey&&t.alt===n.altKey&&t.shift===n.shiftKey&&!!(n.keyCode===t.keyCode||n.charCode&&n.charCode===t.charCode)&&(n.preventDefault(),!0)},ue.prototype.executeShortcutAction=function(n){return n.func?n.func.call(n.scope):null},ue);var ih=d.DOM,gsi=r.extend,ytr=r.each,nhi=r.resolve,ptr=l.ie,od=(b.prototype.render=function(){!function(n){var u=n.id,r,e,o,i,f;lu.setCode(ipt(n));f=function(){ks.unbind(window,"ready",f);n.render()};tc.Event.domLoaded?n.getElement()&&l.contentEditable&&(r=t.fromDom(n.getElement()),e=fu(r.dom.attributes,function(n,t){return n[t.name]=t.value,n},{}),n.on("remove",function(){bst(r.dom.attributes,function(n){return se(r,n.name),0});oe(r,e)}),n.ui.styleSheetLoader=blt.forElement(r,{contentCssCors:(o=n).getParam("content_css_cors"),referrerPolicy:tpt(o)}),n.getParam("inline")?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden"),(i=n.getElement().form||ks.getParent(u,"form"))&&(n.formElement=i,n.getParam("hidden_input")&&!dg(n.getElement())&&(ks.insertAfter(ks.create("input",{type:"hidden",name:u}),u),n.hasHiddenInput=!0),n.formEventDelegate=function(t){n.fire(t.type,t)},ks.bind(i,"submit reset",n.formEventDelegate),n.on("reset",function(){n.resetContent()}),!n.getParam("submit_patch")||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return n.editorManager.triggerSave(),n.setDirty(!1),i._mceOldSubmit(i)})),n.windowManager=tri(n),n.notificationManager=vii(n),"xml"===n.getParam("encoding")&&n.on("GetContent",function(n){n.save&&(n.content=ks.encode(n.content))}),n.getParam("add_form_submit_trigger")&&n.on("submit",function(){n.initialized&&n.save()}),n.getParam("add_unload_trigger")&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),n.editorManager.add(n),ntr(n,n.suffix)):ks.bind(window,"ready",f)}(this)},b.prototype.focus=function(n){this.execCommand("mceFocus",!1,n)},b.prototype.hasFocus=function(){return ls(this)},b.prototype.execCallback=function(n){for(var t,i,u=[],r=1;r<arguments.length;r++)u[r-1]=arguments[r];return i=this.settings[n],i?(this.callbackLookup&&(t=this.callbackLookup[n])&&(i=t.func,t=t.scope),"string"==typeof i&&(t=(t=i.replace(/\.\w+$/,""))?nhi(t):0,i=nhi(i),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[n]={func:i,scope:t}),i.apply(t||this,u)):void 0},b.prototype.translate=function(n){return lu.translate(n)},b.prototype.getParam=function(n,t,i){return o=t,s=i,l=(f=n)in(u=this).settings?u.settings[f]:o,"hash"===s?(c={},"string"==typeof(h=l)?e(0<h.indexOf("=")?h.split(/[;,](?![^=;,]*(?:[;,]|$))/):h.split(","),function(n){var t=n.split("=");c[r.trim(t[0])]=1<t.length?r.trim(t[1]):r.trim(t[0])}):c=h,c):"string"===s?ys(ht,u,f).getOr(o):"number"===s?ys(eh,u,f).getOr(o):"boolean"===s?ys(yst,u,f).getOr(o):"object"===s?ys(fh,u,f).getOr(o):"array"===s?ys(br,u,f).getOr(o):"string[]"===s?ys((a=ht,function(n){return br(n)&&al(n,a)}),u,f).getOr(o):"function"===s?ys(ft,u,f).getOr(o):l;var u,f,o,s,a,h,c,l},b.prototype.hasPlugin=function(n,t){return!(!dt(oit(this).split(/[ ,]/),n)||t&&void 0===pu.get(n))},b.prototype.nodeChanged=function(n){this._nodeChangeDispatcher.nodeChanged(n)},b.prototype.addCommand=function(n,t,i){this.editorCommands.addCommand(n,t,i)},b.prototype.addQueryStateHandler=function(n,t,i){this.editorCommands.addQueryStateHandler(n,t,i)},b.prototype.addQueryValueHandler=function(n,t,i){this.editorCommands.addQueryValueHandler(n,t,i)},b.prototype.addShortcut=function(n,t,i,r){this.shortcuts.add(n,t,i,r)},b.prototype.execCommand=function(n,t,i,r){return this.editorCommands.execCommand(n,t,i,r)},b.prototype.queryCommandState=function(n){return this.editorCommands.queryCommandState(n)},b.prototype.queryCommandValue=function(n){return this.editorCommands.queryCommandValue(n)},b.prototype.queryCommandSupported=function(n){return this.editorCommands.queryCommandSupported(n)},b.prototype.show=function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(ih.show(this.getContainer()),ih.hide(this.id)),this.load(),this.fire("show"))},b.prototype.hide=function(){var n=this,t=n.getDoc();n.hidden||(ptr&&t&&!n.inline&&t.execCommand("SelectAll"),n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(ih.hide(n.getContainer()),ih.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.fire("hide"))},b.prototype.isHidden=function(){return!!this.hidden},b.prototype.setProgressState=function(n,t){this.fire("ProgressState",{state:n,time:t})},b.prototype.load=function(n){var t=this.getElement(),i,r;return this.removed?"":t?((n=n||{}).load=!0,i=dg(t)?t.value:t.innerHTML,r=this.setContent(i,n),n.element=t,n.no_events||this.fire("LoadContent",n),n.element=t=null,r):void 0},b.prototype.save=function(n){var r,u,t=this,i=t.getElement();if(i&&t.initialized&&!t.removed)return(n=n||{}).save=!0,n.element=i,n.content=t.getContent(n),n.no_events||t.fire("SaveContent",n),"raw"===n.format&&t.fire("RawSaveContent",n),r=n.content,dg(i)?i.value=r:(!n.is_removing&&t.inline||(i.innerHTML=r),(u=ih.getParent(t.id,"form"))&&ytr(u.elements,function(n){if(n.name===t.id)return n.value=r,!1})),n.element=i=null,!1!==n.set_dirty&&t.setDirty(!1),r},b.prototype.setContent=function(n,t){return vet(this,n,t)},b.prototype.getContent=function(n){return i=this,r=(t=void 0===(t=n)?{}:t).format||"html",u=t,uet(i).editor.getContent(u,r);var i,t,r,u},b.prototype.insertContent=function(n,t){t&&(n=gsi({content:n},t));this.execCommand("mceInsertContent",!1,n)},b.prototype.resetContent=function(n){void 0===n?vet(this,this.startContent,{format:"raw"}):vet(this,n);this.undoManager.reset();this.setDirty(!1);this.nodeChanged()},b.prototype.isDirty=function(){return!this.isNotDirty},b.prototype.setDirty=function(n){var t=!this.isNotDirty;this.isNotDirty=!n;n&&n!==t&&this.fire("dirty")},b.prototype.getContainer=function(){return this.container||(this.container=ih.get(this.editorContainer||this.id+"_parent")),this.container},b.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},b.prototype.getElement=function(){return this.targetElm||(this.targetElm=ih.get(this.id)),this.targetElm},b.prototype.getWin=function(){var n;return this.contentWindow||(n=this.iframeElement)&&(this.contentWindow=n.contentWindow),this.contentWindow},b.prototype.getDoc=function(){var n;return this.contentDocument||(n=this.getWin())&&(this.contentDocument=n.document),this.contentDocument},b.prototype.getBody=function(){var n=this.getDoc();return this.bodyElement||(n?n.body:null)},b.prototype.convertURL=function(n,t,i){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",n,i,!0,t):!r.convert_urls||i&&"LINK"===i.nodeName||0===n.indexOf("file:")||0===n.length?n:r.relative_urls?this.documentBaseURI.toRelative(n):this.documentBaseURI.toAbsolute(n,r.remove_script_host)},b.prototype.addVisual=function(n){var t;t=n;ct(this).editor.addVisual(t)},b.prototype.remove=function(){var n,r,u,t,i;(n=this).removed||(r=n._selectionOverrides,u=n.editorUpload,t=n.getBody(),i=n.getElement(),t&&n.save({is_removing:!0}),n.removed=!0,n.unbindAllNativeEvents(),n.hasHiddenInput&&i&&bb.remove(i.nextSibling),n.fire("remove"),n.editorManager.remove(n),!n.inline&&t&&bb.setStyle(n.id,"display",n.orgDisplay),n.fire("detach"),bb.remove(n.getContainer()),yb(r),yb(u),n.destroy())},b.prototype.destroy=function(n){var i,u,f,r,t,e,o;u=n;e=(i=this).selection;o=i.dom;i.destroyed||(u||i.removed?(u||(i.editorManager.off("beforeunload",i._beforeUnload),i.theme&&i.theme.destroy&&i.theme.destroy(),yb(e),yb(o)),(r=(f=i).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,r._mceOldSubmit=null),bb.unbind(r,"submit reset",f.formEventDelegate)),(t=i).contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),i.destroyed=!0):i.remove())},b.prototype.uploadImages=function(n){return this.editorUpload.uploadImages(n)},b.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},b.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead");},b.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead");},b.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead");},b.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead");},b);var sd,uu=d.DOM,wtr=r.explode,yf=r.each,btr=r.extend,ktr=0,uhi=!1,co=[],nr=[],dtr="CSS1Compat"!==document.compatMode,lo=c(c({},fd),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:a,majorVersion:"5",minorVersion:"10.3",releaseDate:"2022-02-09",editors:co,i18n:lu,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var i,f="",t=ro.getDocumentBaseUrl(document.location),r,n,o,e,s;if(/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),r=window.tinymce||window.tinyMCEPreInit,r)i=r.base||r.baseURL,f=r.suffix;else{for(o=document.getElementsByTagName("script"),e=0;e<o.length;e++)if(""!==(n=o[e].src||"")&&(s=n.substring(n.lastIndexOf("/")),/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(n))){-1!==s.indexOf(".min")&&(f=".min");i=n.substring(0,n.lastIndexOf("/"));break}!i&&document.currentScript&&(-1!==(n=document.currentScript.src).indexOf(".min")&&(f=".min"),i=n.substring(0,n.lastIndexOf("/")))}this.baseURL=new ro(t).toAbsolute(i);this.documentBaseURL=t;this.baseURI=new ro(this.baseURL);this.suffix=f;this.on("AddEditor",u(kyi,this));this.on("RemoveEditor",u(dyi,this))},overrideDefaults:function(n){var i=n.base_url,r,t;i&&this._setBaseUrl(i);r=n.suffix;n.suffix&&(this.suffix=r);t=(this.defaultSettings=n).plugin_base_urls;void 0!==t&&et(t,function(n,t){rr.PluginManager.urls[t]=n})},init:function(n){function f(n){var t=n.id;return t||(t=at(n,"name").filter(function(n){return!uu.get(n)}).getOrThunk(uu.uniqueId),n.setAttribute("id",t)),t}function e(n,t){return t.constructor===RegExp?t.test(n.className):uu.hasClass(n,t)}var i,t=this,s=r.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),u=function(n){i=n},o=function(){function h(n,r,f){var e=new od(n,r,t);v.push(e);e.on("init",function(){++y===i.length&&u(v)});e.targetElm=e.targetElm||f;e.render()}var i,c,y=0,v=[];uu.unbind(window,"ready",o);(c=n.onpageload)&&c.apply(t,[]);i=a.unique(function(n){var t=[],i;if(l.browser.isIE()&&l.browser.version.major<11)return ok("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(dtr)return ok("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(n.types)return yf(n.types,function(n){t=t.concat(uu.select(n.selector))}),t;if(n.selector)return uu.select(n.selector);if(n.target)return[n.target];switch(n.mode){case"exact":i=n.elements||"";0<i.length&&yf(wtr(i),function(n){var i=uu.get(n);i?t.push(i):yf(document.forms,function(i){yf(i.elements,function(i){i.name===n&&(n="mce_editor_"+ktr++,uu.setAttrib(i,"id",n),t.push(i))})})});break;case"textareas":case"specific_textareas":yf(uu.select("textarea"),function(i){n.editor_deselector&&e(i,n.editor_deselector)||n.editor_selector&&!e(i,n.editor_selector)||t.push(i)})}return t}(n));n.types?yf(n.types,function(t){r.each(i,function(i){return!uu.is(i,t.selector)||(h(f(i),btr({},n,t),i),!1)})}):(r.each(i,function(n){var i;(i=t.get(n.id))&&i.initialized&&!(i.getContainer()||i.getBody()).parentNode&&(rhi(i),i.unbindAllNativeEvents(),i.destroy(!0),i.removed=!0)}),0===(i=r.grep(i,function(n){return!t.get(n.id)})).length?u([]):yf(i,function(t){var i=t;n.inline&&i.tagName.toLowerCase()in s?ok("Could not initialize inline editor on invalid inline target element",t):h(f(t),n,t)}))};return t.settings=n,uu.bind(window,"ready",o),new ri(function(n){i?n(i):u=function(t){n(t)}})},get:function(n){return 0===arguments.length?nr.slice(0):ht(n)?gt(nr,function(t){return t.id===n}).getOr(null):eh(n)&&nr[n]||null},add:function(n){var t=this;return co[n.id]===n||(null===t.get(n.id)&&("length"!==n.id&&(co[n.id]=n),co.push(n),nr.push(n)),ihi(!0),t.activeEditor=n,t.fire("AddEditor",{editor:n}),sd||(sd=function(n){var i=t.fire("BeforeUnload");if(i.returnValue)return n.preventDefault(),n.returnValue=i.returnValue,i.returnValue},window.addEventListener("beforeunload",sd))),n},createEditor:function(n,t){return this.add(new od(n,t,this))},remove:function(n){var r,t,i=this;if(n){if(!ht(n))return t=n,ll(i.get(t.id))?null:(rhi(t)&&i.fire("RemoveEditor",{editor:t}),0===nr.length&&window.removeEventListener("beforeunload",sd),t.remove(),ihi(0<nr.length),t);yf(uu.select(n),function(n){(t=i.get(n.id))&&i.remove(t)})}else for(r=nr.length-1;0<=r;r--)i.remove(nr[r])},execCommand:function(n,t,i){var r=this.get(i);switch(n){case"mceAddEditor":return this.get(i)||new od(i,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():this.execCommand("mceAddEditor",!1,i),!0}return!!this.activeEditor&&this.activeEditor.execCommand(n,t,i)},triggerSave:function(){yf(nr,function(n){n.save()})},addI18n:function(n,t){lu.add(n,t)},translate:function(n){return lu.translate(n)},setActive:function(n){var t=this.activeEditor;this.activeEditor!==n&&(t&&t.fire("deactivate",{relatedTarget:n}),n.fire("activate",{relatedTarget:t}));this.activeEditor=n},_setBaseUrl:function(n){this.baseURL=new ro(this.documentBaseURL).toAbsolute(n.replace(/\/+$/,""));this.baseURI=new ro(this.baseURL)}});lo.setup();var kv,dv,ohi,est,shi=Math.min,hl=Math.max,hd=Math.round,gtr={inflate:function(n,t,i){return sl(n.x-t,n.y-i,n.w+2*t,n.h+2*i)},relativePosition:fhi,findBestRelativePosition:function(n,t,i,r){for(var u,f=0;f<r.length;f++)if((u=fhi(n,t,r[f])).x>=i.x&&u.x+u.w<=i.w+i.x&&u.y>=i.y&&u.y+u.h<=i.h+i.y)return r[f];return null},intersect:function(n,t){var i=hl(n.x,t.x),r=hl(n.y,t.y),u=shi(n.x+n.w,t.x+t.w),f=shi(n.y+n.h,t.y+t.h);return u-i<0||f-r<0?null:sl(i,r,u-i,f-r)},clamp:function(n,t,i){var r=n.x,u=n.y,f=n.x+n.w,e=n.y+n.h,l=t.x+t.w,a=t.y+t.h,o=hl(0,t.x-r),s=hl(0,t.y-u),h=hl(0,f-l),c=hl(0,e-a);return r+=o,u+=s,i&&(f+=o,e+=s,r-=h,u-=c),sl(r,u,(f-=h)-r,(e-=c)-u)},create:sl,fromClientRect:function(n){return sl(n.left,n.top,n.width,n.height)}},nir=(kv={},dv={},{load:function(n,t){var r='Script at URL "'+t+'" failed to load',u='Script at URL "'+t+"\" did not call `tinymce.Resource.add('"+n+"', data)` within 1 second",i;return void 0!==kv[n]?kv[n]:(i=new ri(function(i,f){var e=function(n,t,i){function f(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];u||(u=!0,null!==r&&(clearTimeout(r),r=null),n.apply(null,i))}}void 0===i&&(i=1e3);var u=!1,r=null,o=f(n),e=f(t);return{start:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||null!==r||(r=setTimeout(function(){return e.apply(null,t)},i))},resolve:o,reject:e}}(i,f);dv[n]=e.resolve;kf.ScriptLoader.loadScript(t,function(){return e.start(u)},function(){return e.reject(r)})}),kv[n]=i)},add:function(n,t){void 0!==dv[n]&&(dv[n](t),delete dv[n]);kv[n]=ri.resolve(t)}}),cd=r.each,tir=r.extend;ehi.extend=ohi=function(n){function i(){var n,t,i;if(!est&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(n=t.length;n--;)(i=t[n]).init&&i.init.apply(this,arguments)}function u(){return this}var t=this.prototype,r;return est=!0,r=new this,est=!1,n.Mixins&&(cd(n.Mixins,function(t){for(var i in t)"init"!==i&&(n[i]=t[i])}),t.Mixins&&(n.Mixins=t.Mixins.concat(n.Mixins))),n.Methods&&cd(n.Methods.split(","),function(t){n[t]=u}),n.Properties&&cd(n.Properties.split(","),function(t){var i="_"+t;n[t]=function(n){return void 0!==n?(this[i]=n,this):this[i]}}),n.Statics&&cd(n.Statics,function(n,t){i[t]=n}),n.Defaults&&t.Defaults&&(n.Defaults=tir({},t.Defaults,n.Defaults)),et(n,function(n,i){var u,f;r[i]="function"==typeof n&&t[i]?(u=i,f=n,function(){var i=this._super,n;return this._super=t[u],n=f.apply(this,arguments),this._super=i,n}):n}),i.prototype=r,(i.constructor=i).extend=ohi,i};var gv,rh,ost,ld=Math.min,ad=Math.max,uh=Math.round,sst={serialize:function(n){var t=JSON.stringify(n);return ht(t)?t.replace(/[\u0080-\uFFFF]/g,function(n){var t=n.charCodeAt(0).toString(16);return"\\u"+"0000".substring(t.length)+t}):t},parse:function(n){try{return JSON.parse(n)}catch(n){}}},iir={callbacks:{},count:0,send:function(n){var t=this,i=d.DOM,r=(void 0!==n.count?n:t).count,u="tinymce_jsonp_"+r;t.callbacks[r]=function(f){i.remove(u);delete t.callbacks[r];n.callback(f)};i.add(i.doc.body,"script",{id:u,src:n.url,type:"text/javascript"});t.count++}},vd=c(c({},fd),{send:function(n){var t,i=0,u=function(){!n.async||4===t.readyState||1e4<i++?(n.success&&i<1e4&&200===t.status?n.success.call(n.success_scope,""+t.responseText,t,n):n.error&&n.error.call(n.error_scope,1e4<i?"TIMED_OUT":"GENERAL",t,n),t=null):ui.setTimeout(u,10)};if(n.scope=n.scope||this,n.success_scope=n.success_scope||n.scope,n.error_scope=n.error_scope||n.scope,n.async=!1!==n.async,n.data=n.data||"",vd.fire("beforeInitialize",{settings:n}),(t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType(n.content_type),t.open(n.type||(n.data?"POST":"GET"),n.url,n.async),n.crossDomain&&(t.withCredentials=!0),n.content_type&&t.setRequestHeader("Content-Type",n.content_type),n.requestheaders&&r.each(n.requestheaders,function(n){t.setRequestHeader(n.key,n.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=vd.fire("beforeSend",{xhr:t,settings:n}).xhr).send(n.data),!n.async)return u();ui.setTimeout(u,10)}}),hhi=r.extend,rir=(yd.sendRPC=function(n){return(new yd).send(n)},yd.prototype.send=function(n){var i=n.error,r=n.success,t=hhi(this.settings,n);t.success=function(n,u){(n=void 0===(n=sst.parse(n))?{error:"JSON Parse error."}:n).error?i.call(t.error_scope||t.scope,n.error,u):r.call(t.success_scope||t.scope,n.result)};t.error=function(n,r){i&&i.call(t.error_scope||t.scope,n,r)};t.data=sst.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params});t.content_type="application/json";vd.send(t)},yd);try{wd="__storage_test__";(pd=window.localStorage).setItem(wd,wd);pd.removeItem(wd)}catch(bd){gv={};rh=[];ost={getItem:function(n){return gv[n]||null},setItem:function(n,t){rh.push(n);gv[n]=String(t)},key:function(n){return rh[n]},removeItem:function(n){rh=rh.filter(function(t){return t===n});delete gv[n]},clear:function(){rh=[];gv={}},length:0};Object.defineProperty(ost,"length",{get:function(){return rh.length},configurable:!1,enumerable:!1});pd=ost}var uir={geom:{Rect:gtr},util:{Promise:ri,Delay:ui,Tools:r,VK:s,URI:ro,Class:ehi,EventDispatcher:rst,Observable:fd,I18n:lu,XHR:vd,JSON:sst,JSONRequest:rir,JSONP:iir,LocalStorage:pd,Color:function(n){function f(n){var f;return"object"==typeof n?"r"in n?(t=n.r,i=n.g,r=n.b):"v"in n&&function(n,u,f){if(n=(parseInt(n,10)||0)%360,u=parseInt(u,10)/100,f=parseInt(f,10)/100,u=ad(0,ld(u,1)),f=ad(0,ld(f,1)),0!==u){var h=n/60,e=f*u,o=e*(1-Math.abs(h%2-1)),s=f-e;switch(Math.floor(h)){case 0:t=e;i=o;r=0;break;case 1:t=o;i=e;r=0;break;case 2:t=0;i=e;r=o;break;case 3:t=0;i=o;r=e;break;case 4:t=o;i=0;r=e;break;case 5:t=e;i=0;r=o;break;default:t=i=r=0}t=uh(255*(t+s));i=uh(255*(i+s));r=uh(255*(r+s))}else t=i=r=uh(255*f)}(n.h,n.s,n.v):(f=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(n))?(t=parseInt(f[1],10),i=parseInt(f[2],10),r=parseInt(f[3],10)):(f=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(n))?(t=parseInt(f[1],16),i=parseInt(f[2],16),r=parseInt(f[3],16)):(f=/#([0-F])([0-F])([0-F])/gi.exec(n))&&(t=parseInt(f[1]+f[1],16),i=parseInt(f[2]+f[2],16),r=parseInt(f[3]+f[3],16)),t=t<0?0:255<t?255:t,i=i<0?0:255<i?255:i,r=r<0?0:255<r?255:r,u}var u={},t=0,i=0,r=0;return n&&f(n),u.toRgb=function(){return{r:t,g:i,b:r}},u.toHsv=function(){return u=t,e=i,f=r,o=0,(n=ld(u/=255,ld(e/=255,f/=255)))===(s=ad(u,ad(e,f)))?{h:0,s:0,v:100*(o=n)}:(h=(s-n)/s,{h:uh(60*((u===n?3:f===n?1:5)-(u===n?e-f:f===n?u-e:f-u)/((o=s)-n))),s:uh(100*h),v:uh(100*o)});var u,e,f,h,o,n,s},u.toHex=function(){function n(n){return 1<(n=parseInt(n,10).toString(16)).length?n:"0"+n}return"#"+n(t)+n(i)+n(r)},u.parse=f,u},ImageUploader:function(n){var t=rri(),i=eri(n,t);return{upload:function(t,r){return i.upload(t,(r=void 0===r||r)?fri(n):void 0)}}}},dom:{EventUtils:tc,Sizzle:k,DomQuery:a,TreeWalker:yt,TextSeeker:bvt,DOMUtils:d,ScriptLoader:kf,RangeUtils:uv,Serializer:sii,StyleSheetLoader:wlt,ControlSelection:pbt,BookmarkManager:iv,Selection:uii,Event:tc.Event},html:{Styles:yn,Entities:ve,Node:ru,Schema:le,SaxParser:gw,DomParser:aet,Writer:odt,Serializer:gc},Env:l,AddOnManager:rr,Annotator:ibt,Formatter:sri,UndoManager:cri,EditorCommands:asi,WindowManager:tri,NotificationManager:vii,EditorObservable:bsi,Shortcuts:dsi,Editor:od,FocusManager:idt,EditorManager:lo,DOM:d.DOM,ScriptLoader:kf.ScriptLoader,PluginManager:pu,ThemeManager:oo,IconManager:kb,Resource:nir,trim:r.trim,isArray:r.isArray,is:r.is,toArray:r.toArray,makeMap:r.makeMap,each:r.each,map:r.map,grep:r.grep,inArray:r.inArray,extend:r.extend,create:r.create,walk:r.walk,createNS:r.createNS,resolve:r.resolve,explode:r.explode,_addCacheSuffix:r._addCacheSuffix,isOpera:l.opera,isWebKit:l.webkit,isIE:l.ie,isGecko:l.gecko,isMac:l.mac},chi=r.extend(lo,uir),lhi=chi;window.tinymce=lhi;window.tinyMCE=lhi,function(n){if("object"==typeof module)try{module.exports=n}catch(n){}}(chi)}();!function(){"use strict";function vb(n,t){var u={},r;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(u[i[r]]=n[i[r]]);return u}function ca(n,t,i){if(i||2===arguments.length)for(var u,r=0,f=t.length;r<f;r++)!u&&r in t||((u=u||Array.prototype.slice.call(t,0,r))[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))}function la(n){return function(t){return r=typeof(i=t),(null===i?"null":"object"==r&&(Array.prototype.isPrototypeOf(i)||i.constructor&&"Array"===i.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(i)||i.constructor&&"String"===i.constructor.name)?"string":r)===n;var i,r}}function aa(n){return function(t){return typeof t===n}}function yb(n){return function(t){return n===t}}function so(n){return!(null==n)}function o(){}function va(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,r))}}function i(n){return function(){return n}}function et(n){return n}function wht(n,t){return n===t}function ir(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){for(var u,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return u=i.concat(r),n.apply(null,u)}}function kb(n){return function(t){return!n(t)}}function ba(n){return function(){throw new Error(n);}}function db(n){return n()}function ka(){return nh}function gb(n){return n()}function nf(n){var t,i=!1;return function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];return i||(i=!0,t=n.apply(null,u)),t}}function fi(n,t){return-1<kht.call(n,t)}function da(n,t){for(var i=0,r=n.length;i<r;i++)if(t(n[i],i))return 1}function y(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i);return u}function c(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i)}function bi(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i)&&u.push(r);return u}function th(n,t,i){return function(n){for(var u,r=n.length-1;0<=r;r--)u=n[r],i=t(i,u,r)}(n),i}function ih(n,t,i){return c(n,function(n,r){i=t(i,n,r)}),i}function ki(t,i){return function(t,i,r){for(var f,u=0,e=t.length;u<e;u++){if(f=t[u],i(f,u))return n.some(f);if(r(f,u))break}return n.none()}(t,i,lt)}function oe(t,i){for(var r=0,u=t.length;r<u;r++)if(i(t[r],r))return n.some(r);return n.none()}function co(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!ho(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);dht.apply(i,n[t])}return i}function di(n,t){return co(y(n,t))}function nk(n,t){for(var i=0,r=n.length;i<r;++i)if(!0!==t(n[i],i))return!1;return!0}function lo(n){var t=lk.call(n,0);return t.reverse(),t}function tk(n,t){return bi(n,function(n){return!fi(t,n)})}function ik(n){return[n]}function rh(t,i){for(var u,r=0;r<t.length;r++)if(u=i(t[r],r),u.isSome())return u;return n.none()}function rk(n,t){var i=String(t).toLowerCase();return ki(n,function(n){return n.search(i)})}function ei(n,t){return-1!==n.indexOf(t)}function dr(n){return function(t){return ei(t,n)}}function bht(n){return window.matchMedia(n).matches}function oi(n){return i("alloy."+n)}function tf(n,t){cv(n,n.element,t,{})}function gr(n,t,i){cv(n,n.element,t,i)}function uk(n){tf(n,yo())}function ga(n,t,i){cv(n,t,i,{})}function uh(n,t){var r=n.dom,i;if(1!==r.nodeType)return!1;if(i=r,void 0!==i.matches)return i.matches(t);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(t);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");}function fk(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount}function ek(n,t){var i=void 0===t?document:t.dom;return fk(i)?[]:y(i.querySelectorAll(n),f.fromDom)}function nv(t,i){var r=void 0===i?document:i.dom;return fk(r)?n.none():n.from(r.querySelector(t)).map(f.fromDom)}function ct(n,t){return n.dom===t.dom}function ok(){return iv(0,0)}function sk(n){function t(n){return function(){return i===n}}var i=n.current,r=n.version;return{current:i,version:r,isEdge:t("Edge"),isChrome:t("Chrome"),isIE:t("IE"),isOpera:t("Opera"),isFirefox:t(vk),isSafari:t("Safari")}}function hk(n){function t(n){return function(){return i===n}}var i=n.current,r=n.version;return{current:i,version:r,isWindows:t(yk),isiOS:t("iOS"),isAndroid:t(pk),isOSX:t("OSX"),isLinux:t("Linux"),isSolaris:t(wk),isFreeBSD:t(bk),isChromeOS:t(kk)}}function ao(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}}function ai(n){return n.dom.nodeName.toLowerCase()}function sh(n){return function(t){return t.dom.nodeType===n}}function nu(n){return f.fromDom(n.dom.ownerDocument)}function rd(n){return bct(n)?n:nu(n)}function su(t){return n.from(t.dom.parentNode).map(f.fromDom)}function ud(t,i){var r=t.dom.childNodes;return n.from(r[i]).map(f.fromDom)}function fd(n,t){su(n).each(function(i){i.dom.insertBefore(t.dom,n.dom)})}function yct(t,i){n.from(t.dom.nextSibling).map(f.fromDom).fold(function(){su(t).each(function(n){vi(n,i)})},function(n){fd(n,i)})}function pct(n,t){ud(n,0).fold(function(){vi(n,t)},function(i){n.dom.insertBefore(t.dom,i.dom)})}function lv(n,t){c(t,function(t){vi(n,t)})}function av(n){n.dom.textContent="";c(tu(n),function(n){ff(n)})}function ed(n){return kct(n)&&so(n.dom.host)}function wct(n){return f.fromDom(n.dom.host)}function od(){return nlt(f.fromDom(document))}function sd(n,t){vi(n.element,t.element)}function hd(n){var t,i=su(n.element).bind(function(t){return n.getSystem().getByDom(t).toOptional()});ph(t=n);ff(t.element);t.getSystem().removeFromWorld(t);i.each(function(n){n.syncComponents()})}function ti(n,t){for(var r,u=hi(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r)}function dt(n,t){return pd(n,function(n,i){return{k:i,v:t(n,i)}})}function vv(n,t){var i=[];return ti(n,function(n,r){i.push(t(n,r))}),i}function l(t,i){return cu(t,i)?n.from(t[i]):n.none()}function wt(n,t){return cu(n,t)&&void 0!==n[t]&&null!==n[t]}function cd(n,t,i){if(!(pb(i)||wb(i)||bb(i)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",i,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,i+"")}function a(n,t,i){cd(n.dom,t,i)}function ld(n,t){var i=n.dom;ti(t,function(n,t){cd(i,t,n)})}function tt(n,t){var i=n.dom.getAttribute(t);if(null!==i)return i}function hh(t,i){return n.from(tt(t,i))}function yv(n,t){var i=n.dom;return!(!i||!i.hasAttribute)&&i.hasAttribute(t)}function ii(n,t){n.dom.removeAttribute(t)}function pv(n,t){var i=tt(n,t);return void 0===i||""===i?[]:i.split(" ")}function ch(n){return void 0!==n.dom.classList}function bt(n,t){var i,r,u;ch(n)?n.dom.classList.add(t):(r=t,u=pv(i=n,"class").concat([r]),a(i,"class",u.join(" ")))}function at(n,t){var i,r,u,f;ch(n)?n.dom.classList.remove(t):(u=t,0<(f=bi(pv(r=n,"class"),function(n){return n!==u})).length?a(r,"class",f.join(" ")):ii(r,"class"));0===(ch(i=n)?i.dom.classList:pv(i,"class")).length&&ii(i,"class")}function uf(n,t){return ch(n)&&n.dom.classList.contains(t)}function ad(n,t,i){at(n,i);bt(n,t)}function wv(n,t,i){return n.stype===lr.Error?t(n.serror):i(n.svalue)}function wd(n){return{stype:lr.Value,svalue:n}}function bd(n){return{stype:lr.Error,serror:n}}function kd(n,t,i,r){return{tag:"field",key:n,newKey:t,presence:i,prop:r}}function bv(n,t,i){switch(n.tag){case"field":return t(n.key,n.newKey,n.presence,n.prop);case"custom":return i(n.newKey,n.instantiator)}}function dd(n){return function(){for(var u,f,r,e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(0===t.length)throw new Error("Can't merge zero objects");for(u={},f=0;f<t.length;f++){e=t[f];for(r in e)cu(e,r)&&(u[r]=n(u[r],e[r]))}return u}}function ef(){return{tag:"required",process:{}}}function gd(n){return{tag:"defaultedThunk",process:n}}function bh(n){return gd(i(n))}function kv(){return{tag:"option",process:{}}}function ng(n){return{tag:"mergeWithThunk",process:n}}function dv(n){return ya(n)&&100<hi(n).length?" removed due to size":JSON.stringify(n,null,2)}function bo(n,t){return ae([{path:n,getErrorInfo:t}])}function ko(n){return{extract:function(t,r){return slt(n(r),function(n){return bo(t,i(n))})},toString:i("val")}}function tg(n,t,i,r){return r(l(n,t).getOrThunk(function(){return i(n)}))}function rlt(t,r,u,f,e){function o(n){return e.extract(r.concat([f]),n)}function s(t){return t.fold(function(){return le(n.none())},function(t){var i=e.extract(r.concat([f]),t);return hlt(i,n.some)})}var h,c,a,v,y,p;switch(t.tag){case"required":return a=r,p=o,l(v=u,y=f).fold(function(){return n=y,t=v,bo(a,function(){return'Could not find valid *required* value for "'+n+'" in '+dv(t)});var n,t},p);case"defaultedThunk":return tg(u,f,t.process,o);case"option":return s(l(u,f));case"defaultedOptionThunk":return c=t.process,s(l(h=u,f).map(function(n){return!0===n?c(h):n}));case"mergeWithThunk":return tg(u,f,i({}),function(n){return o(kt(t.process(u),n))})}}function rr(n){var t=vt(n),r=th(n,function(n,t){return bv(t,function(t){var i;return kt(n,((i={})[t]=!0,i))},i(n))},{});return{extract:function(n,i){var u,f,e,s,h,c,l=bi(wb(i)?[]:hi((e=so,s=f={},h=function(n,t){s[t]=n},c=o,ti(i,function(n,t){(e(n,t)?h:c)(n,t)}),f)),function(n){return!wt(r,n)});return 0===l.length?t.extract(n,i):(u=l,bo(n,function(){return"There are unsupported fields: ["+u.join(", ")+"] specified"}))},toString:t.toString}}function ult(n,t){return{extract:function(i,r){var u,f,e,o=hi(r),s=(e=ko(n),u=i,f=y(o,function(n,t){return e.extract(u.concat(["["+t+"]"]),n)}),vlt(f));return olt(s,function(n){var u=y(n,function(n){return kd(n,n,ef(),t)});return vt(u).extract(i,r)})},toString:function(){return"setOf("+t.toString()+")"}}}function flt(n,t){return{extract:function(i,r){return l(r,n).fold(function(){return t=n,bo(i,function(){return'Choice schema did not contain choice key: "'+t+'"'});var t},function(n){return u=i,e=r,l(o=t,f=n).fold(function(){return n=o,t=f,bo(u,function(){return'The chosen schema: "'+t+'" did not exist in branches: '+dv(n)});var n,t},function(n){return n.extract(u.concat(["branch: "+f]),e)});var u,e,o,f})},toString:function(){return"chooseOn("+n+"). Possible values: "+hi(t)}}}function ig(n){return ko(function(t){return n(t).fold(ae,le)})}function gv(n,t){return ult(function(t){return n(t).fold(bd,wd)},t)}function ny(n,t,i){return elt((u=t.extract([n],r=i),clt(u,function(n){return{input:r,errors:n}})));var r,u}function rg(n){return n.fold(function(n){throw new Error(eg(n));},et)}function gt(n,t,i){return rg(ny(n,t,i))}function of(n,t){return flt(n,dt(t,vt))}function r(n){return yi(n,n,ef(),sf())}function go(n,t){return yi(n,n,ef(),t)}function lu(n,t){return yi(n,n,ef(),vt(t))}function b(n){return yi(n,n,kv(),sf())}function ty(n,t){return yi(n,n,kv(),t)}function iy(n,t){return ty(n,vt(t))}function ug(n,t){return ty(n,rr(t))}function t(n,t){return yi(n,n,bh(t),sf())}function ce(n,t,i){return yi(n,n,bh(t),i)}function au(n){if(!ho(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],i={};return c(n,function(r,u){var o=hi(r),f,e;if(1!==o.length)throw new Error("one and only one name per case");if(f=o[0],e=r[f],void 0!==i[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!ho(e))throw new Error("case arguments must be an array");t.push(f);i[f]=function(){for(var o,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(o=i.length,o!==e.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+e.length+" ("+e+"), got "+o);return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+t.length);return t[u].apply(null,i)},match:function(n){var r=hi(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!nk(t,function(n){return fi(r,n)}))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[f].apply(null,i)},log:function(n){console.log(n,{constructors:t,constructor:f,params:i})}}}}),i}function pi(n,t){return(i={})[n]=t,i;var i}function ur(n){return t={},c(n,function(n){t[n.key]=n.value}),t;var t}function og(n,t,i){return void 0===i&&(i=wht),n.exists(function(n){return i(n,t)})}function ry(n){for(var i=[],r=function(n){i.push(n)},t=0;t<n.length;t++)n[t].each(r);return i}function sg(n){return tr(n)?n:lt}function hg(n,t){return ct(n.element,t.event.target)}function ns(n){if(!wt(n,"can")&&!wt(n,"abort")&&!wt(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return u(u({},klt),n)}function cg(n,t){return{key:n,value:ns({abort:t})}}function v(n,t){return{key:n,value:ns({run:t})}}function uy(n,t,i){return{key:n,value:ns({run:function(n,r){t.apply(void 0,[n,r].concat(i))}})}}function kh(n){return function(t){return{key:n,value:ns({run:function(n,i){hg(n,i)&&t(n,i)}})}}}function ve(n,t,i){var r,u,f=t.partUids[i];return u=f,v(r=n,function(n,t){n.getSystem().getByUid(u).each(function(n){var i=n.element,u=r,f=t;n.getSystem().triggerEvent(u,i,f.event)})})}function fy(n){return v(n,function(n,t){t.cut()})}function ey(n,t){var i=n.toString(),r=i.indexOf(")")+1,u=i.indexOf("("),f=i.substring(u+1,r-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:t,parameters:sy(f)}},n}function ar(n){return{classes:wa(n.classes)?[]:n.classes,attributes:wa(n.attributes)?{}:n.attributes,styles:wa(n.styles)?{}:n.styles}}function oy(n,t,i){return yg(function(r){i(r,n,t)})}function blt(n){return{key:n,value:void 0}}function li(n){var t=gt("Creating behaviour: "+n.name,dlt,n),i=t.fields,r=t.name,u=t.active,f=t.apis,e=t.extra,o=t.state,s=rr(i),h=iy(r,[ug("config",i)]);return pg(s,h,r,u,f,e,o)}function k(n){var t=n;return{get:function(){return t},set:function(n){t=n}}}function hf(n){return n.dom.focus()}function cf(n){return n.dom.blur()}function lf(t){return void 0===t&&(t=f.fromDom(document)),n.from(t.dom.activeElement).map(f.fromDom)}function dh(n){return lf(yh(n)).filter(function(t){return n.dom.contains(t.dom)})}function lg(n){return n.dom.innerHTML}function vu(n){if(ed(n))return"#shadow-root";var i=f.fromDom(n.dom.cloneNode(!1)),t=f.fromTag("div"),r=f.fromDom(i.dom.cloneNode(!0));return vi(t,r),lg(t)}function cy(t,i,r){var f,o,u,s,e,h;switch(l(ly.get(),t).orThunk(function(){return rh(hi(ly.get()),function(i){return-1<t.indexOf(i)?n.some(ly.get()[i]):n.none()})}).getOr(ts.NORMAL)){case ts.NORMAL:return r(sat());case ts.LOGGING:return e=(f=t,o=i,u=[],s=(new Date).getTime(),{logEventCut:function(n,t,i){u.push({outcome:"cut",target:t,purpose:i})},logEventStopped:function(n,t,i){u.push({outcome:"stopped",target:t,purpose:i})},logNoParent:function(n,t,i){u.push({outcome:"no-parent",target:t,purpose:i})},logEventNoHandlers:function(n,t){u.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(n,t,i){u.push({outcome:"response",purpose:i,target:t})},write:function(){var n=(new Date).getTime();fi(["mousemove","mouseover","mouseout",oh()],f)||console.log(f,{event:f,time:n-s,target:o.dom,sequence:y(u,function(n){return fi(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+vu(n.target)+")":n.outcome})})}}),h=r(e),e.write(),h;case ts.STOP:return!0}}function nc(n,t,i){return void 0!==(r=new Error).stack&&ki(r.stack.split("\n"),function(n){return 0<n.indexOf("alloy")&&!da(oat,function(t){return-1<n.indexOf(t)})}).getOr(eat),yi(t,t,i,ig(function(n){return st.value(function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n.apply(void 0,i)})}));var r}function yt(n){return nc(0,n,bh(o))}function gi(t){return nc(0,t,bh(n.none))}function vy(n){return nc(0,n,ef())}function dg(n){return nc(0,n,ef())}function it(n,t){return ci(n,i(t))}function gg(n){return ci(n,et)}function nn(n,t,i){var r=t.aria;r.update(n,r,i.get())}function tn(n,t,i){t.toggleClass.each(function(t){(i.get()?bt:at)(n.element,t)})}function rn(n,t,i){yy(n,t,i,!i.get())}function un(n,t,i){i.set(!0);tn(n,t,i);nn(n,t,i)}function fn(n,t,i){i.set(!1);tn(n,t,i);nn(n,t,i)}function en(n,t,i){yy(n,t,i,t.selected)}function on(n,t){return uc.config({channels:pi(wg,{onReceive:function(i,r){r.command===n&&t(i,r.state)}})})}function tc(n){return uc.config({channels:pi(hy,{onReceive:n})})}function sn(n,t){return{key:n,value:{onReceive:t}}}function hn(){function n(n,t){t.stop();uk(n)}return[v(gk(),n),v(nd(),n),fy(eu()),fy(rf())]}function cn(n,t){t.ignore||(hf(n.element),t.onFocus(n))}function ic(n){return void 0!==n.style&&tr(n.style.getPropertyValue)}function ln(n,t,i){if(!pb(i))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",i,":: Element ",n),new Error("CSS value must be a string: "+i);ic(n)&&n.style.setProperty(t,i)}function w(n,t,i){ln(n.dom,t,i)}function we(n,t){var i=n.dom;ti(t,function(n,t){ln(i,t,n)})}function rs(n,t){var i=n.dom,r=window.getComputedStyle(i).getPropertyValue(t);return""!==r||hu(n)?r:wn(i,t)}function vf(t,i){var r=t.dom,u=wn(r,i);return n.from(u).filter(function(n){return 0<n.length})}function yf(n,t){var i,r=t;ic(i=n.dom)&&i.style.removeProperty(r);og(hh(n,"style").map(ght),"")&&ii(n,"style")}function rc(n){return n.dom.offsetWidth}function an(n,t){function i(i){var r=t(i),u;return r<=0||null===r?(u=rs(i,n),parseFloat(u)||0):r}function r(n,t){return ih(t,function(t,i){var r=rs(n,i),u=void 0===r?0:parseInt(r,10);return isNaN(u)?t:t+u},0)}return{set:function(t,i){if(!bb(i)&&!i.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+i);var r=t.dom;ic(r)&&(r.style[n]=i+"px")},get:i,getOuter:i,aggregate:r,max:function(n,t,i){var u=r(n,i);return u<t?t-u:0}}}function wi(n){return yat.get(n)}function ri(n,t){return ek(t,n)}function yy(n,t,i,r){(r?un:fn)(n,t,i)}function vn(n,t,i){a(n.element,"aria-expanded",i)}function bn(t,i,r,u,f){return t(r,u)?n.some(r):tr(f)&&f(r)?n.none():i(r,u,f)}function kn(t,i,r){for(var e,u=t.dom,o=tr(r)?r:lt;u.parentNode;){if(u=u.parentNode,e=f.fromDom(u),i(e))return n.some(e);if(o(e))break}return n.none()}function py(n,t,i){return kn(n,function(n){return uh(n,t)},i)}function yu(n,t){return nv(t,n)}function iu(n,t,i){return bn(uh,py,n,t,i)}function pat(n,t,i){var r=lo(n.slice(0,t)),u=lo(n.slice(t+1));return ki(r.concat(u),i)}function wat(n,t,i){return ki(lo(n.slice(0,t)),i)}function bat(n,t,i){var r=n.slice(0,t);return ki(n.slice(t+1).concat(r),i)}function kat(n,t,i){return ki(n.slice(t+1),i)}function s(n){return function(t){var i=t.raw;return fi(n,i.which)}}function er(n){return function(t){return nk(n,function(n){return n(t)})}}function be(n){return!0===n.raw.shiftKey}function dat(n){return!0===n.raw.ctrlKey}function h(n,t){return{matches:n,classification:t}}function ke(n,t,i,r){var u=n+t;return r<u?i:u<i?r:u}function us(n,t,i){return Math.min(Math.max(n,t),i)}function dn(n,t,i,r){c(ri(n.element,"."+t.highlightClass),function(i){da(r,function(n){return n.element===i})||(at(i,t.highlightClass),n.getSystem().getByDom(i).each(function(i){t.onDehighlight(n,i);tf(i,id())}))})}function fs(n,t,i,r){dn(n,t,0,[r]);by(0,t,0,r)||(bt(r.element,t.highlightClass),t.onHighlight(n,r),tf(r,vct()))}function gn(n,t,i,r){var u=ri(n.element,"."+t.itemClass);return oe(u,function(n){return uf(n,t.highlightClass)}).bind(function(t){var i=ke(t,r,0,u.length-1);return n.getSystem().getByDom(u[i]).toOptional()})}function ntt(n,t,i){t.exists(function(n){return i.exists(function(t){return ct(t,n)})})||gr(n,act(),{prevFocus:t,newFocus:i})}function wy(){function n(n){return dh(n.element)}return{get:n,set:function(t,i){var r=n(t);t.getSystem().triggerFocus(i,t.element);ntt(t,r,n(t))}}}function gat(){function n(n){return ht.getHighlighted(n).map(function(n){return n.element})}return{get:n,set:function(t,i){var u=n(t),r;t.getSystem().getByDom(i).fold(o,function(n){ht.highlight(t,n)});r=n(t);ntt(t,u,r)}}}function by(n,t,i,r){return uf(r.element,t.highlightClass)}function ttt(n,t){return yu(n.element,"."+t.itemClass).bind(function(t){return n.getSystem().getByDom(t).toOptional()})}function itt(t,i){var r=ri(t.element,"."+i.itemClass);return(0<r.length?n.some(r[r.length-1]):n.none()).bind(function(n){return t.getSystem().getByDom(n).toOptional()})}function rtt(n,t){return ry(y(ri(n.element,"."+t.itemClass),function(t){return n.getSystem().getByDom(t).toOptional()}))}function pf(i,r,u,f,e){function o(n,t,i,r,u){var f=i(n,t,r,u),e=t.event;return ki(f,function(n){return n.matches(e)}).map(function(n){return n.classification}).bind(function(i){return i(n,t,r,u)})}var h={schema:function(){return i.concat([t("focusManager",wy()),ce("focusInside","onFocus",ig(function(n){return fi(["onFocus","onEnterOrSpace","onApi"],n)?st.value(n):st.error("Invalid value for focusInside")})),it("handler",h),it("state",r),it("sendFocusIn",e)])},processKey:o,toEvents:function(t,i){var r=t.focusInside!==fc.OnFocusMode?n.none():e(t).map(function(n){return v(ou(),function(r,u){n(r,t,i);u.stop()})}),h=[v(uct(),function(n,r){o(n,r,u,t,i).fold(function(){var f=n,u=r,o=s(ui.concat(vr))(u.event);t.focusInside===fc.OnEnterOrSpaceMode&&o&&hg(f,u)&&e(t).each(function(n){n(f,t,i);u.stop()})},function(){r.stop()})}),v(fct(),function(n,r){o(n,r,f,t,i).each(function(){r.stop()})})];return ft(r.toArray().concat(h))}};return h}function utt(r){function u(n,t){return 0<wi(n.visibilitySelector.bind(function(n){return iu(t,n)}).getOr(t))}function e(t,i){var r=i,f=bi(ri(t.element,r.selector),function(n){return u(r,n)});n.from(f[r.firstTabstop]).each(function(n){i.focusManager.set(t,n)})}function f(t,i,r,f){var e,o=ri(t.element,r.selector);return(e=r).focusManager.get(t).bind(function(n){return iu(n,e.selector)}).bind(function(i){return oe(o,ir(ct,i)).bind(function(i){return s=t,e=r,f(o,i,function(n){return u(t=e,i=n)&&t.useTabstopAt(i);var t,i}).fold(function(){return e.cyclic?n.some(!0):n.none()},function(t){return e.focusManager.set(s,t),n.some(!0)});var s,e})})}var o=[b("onEscape"),b("onEnter"),t("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),t("firstTabstop",0),t("useTabstopAt",ot),b("visibilitySelector")].concat([r]),c=i([h(er([be,s(pu)]),function(n,t,i){return f(n,0,i,i.cyclic?pat:wat)}),h(s(pu),function(n,t,i){return f(n,0,i,i.cyclic?bat:kat)}),h(s(ec),function(n,t,i){return i.onEscape.bind(function(i){return i(n,t)})}),h(er([os,s(vr)]),function(n,t,i){return i.onEnter.bind(function(i){return i(n,t)})})]),l=i([]);return pf(o,fr.init,c,l,function(){return n.some(e)})}function ge(n){return"input"===ai(n)&&"radio"!==tt(n,"type")||"textarea"===ai(n)}function ss(t,i,r){return ge(r)&&s(ui)(i.event)?n.none():(ga(t,r,yo()),n.some(!0))}function no(){return n.some(!0)}function ftt(n,t,i){return i.execute(n,t,n.element)}function ett(t){function r(){return i.get().each(t)}var i=k(n.none());return{clear:function(){r();i.set(n.none())},isSet:function(){return i.get().isSome()},get:function(){return i.get()},set:function(t){r();i.set(n.some(t))}}}function to(){var n=ett(function(n){return n.destroy()});return u(u({},n),{run:function(t){return n.get().each(t)}})}function ru(){var n=ett(o);return u(u({},n),{on:function(t){return n.get().each(t)}})}function ott(){var n=ru();return pe({readState:function(){return n.get().map(function(n){return{numRows:String(n.numRows),numColumns:String(n.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,i){n.set({numRows:t,numColumns:i})},getNumRows:function(){return n.get().map(function(n){return n.numRows})},getNumColumns:function(){return n.get().map(function(n){return n.numColumns})}})}function stt(n,t){return function(i){return"rtl"===vvt(i)?t:n}}function htt(n){return function(t,i,r,u){var f=n(t.element);return vit(f,t,i,r,u)}}function dy(n,t){return htt(stt(n,t))}function gy(n,t){return htt(stt(t,n))}function np(n){return function(t,i,r,u){return vit(n,t,i,r,u)}}function ivt(n){return!((t=n.dom).offsetWidth<=0&&t.offsetHeight<=0);var t}function ctt(n,t,i){var r,u=bi(ri(n,i),ivt);return oe(r=u,function(n){return ct(n,t)}).map(function(n){return{index:n,candidates:r}})}function ltt(n,t){return oe(n,function(n){return ct(t,n)})}function att(t,i,r,u){return u(Math.floor(i/r),i%r).bind(function(i){var u=i.row*r+i.column;return 0<=u&&u<t.length?n.some(t[u]):n.none()})}function vtt(t,i,r,u,f){return att(t,i,u,function(i,e){var o=i===r-1?t.length-i*u:u,s=ke(e,f,0,o-1);return n.some({row:i,column:s})})}function ytt(t,i,r,u,f){return att(t,i,u,function(i,e){var o=ke(i,f,0,r-1),s=us(e,0,(o===r-1?t.length-o*u:u)-1);return n.some({row:o,column:s})})}function rvt(n,t){yu(n.element,t.selector).each(function(i){t.focusManager.set(n,i)})}function hc(n){return function(t,i,r,u){return ctt(t,i,r.selector).bind(function(t){return n(t.candidates,t.index,u.getNumRows().getOr(r.initSize.numRows),u.getNumColumns().getOr(r.initSize.numColumns))})}}function ptt(t,i,r){return r.captureTab?n.some(!0):n.none()}function cc(t,i,r,u){var f=function(t,i,r){var o,e=ke(i,u,0,r.length-1);return e===t?n.none():"button"===ai(o=r[e])&&"disabled"===tt(o,"disabled")?f(t,e,r):n.from(r[e])};return ctt(t,r,i).bind(function(n){var t=n.index,i=n.candidates;return f(t,t,i)})}function tp(n,t,i){return(r=i).focusManager.get(n).bind(function(n){return iu(n,r.selector)}).bind(function(r){return i.execute(n,t,r)});var r}function uvt(n,t){t.getInitial(n).orThunk(function(){return yu(n.element,t.selector)}).each(function(i){t.focusManager.set(n,i)})}function wtt(n,t,i){return cc(n,i.selector,t,-1)}function btt(n,t,i){return cc(n,i.selector,t,1)}function ktt(t){return function(i,r,u,f){return t(i,r,u,f).bind(function(){return u.executeOnMove?tp(i,r,u):n.some(!0)})}}function fvt(n,t,i){return i.onEscape(n,t)}function lc(t,i,r){return n.from(t[i]).bind(function(t){return n.from(t[r]).map(function(n){return{rowIndex:i,columnIndex:r,cell:n}})})}function dtt(n,t,i,r){return lc(n,t,ke(i,r,0,n[t].length-1))}function gtt(n,t,i,r){var u=ke(i,r,0,n.length-1);return lc(n,u,us(t,0,n[u].length-1))}function nit(n,t,i,r){return lc(n,t,us(i+r,0,n[t].length-1))}function tit(n,t,i,r){var u=us(i+r,0,n.length-1);return lc(n,u,us(t,0,n[u].length-1))}function evt(n,t){t.previousSelector(n).orThunk(function(){var i=t.selectors;return yu(n.element,i.cell)}).each(function(i){t.focusManager.set(n,i)})}function ac(n,t){return function(i,r,u){var f=u.cycles?n:t;return iu(r,u.selectors.row).bind(function(n){return ltt(ri(n,u.selectors.cell),r).bind(function(t){var r=ri(i,u.selectors.row);return ltt(r,n).bind(function(n){var i,e=(i=u,y(r,function(n){return ri(n,i.selectors.cell)}));return f(e,n,t).map(function(n){return n.cell})})})})}}function iit(n,t,i){return i.focusManager.get(n).bind(function(r){return i.execute(n,t,r)})}function ovt(n,t){yu(n.element,t.selector).each(function(i){t.focusManager.set(n,i)})}function rit(n,t,i){return cc(n,i.selector,t,-1)}function uit(n,t,i){return cc(n,i.selector,t,1)}function uu(n,t){return i=n,r={},u=y(t,function(t){return i=t.name(),r="Cannot configure "+t.name()+" for "+n,yi(i,i,kv(),ko(function(){return ae("The field: "+i+" is forbidden. "+r)}));var i,r}).concat([ci("dump",et)]),ce(i,r,vt(u));var i,r,u}function wu(n,t){return u(u({},d(t)),n.dump)}function ip(n){return cu(n,"uiType")}function wf(n){var t=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++dyt+String(t)}function svt(n){function t(n){return n.name}return n.fold(t,t,t,t)}function vc(n,t){return function(i){var r=gt("Converting part type",t,i);return n(r)}}function ep(n,t,i,r){return kt(t.defaults(n,i,r),i,{uid:n.partUids[t.name]},t.overrides(n,i,r))}function rrt(n,t,r){return f=t,u={},e={},c(r,function(n){n.fold(function(n){u[n.pname]=trt(!0,function(t,i,r){return n.factory.sketch(ep(t,n,i,r))})},function(n){var t=f.parts[n.name];e[n.name]=i(n.factory.sketch(ep(f,n,t[nft()]),t))},function(n){u[n.pname]=trt(!1,function(t,i,r){return n.factory.sketch(ep(t,n,i,r))})},function(n){u[n.pname]=kyt(!0,function(t,i,r){return y(t[n.name],function(i){return n.factory.sketch(kt(n.defaults(t,i,r),i,n.overrides(t,i)))})})})}),{internals:i(u),externals:i(e)};var f,u,e}function urt(t,r,u){return f=n.some(t),s=(e=r).components,o=dt(u,function(n,t){return u=n,r=!1,{name:i(f=t),required:function(){return u.fold(function(n){return n},function(n){return n})},used:function(){return r},replace:function(){if(r)throw new Error("Trying to use the same placeholder more than once: "+f);return r=!0,u}};var f,u,r}),h=f,c=e,l=o,a=di(s,function(n){return nrt(h,c,n,l)}),ti(o,function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+f.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2));}),a;var f,e,s,h,c,l,o,a}function or(n,t,i){var r=t.partUids[i];return n.getSystem().getByUid(r).toOptional()}function frt(n,t,i){return or(n,t,i).getOrDie("Could not find part: "+i)}function ert(n){return yi("partUids","partUids",ng(function(t){return i=t.uid,r=y(n,svt),ur(y(r,function(n){return{key:n,value:i+"-"+n}}));var i,r}),sf())}function ort(n){return pi(tft,n)}function op(n){return t=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return n.apply(void 0,ca([t.getApis(),t],r,!1))},r=(i=n.toString()).indexOf(")")+1,u=i.indexOf("("),f=i.substring(u+1,r-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:sy(f.slice(1))}},t;var t,i,r,u,f}function hs(t){var i=ah(t)?t.dom[ift]:null;return n.from(i)}function srt(n,i,u,f,e){var o;return gt(n+" [SpecSchema]",rr((o=e,(0<f.length?[lu("parts",f)]:[]).concat([r("uid"),t("dom",{}),t("components",[]),gg("originalSpec"),t("debug.sketcher",{})]).concat(o)).concat(i)),u)}function hrt(t,i,r,u,f){var o=rft(f),e=srt(t,i,o,di(r,function(t){return t.fold(n.none,n.some,n.none,n.none).map(function(n){return lu(n.name,n.schema.concat([gg(nft())]))}).toArray()}),[ert(r)]),s=rrt(0,e,r);return u(e,urt(t,e,s.internals()),o,s.externals())}function cs(n){var t=gt("Sketcher for "+n.name,cpt,n),i=dt(t.apis,op),r=dt(t.extraApis,ey);return u(u({name:t.name,configFields:t.configFields,sketch:function(n){return i=t.name,r=t.configFields,t.factory(srt(i,r,u=rft(n),[],[]),u);var i,r,u}},i),r)}function rl(t){var r,e,f,i=gt("Sketcher for "+t.name,lpt,t),o=(r=i.name,e=i.partFields,f={},c(e,function(t){t.fold(n.some,n.none,n.some,n.some).each(function(n){var t=ept(r,n.pname);f[n.name]=function(i){var f=gt("Part: "+n.name+" in "+r,vt(n.schema),i);return u(u({},t),{config:i,validated:f})}})}),f),s=dt(i.apis,op),h=dt(i.extraApis,ey);return u(u({name:i.name,partFields:i.partFields,configFields:i.configFields,sketch:function(n){return hrt(i.name,i.configFields,i.partFields,i.factory,n)},parts:o},s),h)}function rt(n){var i,t,r,e,o,s,h=(i={prefix:pn},n.replace(/\$\{([^{}]*)\}/g,function(n,t){var r,u=i[t];return"string"==(r=typeof u)||"number"==r?u.toString():n}));return t=f.fromHtml(h),r=tu(t),e=ih(void 0!==t.dom.attributes?t.dom.attributes:[],function(n,t){var i;return"class"===t.name?n:u(u({},n),((i={})[t.name]=t.value,i))},{}),o=Array.prototype.slice.call(t.dom.classList,0),s=0===r.length?{}:{innerHtml:lg(t)},u({tag:ai(t),classes:o,attributes:e},s)}function kf(n){return{dom:rt(n)}}function crt(n){return d([p.config({toggleClass:e("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),on(n,function(n,t){(t?p.on:p.off)(n)})])}function lrt(n,t,i,r){var u=crt(i);return ue(t,r,u,n)}function art(t,i){var r=i.ui.registry.getAll().icons;return n.from(r[t]).fold(function(){return rt('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item ${prefix}-icon-'+t+' ${prefix}-icon"><\/span>')},function(n){return rt('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item">'+n+"<\/span>")})}function bu(n){return kp({name:n+"-edge",overrides:function(t){return t.model.manager.edgeActions[n].fold(function(){return{}},function(n){return{events:ft([uy(eu(),function(t,i,r){return n(t,r)},[t]),uy(rf(),function(t,i,r){return n(t,r)},[t]),uy(uv(),function(t,i,r){r.mouseIsDown.get()&&n(t,r)},[t])])}})}})}function sp(n,t,i){t.store.manager.onLoad(n,t,i)}function vrt(n,t,i){t.store.manager.onUnload(n,t,i)}function yrt(){var n=k(null);return pe({set:n.set,get:n.get,isNotSet:function(){return null===n.get()},clear:function(){n.set(null)},readState:function(){return{mode:"memory",value:n.get()}}})}function prt(){var n=k({}),t=k({});return pe({readState:function(){return{mode:"dataset",dataByValue:n.get(),dataByText:t.get()}},lookup:function(i){return l(n.get(),i).orThunk(function(){return l(t.get(),i)})},update:function(i){var e=n.get(),o=t.get(),r={},f={};c(i,function(n){l(r[n.value]=n,"meta").each(function(t){l(t,"text").each(function(t){f[t]=n})})});n.set(u(u({},e),r));t.set(u(u({},o),f))},clear:function(){n.set({});t.set({})}})}function wrt(n,t,i,r){var u=t.store;i.update([r]);u.setValue(n,r);t.onSetValue(n,r)}function brt(n,t){return uft.set(n,t)}function io(n){return uft.get(n)}function hp(t){var i=t.event.raw;return-1===i.type.indexOf("touch")?void 0!==i.clientX?n.some(i).map(function(n){return eft(n.clientX,n.clientY)}):n.none():void 0!==i.touches&&1===i.touches.length?n.some(i.touches[0]).map(function(n){return eft(n.clientX,n.clientY)}):n.none()}function df(n){return n.model.minX}function gf(n){return n.model.minY}function ul(n){return n.model.minX-1}function fl(n){return n.model.minY-1}function ne(n){return n.model.maxX}function te(n){return n.model.maxY}function el(n){return n.model.maxX+1}function ol(n){return n.model.maxY+1}function krt(n,t,i){return t(n)-i(n)}function cp(n){return krt(n,ne,df)}function lp(n){return krt(n,te,gf)}function drt(n){return cp(n)/2}function grt(n){return lp(n)/2}function ro(n){return n.stepSize}function nut(n){return n.snapToGrid}function tut(n){return n.snapStart}function iut(n){return n.rounded}function sl(n,t){return void 0!==n[t+"-edge"]}function rut(n){return sl(n,"left")}function uut(n){return sl(n,"right")}function fut(n){return sl(n,"top")}function eut(n){return sl(n,"bottom")}function fu(n){return n.model.value.get()}function ku(n,t){return{x:n,y:t}}function nr(n,t){gr(n,as(),{value:t})}function ap(n,t,i,r){return n<t?n:i<n?i:n===t?t-1:Math.max(t,n-r)}function vp(n,t,i,r){return i<n?n:n<t?t:n===i?i+1:Math.min(i,n+r)}function out(n,t,i){return Math.max(t,Math.min(i,n))}function sut(n){var r=n.min,u=n.max,y=n.range,o=n.value,p=n.step,w=n.snap,b=n.snapStart,k=n.rounded,d=n.hasMinEdge,g=n.hasMaxEdge,c=n.minBound,l=n.maxBound,nt=n.screenRange,a=d?r-1:r,v=g?u+1:u,f,e,s,t,h,i;return o<c?a:l<o?v:(i=out((h=c,Math.min(l,Math.max(o,h))-h)/nt*y+r,a,v),w&&r<=i&&i<=u?(f=i,e=r,s=u,t=p,b.fold(function(){var n=Math.round((f-e)/t)*t;return out(e+n,e-1,s+1)},function(n){var i=Math.round((f-n)%t/t),r=Math.floor((f-n)/t),u=Math.floor((s-n)/t),e=Math.min(u,r+i);return Math.max(n,n+e*t)})):k?Math.round(i):i)}function hut(n){var i=n.min,r=n.max,u=n.range,t=n.value,f=n.hasMinEdge,e=n.hasMaxEdge,o=n.maxBound,s=n.maxOffset,h=n.centerMinEdge,c=n.centerMaxEdge;return t<i?f?0:h:r<t?e?o:c:(t-i)/u*s}function yr(n){return n.element.dom.getBoundingClientRect()}function hl(n){return yr(n)[gp]}function cut(n){return yr(n).right}function cl(n){return yr(n).top}function lut(n){return yr(n).bottom}function aut(n){return yr(n).width}function vut(n){return yr(n).height}function yut(n,t){var i=yr(n),r=yr(t);return(i[gp]+i.right)/2-r[gp]}function put(n,t){var i=yr(n),r=yr(t);return(i.top+i.bottom)/2-r.top}function ll(n,t){gr(n,as(),{value:t})}function yp(n,t,i){return sut({min:df(t),max:ne(t),range:cp(t),value:i,step:ro(t),snap:nut(t),snapStart:tut(t),rounded:iut(t),hasMinEdge:rut(t),hasMaxEdge:uut(t),minBound:hl(n),maxBound:cut(n),screenRange:aut(n)})}function wut(t){return function(i,r){return ll(i,{x:f=(0<t?vp:ap)(fu(u=r).x,df(u),ne(u),ro(u))}),n.some(f).map(ot);var u,f}}function pp(t,i,r,u,f,e){var s,o,c,l,a,h,v,y,p=(o=e,c=r,l=u,a=f,h=aut(s=i),v=l.bind(function(t){return n.some(yut(t,s))}).getOr(0),y=a.bind(function(t){return n.some(yut(t,s))}).getOr(h),hut({min:df(o),max:ne(o),range:cp(o),value:c,hasMinEdge:rut(o),hasMaxEdge:uut(o),minBound:hl(s),minOffset:0,maxBound:cut(s),maxOffset:h,centerMinEdge:v,centerMaxEdge:y}));return hl(i)-hl(t)+p}function al(n,t){gr(n,as(),{value:t})}function wp(n,t,i){return sut({min:gf(t),max:te(t),range:lp(t),value:i,step:ro(t),snap:nut(t),snapStart:tut(t),rounded:iut(t),hasMinEdge:fut(t),hasMaxEdge:eut(t),minBound:cl(n),maxBound:lut(n),screenRange:vut(n)})}function but(t){return function(i,r){return al(i,{y:f=(0<t?vp:ap)(fu(u=r).y,gf(u),te(u),ro(u))}),n.some(f).map(ot);var u,f}}function bp(t,i,r,u,f,e){var s,o,c,l,a,h,v,y,p=(o=e,c=r,l=u,a=f,h=vut(s=i),v=l.bind(function(t){return n.some(put(t,s))}).getOr(0),y=a.bind(function(t){return n.some(put(t,s))}).getOr(h),hut({min:gf(o),max:te(o),range:lp(o),value:c,hasMinEdge:fut(o),hasMaxEdge:eut(o),minBound:cl(s),minOffset:0,maxBound:lut(s),maxOffset:h,centerMinEdge:v,centerMaxEdge:y}));return cl(i)-cl(t)+p}function vl(n,t){gr(n,as(),{value:t})}function yl(n,t){return{x:n,y:t}}function pl(t,i){return function(r,u){return f=u,e=0<t?vp:ap,vl(r,yl(s=(o=i)?fu(f).x:e(fu(f).x,df(f),ne(f),ro(f)),o?e(fu(f).y,gf(f),te(f),ro(f)):fu(f).y)),n.some(s).map(ot);var o,f,e,s}}function kut(n,t,i,r){return ue(t,function(){var r=i();n.setContextToolbar([{label:t+" group",items:r}])},{},r)}function upt(n,t){var r={onChange:function(n,i,r){t.undoManager.transact(function(){t.formatter.apply("forecolor",{value:r});t.nodeChanged()})},getInitialValue:i(-1)};return kut(n,"color-levels",function(){function t(n){return n<0?"black":360<n?"white":"hsl("+n+", 100%, 50%)"}return[(n=r,pr.sketch({dom:rt('<div class="${prefix}-slider ${prefix}-hue-slider-container"><\/div>'),components:[pr.parts["left-edge"](kf('<div class="${prefix}-hue-slider-black"><\/div>')),pr.parts.spectrum({dom:rt('<div class="${prefix}-slider-gradient-container"><\/div>'),components:[kf('<div class="${prefix}-slider-gradient"><\/div>')],behaviours:d([p.config({toggleClass:e("thumb-active")})])}),pr.parts["right-edge"](kf('<div class="${prefix}-hue-slider-white"><\/div>')),pr.parts.thumb({dom:rt('<div class="${prefix}-slider-thumb"><\/div>'),behaviours:d([p.config({toggleClass:e("thumb-active")})])})],onChange:function(i,r,u){var f=t(u.x());w(r.element,"background-color",f);n.onChange(i,r,f)},onDragStart:function(n,t){p.on(t)},onDragEnd:function(n,t){p.off(t)},onInit:function(n,i,r,u){var f=t(u.x());w(i.element,"background-color",f)},stepSize:10,model:{mode:"x",minX:0,maxX:360,getInitialValue:function(){return{x:n.getInitialValue()}}},sliderBehaviours:d([tc(pr.refresh)])}))];var n},t)}function dut(t){var r,i,u=t.selection.getStart(),e=f.fromDom(u),o=f.fromDom(t.getBody()),s=(r=function(n){return ct(o,n)},(ah(i=e)?n.some(i):su(i).filter(ah)).map(function(n){return bn(function(n,t){return t(n)},kn,n,function(n){return vf(n,"font-size").isSome()},r).bind(function(n){return vf(n,"font-size")}).getOrThunk(function(){return rs(n,"font-size")})}).getOr(""));return ki(wl,function(n){return s===n}).getOr("medium")}function fpt(n){return[kf('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"><\/span>'),(i={onChange:n.onChange,sizes:sbt,category:"font",getInitialValue:n.getInitialValue},t=gt("SizeSlider",obt,i),pr.sketch({dom:{tag:"div",classes:[e("slider-"+t.category+"-size-container"),e("slider"),e("slider-size-container")]},onChange:function(n,i,r){var u=r.x();0<=u&&u<t.sizes.length&&t.onChange(u)},onDragStart:function(n,t){p.on(t)},onDragEnd:function(n,t){p.off(t)},model:{mode:"x",minX:0,maxX:t.sizes.length-1,getInitialValue:function(){return{x:t.getInitialValue()}}},stepSize:1,snapToGrid:!0,sliderBehaviours:d([tc(pr.refresh)]),components:[pr.parts.spectrum({dom:rt('<div class="${prefix}-slider-size-container"><\/div>'),components:[kf('<div class="${prefix}-slider-size-line"><\/div>')]}),pr.parts.thumb({dom:rt('<div class="${prefix}-slider-thumb"><\/div>'),behaviours:d([p.config({toggleClass:e("thumb-active")})])})]})),kf('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"><\/span>')];var i,t}function ie(n){var t=void 0!==n.uid&&wt(n,"uid")?n.uid:ls("memento");return{get:function(n){return n.getSystem().getByUid(t).getOrDie()},getOpt:function(n){return n.getSystem().getByUid(t).toOptional()},asSpec:function(){return u(u({},n),{uid:t})}}}function hbt(t){var i=ie({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:ft([fy(gk()),v(ect(),function(i,r){var u=r.event.raw,f=u.target.files||u.dataTransfer.files;n.from(f[0]).each(function(n){var r,u,i=t;r=n;u=r;new vw(function(n){var t=new FileReader;t.onloadend=function(){n(t.result)};t.readAsDataURL(u)}).then(function(n){return n.split(",")[1]}).then(function(n){i.undoManager.transact(function(){var t=i.editorUpload.blobCache,u=t.create(wf("mceu"),r,n),f;t.add(u);f=i.dom.createHTML("img",{src:u.blobUri()});i.insertContent(f)})})})})])});return re.sketch({dom:art("image",t),components:[i.asSpec()],action:function(n){i.get(n).element.dom.click()}})}function sft(n){return n.dom.textContent}function vs(n){return 0<n.length}function bl(n){return null==n?"":n}function cbt(t,i){i.url.toOptional().filter(vs).fold(function(){var n=t;i.link.bind(et).each(function(){n.execCommand("unlink")})},function(r){var f,u,e=(f=i,(u={}).href=r,f.title.toOptional().filter(vs).each(function(n){u.title=n}),f.target.toOptional().filter(vs).each(function(n){u.target=n}),u);i.link.bind(et).fold(function(){var n=i.text.toOptional().filter(vs).getOr(r);t.insertContent(t.dom.createHTML("a",e,t.dom.encode(n)))},function(t){var u,f,o=(u=t,f=r,i.text.toOptional().filter(vs).fold(function(){return tt(t=u,"href")===sft(t)?n.some(f):n.none();var t},n.some));ld(t,e);o.each(function(n){t.dom.textContent=n})})})}function uo(n,t){var u,f;return{key:n,value:{config:{},me:(u=n,f=ft(t),li({fields:[r("enabled")],name:u,active:{events:i(f)}})),configAsRaw:i({}),initialConfig:{},state:fr}}}function tw(n){return n.dom.value}function hft(n,t){if(void 0===t)throw new Error("Value.set was undefined");n.dom.value=t}function kl(t,i){var r=ie(ekt.sketch({inputAttributes:{placeholder:hkt.translate(i)},onSetValue:function(n){tf(n,ev())},inputBehaviours:d([sr.config({find:n.some}),skt.config({}),ut.config({mode:"execution"})]),selectOnFocus:!1})),u=ie(re.sketch({dom:rt('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"><\/button>'),action:function(n){var t=r.get(n);g.setValue(t,"")}}));return{name:t,spec:hr.sketch({dom:rt('<div class="${prefix}-input-container"><\/div>'),components:[r.asSpec(),u.asSpec()],containerBehaviours:d([p.config({toggleClass:e("input-container-empty")}),sr.config({find:function(t){return n.some(r.get(t))}}),uo("input-clearing",[v(ev(),function(n){var t=r.get(n);(0<g.getValue(t).length?p.off:p.on)(n)})])])})}}function cft(n,t){(t.disabled()?yw:pw)(n,t)}function iw(n,t){return!0===t.useNative&&fi(ckt,ai(n.element))}function lft(n,t){return iw(n,t)?yv(n.element,"disabled"):"true"===tt(n.element,"aria-disabled")}function aft(n){return"<alloy.field."+n+">"}function lbt(n,t){return lrt(t,"link","link",function(){var i,r,u=pkt(n,t);n.setContextToolbar(u);i=t;r=function(){n.focusToolbar()};(rkt.os.isAndroid()?function(n,t){var i=t.selection.getRng();n();t.selection.setRng(i)}:db)(r,i);eet(t).each(function(n){t.selection.select(n.dom)})})}function dl(n){function u(t){return"The component must be in a context to execute: "+t+(n?"\n"+vu(n().element)+" is not in context.":"")}function t(n){return function(){throw new Error(u(n));}}function r(n){return function(){console.warn(u(n))}}return{debugInfo:i("fake"),triggerEvent:r("triggerEvent"),triggerFocus:r("triggerFocus"),triggerEscape:r("triggerEscape"),broadcast:r("broadcast"),broadcastOn:r("broadcastOn"),broadcastEvent:r("broadcastEvent"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),isConnected:lt}}function vft(n,t){var i={};return ti(n,function(n,r){ti(n,function(n,u){var f=l(i,u).getOr([]);i[u]=f.concat([t(r,n)])})}),i}function rw(n){return n.cHandler}function abt(n,t){return{name:n,handler:t}}function vbt(n,t,i){var r=t[i];return r?function(n,t,i,r){var u,f,e;try{return u=(f=function(i,u){var o=i[t],s=u[t],f=r.indexOf(o),e=r.indexOf(s);if(-1===f)throw new Error("The ordering for "+n+" does not have an entry for "+o+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===e)throw new Error("The ordering for "+n+" does not have an entry for "+s+".\nOrder specified: "+JSON.stringify(r,null,2));return f<e?-1:e<f?1:0},(e=lk.call(i,0)).sort(f),e),st.value(u)}catch(i){return st.error([i])}}("Event: "+i,"name",n,r).map(function(n){var t,i,r,u,f=y(n,function(n){return n.handler});return{can:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ih(i,function(n,i){return n&&i.can.apply(void 0,t)},!0)},abort:(r=i=t=f,u=function(n){return n.abort},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ih(r,function(n,i){return n||u(i).apply(void 0,t)},!1)}),run:function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];c(t,function(n){n.run.apply(void 0,i)})}}}):st.error(["The event ("+i+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(y(n,function(n){return n.name}),null,2)])}function yft(n,t){c(t,function(t){bt(n,t)})}function uw(n,t){c(t,function(t){at(n,t)})}function ybt(n){var u,f,e,o,s=(u=l(n,"behaviours").getOr({}),di(hi(u),function(n){var t=u[n];return so(t)?[t.me]:[]}));return f=n,o=y(e=s,function(n){return iy(n.name(),[r("config"),t("state",fr)])}),{list:e,data:dt(ny("component.behaviours",vt(o),f.behaviours).fold(function(n){throw new Error(eg(n)+"\nComplete spec:\n"+JSON.stringify(f,null,2));},et),function(n){return i(n.map(function(n){return{config:n.config,state:n.state.init(n.config)}}))})}}function pbt(n,t,i){var f,r,o=u(u({},(f=n).dom),{uid:f.uid,domChildren:y(f.components,function(n){return n.element})}),s=n.domModification.fold(function(){return ar({})},ar),e=0<t.length?function(n,t,i,r){function o(n){return th(n,function(n,t){return u(u({},t.modification),n)},{})}var e=u({},t),f;return c(i,function(t){e[t.name()]=t.exhibit(n,r)}),f=vft(e,function(n,t){return{name:n,modification:t}}),ar({classes:th(f.classes,function(n,t){return t.modification.concat(n)},[]),attributes:o(f.attributes),styles:o(f.styles)})}(i,{"alloy.base.modification":s},t,o):s;return u(u({},r=o),{attributes:u(u({},r.attributes),e.attributes),styles:u(u({},r.styles),e.styles),classes:r.classes.concat(e.classes)})}function wbt(n,t,i){var f,e,o,s,r,h={"alloy.base.behaviour":n.events},l=n.eventOrder;return e=i,o=t,f=vft(u(u({},h),(s=e,r={},c(o,function(n){r[n.name()]=n.handlers(s)}),r)),abt),gkt(f,l).getOrDie()}function bbt(n){function c(){return h}var i=k(dkt),r=rg(ny("custom.definition",ndt,n)),u=ybt(n),e=u.list,t=u.data,o=function(n){var t=f.fromTag(n.tag),i;return ld(t,n.attributes),yft(t,n.classes),we(t,n.styles),n.innerHtml.each(function(n){return u=n,r=nu(i=t).dom,lv(s=f.fromDom(r.createDocumentFragment()),(e=u,(o=(r||document).createElement("div")).innerHTML=e,tu(f.fromDom(o)))),av(i),void vi(i,s);var i,u,e,o,r,s}),i=n.domChildren,lv(t,i),n.value.each(function(n){hft(t,n)}),n.uid,dp(t,n.uid),t}(pbt(r,e,t)),l=wbt(r,e,t),s=k(r.components),h={uid:n.uid,getSystem:i.get,config:function(i){var r=t;return(tr(r[i.name()])?r[i.name()]:function(){throw new Error("Could not find "+i.name()+" in "+JSON.stringify(n,null,2));})()},hasConfigured:function(n){return tr(t[n.name()])},spec:n,readState:function(n){return t[n]().map(function(n){return n.state.readState()}).getOr("not enabled")},getApis:function(){return r.apis},connect:function(n){i.set(n)},disconnect:function(){i.set(dl(c))},element:o,syncComponents:function(){var n=di(tu(o),function(n){return i.get().getByDom(n).fold(function(){return[]},ik)});s.set(n)},components:s.get,events:l};return h}function pft(t){return function(t){var u=gt("external.component",rr([r("element"),b("uid")]),t),f=k(dl()),s=u.uid.getOrThunk(function(){return ls("external")}),e;return dp(u.element,s),e={uid:s,getSystem:f.get,config:n.none,hasConfigured:lt,connect:function(n){f.set(n)},disconnect:function(){f.set(dl(function(){return e}))},getApis:function(){return{}},element:u.element,spec:t,readState:i("No state"),syncComponents:o,components:i([]),events:{}},ort(e)}({element:f.fromText(t)})}function wft(n){(dh(n.element).isNone()||ni.isFocused(n))&&(ni.isFocused(n)||ni.focus(n),gr(n,oet,{item:n}))}function bft(n){gr(n,set,{item:n})}function fw(n,t,i,r){var u=n.getSystem().build(r);yd(n,u,i)}function kft(n,t,i,r){ki(ta(n),function(n){return ct(r.element,n.element)}).each(hd)}function dft(t,i,r,u,f){var e=ta(t);return n.from(e[u]).map(function(n){return kft(t,0,0,n),f.each(function(n){fw(t,0,function(n,t){var i,r=t;ud(i=n,u).fold(function(){vi(i,r)},function(n){fd(n,r)})},n)}),n})}function ew(n,t,i,r){return l(t.routes,r.start).bind(function(n){return l(n,r.destination)})}function ow(n,t,i){var r,u,f=i;kw(r=n,u=t).bind(function(n){return wet(r,u,f,n)}).each(function(i){var r=i.transition;at(n.element,r.transitionClass);ii(n.element,t.destinationAttr)})}function gl(n,t,i,r){ow(n,t,i);yv(n.element,t.stateAttr)&&tt(n.element,t.stateAttr)!==r&&t.onFinish(n,r);a(n.element,t.stateAttr,r)}function sw(n){bt(n,dw)}function hw(n){at(n,dw)}function na(n){return l(n,"format").getOr(n.title)}function kbt(n){return wt(n,"items")?(f=kt((t=n,u=["items"],r={},ti(t,function(n,t){fi(u,t)||(r[t]=n)}),r),{menu:!0}),i=det(t.items),{item:f,menus:kt(i.menus,pi(t.title,i.items)),expansions:kt(i.expansions,pi(t.title,t.title))}):{item:n,menus:{},expansions:{}};var u,r,t,f,i}function dbt(t,i,r){var o,s,h,c,u,f,l,a,v,w,b,k=(o=t,h=(s=function(n){return di(n,function(n){return void 0===n.items?!wt(n,"format")||o.formatter.canApply(n.format)?[n]:[]:0<s(n.items).length?[n]:[]})})(i),det(h));return u=(c={formats:k,handle:function(n,i){t.undoManager.transact(function(){p.isOn(n)?t.formatter.remove(i):t.formatter.apply(i)});r()}}).formats,f=function(){return b},l=ket("Styles",[].concat(y(u.items,function(n){return bet(na(n),n.title,n.isSelected(),n.getPreview(),wt(u.expansions,na(n)))})),f,!1),a=dt(u.menus,function(n,t){var i=y(n,function(n){return bet(na(n),n.title,void 0!==n.isSelected&&n.isSelected(),void 0!==n.getPreview?n.getPreview():"",wt(u.expansions,na(n)))});return ket(t,i,f,!0)}),v=kt(a,pi("styles",l)),w={tmenu:bw.tieredData("styles",v,u.expansions)},(b=ie(bw.sketch({dom:{tag:"div",classes:[e("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(t,i){var r=g.getValue(i);return c.handle(i,r.value),n.none()},onEscape:function(){return n.none()},onOpenMenu:function(n,t){var i=io(n.element);brt(t.element,i);du.jumpTo(t,"current")},onOpenSubmenu:function(n,t,i){var r=io(n.element),u=py(t.element,'[role="menu"]').getOrDie("hacky"),f=n.getSystem().getByDom(u).getOrDie();brt(i.element,r);du.progressTo(f,"before");du.jumpTo(i,"after");du.progressTo(i,"current")},onCollapseMenu:function(n,t,i){var r=py(t.element,'[role="menu"]').getOrDie("hacky"),u=n.getSystem().getByDom(r).getOrDie();du.progressTo(u,"after");du.progressTo(i,"current")},navigateOnHover:!1,highlightImmediately:!0,data:w.tmenu,markers:{backgroundMenu:e("styles-background-menu"),menu:e("styles-menu"),selectedMenu:e("styles-selected-menu"),item:e("styles-item"),selectedItem:e("styles-selected-item")}}))).asSpec()}function gft(n){var t=n.replace(/\|/g," ").trim();return 0<t.length?t.split(/\s+/):[]}function gbt(t,r){function o(n){return function(){return ue(i=n,function(){t.execCommand(i)},{},t=r);var t,i}}function s(n){return function(){return t=r,u=crt(i=n),ue(i,function(){t.execCommand(i)},u,t);var t,i,u}}function h(n,t,i){return function(){return lrt(r,n,t,i)}}function v(){return dbt(r,ft,function(){r.fire("scrollIntoView")})}function u(n,t){return{isSupported:function(){var t=r.ui.registry.getAll().buttons;return n.forall(function(n){return wt(t,n)})},sketch:t}}function l(n){return function(){return f.formatter.match(n)}}function a(n){return function(){return f.formatter.getCssText(n)}}var f,c,w=o("undo"),b=o("redo"),k=s("bold"),g=s("italic"),nt=s("underline"),tt=o("removeformat"),it=h("unlink","link",function(){r.execCommand("unlink",null,!1)}),rt=h("unordered-list","ul",function(){r.execCommand("InsertUnorderedList",null,!1)}),ut=h("ordered-list","ol",function(){r.execCommand("InsertOrderedList",null,!1)}),ft=(c=function(n){return y(n,function(n){var u,e,t,r;return wt(n,"items")?(u=c(n.items),kt(kt(n,{isSelected:lt,getPreview:i("")}),{items:u})):wt(n,"format")?kt(n,{isSelected:l(n.format),getPreview:a(n.format)}):(t=wf((e=n).title),r=kt(e,{format:t,isSelected:l(t),getPreview:a(t)}),f.formatter.register(t,r),r)})})((f=r).getParam("style_formats",rat,"array"));return{undo:u(n.none(),w),redo:u(n.none(),b),bold:u(n.none(),k),italic:u(n.none(),g),underline:u(n.none(),nt),removeformat:u(n.none(),tt),link:u(n.none(),function(){return lbt(t,r)}),unlink:u(n.none(),it),image:u(n.none(),function(){return hbt(r)}),bullist:u(n.some("bullist"),rt),numlist:u(n.some("numlist"),ut),fontsizeselect:u(n.none(),function(){return u={onChange:function(t){var r;r=i;n.from(wl[t]).each(function(n){var t,i=n;dut(t=r)!==i&&t.execCommand("fontSize",!1,i)})},getInitialValue:function(){return n=dut(i),oe(wl,function(t){return t===n}).getOr(2);var n}},kut(t,"font-size",function(){return fpt(u)},i=r);var i,u}),forecolor:u(n.none(),function(){return upt(t,r)}),styleselect:u(n.none(),function(){return ue("style-formats",function(n){r.fire("toReading");t.dropup.appear(v,p.on,n)},d([p.config({toggleClass:e("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),uc.config({channels:ur([sn(hy,p.off),sn(bg,p.off)])})]),r)})}}function nkt(t){function i(){return t.stopPropagation()}function r(){return t.preventDefault()}var u=va(r,i);return{target:f.fromDom(function(t){var i,r,u;return dct()&&so(t.target)&&(i=f.fromDom(t.target),ah(i)&&gct(i)&&t.composed&&t.composedPath&&(r=t.composedPath(),r))?0<(u=r).length?n.some(u[0]):n.none():n.from(t.target)}(t).getOr(t.target)),x:t.clientX,y:t.clientY,stop:i,prevent:r,kill:u,raw:t}}function net(n,t,i,r,u){var f,e,o=(f=i,e=r,function(n){f(n)&&e(nkt(n))});return n.dom.addEventListener(t,o,u),{unbind:ir(ydt,n,t,o,u)}}function nt(n,t,i){return net(n,t,not,i,!1)}function cw(n,t,i){return net(n,t,not,i,!0)}function lw(n){return{isPortrait:i(n.matchMedia("(orientation: portrait)").matches)}}function tet(t,i){var e=f.fromDom(t),r=null,o=nt(e,"orientationchange",function(){cr.clearInterval(r);var n=lw(t);i.onChange(n);u(function(){i.onReady(n)})}),u=function(i){cr.clearInterval(r);var f=t.innerHeight,u=0;r=cr.setInterval(function(){f!==t.innerHeight?(cr.clearInterval(r),i(n.some(t.innerHeight))):20<u&&(cr.clearInterval(r),i(n.none()));u++},50)};return{onAdjustment:u,destroy:function(){o.unbind()}}}function iet(n,t,i){var r,u=n.document.createRange(),f=u;return t.fold(function(n){f.setStartBefore(n.dom)},function(n,t){f.setStart(n.dom,t)},function(n){f.setStartAfter(n.dom)}),r=u,i.fold(function(n){r.setEndBefore(n.dom)},function(n,t){r.setEnd(n.dom,t)},function(n){r.setEndAfter(n.dom)}),u}function aw(n,t,i,r,u){var f=n.document.createRange();return f.setStart(t.dom,i),f.setEnd(r.dom,u),f}function tkt(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}}function ret(n,t,i){return t(f.fromDom(i.startContainer),i.startOffset,f.fromDom(i.endContainer),i.endOffset)}function uet(t,r){var u,o,e,s=(u=t,r.match({domRange:function(t){return{ltr:i(t),rtl:n.none}},relative:function(t,i){return{ltr:nf(function(){return iet(u,t,i)}),rtl:nf(function(){return n.some(iet(u,i,t))})}},exact:function(t,i,r,f){return{ltr:nf(function(){return aw(u,t,i,r,f)}),rtl:nf(function(){return n.some(aw(u,r,f,t,i))})}}}));return(e=(o=s).ltr()).collapsed?o.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return ps.rtl(f.fromDom(n.endContainer),n.endOffset,f.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return ret(0,ps.ltr,e)}):ret(0,ps.ltr,e)}function ikt(n,t){return{uid:n.uid,dom:n.dom,components:t,behaviours:wu(n.formBehaviours,[g.config({store:{mode:"manual",getValue:function(t){var r,u,f=(r=n,u=t.getSystem(),dt(r.partUids,function(n){return i(u.getByUid(n))}));return dt(f,function(n,t){return n().bind(function(n){var i=sr.getCurrent(n),r=new Error("Cannot find a current component to extract the value from for form part '"+t+"': "+vu(n.element));return i.fold(function(){return st.error(r)},st.value)}).map(g.getValue)})},setValue:function(t,i){ti(i,function(i,r){or(t,n,r).each(function(n){sr.getCurrent(n).each(function(n){g.setValue(n,i)})})})}}})]),apis:{getField:function(t,i){return or(t,n,i).bind(sr.getCurrent)}}}}function fet(t){return"prepared"===t.type?n.some(t.menu):n.none()}function tot(n,t){var i=ai(n);return"input"===i?bs.after(n):fi(["br","img"],i)?0===t?bs.before(n):bs.after(n):bs.on(n,t)}function ia(t){return n.from(t.getSelection())}function gw(n,t,i,r,u){var f=aw(n,t,i,r,u);ia(n).each(function(n){n.removeAllRanges();n.addRange(f)})}function pdt(n,t,i,r,u){var e,o,s,h,f,c=(e=r,o=u,s=tot(t,i),h=tot(e,o),sb.relative(s,h));uet(f=n,c).match({ltr:function(n,t,i,r){gw(f,n,t,i,r)},rtl:function(n,t,i,r){ia(f).each(function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(n.dom,t,i.dom,r);else if(u.extend)try{o=i;s=r;(e=u).collapse(n.dom,t);e.extend(o.dom,s)}catch(u){gw(f,i,r,n,t)}else gw(f,i,r,n,t);var e,o,s})}})}function iot(t){if(0<t.rangeCount){var i=t.getRangeAt(0),r=t.getRangeAt(t.rangeCount-1);return n.some(eb(f.fromDom(i.startContainer),i.startOffset,f.fromDom(r.endContainer),r.endOffset))}return n.none()}function wdt(t){if(null===t.anchorNode||null===t.focusNode)return iot(t);var i,r,u,e,s,h,c,l,o,a,v,y=f.fromDom(t.anchorNode),p=f.fromDom(t.focusNode);return i=y,r=t.anchorOffset,u=p,e=t.focusOffset,h=r,c=u,l=e,(o=nu(s=i).dom.createRange()).setStart(s.dom,h),o.setEnd(c.dom,l),a=o,v=ct(i,u)&&r===e,a.collapsed&&!v?n.some(eb(y,t.anchorOffset,p,t.focusOffset)):iot(t)}function nb(n){return ia(n).filter(function(n){return 0<n.rangeCount}).bind(wdt)}function rot(t,i){var r,f,u,e=(f=uet(r=t,i).match({ltr:function(n,t,i,u){var f=r.document.createRange();return f.setStart(n.dom,t),f.setEnd(i.dom,u),f},rtl:function(n,t,i,u){var f=r.document.createRange();return f.setStart(i.dom,u),f.setEnd(n.dom,t),f}})).getClientRects();return 0<(u=0<e.length?e[0]:f.getBoundingClientRect()).width||0<u.height?n.some(u).map(tkt):n.none()}function tb(t){return n.from(t.dom.contentWindow)}function bdt(n){return tb(n).bind(nb)}function uot(n){return n.getFrame()}function fot(n,t,i,r){return n[i].getOrThunk(function(){return function(n){return nt(t,r,n)}})}function ib(t){var i=uot(t);return n.some(f.fromDom(i.dom.contentWindow.document.body)).bind(function(r){return n.some(f.fromDom(i.dom.contentWindow.document)).bind(function(u){return tb(i).map(function(e){var o=f.fromDom(u.dom.documentElement),s=t.getCursorBox.getOrThunk(function(){return function(){return nb(e).map(function(n){return sb.exact(n.start,n.soffset,n.finish,n.foffset)}).bind(function(t){return rot(e,t).orThunk(function(){return nb(e).filter(function(n){return ct(n.start,n.finish)&&n.soffset===n.foffset}).bind(function(t){var i=t.start.dom.getBoundingClientRect();return 0<i.width||0<i.height?n.some(i):n.none()})})})}}),h=t.setSelection.getOrThunk(function(){return function(n,t,i,r){pdt(e,n,t,i,r)}}),c=t.clearSelection.getOrThunk(function(){return function(){ia(e).each(function(n){return n.removeAllRanges()})}});return{body:r,doc:u,win:e,html:o,getSelection:ir(bdt,i),setSelection:h,clearSelection:c,frame:i,onKeyup:fot(t,u,"onKeyup","keyup"),onNodeChanged:fot(t,u,"onNodeChanged","SelectionChange"),onDomChanged:t.onDomChanged,onScrollToCursor:t.onScrollToCursor,onScrollToElement:t.onScrollToElement,onToReading:t.onToReading,onToEditing:t.onToEditing,onToolbarScrollStart:t.onToolbarScrollStart,onTouchContent:t.onTouchContent,onTapContent:t.onTapContent,onTouchToolstrip:t.onTouchToolstrip,getCursorBox:s}})})})}function eot(){var i=nv("head").getOrDie(),n=nv('meta[name="viewport"]').getOrThunk(function(){var n=f.fromTag("meta");return a(n,"name","viewport"),vi(i,n),n}),t=tt(n,"content");return{maximize:function(){a(n,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){null!=t&&0<t.length?a(n,"content",t):a(n,"content","user-scalable=yes")}}}function oot(n,t){function i(n){return function(t){var i=tt(t,"style"),r=void 0===i?"no-styles":i.trim();r===n||(a(t,ea,r),a(t,"style",n))}}var r,u,e=(u=function(n){return uh(n,"*")},bi(function(n,t){for(var r,u,o=tr(t)?t:lt,i=n.dom,e=[];null!==i.parentNode&&void 0!==i.parentNode;){if(r=i.parentNode,u=f.fromDom(r),e.push(u),!0===o(u))break;i=r}return e}(n,void 0),u)),s=di(e,function(n){return t=function(n){return uh(n,"*")},bi(su(i=n).map(tu).map(function(n){return bi(n,function(n){return!ct(i,n)})}).getOr([]),t);var t,i}),o=void 0!==(r=rs(t,"background-color"))&&""!==r?"background-color:"+r+"!important":"background-color:rgb(255,255,255)!important;";c(s,i("display:none!important;"));c(e,i(lst+ast+o));i((!0===sgt?"":lst)+ast+o)(n)}function sot(){c(ek("["+ea+"]"),function(n){var t=tt(n,ea);"no-styles"!==t?a(n,"style",t):ii(n,"style");ii(n,ea)})}function hot(t){var i=t.raw;return void 0===i.touches||1!==i.touches.length?n.none():n.some(i.touches[0])}function cot(t){var e,i,r=ru(),f=k(!1),u=(e=function(n){t.triggerEvent(lct(),n);f.set(!0)},i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},schedule:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i=setTimeout(function(){e.apply(null,t);i=null},400)}}),o=ur([{key:eu(),value:function(t){return hot(t).each(function(n){u.cancel();var i={x:n.clientX,y:n.clientY,target:t.target};u.schedule(t);f.set(!1);r.set(i)}),n.none()}},{key:fh(),value:function(t){return u.cancel(),hot(t).each(function(n){r.on(function(t){var i=n,u=t,f=Math.abs(i.clientX-u.x),e=Math.abs(i.clientY-u.y);(5<f||5<e)&&r.clear()})}),n.none()}},{key:eh(),value:function(n){return u.cancel(),r.get().filter(function(t){return ct(t.target,n.target)}).map(function(){return f.get()?(n.prevent(),!1):t.triggerEvent(nd(),n)})}}]);return{fireIfReady:function(n,t){return l(o,t).bind(function(t){return t(n)})}}}function lot(n){var t=cot({triggerEvent:function(t,i){n.onTapContent(i)}});return{fireTouchstart:function(n){t.fireIfReady(n,"touchstart")},onTouchend:function(){return nt(n.body,"touchend",function(n){t.fireIfReady(n,"touchend")})},onTouchmove:function(){return nt(n.body,"touchmove",function(n){t.fireIfReady(n,"touchmove")})}}}function ra(n,t){var i=parseInt(tt(n,t),10);return isNaN(i)?0:i}function kdt(n){return u(u({},n),{width:2})}function ddt(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}}function rb(n){var t=n.getSelection();return void 0!==t&&0<t.rangeCount?function(n){if(n.collapsed){var t=f.fromDom(n.startContainer);return su(t).bind(function(i){var r,u=sb.exact(t,n.startOffset,i,"img"===ai(r=i)?1:egt.getOption(r).fold(function(){return tu(r).length},function(n){return n.length}));return rot(n.startContainer.ownerDocument.defaultView,u).map(kdt).map(ik)}).getOr([])}return y(n.getClientRects(),ddt)}(t.getRangeAt(0)):[]}function aot(n,t){a(n,vst,t)}function gdt(n){return{top:n.top,bottom:n.top+n.height}}function ngt(t,i){var r=f.fromDom(i.document.body),u=nt(f.fromDom(t),"resize",function(){var f,u,e;f=t;u=ra(r,vst);((e=f.innerHeight)<u?n.some(u-e):n.none()).each(function(t){var r;(0<(r=rb(i)).length?n.some(r[0]).map(gdt):n.none()).each(function(n){var r=n.top>i.innerHeight||n.bottom>i.innerHeight?Math.min(t,n.bottom-i.innerHeight+50):0;0!==r&&i.scrollTo(i.pageXOffset,i.pageYOffset+r)})});aot(r,t.innerHeight)});return aot(r,t.innerHeight),{toEditing:function(){!function(n){n.focus();var t=f.fromDom(n.document.body);(lf().exists(function(n){return fi(["input","textarea"],ai(n))})?function(n){cr.setTimeout(function(){n()},0)}:db)(function(){lf().each(cf);hf(t)})}(i)},destroy:function(){u.unbind()}}}function vot(n,t){function r(){pa(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:r,throttle:function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];r();i=setTimeout(function(){i=null;n.apply(null,f)},t)}}}function yot(n){var i,t,r=ie(hr.sketch({dom:rt('<div aria-hidden="true" class="${prefix}-mask-tap-icon"><\/div>'),containerBehaviours:d([p.config({toggleClass:e("mask-tap-icon-selected"),toggleOnExecute:!1})])})),u=(i=n,t=null,{cancel:function(){pa(t)||(clearTimeout(t),t=null)},throttle:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];pa(t)&&(t=setTimeout(function(){t=null;i.apply(null,r)},200))}});return hr.sketch({dom:rt('<div class="${prefix}-disabled-mask"><\/div>'),components:[hr.sketch({dom:rt('<div class="${prefix}-content-container"><\/div>'),components:[re.sketch({dom:rt('<div class="${prefix}-content-tap-section"><\/div>'),components:[r.asSpec()],action:function(){u.throttle()},buttonBehaviours:d([p.config({toggleClass:e("mask-tap-icon-selected")})])})]})]})}function tgt(n){var i=gt("Getting AndroidWebapp schema",yst,n),r,v,t,s,h,l,a,u;return w(i.toolstrip,"width","100%"),r=br(yot(function(){i.setReadOnly(i.readOnlyOnInit());u.enter()},i.translate)),i.alloy.add(r),v={show:function(){i.alloy.add(r)},hide:function(){i.alloy.remove(r)}},vi(i.container,r.element),u=(t=i,s=v,h=eot(),l=to(),a=to(),{enter:function(){s.hide();bt(t.container,e("fullscreen-maximized"));bt(t.container,e("android-maximized"));h.maximize();bt(t.body,e("android-scroll-reload"));l.set(ngt(t.win,ogt(t.editor).getOrDie("no")));ib(t.editor).each(function(n){function v(n){return!ct(n.start,n.finish)||n.soffset!==n.foffset}function h(){var n=i.doc.dom.hasFocus()&&i.getSelection().exists(v);e.getByDom(r).each(!0===(n||lf(s).filter(function(n){return"input"===ai(n)}).exists(function(n){return n.dom.selectionStart!==n.dom.selectionEnd}))?p.on:p.off)}var i,r,e,u,s,l;oot(t.container,n.body);a.set((i=n,r=t.toolstrip,e=t.alloy,u=lot(i),s=nu(r),l=[nt(i.body,"touchstart",function(n){i.onTouchContent();u.fireTouchstart(n)}),u.onTouchmove(),u.onTouchend(),nt(r,"touchstart",function(){i.onTouchToolstrip()}),i.onToReading(function(){cf(i.body)}),i.onToEditing(o),i.onScrollToCursor(function(n){n.preventDefault();i.getCursorBox().each(function(n){var t=i.win,r=n.top>t.innerHeight||n.bottom>t.innerHeight?n.bottom-t.innerHeight+50:0;0!=r&&t.scrollTo(t.pageXOffset,t.pageYOffset+r)})})].concat(1==hgt?[]:[nt(f.fromDom(i.win),"blur",function(){e.getByDom(r).each(p.off)}),nt(s,"select",h),nt(i.doc,"selectionchange",h)]),{destroy:function(){c(l,function(n){n.unbind()})}}))})},exit:function(){h.restore();s.show();at(t.container,e("fullscreen-maximized"));at(t.container,e("android-maximized"));sot();at(t.body,e("android-scroll-reload"));a.clear();l.clear()}}),{setReadOnly:i.setReadOnly,refreshStructure:o,enter:u.enter,exit:u.exit,destroy:o}}function igt(n){return"true"===tt(n,wst)?0<n.dom.scrollLeft||function(n){n.dom.scrollLeft=1;var t=0!==n.dom.scrollLeft;return n.dom.scrollLeft=0,t}(n):0<n.dom.scrollTop||function(n){n.dom.scrollTop=1;var t=0!==n.dom.scrollTop;return n.dom.scrollTop=0,t}(n)}function pot(){function r(n){var t=!0===n.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:rt('<div aria-label="'+n.label+'" class="${prefix}-toolbar-group '+t+'"><\/div>'),tgroupBehaviours:d([uo("adhoc-scrollable-toolbar",!0===n.scrollable?[yg(function(n){w(n.element,"overflow-x","auto");a(n.element,wst,"true");sw(n.element)})]:[])]),components:[hr.sketch({components:[pst.parts.items({})]})],markers:{itemSelector:"."+e("toolbar-group-item")},items:n.items}}function t(){sa.setGroups(n,i.get());p.off(n)}var n=br(sa.sketch({dom:rt('<div class="${prefix}-toolbar"><\/div>'),components:[sa.parts.groups({})],toolbarBehaviours:d([p.config({toggleClass:e("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),ut.config({mode:"cyclic"})]),shell:!0})),u=br(hr.sketch({dom:{classes:[e("toolstrip")]},components:[ys(n)],containerBehaviours:d([p.config({toggleClass:e("android-selection-context-toolbar"),toggleOnExecute:!1})])})),i=k([]);return{wrapper:u,toolbar:n,createGroups:function(n){return y(n,va(pst.sketch,r))},setGroups:function(n){i.set(n);t()},setContextToolbar:function(t){p.on(n);sa.setGroups(n,t)},restoreToolbar:function(){p.isOn(n)&&t()},refresh:function(){},focus:function(){ut.focusIn(n)}}}function wot(n){return br(re.sketch({dom:rt('<div class="${prefix}-mask-edit-icon ${prefix}-icon"><\/div>'),action:function(){n.run(function(n){n.setReadOnly(!1)})}}))}function bot(){return br(hr.sketch({dom:rt('<div class="${prefix}-editor-socket"><\/div>'),components:[],containerBehaviours:d([pt.config({})])}))}function kot(n,t,i,r){(!0===i?gh.toAlpha:gh.toOmega)(r);(i?function(n,t){pt.append(n,ys(t))}:function(n,t){pt.remove(n,t)})(n,t)}function ws(n,t){return t.getAnimationRoot.fold(function(){return n.element},function(t){return t(n)})}function gu(n){return n.dimension.property}function fo(n,t){return n.dimension.getDimension(t)}function ub(n,t){uw(ws(n,t),[t.shrinkingClass,t.growingClass])}function fb(n,t){at(n.element,t.openClass);bt(n.element,t.closedClass);w(n.element,gu(t),"0px");rc(n.element)}function dot(n,t){at(n.element,t.closedClass);bt(n.element,t.openClass);yf(n.element,gu(t))}function got(n,t,i){i.setCollapsed();w(n.element,gu(t),fo(t,n.element));rc(n.element);ub(n,t);fb(n,t);t.onStartShrink(n);t.onShrunk(n)}function nst(t,i,r){var u=fo(i,t.element);("0px"===u?got:function(n,t,i,r){var f=r.getOrThunk(function(){return fo(t,n.element)}),u;i.setCollapsed();w(n.element,gu(t),f);rc(n.element);u=ws(n,t);at(u,t.growingClass);bt(u,t.shrinkingClass);fb(n,t);t.onStartShrink(n)})(t,i,r,n.some(u))}function tst(n,t,i){var r=ws(n,t),f=uf(r,t.shrinkingClass),e=fo(t,n.element),u;dot(n,t);u=fo(t,n.element);(f?function(){w(n.element,gu(t),e);rc(n.element)}:function(){fb(n,t)})();at(r,t.shrinkingClass);bt(r,t.growingClass);dot(n,t);w(n.element,gu(t),u);i.setExpanded();t.onStartGrow(n)}function ist(n,t){return!0===uf(ws(n,t),t.growingClass)}function rst(n,t){return!0===uf(ws(n,t),t.shrinkingClass)}function ust(n,t){var i=br(hr.sketch({dom:{tag:"div",classes:[e("dropup")]},components:[],containerBehaviours:d([pt.config({}),ks.config({closedClass:e("dropup-closed"),openClass:e("dropup-open"),shrinkingClass:e("dropup-shrinking"),growingClass:e("dropup-growing"),dimension:{property:"height"},onShrunk:function(i){n();t();pt.set(i,[])},onGrown:function(){n();t()}}),tc(function(){r(o)})])})),r=function(n){window.requestAnimationFrame(function(){n();ks.shrink(i)})};return{appear:function(n,t,r){!0===ks.hasShrunk(i)&&!1===ks.isTransitioning(i)&&window.requestAnimationFrame(function(){t(r);pt.set(i,[n()]);ks.grow(i)})},disappear:r,component:i,element:i.element}}function fst(){return se().browser.isFirefox()}function rgt(n,t){var r,f,e,o,i=u({stopBackspace:!0},t),s=cot(i),a=y(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(t){return nt(n,t,function(n){s.fireIfReady(n,t).each(function(t){t&&n.kill()});i.triggerEvent(t,n)&&n.kill()})}),h=ru(),v=nt(n,"paste",function(n){s.fireIfReady(n,"paste").each(function(t){t&&n.kill()});i.triggerEvent("paste",n)&&n.kill();h.set(setTimeout(function(){i.triggerEvent(cct(),n)},0))}),p=nt(n,"keydown",function(n){var t;i.triggerEvent("keydown",n)?n.kill():!i.stopBackspace||(t=n).raw.which!==nvt[0]||fi(["input","textarea"],ai(t.target))||iu(t.target,'[contenteditable="true"]',void 0).isSome()||n.prevent()}),w=(r=n,f=function(n){i.triggerEvent("focusin",n)&&n.kill()},fst()?cw(r,"focus",f):nt(r,"focusin",f)),l=ru(),b=(e=n,o=function(n){i.triggerEvent("focusout",n)&&n.kill();l.set(setTimeout(function(){i.triggerEvent(hct(),n)},0))},fst()?cw(e,"blur",o):nt(e,"focusout",o));return{unbind:function(){c(a,function(n){n.unbind()});p.unbind();w.unbind();b.unbind();v.unbind();h.on(clearTimeout);l.on(clearTimeout)}}}function est(n,t){return k(l(n,"target").getOr(t))}function ost(n,t,i,r,u,f){var e,o,h=n(t,r),s=(e=k(!1),o=k(!1),{stop:function(){e.set(!0)},cut:function(){o.set(!0)},isStopped:e.get,isCut:o.get,event:i,setSource:u.set,getSource:u.get});return h.fold(function(){return f.logEventNoHandlers(t,r),ds.complete()},function(n){var i=n.descHandler;return rw(i)(s),s.isStopped()?(f.logEventStopped(t,n.element,i.purpose),ds.stopped()):s.isCut()?(f.logEventCut(t,n.element,i.purpose),ds.complete()):su(n.element).fold(function(){return f.logNoParent(t,n.element,i.purpose),ds.complete()},function(r){return f.logEventResponse(t,n.element,i.purpose),ds.resume(r)})})}function ugt(){var t={};return{registerId:function(n,i,r){ti(r,function(r,u){var f,e=void 0!==t[u]?t[u]:{};e[i]={cHandler:ir.apply(void 0,[(f=r).handler].concat(n)),purpose:f.purpose};t[u]=e})},unregisterId:function(n){ti(t,function(t){cu(t,n)&&delete t[n]})},filterByType:function(n){return l(t,n).map(function(n){return vv(n,function(n,t){return{id:t,descHandler:n}})}).getOr([])},find:function(i,r,u){return l(t,r).bind(function(t){return s=i,h=(o=function(n){return i=t,hs(r=n).bind(function(n){return l(i,n)}).map(function(n){return{element:r,descHandler:n}});var i,r})(r=u),e=sg(s),h.orThunk(function(){return e(r)?n.none():function(t){for(var i=r.dom,u=sg(e);i.parentNode;){var i=i.parentNode,o=f.fromDom(i),s=t(o);if(s.isSome())return s;if(u(o))break}return n.none()}(o)});var r,o,s,h,e})}}}function fgt(){function i(i){hs(i.element).each(function(i){delete n[i];t.unregisterId(i)})}var t=ugt(),n={};return{find:function(n,i,r){return t.find(n,i,r)},filter:function(n){return t.filterByType(n)},register:function(r){var f,u=hs((f=r).element).getOrThunk(function(){return t=f.element,n=wf(hpt+"uid-"),dp(t,n),n;var t,n});wt(n,u)&&function(t){var r=n[u];if(r!==t)throw new Error('The tagId "'+u+'" is already used by: '+vu(r.element)+"\nCannot use it for: "+vu(t.element)+"\nThe conflicting element is"+(hu(r.element)?" ":" not ")+"already in the DOM");i(t)}(r);t.registerId([r],u,r.events);n[u]=r},unregister:i,getById:function(t){return l(n,t)}}}function sst(n,t,i,r,u){var f=est(i,r);return bst(n,t,i,r,f,u)}function kst(n){var t=br(hr.sketch({dom:{classes:[e("outer-container")].concat(n.classes)},containerBehaviours:d([gh.config({alpha:bgt,omega:kgt})])}));return wgt(t)}function dst(n,t){var i=f.fromTag("input");we(i,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"});vi(n,i);hf(i);t(i);ff(i)}function gst(n){var t,r,i=n.getSelection();0<i.rangeCount&&(t=i.getRangeAt(0),(r=n.document.createRange()).setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset),i.removeAllRanges(),i.addRange(r))}function nht(n,t){lf().each(function(n){ct(n,t)||cf(n)});n.focus();hf(f.fromDom(n.document.body));gst(n)}function dgt(n,t,i,r){function u(){nht(t,r)}var f=nt(i,"keydown",function(n){fi(["input","textarea"],ai(n.target))||u()});return{toReading:function(){dst(n,cf)},toEditing:u,onToolbarTouch:o,destroy:function(){f.unbind()}}}function ggt(n){setTimeout(function(){throw n;},0)}function nnt(t){var i,r,u=lw(t).isPortrait(),f=(i=t.screen.width,r=t.screen.height,rh([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],function(t){return u=i<=t.width&&r<=t.height,f=t.keyboard,u?n.some(f):n.none();var u,f}).getOr({portrait:r/5,landscape:i/4})),e=u?f.portrait:f.landscape;return(u?t.screen.height:t.screen.width)-t.innerHeight>e?0:e}function tht(n,t){var i=nu(n).dom.defaultView;return wi(n)+wi(t)-nnt(i)}function iht(n,t,i){var r=tht(t,i);w(n,"padding-bottom",wi(t)+wi(i)-r+"px")}function rht(n){return ra(n,kr)}function tnt(n,t){var i=tt(n,ee);return hht.fixed(n,i,t)}function int(n,t){return hht.scroller(n,t)}function rnt(n){var t=rht(n);return("true"===tt(n,lb)?int:tnt)(n,t)}function uht(n,t,i){var r=nu(n).dom.defaultView.innerHeight;return a(n,cht,r+"px"),r-t-i}function fht(n){var t=vf(n,"top").getOr("0");return parseInt(t,10)}function eht(n){return parseInt(n.dom.scrollTop,10)}function oht(n,t){return gs(function(i){var r=ir(eht,n),u,f;a(n,ha,r());u=Math.abs(t-r());f=Math.ceil(u/10);ab.animate(r,t,f,function(t,i){ra(n,ha)!==n.dom.scrollTop?i(n.dom.scrollTop):(n.dom.scrollTop=t,a(n,ha,t))},function(){n.dom.scrollTop=t;a(n,ha,t);i(t)},10)})}function sht(n,t){w(n,"top",t+rht(n)+"px")}function fnt(n,t){return n.fold(function(n,i,r){return w(n,i,t+(u=r)+"px"),unt(u);var u},function(n,i){return e=t+(o=i),s=vf(f=n,"top").getOr(o),h=e-parseInt(s,10),c=f.dom.scrollTop+h,r=f,u=c,l=e,gs(function(n){var t=ir(eht,r);ab.animate(t,u,15,function(n){r.dom.scrollTop=n;w(r,"top",fht(r)+15+"px")},function(){r.dom.scrollTop=u;w(r,"top",l+"px");n(u)},10)});var f,o,e,s,h,c,r,u,l})}function lht(n,t){var i,r=y(ri(n,"["+kr+"]"),rnt),u=y(r,function(n){return fnt(n,t)});return i=u,gs(function(n){var t=[],r=0;0===i.length?n([]):c(i,function(u,f){var e;u.get((e=f,function(u){t[e]=u;++r>=i.length&&n(t)}))})})}function ent(t){function oi(){var n=wt.innerHeight;return ra(r,cht)<n}function si(){var n,t,i;ot&&(n=wi(b),t=wi(c),i=uht(r,n,t),a(r,kr,n+"px"),w(r,"height",i+"px"),iht(ut,r,c))}function hi(){p.clear()}var r,ut,b,c,s,at,ft,vt,i,yt,h,pt,wt,kt,dt,gt,ni,ti,ot,d=t.cWin,ki=t.ceBody,g=t.socket,ri=t.toolstrip,it=t.contentElement,di=t.keyboardType,st=t.outerWindow,ui=t.dropup,fi=t.outerBody,u=(ut=ki,b=ri,c=ui,wt=nu(r=g).dom.defaultView,pt=tt(h=b,"style"),we(h,{position:"absolute",top:"0px"}),a(h,kr,"0px"),a(h,ee,"top"),kt={restore:function(){a(h,"style",pt||"");ii(h,kr);ii(h,ee)}},dt=wi(b),gt=wi(c),vt=uht(r,ft=dt,gt),yt=tt(i=r,"style"),sw(i),we(i,{position:"absolute",height:vt+"px",width:"100%",top:ft+"px"}),a(i,kr,ft+"px"),a(i,lb,"true"),a(i,ee,"top"),ni={restore:function(){hw(i);a(i,"style",yt||"");ii(i,kr);ii(i,lb);ii(i,ee)}},at=tt(s=c,"style"),we(s,{position:"absolute",bottom:"0px"}),a(s,kr,"0px"),a(s,ee,"bottom"),ti={restore:function(){a(s,"style",at||"");ii(s,kr);ii(s,ee)}},ot=!0,iht(ut,r,c),{setViewportOffset:function(n){a(r,kr,n+"px");si()},isExpanding:oi,isShrinking:kb(oi),refresh:si,restore:function(){ot=!1;kt.restore();ni.restore();ti.restore()}}),rt=di(fi,d,od(),it),ei=tet(st,{onChange:o,onReady:u.refresh});ei.onAdjustment(function(){u.refresh()});var ci,v,ht,l,li,ai,yi,ct,lt,pi,bi,gi=nt(f.fromDom(st),"resize",function(){u.isExpanding()&&u.refresh()}),nr=(ci=ri,v=g,ht=fi,l=st,li=u,ai=d,yi=function(n){return r=v,t=n,u=nu(i=ci).dom.defaultView,gs(function(n){sht(i,t);sht(r,t);u.scrollTo(0,t);n(t)});var i,r,t,u},ct=k(cb.pure({})),lt={start:function(n){var t=cb.nu(function(t){return yi(n).get(t)});ct.set(t)},idle:function(n){ct.get().get(function(){n()})}},pi=vot(function(){lt.idle(function(){lht(ht,l.pageYOffset).get(function(){var t=rb(ai);n.from(t[0]).bind(function(t){var i=t.top-v.dom.scrollTop;return i>l.innerHeight+5||i<-5?n.some({top:i,bottom:i+t.height}):n.none()}).each(function(n){v.dom.scrollTop=v.dom.scrollTop+n.top});lt.start(0);li.refresh()})})},1e3),bi=nt(f.fromDom(l),"scroll",function(){l.pageYOffset<0||pi.throttle()}),lht(ht,l.pageYOffset).get(et),{unbind:bi.unbind}),p=function(n,t){function s(n){var t=f.fromTag("span");return yft(t,[e("layer-editor"),e("unfocused-selection")]),we(t,{left:n.left+"px",top:n.top+"px",width:n.width+"px",height:n.height+"px"}),t}var o=n.document,i=f.fromTag("div"),u,r;return bt(i,e("unfocused-selections")),vi(f.fromDom(o.documentElement),i),u=nt(i,"touchstart",function(i){i.prevent();nht(n,t);r()}),r=function(){av(i)},{update:function(){r();var t=y(rb(n),s);lv(i,t)},isActive:function(){return 0<tu(i).length},destroy:function(){u.unbind();ff(i)},clear:r}}(d,it);return{toEditing:function(){rt.toEditing();hi()},toReading:function(){rt.toReading()},onToolbarTouch:function(){rt.onToolbarTouch()},refreshSelection:function(){p.isActive()&&p.update()},clearSelection:hi,highlightSelection:function(){p.update()},scrollIntoView:function(n,t){var i,o=d,r=n,f=t,u=tht(i=g,ui),e=ir(gst,o);u<r||u<f?oht(i,i.dom.scrollTop-u+f).get(e):r<0&&oht(i,i.dom.scrollTop+r).get(e)},updateToolbarPadding:o,setViewportOffset:function(n){var i,t;u.setViewportOffset(n);i=g;t=n;gs(function(n){function r(n){w(i,"top",n+"px")}var u=ir(fht,i),f=Math.abs(t-u()),e=Math.ceil(f/10);ab.animate(u,t,e,r,function(){r(t);n(t)},10)}).get(et)},syncHeight:function(){w(it,"height",it.dom.contentWindow.document.body.scrollHeight+"px")},refreshStructure:u.refresh,destroy:function(){u.restore();ei.destroy();nr.unbind();gi.unbind();rt.destroy();p.destroy();dst(od(),cf)}}}function ont(n,t){var s=eot(),r=ru(),u=ru(),i=to(),h=to();return{enter:function(){t.hide();var l=f.fromDom(document);ib(n.editor).each(function(t){function k(){a.run(function(n){n.refreshSelection()})}function tt(n,t){var i=n-b.dom.scrollTop;a.run(function(n){n.scrollIntoView(i,i+t)})}function it(){a.run(function(n){n.clearSelection()})}function rt(){f.getCursorBox().each(function(n){tt(n.top,n.height)});a.run(function(n){n.syncHeight()})}var d,f,a,v,b,y,p,g;r.set({socketHeight:vf(n.socket,"height"),iframeHeight:vf(t.frame,"height"),outerScroll:document.body.scrollTop});u.set({exclusives:(d="."+vdt,nt(l,"touchmove",function(n){iu(n.target,d).filter(igt).fold(function(){n.prevent()},o)}))});bt(n.container,e("fullscreen-maximized"));oot(n.container,t.body);s.maximize();w(n.socket,"overflow","scroll");w(n.socket,"-webkit-overflow-scrolling","touch");hf(t.body);i.set(ent({cWin:t.win,ceBody:t.body,socket:n.socket,toolstrip:n.toolstrip,dropup:n.dropup.element,contentElement:t.frame,outerBody:n.body,outerWindow:n.win,keyboardType:dgt}));i.run(function(n){n.syncHeight()});h.set((f=t,a=i,v=n.toolstrip,b=n.socket,n.dropup,y=lot(f),p=vot(rt,300),g=[f.onKeyup(function(){it();p.throttle()}),f.onNodeChanged(k),f.onDomChanged(p.throttle),f.onDomChanged(k),f.onScrollToCursor(function(n){n.preventDefault();p.throttle()}),f.onScrollToElement(function(n){n.element;tt(a,b)}),f.onToEditing(function(){a.run(function(n){n.toEditing()})}),f.onToReading(function(){a.run(function(n){n.toReading()})}),nt(f.doc,"touchend",function(n){ct(f.html,n.target)||ct(f.body,n.target)}),nt(v,"transitionend",function(n){var t;"height"===n.raw.propertyName&&(t=wi(v),a.run(function(n){n.setViewportOffset(t)}),k(),rt())}),cw(v,"touchstart",function(n){var t;a.run(function(n){n.highlightSelection()});t=n;a.run(function(n){n.onToolbarTouch(t)});f.onTouchToolstrip()}),nt(f.body,"touchstart",function(n){it();f.onTouchContent();y.fireTouchstart(n)}),y.onTouchmove(),y.onTouchend(),nt(f.body,"click",function(n){n.kill()}),nt(v,"touchmove",function(){f.onToolbarScrollStart()})],{destroy:function(){c(g,function(n){n.unbind()})}}))})},refreshStructure:function(){i.run(function(n){n.refreshStructure()})},exit:function(){s.restore();h.clear();i.clear();t.show();r.on(function(t){t.socketHeight.each(function(t){w(n.socket,"height",t)});t.iframeHeight.each(function(t){w(n.editor.getFrame(),"height",t)});document.body.scrollTop=t.scrollTop});r.clear();u.on(function(n){n.exclusives.unbind()});u.clear();at(n.container,e("fullscreen-maximized"));sot();hw(n.toolbar);yf(n.socket,"overflow");yf(n.socket,"-webkit-overflow-scrolling");cf(n.editor.getFrame());ib(n.editor).each(function(n){n.clearSelection()})}}}function aht(n,t,i){n.system.broadcastOn([wg],{command:t,state:i})}function vht(n){return function(){function t(){n._skinLoaded=!0;n.fire("SkinLoaded")}n.initialized?t():n.on("init",t)}}var u=function(){return(u=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)},pb=la("string"),ya=la("object"),ho=la("array"),pa=yb(null),wb=aa("boolean"),wa=yb(void 0),tr=aa("function"),bb=aa("number"),lt=i(!1),ot=i(!0),nh={fold:function(n){return n()},isSome:lt,isNone:ot,getOr:et,getOrThunk:gb,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},getOrNull:i(null),getOrUndefined:i(void 0),or:et,orThunk:gb,map:ka,each:o,bind:ka,exists:lt,forall:ot,filter:function(){return nh},toArray:function(){return[]},toString:i("none()")},ck,tv=function(n){function f(){return u}function r(t){return t(n)}var t=i(n),u={fold:function(t,i){return i(n)},isSome:ot,isNone:lt,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:f,orThunk:f,map:function(t){return tv(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?u:nh},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return u},n={some:tv,none:ka,from:function(n){return null==n?nh:tv(n)}},lk=Array.prototype.slice,kht=Array.prototype.indexOf,dht=Array.prototype.push,iv=function(n,t){return{major:n,minor:t}},vo={nu:iv,detect:function(n,t){function u(n){return Number(i.replace(r,"$"+n))}var i,r,f=String(t).toLowerCase();return 0===n.length?ok():(r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r}(n,i=f))?iv(u(1),u(2)):{major:0,minor:0}},unknown:ok},ght=(ck=/^\s+|\s+$/g,function(n){return n.replace(ck,"")}),rv=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ak={browsers:i([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return ei(n,"edge/")&&ei(n,"chrome")&&ei(n,"safari")&&ei(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rv],search:function(n){return ei(n,"chrome")&&!ei(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return ei(n,"msie")||ei(n,"trident")}},{name:"Opera",versionRegexes:[rv,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:dr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:dr("firefox")},{name:"Safari",versionRegexes:[rv,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(ei(n,"safari")||ei(n,"mobile/"))&&ei(n,"applewebkit")}}]),oses:i([{name:"Windows",search:dr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return ei(n,"iphone")||ei(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:dr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:dr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:dr("linux"),versionRegexes:[]},{name:"Solaris",search:dr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:dr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:dr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},vk="Firefox",nct=function(){return sk({current:void 0,version:vo.unknown()})},tct=sk,yk=(i("Edge"),i("Chrome"),i("IE"),i("Opera"),i(vk),i("Safari"),"Windows"),pk="Android",wk="Solaris",bk="FreeBSD",kk="ChromeOS",ict=function(){return hk({current:void 0,version:vo.unknown()})},rct=hk,se=(i(yk),i("iOS"),i(pk),i("Linux"),i("OSX"),i(wk),i(bk),i(kk),nf(function(){return r=navigator.userAgent,p=n.from(navigator.userAgentData),w=bht,a=ak.browsers(),g=ak.oses(),v=p.bind(function(n){return t=a,rh(n.brands,function(n){var i=n.brand.toLowerCase();return ki(t,function(n){var t;return i===(null===(t=n.brand)||void 0===t?void 0:t.toLowerCase())}).map(function(t){return{current:t.name,version:vo.nu(parseInt(n.version,10),0)}})});var t}).orThunk(function(){return rk(a,n=r).map(function(t){var i=vo.detect(t.versionRegexes,n);return{current:t.name,version:i}});var n}).fold(nct,tct),y=rk(g,b=r).map(function(n){var t=vo.detect(n.versionRegexes,b);return{current:n.name,version:t}}).fold(ict,rct),{browser:v,os:y,deviceType:(k=v,o=r,s=w,u=(t=y).isiOS()&&!0===/ipad/i.test(o),f=t.isiOS()&&!u,d=(h=t.isiOS()||t.isAndroid())||s("(pointer:coarse)"),e=u||!f&&h&&s("(min-device-width:768px)"),c=f||h&&!e,l=k.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),{isiPad:i(u),isiPhone:i(f),isTablet:i(e),isPhone:i(c),isTouch:i(d),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:i(l),isDesktop:i(!c&&!e&&!l)})};var r,p,w,b,t,k,o,s,u,f,h,d,e,c,l,a,g,v,y})),si=i,eu=si("touchstart"),fh=si("touchmove"),eh=si("touchend"),rf=si("mousedown"),uv=si("mousemove"),dk=si("mouseup"),fv=si("mouseover"),uct=si("keydown"),fct=si("keyup"),ev=si("input"),ect=si("change"),gk=si("click"),ov=si("transitionend"),oct=si("selectstart"),sct={tap:oi("tap")},ou=oi("focus"),hct=oi("blur.post"),cct=oi("paste.post"),sv=oi("receive"),yo=oi("execute"),po=oi("focus.item"),nd=sct.tap,lct=oi("longpress"),oh=oi("system.init"),td=oi("system.attached"),hv=oi("system.detached"),act=oi("focusmanager.shifted"),vct=oi("highlight"),id=oi("dehighlight"),cv=function(n,t,i,r){var f=u({target:t},r);n.getSystem().triggerEvent(i,t,f)},f={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return ao(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return ao(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return ao(i)},fromDom:ao,fromPoint:function(t,i,r){return n.from(t.dom.elementFromPoint(i,r)).map(ao)}};"undefined"!=typeof window||Function("return this;")();var lr,lh,ah=sh(1),vh=sh(3),bct=sh(9),kct=sh(11),tu=function(n){return y(n.dom.childNodes,f.fromDom)},vi=function(n,t){n.dom.appendChild(t.dom)},ff=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},vd=tr(Element.prototype.attachShadow)&&tr(Node.prototype.getRootNode),dct=i(vd),yh=vd?function(n){return f.fromDom(n.dom.getRootNode())}:rd,gct=function(n){return so(n.dom.shadowRoot)},hu=function(t){var i=vh(t)?t.dom.parentNode:t.dom;if(null==i||null===i.ownerDocument)return!1;var r,u,o=i.ownerDocument,s=f.fromDom(i),e=yh(s);return(ed(e)?n.some(e):n.none()).fold(function(){return o.body.contains(i)},(r=hu,u=wct,function(n){return r(u(n))}))},nlt=function(n){var t=n.dom.body;if(null==t)throw new Error("Body is not available yet");return f.fromDom(t)},ph=function(n){tf(n,hv());c(n.components(),ph)},wh=function(n){c(n.components(),wh);tf(n,td())},yd=function(n,t,i){n.getSystem().addToWorld(t);i(n.element,t.element);hu(n.element)&&wh(t);n.syncComponents()},hi=Object.keys,tlt=Object.hasOwnProperty,pd=function(n,t){var i={};return ti(n,function(n,r){var u=t(n,r);i[u.k]=u.v}),i},cu=function(n,t){return tlt.call(n,t)},ilt=Object.freeze({__proto__:null,toAlpha:function(n,t){ad(n.element,t.alpha,t.omega)},toOmega:function(n,t){ad(n.element,t.omega,t.alpha)},isAlpha:function(n,t){return uf(n.element,t.alpha)},isOmega:function(n,t){return uf(n.element,t.omega)},clear:function(n,t){at(n.element,t.alpha);at(n.element,t.omega)}}),he=function(t){return{isValue:ot,isError:lt,getOr:i(t),getOrThunk:i(t),getOrDie:i(t),or:function(){return he(t)},orThunk:function(){return he(t)},fold:function(n,i){return i(t)},map:function(n){return he(n(t))},mapError:function(){return he(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return n.some(t)}}},wo=function(t){return{isValue:lt,isError:ot,getOr:et,getOrThunk:function(n){return n()},getOrDie:function(){return ba(String(t))()},or:et,orThunk:function(n){return n()},fold:function(n){return n(t)},map:function(){return wo(t)},mapError:function(n){return wo(n(t))},each:o,bind:function(){return wo(t)},exists:lt,forall:ot,toOptional:n.none}},st={value:he,error:wo,fromOption:function(n,t){return n.fold(function(){return wo(t)},he)}};(lh=lr={})[lh.Error=0]="Error";lh[lh.Value=1]="Value";var fg,elt=function(n){return wv(n,st.error,st.value)},le=wd,ae=bd,olt=function(n,t){return n.stype===lr.Value?t(n.svalue):n},slt=function(n,t){return n.stype===lr.Error?t(n.serror):n},hlt=function(n,t){return n.stype===lr.Value?{stype:lr.Value,svalue:t(n.svalue)}:n},clt=function(n,t){return n.stype===lr.Error?{stype:lr.Error,serror:t(n.serror)}:n},llt=wv,kt=dd(function(n,t){return ya(n)&&ya(t)?kt(n,t):t}),alt=dd(function(n,t){return t}),vlt=function(n){var t,i,r=(t=[],i=[],c(n,function(n){wv(n,function(n){return i.push(n)},function(n){return t.push(n)})}),{values:t,errors:i});return 0<r.errors.length?va(ae,co)(r.errors):le(r.values)},ylt=ko(le),vt=function(n){return{extract:function(t,i){for(var u={},r=[],f=0,e=n;f<e.length;f++)bv(e[f],function(n,f,e,o){var s=rlt(e,t,i,n,o);llt(s,function(n){r.push.apply(r,n)},function(n){u[f]=n})},function(n,t){u[n]=t(i)});return 0<r.length?ae(r):le(u)},toString:function(){return"obj{\n"+y(n,function(n){return bv(n,function(n,t,i,r){return n+" -> "+r.toString()},function(n){return"state("+n+")"})}).join("\n")+"}"}}},sf=i(ylt),plt=(fg=tr,ko(function(n){var t=typeof n;return fg(n)?le(n):ae("Expected type: function but got: "+t)})),eg=function(n){return"Errors: \n"+y(10<(t=n.errors).length?t.slice(0,10).concat([{path:[],getErrorInfo:i("... (only showing first ten failures)")}]):t,function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}).join("\n")+"\n\nInput object: "+dv(n.input);var t},yi=kd,ci=function(n,t){return{tag:"custom",newKey:n,instantiator:t}},wlt=[r("alpha"),r("omega")];au([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var ag,ts,ye,klt={can:ot,abort:lt,run:o},ft=ur,af=kh(td()),vg=kh(hv()),yg=kh(oh()),is=(ag=yo(),function(n){return v(ag,n)}),sy=function(n){return y(n,function(n){return t=n.length-2,n.length>=2&&"/*"===n.substr(t,t+2)?n.substring(0,n.length-2):n;var t})},pg=function(t,r,f,e,o,s,h){function c(t){return wt(t,f)?t[f]():n.none()}var v=dt(o,function(n,t){return u=f,e=function(n){for(var f,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return f=[n].concat(r),n.config({name:i(u)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+u+". Using API: "+h);},function(t){var i=Array.prototype.slice.call(f,1);return s.apply(void 0,[n,t.config,t.state].concat(i))})},c=h=t,r=(s=n).toString(),l=r.indexOf(")")+1,a=r.indexOf("("),o=r.substring(a+1,l-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:c,parameters:sy(o.slice(0,1).concat(o.slice(3)))}},e;var u,s,h,e,c,r,l,a,o}),y=dt(s,ey),a=u(u(u({},y),v),{revoke:ir(blt,f),config:function(n){var i=gt(f+"-config",t,n);return{key:f,value:{config:i,me:a,configAsRaw:nf(function(){return gt(f+"-config",t,n)}),initialConfig:n,state:h}}},schema:i(r),exhibit:function(t,i){return r=c(t),u=l(e,"exhibit"),f=function(n,t){return t(i,n.config,n.state)},(r.isSome()&&u.isSome()?n.some(f(r.getOrDie(),u.getOrDie())):n.none()).getOrThunk(function(){return ar({})});var r,u,f},name:i(f),handlers:function(n){return c(n).map(function(n){return l(e,"events").getOr(function(){return{}})(n.config,n.state)}).getOr({})}});return a},fr={init:function(){return pe({readState:i("No State required")})}},pe=function(n){return n},d=ur,dlt=rr([r("fields"),r("name"),t("active",{}),t("apis",{}),t("state",fr),t("extra",{})]),glt=rr([r("branchKey"),r("branches"),r("name"),t("active",{}),t("apis",{}),t("state",fr),t("extra",{})]),nat=i(void 0),gh=li({fields:wlt,name:"swapping",apis:ilt}),tat=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),iat=tinymce.util.Tools.resolve("tinymce.ThemeManager"),rat=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],uat=["undo","bold","italic","link","image","bullist","styleselect"],wg="formatChanged",hy="orientationChanged",bg="dropupDismissed",fat=Object.freeze({__proto__:null,events:function(n){return ft([v(sv(),function(t,i){var r,u=n.channels,f=hi(u),e=i;c((r=e).universal?f:bi(f,function(n){return fi(r.channels,n)}),function(n){var i=u[n],r=i.schema,f=gt("channel["+n+"] data\nReceiver: "+vu(t.element),r,e.data);i.onReceive(t,f)})})])}}),eat="unknown";(ye=ts={})[ye.STOP=0]="STOP";ye[ye.NORMAL=1]="NORMAL";ye[ye.LOGGING=2]="LOGGING";var ly=k({}),oat=["alloy/data/Fields","alloy/debugging/Debugging"],sat=i({logEventCut:o,logEventStopped:o,logNoParent:o,logEventNoHandlers:o,logEventResponse:o,write:o}),kg=i([r("menu"),r("selectedMenu")]),ay=i([r("item"),r("selectedItem")]);i(vt(ay().concat(kg())));var hat=i(vt(ay())),yn=i(lu("initSize",[r("numColumns"),r("numRows")])),uc=li({fields:[go("channels",gv(st.value,rr([vy("onReceive"),t("schema",sf())])))],name:"receiving",active:fat}),cat=Object.freeze({__proto__:null,onLoad:en,toggle:rn,isOn:function(n,t,i){return i.get()},on:un,off:fn,set:yy}),lat=Object.freeze({__proto__:null,exhibit:function(){return ar({})},events:function(n,t){var i,r,u,f=(i=n,r=t,u=rn,is(function(n){u(n,i,r)})),e=oy(n,t,en);return ft(co([n.toggleOnExecute?[f]:[],[e]]))}}),p=li({fields:[t("selected",!1),b("toggleClass"),t("toggleOnExecute",!0),ce("aria",{mode:"none"},of("mode",{pressed:[t("syncWithExpanded",!1),it("update",function(n,t,i){a(n.element,"aria-pressed",i);t.syncWithExpanded&&vn(n,0,i)})],checked:[it("update",function(n,t,i){a(n.element,"aria-checked",i)})],expanded:[it("update",vn)],selected:[it("update",function(n,t,i){a(n.element,"aria-selected",i)})],none:[it("update",o)]}))],name:"toggling",active:lat,apis:cat,state:{init:function(){var n=k(!1);return{get:function(){return n.get()},set:function(t){return n.set(t)},clear:function(){return n.set(!1)},readState:function(){return n.get()}}}}}),pn="tinymce-mobile",e=function(n){return pn+"-"+n},aat=Object.freeze({__proto__:null,focus:cn,blur:function(n,t){t.ignore||cf(n.element)},isFocused:function(n){return t=n.element,i=yh(t).dom,t.dom===i.activeElement;var t,i}}),vat=Object.freeze({__proto__:null,exhibit:function(n,t){return ar(t.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(n){return ft([v(ou(),function(t,i){cn(t,n);i.stop()})].concat(n.stopMousedown?[v(rf(),function(n,t){t.event.prevent()})]:[]))}}),ni=li({fields:[yt("onFocus"),t("stopMousedown",!1),t("ignore",!1)],name:"focusing",active:vat,apis:aat}),wn=function(n,t){return ic(n)?n.style.getPropertyValue(t):""},yat=an("height",function(n){var t=n.dom;return hu(n)?t.getBoundingClientRect().height:t.offsetHeight});var fc,ky,nvt=[8],pu=[9],vr=[13],ec=[27],ui=[32],oc=[37],es=[38],sc=[39],de=[40],os=kb(be),tvt=Object.freeze({__proto__:null,dehighlightAll:function(n,t){return dn(n,t,0,[])},dehighlight:function(n,t,i,r){by(0,t,0,r)&&(at(r.element,t.highlightClass),t.onDehighlight(n,r),tf(r,id()))},highlight:fs,highlightFirst:function(n,t){ttt(n,t).each(function(i){fs(n,t,0,i)})},highlightLast:function(n,t){itt(n,t).each(function(i){fs(n,t,0,i)})},highlightAt:function(t,i,r,u){var e,f,o;f=u;o=ri((e=t).element,"."+i.itemClass);n.from(o[f]).fold(function(){return st.error(new Error("No element found with index "+f))},e.getSystem().getByDom).fold(function(n){throw n;},function(n){fs(t,i,0,n)})},highlightBy:function(n,t,i,r){ki(rtt(n,t),r).each(function(i){fs(n,t,0,i)})},isHighlighted:by,getHighlighted:function(n,t){return yu(n.element,"."+t.highlightClass).bind(function(t){return n.getSystem().getByDom(t).toOptional()})},getFirst:ttt,getLast:itt,getPrevious:function(n,t){return gn(n,t,0,-1)},getNext:function(n,t){return gn(n,t,0,1)},getCandidates:rtt}),ht=li({fields:[r("highlightClass"),r("itemClass"),yt("onHighlight"),yt("onDehighlight")],name:"highlighting",apis:tvt});(ky=fc=fc||{}).OnFocusMode="onFocus";ky.OnEnterOrSpaceMode="onEnterOrSpace";ky.OnApiMode="onApi";var fit,eit,rp,oit,sit,hit,cit,lit,ait,bf,hvt=utt(ci("cyclic",lt)),cvt=utt(ci("cyclic",ot)),lvt=pf([t("execute",ss),t("useSpace",!1),t("useEnter",!0),t("useControlEnter",!1),t("useDown",!1)],fr.init,function(n,t,i){var r=i.useSpace&&!ge(n.element)?ui:[],u=i.useEnter?vr:[],f=i.useDown?de:[];return[h(s(r.concat(u).concat(f)),ftt)].concat(i.useControlEnter?[h(er([dat,s(vr)]),ftt)]:[])},function(n,t,i){return i.useSpace&&!ge(n.element)?[h(s(ui),no)]:[]},function(){return n.none()}),avt=Object.freeze({__proto__:null,flatgrid:ott,init:function(n){return n.state(n)}}),vvt=function(n){return"rtl"===rs(n,"direction")?"rtl":"ltr"},vit=function(n,t,i,r,u){return r.focusManager.get(t).bind(function(i){return n(t.element,i,r,u)}).map(function(n){return r.focusManager.set(t,n),!0})},yit=np,pit=np,yc=np,wit=hc(function(n,t,i,r){return vtt(n,t,i,r,-1)}),bit=hc(function(n,t,i,r){return vtt(n,t,i,r,1)}),yvt=hc(function(n,t,i,r){return ytt(n,t,i,r,-1)}),pvt=hc(function(n,t,i,r){return ytt(n,t,i,r,1)}),wvt=pf([r("selector"),t("execute",ss),gi("onEscape"),t("captureTab",!1),yn()],ott,i([h(s(oc),dy(wit,bit)),h(s(sc),gy(wit,bit)),h(s(es),yit(yvt)),h(s(de),pit(pvt)),h(er([be,s(pu)]),ptt),h(er([os,s(pu)]),ptt),h(s(ec),function(n,t,i){return i.onEscape(n,t)}),h(s(ui.concat(vr)),function(n,t,i){return(r=i).focusManager.get(n).bind(function(n){return iu(n,r.selector)}).bind(function(r){return i.execute(n,t,r)});var r})]),i([h(s(ui),no)]),function(){return n.some(rvt)}),bvt=[r("selector"),t("getInitial",n.none),t("execute",ss),gi("onEscape"),t("executeOnMove",!1),t("allowVertical",!0)],kvt=i([h(s(ui),no)]),dvt=pf(bvt,fr.init,function(n,t,i){var r=oc.concat(i.allowVertical?es:[]),u=sc.concat(i.allowVertical?de:[]);return[h(s(r),ktt(dy(wtt,btt))),h(s(u),ktt(gy(wtt,btt))),h(s(vr),tp),h(s(ui),tp),h(s(ec),fvt)]},kvt,function(){return n.some(uvt)}),gvt=[lu("selectors",[r("row"),r("cell")]),t("cycles",!0),t("previousSelector",n.none),t("execute",ss)],kit=ac(function(n,t,i){return dtt(n,t,i,-1)},function(n,t,i){return nit(n,t,i,-1)}),dit=ac(function(n,t,i){return dtt(n,t,i,1)},function(n,t,i){return nit(n,t,i,1)}),nyt=ac(function(n,t,i){return gtt(n,i,t,-1)},function(n,t,i){return tit(n,i,t,-1)}),tyt=ac(function(n,t,i){return gtt(n,i,t,1)},function(n,t,i){return tit(n,i,t,1)}),iyt=i([h(s(oc),dy(kit,dit)),h(s(sc),gy(kit,dit)),h(s(es),yit(nyt)),h(s(de),pit(tyt)),h(s(ui.concat(vr)),function(n,t,i){return dh(n.element).bind(function(r){return i.execute(n,t,r)})})]),ryt=i([h(s(ui),no)]),uyt=pf(gvt,fr.init,iyt,ryt,function(){return n.some(evt)}),fyt=[r("selector"),t("execute",ss),t("moveOnTab",!1)],eyt=i([h(s(es),yc(rit)),h(s(de),yc(uit)),h(er([be,s(pu)]),function(t,i,r,u){return r.moveOnTab?yc(rit)(t,i,r,u):n.none()}),h(er([os,s(pu)]),function(t,i,r,u){return r.moveOnTab?yc(uit)(t,i,r,u):n.none()}),h(s(vr),iit),h(s(ui),iit)]),oyt=i([h(s(ui),no)]),syt=pf(fyt,fr.init,eyt,oyt,function(){return n.some(ovt)}),hyt=pf([gi("onSpace"),gi("onEnter"),gi("onShiftEnter"),gi("onLeft"),gi("onRight"),gi("onTab"),gi("onShiftTab"),gi("onUp"),gi("onDown"),gi("onEscape"),t("stopSpaceKeyup",!1),b("focusIn")],fr.init,function(n,t,i){return[h(s(ui),i.onSpace),h(er([os,s(vr)]),i.onEnter),h(er([be,s(vr)]),i.onShiftEnter),h(er([be,s(pu)]),i.onShiftTab),h(er([os,s(pu)]),i.onTab),h(s(es),i.onUp),h(s(de),i.onDown),h(s(oc),i.onLeft),h(s(sc),i.onRight),h(s(ui),i.onSpace),h(s(ec),i.onEscape)]},function(n,t,i){return i.stopSpaceKeyup?[h(s(ui),no)]:[]},function(n){return n.focusIn}),cyt=hvt.schema(),lyt=cvt.schema(),ayt=dvt.schema(),vyt=wvt.schema(),yyt=uyt.schema(),pyt=lvt.schema(),wyt=syt.schema(),byt=hyt.schema(),ut=(eit=of((bf=gt("Creating behaviour: "+(fit={branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:cyt,cyclic:lyt,flow:ayt,flatgrid:vyt,matrix:yyt,execution:pyt,menu:wyt,special:byt}),name:"keying",active:{events:function(n,t){return n.handler.toEvents(n,t)}},apis:{focusIn:function(n,t,i){t.sendFocusIn(t).fold(function(){n.getSystem().triggerFocus(n.element,n.element)},function(r){r(n,t,i)})},setGridSize:function(n,t,i,r,u){wt(i,"setGridSize")?i.setGridSize(r,u):console.error("Layout does not support setGridSize")}},state:avt}).name,glt,fit)).branchKey,bf.branches),rp=bf.name,oit=bf.active,sit=bf.apis,hit=bf.extra,cit=bf.state,ait=iy(rp,[ty("config",lit=eit)]),pg(lit,ait,rp,oit,sit,hit,cit)),pc=uu,wc=wu,git="placeholder",bc=au([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),nrt=function(n,t,r,f){return h=n,c=f,(ip(o=r)&&o.uiType===git?(e=o,s=c,(a=h).exists(function(n){return n!==e.owner})?bc.single(!0,i(e)):l(s,e.name).fold(function(){throw new Error("Unknown placeholder component: "+e.name+"\nKnown: ["+hi(s)+"]\nNamespace: "+a.getOr("none")+"\nSpec: "+JSON.stringify(e,null,2));},function(n){return n.replace()})):bc.single(!1,i(o))).fold(function(i,e){var o=ip(r)?e(t,r.config,r.validated):e(t),s=di(l(o,"components").getOr([]),function(i){return nrt(n,t,i,f)});return[u(u({},o),{components:s})]},function(n,i){if(ip(r)){var u=i(t,r.config,r.validated);return r.validated.preprocess.getOr(et)(u)}return i(t)});var h,o,c,a,e,s},trt=bc.single,kyt=bc.multiple,irt=i(git),dyt=0,kc=au([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),dc=t("factory",{sketch:et}),up=t("schema",[]),gc=r("name"),fp=yi("pname","pname",gd(function(n){return"<alloy."+wf(n.name)+">"}),sf()),gyt=ci("schema",function(){return[b("preprocess")]}),nl=t("defaults",i({})),tl=t("overrides",i({})),npt=vt([dc,up,gc,fp,nl,tl]),tpt=vt([dc,up,gc,nl,tl]),ipt=vt([dc,up,gc,fp,nl,tl]),rpt=vt([dc,gyt,gc,r("unit"),fp,nl,tl]),il=vc(kc.required,npt);vc(kc.external,tpt);var kp=vc(kc.optional,ipt),gut=vc(kc.group,rpt),nft=i("entirety"),ept=function(n,t){return{uiType:irt(),owner:n,name:t}},tft=wf("alloy-premade"),opt=i("alloy-id-"),spt=i("data-alloy-id"),hpt=opt(),ift=spt(),dp=function(n,t){Object.defineProperty(n.dom,ift,{value:t,writable:!0})},ls=wf,rft=function(n){return cu(n,"uid")?n:u(u({},n),{uid:ls("uid")})},cpt=rr([r("name"),r("factory"),r("configFields"),t("apis",{}),t("extraApis",{})]),lpt=rr([r("name"),r("factory"),r("configFields"),r("partFields"),t("apis",{}),t("extraApis",{})]),re=cs({name:"Button",factory:function(n){function t(t){return l(n.dom,"attributes").bind(function(n){return l(n,t)})}var i,r=(i=n.action,ft(co([i.map(function(n){return is(function(t,i){n(t);i.stop()})}).toArray(),hn()]))),f=n.dom.tag;return{uid:n.uid,dom:n.dom,components:n.components,events:r,behaviours:wc(n.buttonBehaviours,[ni.config({}),ut.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==f)return{role:t("role").getOr("button")};var n=t("type").getOr("button"),i=t("role").map(function(n){return{role:n}}).getOr({});return u({type:n},i)}()},eventOrder:n.eventOrder}},configFields:[t("uid",void 0),r("dom"),t("components",[]),pc("buttonBehaviours",[ni,ut]),b("action"),b("role"),t("eventOrder",{})]}),apt=li({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return ft([cg(oct(),ot)])},exhibit:function(){return ar({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),ue=function(n,t,i,r){return re.sketch({dom:art(n,r),action:t,buttonBehaviours:kt(d([apt.config({})]),i)})},vpt=kp({schema:[r("dom")],name:"label"}),ypt=bu("top-left"),ppt=bu("top"),wpt=bu("top-right"),bpt=bu("right"),kpt=bu("bottom-right"),dpt=bu("bottom"),gpt=bu("bottom-left"),nwt=[vpt,bu("left"),bpt,ppt,dpt,ypt,wpt,gpt,kpt,il({name:"thumb",defaults:i({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:ft([ve(eu(),n,"spectrum"),ve(fh(),n,"spectrum"),ve(eh(),n,"spectrum"),ve(rf(),n,"spectrum"),ve(uv(),n,"spectrum"),ve(dk(),n,"spectrum")])}}}),il({schema:[ci("mouseIsDown",function(){return k(!1)})],name:"spectrum",overrides:function(n){function i(i,r){return t.getValueFromEvent(r).map(function(r){return t.setValueFrom(i,n,r)})}var t=n.model.manager;return{behaviours:d([ut.config({mode:"special",onLeft:function(i){return t.onLeft(i,n)},onRight:function(i){return t.onRight(i,n)},onUp:function(i){return t.onUp(i,n)},onDown:function(i){return t.onDown(i,n)}}),ni.config({})]),events:ft([v(eu(),i),v(fh(),i),v(rf(),i),v(uv(),function(t,r){n.mouseIsDown.get()&&i(t,r)})])}}})],twt=Object.freeze({__proto__:null,onLoad:sp,onUnload:vrt,setValue:function(n,t,i,r){t.store.manager.setValue(n,t,i,r)},getValue:function(n,t,i){return t.store.manager.getValue(n,t,i)},getState:function(n,t,i){return i}}),iwt=Object.freeze({__proto__:null,events:function(n,t){var i=n.resetOnDom?[af(function(i){sp(i,n,t)}),vg(function(i){vrt(i,n,t)})]:[oy(n,t,sp)];return ft(i)}}),rwt=Object.freeze({__proto__:null,memory:yrt,dataset:prt,manual:function(){return pe({readState:o})},init:function(n){return n.store.manager.state(n)}}),uwt=[b("initialValue"),r("getFallbackEntry"),r("getDataKey"),r("setValue"),it("manager",{setValue:wrt,getValue:function(n,t,i){var r=t.store,u=r.getDataKey(n);return i.lookup(u).getOrThunk(function(){return r.getFallbackEntry(u)})},onLoad:function(n,t,i){t.store.initialValue.each(function(r){wrt(n,t,i,r)})},onUnload:function(n,t,i){i.clear()},state:prt})],fwt=[r("getValue"),t("setValue",o),b("initialValue"),it("manager",{setValue:function(n,t,i,r){t.store.setValue(n,r);t.onSetValue(n,r)},getValue:function(n,t){return t.store.getValue(n)},onLoad:function(n,t){t.store.initialValue.each(function(i){t.store.setValue(n,i)})},onUnload:o,state:fr.init})],g=li({fields:[ce("store",{mode:"memory"},of("mode",{memory:[b("initialValue"),it("manager",{setValue:function(n,t,i,r){i.set(r);t.onSetValue(n,r)},getValue:function(n,t,i){return i.get()},onLoad:function(n,t,i){t.store.initialValue.each(function(n){i.isNotSet()&&i.set(n)})},onUnload:function(n,t,i){i.clear()},state:yrt})],manual:fwt,dataset:uwt})),yt("onSetValue"),t("resetOnDom",!1)],name:"representing",active:iwt,apis:twt,extra:{setValueFrom:function(n,t){var i=g.getValue(t);g.setValue(n,i)}},state:rwt}),uft=an("width",function(n){return n.dom.offsetWidth}),fft=function(n,t){return{left:n,top:t,translate:function(i,r){return fft(n+i,t+r)}}},eft=fft,as=i("slider.change.value"),gp="left",ewt=wut(-1),owt=wut(1),swt=n.none,hwt=n.none,cwt={"top-left":n.none(),top:n.none(),"top-right":n.none(),right:n.some(function(n,t){nr(n,{x:el(t)})}),"bottom-right":n.none(),bottom:n.none(),"bottom-left":n.none(),left:n.some(function(n,t){nr(n,{x:ul(t)})})},lwt=Object.freeze({__proto__:null,setValueFrom:function(n,t,i){var r=yp(n,t,i);return ll(n,{x:r}),r},setToMin:function(n,t){ll(n,{x:df(t)})},setToMax:function(n,t){ll(n,{x:ne(t)})},findValueOfOffset:yp,getValueFromEvent:function(n){return hp(n).map(function(n){return n.left})},findPositionOfValue:pp,setPositionFromValue:function(n,t,i,r){var u=fu(i),f=pp(n,r.getSpectrum(n),u.x,r.getLeftEdge(n),r.getRightEdge(n),i),e=io(t.element)/2;w(t.element,"left",f-e+"px")},onLeft:ewt,onRight:owt,onUp:swt,onDown:hwt,edgeActions:cwt}),awt=n.none,vwt=n.none,ywt=but(-1),pwt=but(1),wwt={"top-left":n.none(),top:n.some(function(n,t){nr(n,{y:fl(t)})}),"top-right":n.none(),right:n.none(),"bottom-right":n.none(),bottom:n.some(function(n,t){nr(n,{y:ol(t)})}),"bottom-left":n.none(),left:n.none()},bwt=Object.freeze({__proto__:null,setValueFrom:function(n,t,i){var r=wp(n,t,i);return al(n,{y:r}),r},setToMin:function(n,t){al(n,{y:gf(t)})},setToMax:function(n,t){al(n,{y:te(t)})},findValueOfOffset:wp,getValueFromEvent:function(n){return hp(n).map(function(n){return n.top})},findPositionOfValue:bp,setPositionFromValue:function(n,t,i,r){var u=fu(i),f=bp(n,r.getSpectrum(n),u.y,r.getTopEdge(n),r.getBottomEdge(n),i),e=wi(t.element)/2;w(t.element,"top",f-e+"px")},onLeft:awt,onRight:vwt,onUp:ywt,onDown:pwt,edgeActions:wwt}),kwt=hp,dwt=pl(-1,!1),gwt=pl(1,!1),nbt=pl(-1,!0),tbt=pl(1,!0),ibt={"top-left":n.some(function(n,t){nr(n,ku(ul(t),fl(t)))}),top:n.some(function(n,t){nr(n,ku(drt(t),fl(t)))}),"top-right":n.some(function(n,t){nr(n,ku(el(t),fl(t)))}),right:n.some(function(n,t){nr(n,ku(el(t),grt(t)))}),"bottom-right":n.some(function(n,t){nr(n,ku(el(t),ol(t)))}),bottom:n.some(function(n,t){nr(n,ku(drt(t),ol(t)))}),"bottom-left":n.some(function(n,t){nr(n,ku(ul(t),ol(t)))}),left:n.some(function(n,t){nr(n,ku(ul(t),grt(t)))})},rbt=Object.freeze({__proto__:null,setValueFrom:function(n,t,i){var r=yl(yp(n,t,i.left),wp(n,t,i.top));return vl(n,r),r},setToMin:function(n,t){vl(n,yl(df(t),gf(t)))},setToMax:function(n,t){vl(n,yl(ne(t),te(t)))},getValueFromEvent:kwt,setPositionFromValue:function(n,t,i,r){var u=fu(i),f=pp(n,r.getSpectrum(n),u.x,r.getLeftEdge(n),r.getRightEdge(n),i),e=bp(n,r.getSpectrum(n),u.y,r.getTopEdge(n),r.getBottomEdge(n),i),o=io(t.element)/2,s=wi(t.element)/2;w(t.element,"left",f-o+"px");w(t.element,"top",e-s+"px")},onLeft:dwt,onRight:gwt,onUp:nbt,onDown:tbt,edgeActions:ibt}),ubt=[t("stepSize",1),t("onChange",o),t("onChoose",o),t("onInit",o),t("onDragStart",o),t("onDragEnd",o),t("snapToGrid",!1),t("rounded",!0),b("snapStart"),go("model",of("mode",{x:[t("minX",0),t("maxX",100),ci("value",function(n){return k(n.mode.minX)}),r("getInitialValue"),it("manager",lwt)],y:[t("minY",0),t("maxY",100),ci("value",function(n){return k(n.mode.minY)}),r("getInitialValue"),it("manager",bwt)],xy:[t("minX",0),t("maxX",100),t("minY",0),t("maxY",100),ci("value",function(n){return k({x:n.mode.minX,y:n.mode.minY})}),r("getInitialValue"),it("manager",rbt)]})),uu("sliderBehaviours",[ut,g]),ci("mouseIsDown",function(){return k(!1)})],fbt=i("mouse.released"),pr=rl({name:"Slider",configFields:ubt,partFields:nwt,factory:function(t,i){function u(n){return frt(n,t,"thumb")}function o(n){return frt(n,t,"spectrum")}function y(n){return or(n,t,"left-edge")}function p(n){return or(n,t,"right-edge")}function w(n){return or(n,t,"top-edge")}function b(n){return or(n,t,"bottom-edge")}function f(n,i){e.setPositionFromValue(n,i,t,{getLeftEdge:y,getRightEdge:p,getTopEdge:w,getBottomEdge:b,getSpectrum:o})}function s(n,t){r.value.set(t);f(n,u(n))}function h(n){var i=t.mouseIsDown.get();t.mouseIsDown.set(!1);i&&or(n,t,"thumb").each(function(i){var u=r.value.get();t.onChoose(n,i,u)})}function c(n,i){i.stop();t.mouseIsDown.set(!0);t.onDragStart(n,u(n))}function l(n,i){i.stop();t.onDragEnd(n,u(n));h(n)}var a,r=t.model,e=r.manager;return{uid:t.uid,dom:t.dom,components:i,behaviours:wu(t.sliderBehaviours,[ut.config({mode:"special",focusIn:function(n){return or(n,t,"spectrum").map(ut.focusIn).map(ot)}}),g.config({store:{mode:"manual",getValue:function(){return r.value.get()}}}),uc.config({channels:((a={})[fbt()]={onReceive:h},a)})]),events:ft([v(as(),function(i,r){!function(i,r){s(i,r);var f=u(i);t.onChange(i,f,r);n.some(!0)}(i,r.event.value)}),af(function(n){var s=r.getInitialValue(),i,e;r.value.set(s);i=u(n);f(n,i);e=o(n);t.onInit(n,i,e,r.value.get())}),v(eu(),c),v(eh(),l),v(rf(),c),v(dk(),l)]),apis:{resetToMin:function(n){e.setToMin(n,t)},resetToMax:function(n){e.setToMax(n,t)},setValue:s,refresh:f},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(n,t,i){n.setValue(t,i)},resetToMin:function(n,t){n.resetToMin(t)},resetToMax:function(n,t){n.resetToMax(t)},refresh:function(n,t){n.refresh(t)}}}),wl=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],ebt=i(wl),obt=rr([r("getInitialValue"),r("onChange"),r("category"),r("sizes")]),sbt=ebt(),oft={},nw={exports:oft};!function(){var n=this,t=function(){function l(){}function n(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];h(n,this)}function s(i,r){for(;3===i._state;)i=i._value;0!==i._state?(i._handled=!0,n._immediateFn(function(){var n,f=1===i._state?r.onFulfilled:r.onRejected;if(null!==f){try{n=f(i._value)}catch(n){return void t(r.promise,n)}u(r.promise,n)}else(1===i._state?u:t)(r.promise,i._value)})):i._deferreds.push(r)}function u(i,r){var u,e,o;try{if(r===i)throw new TypeError("A promise cannot be resolved with itself.");if(r&&("object"==typeof r||"function"==typeof r)){if(u=r.then,r instanceof n)return i._state=3,i._value=r,void f(i);if("function"==typeof u)return void h((e=u,o=r,function(){e.apply(o,arguments)}),i)}i._state=1;i._value=r;f(i)}catch(r){t(i,r)}}function t(n,t){n._state=2;n._value=t;f(n)}function f(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var i=0,r=t._deferreds.length;i<r;i++)s(t,t._deferreds[i]);t._deferreds=null}function a(n,t,i){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.promise=i}function h(n,i){var r=!1;try{n(function(n){r||(r=!0,u(i,n))},function(n){r||(r=!0,t(i,n))})}catch(n){if(r)return;r=!0;t(i,n)}}var i,r,e,o={exports:{}},c;return i=o,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=setTimeout,n.prototype.catch=function(n){return this.then(null,n)},n.prototype.then=function(n,t){var i=new this.constructor(l);return s(this,new a(n,t,i)),i},n.all=function(t){var i=Array.prototype.slice.call(t);return new n(function(n,t){if(0===i.length)return n([]);for(var u=i.length,r=0;r<i.length;r++)!function f(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return o.call(e,function(n){f(r,n)},t),0}i[r]=e;0==--u&&n(i)}catch(e){t(e)}}(r,i[r])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(n){n(t)})},n.reject=function(t){return new n(function(n,i){i(t)})},n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;r<u;r++)t[r].then(n,i)})},n._immediateFn="function"==typeof setImmediate?function(n){setImmediate(n)}:function(n){e(n,0)},n._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},n._setImmediateFn=function(t){n._immediateFn=t},n._setUnhandledRejectionFn=function(t){n._unhandledRejectionFn=t},i.exports?i.exports=n:r.Promise||(r.Promise=n),c=o.exports,{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||c}};"object"==typeof oft&&void 0!==nw?nw.exports=t():(n="undefined"!=typeof globalThis?globalThis:n||self).EphoxContactWrapper=t()}();var wr,vw=nw.exports.boltExport,eet=function(n){return iu(f.fromDom(n.selection.getStart()),"a")},rkt=se(),ukt=Object.freeze({__proto__:null,getCurrent:function(n,t){return t.find(n)}}),sr=li({fields:[r("find")],name:"composing",apis:ukt}),hr=cs({name:"Container",factory:function(n){var t=n.dom,i=t.attributes,r=vb(t,["attributes"]);return{uid:n.uid,dom:u({tag:"div",attributes:u({role:"presentation"},i)},r),components:n.components,behaviours:n.containerBehaviours.dump,events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},configFields:[t("components",[]),uu("containerBehaviours",[]),t("events",{}),t("domModification",{}),t("eventOrder",{})]}),fkt=cs({name:"DataField",factory:function(t){return{uid:t.uid,dom:t.dom,behaviours:wc(t.dataBehaviours,[g.config({store:{mode:"memory",initialValue:t.getInitialValue()}}),sr.config({find:n.some})]),events:ft([af(function(n){g.setValue(n,t.getInitialValue())})])}},configFields:[r("uid"),r("dom"),r("getInitialValue"),pc("dataBehaviours",[g,sr])]}),ekt=cs({name:"Input",configFields:i([b("data"),t("inputAttributes",{}),t("inputStyles",{}),t("tag","input"),t("inputClasses",[]),yt("onSetValue"),t("styles",{}),t("eventOrder",{}),uu("inputBehaviours",[g,ni]),t("selectOnFocus",!0)])(),factory:function(n){return{uid:n.uid,dom:{tag:(i=n).tag,attributes:u({type:"text"},i.inputAttributes),styles:i.inputStyles,classes:i.inputClasses},components:[],behaviours:(t=n,u(u({},d([ni.config({onFocus:t.selectOnFocus?function(n){var t=n.element,i=tw(t);t.dom.setSelectionRange(0,i.length)}:o})])),wu(t.inputBehaviours,[g.config({store:u(u({mode:"manual"},t.data.map(function(n){return{initialValue:n}}).getOr({})),{getValue:function(n){return tw(n.element)},setValue:function(n,t){tw(n.element)!==t&&hft(n.element,t)}}),onSetValue:t.onSetValue})]))),eventOrder:n.eventOrder};var t,i}}),okt=Object.freeze({__proto__:null,exhibit:function(n,t){return ar({attributes:ur([{key:t.tabAttr,value:"true"}])})}}),skt=li({fields:[t("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:okt}),hkt=tinymce.util.Tools.resolve("tinymce.util.I18n"),ckt=["input","button","textarea","select"],yw=function(n,t){t.disableClass.each(function(t){bt(n.element,t)});(iw(n,t)?function(n){a(n.element,"disabled","disabled")}:function(n){a(n.element,"aria-disabled","true")})(n);t.onDisabled(n)},pw=function(n,t){t.disableClass.each(function(t){at(n.element,t)});(iw(n,t)?function(n){ii(n.element,"disabled")}:function(n){a(n.element,"aria-disabled","false")})(n);t.onEnabled(n)},lkt=Object.freeze({__proto__:null,enable:pw,disable:yw,isDisabled:lft,onLoad:cft,set:function(n,t,i,r){(r?yw:pw)(n,t)}}),akt=Object.freeze({__proto__:null,exhibit:function(n,t){return ar({classes:t.disabled()?t.disableClass.toArray():[]})},events:function(n,t){return ft([cg(yo(),function(t){return lft(t,n)}),oy(n,t,cft)])}}),ww=li({fields:[ce("disabled",lt,plt),t("useNative",!0),b("disableClass"),yt("onDisabled"),yt("onEnabled")],name:"disabling",active:akt,apis:lkt}),vkt=[uu("formBehaviours",[g])],ykt=(op(function(n,t,i){return n.getField(t,i)}),function(n){var t,r={field:function(n,i){return t.push(n),r=aft(n),u=i,{uiType:irt(),owner:"form",name:r,config:u,validated:{}};var r,u},record:i(t=[])},u=n(r),f=y(r.record(),function(n){return il({name:n,pname:aft(n)})});return hrt("form",vkt,f,ikt,u)}),pkt=nf(function(i,u){function a(n,t,i){return re.sketch({dom:rt('<span class="${prefix}-icon-'+t+' ${prefix}-icon"><\/span>'),action:function(t){gr(t,l,{direction:n})},buttonBehaviours:d([ww.config({disableClass:e("toolbar-navigation-disabled"),disabled:function(){return!i}})])})}function o(n,t){var i=ri(n.element,"."+e("serialised-dialog-screen"));yu(n.element,"."+e("serialised-dialog-chain")).each(function(n){0<=f.state.currentScreen.get()+t&&f.state.currentScreen.get()+t<i.length&&(vf(n,"left").each(function(r){var u=parseInt(r,10),f=io(i[0]);w(n,"left",u-t*f+"px")}),f.state.currentScreen.set(f.state.currentScreen.get()+t))})}function p(t){var r=ri(t.element,"input"),i;n.from(r[f.state.currentScreen.get()]).each(function(n){t.getSystem().getByDom(n).each(function(n){var i=t,r=n.element;i.getSystem().triggerFocus(r,i.element)})});i=h.get(t);ht.highlightAt(i,f.state.currentScreen.get())}return[{label:"the link group",items:[(c={fields:[kl("url","Type or paste URL"),kl("text","Link text"),kl("title","Link title"),kl("target","Link target"),{name:"link",spec:fkt.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return n.none()}})}],maxFieldIndex:3,getInitialValue:function(){return n.some(eet(t=u).fold(function(){return{url:"",text:t.selection.getContent({format:"text"}),title:"",target:"",link:n.none()}},function(t){return r=sft(i=t),u=tt(i,"href"),f=tt(i,"title"),e=tt(i,"target"),{url:bl(u),text:r!==u?bl(r):"",title:bl(f),target:bl(e),link:n.some(i)};var i,r,u,f,e}));var t},onExecute:function(n){var t=g.getValue(n);cbt(u,t);i.restoreToolbar();u.focus()}},l="navigateEvent",f=gt("SerialisedDialog",vt([r("fields"),t("maxFieldIndex",c.fields.length-1),r("onExecute"),r("getInitialValue"),ci("state",function(){return{dialogSwipeState:ru(),currentScreen:k(0)}})]),c),s=ie(ykt(function(t){return{dom:rt('<div class="${prefix}-serialised-dialog"><\/div>'),components:[hr.sketch({dom:rt('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"><\/div>'),components:y(f.fields,function(n,i){return i<=f.maxFieldIndex?hr.sketch({dom:rt('<div class="${prefix}-serialised-dialog-screen"><\/div>'),components:[a(-1,"previous",0<i),t.field(n.name,n.spec),a(1,"next",i<f.maxFieldIndex)]}):t.field(n.name,n.spec)})})],formBehaviours:d([tc(function(n,t){var i=t;yu(n.element,"."+e("serialised-dialog-chain")).each(function(n){w(n,"left",-f.state.currentScreen.get()*i.width+"px")})}),ut.config({mode:"special",focusIn:function(n){p(n)},onTab:function(t){return o(t,1),n.some(!0)},onShiftTab:function(t){return o(t,-1),n.some(!0)}}),uo("form-events",[af(function(n){f.state.currentScreen.set(0);f.state.dialogSwipeState.clear();var t=h.get(n);ht.highlightFirst(t);f.getInitialValue(n).each(function(t){g.setValue(n,t)})}),is(f.onExecute),v(ov(),function(n,t){"left"===t.event.raw.propertyName&&p(n)}),v(l,function(n,t){o(n,t.event.direction)})])])}})),h=ie({dom:rt('<div class="${prefix}-dot-container"><\/div>'),behaviours:d([ht.config({highlightClass:e("dot-active"),itemClass:e("dot-item")})]),components:di(f.fields,function(n,t){return t<=f.maxFieldIndex?[kf('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"><\/div>')]:[]})}),{dom:rt('<div class="${prefix}-serializer-wrapper"><\/div>'),components:[s.asSpec(),h.asSpec()],behaviours:d([ut.config({mode:"special",focusIn:function(n){var t=s.get(n);ut.focusIn(t)}}),uo("serializer-wrapper-events",[v(eu(),function(n,t){var i=t.event;f.state.dialogSwipeState.set({xValue:i.raw.touches[0].clientX,points:[]})}),v(fh(),function(n,t){var i=t.event;f.state.dialogSwipeState.on(function(n){t.event.prevent();f.state.dialogSwipeState.set(function(n,t){if(t===n.xValue)return n;var i=0<t-n.xValue?1:-1,r={direction:i,xValue:t};return{xValue:t,points:(0===n.points.length?[]:n.points[n.points.length-1].direction===i?n.points.slice(0,n.points.length-1):n.points).concat([r])}}(n,i.raw.touches[0].clientX))})}),v(eh(),function(n){f.state.dialogSwipeState.on(function(t){o(s.get(n),-1*function(){if(0===t.points.length)return 0;var n=t.points[0].direction,i=t.points[t.points.length-1].direction;return-1===n&&-1===i?-1:1===n&&1===i?1:0}())})})])])})]}];var c,l,f,s,h}),wkt=ft([{key:ou(),value:ns({can:function(n,t){var i,r=t.event,u=r.originator,f=r.target;return!(ct(i=u,n.element)&&!ct(i,f)&&(console.warn(ou()+" did not get interpreted by the desired target. \nOriginator: "+vu(u)+"\nTarget: "+vu(f)+"\nCheck the "+ou()+" event handlers"),1))}})}]),bkt=Object.freeze({__proto__:null,events:wkt}),kkt=et,dkt=dl(),gkt=function(n,t){var e,i,r,o,u,f,s=vv(n,function(n,i){return(1===n.length?st.value(n[0].handler):vbt(n,t,i)).map(function(r){var f,u,e=(u=tr(f=r)?{can:ot,abort:lt,run:f}:f,function(n,t){for(var r,f=[],i=2;i<arguments.length;i++)f[i-2]=arguments[i];r=[n,t].concat(f);u.abort.apply(void 0,r)?t.stop():u.can.apply(void 0,r)&&u.run.apply(void 0,r)}),o=1<n.length?bi(t[i],function(t){return da(n,function(n){return n.name===t})}).join(" > "):n[0].name;return pi(i,{handler:e,purpose:o})})});return e={},i=[],r=[],c(s,function(n){n.fold(function(n){i.push(n)},function(n){r.push(n)})}),0<(f={errors:i,values:r}).errors.length?st.error(co(f.errors)):(u=e,0===(o=f.values).length?st.value(u):st.value(kt(u,alt.apply(void 0,o))))},fe="alloy.base.behaviour",ndt=vt([yi("dom","dom",ef(),vt([r("tag"),t("styles",{}),t("classes",[]),t("attributes",{}),b("value"),b("innerHtml")])),r("components"),r("uid"),t("events",{}),t("apis",{}),yi("eventOrder","eventOrder",((wr={})[yo()]=["disabling",fe,"toggling","typeaheadevents"],wr[ou()]=[fe,"focusing","keying"],wr[oh()]=[fe,"disabling","toggling","representing"],wr[ev()]=[fe,"representing","streaming","invalidating"],wr[hv()]=[fe,"representing","item-events","tooltipping"],wr[rf()]=["focusing",fe,"item-type-events"],wr[eu()]=["focusing",fe,"item-type-events"],wr[fv()]=["item-type-events","tooltipping"],wr[sv()]=["receiving","reflecting","tooltipping"],ng(i(wr))),sf()),b("domModification")]),tdt=ls,br=function(n){return l(n,tft).getOrThunk(function(){var t,r,i,f,e,o=cu(n,"uid")?n:u({uid:tdt("")},n);return t=kkt(o),r=t.events,i=vb(t,["events"]),f=y(l(i,"components").getOr([]),br),e=u(u({},i),{events:u(u({},bkt),r),components:f}),st.value(bbt(e)).getOrDie()})},ys=ort,oet="alloy.item-hover",set="alloy.item-focus",het=i(oet),idt=i(set),rdt=[r("data"),r("components"),r("dom"),t("hasSubmenu",!1),b("toggling"),pc("itemBehaviours",[p,ni,ut,g]),t("ignoreFocus",!1),t("domModification",{}),it("builder",function(n){return{dom:n.dom,domModification:u(u({},n.domModification),{attributes:u(u(u({role:n.toggling.isSome()?"menuitemcheckbox":"menuitem"},n.domModification.attributes),{"aria-haspopup":n.hasSubmenu}),n.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:wc(n.itemBehaviours,[n.toggling.fold(p.revoke,function(n){return p.config(u({aria:{mode:"checked"}},n))}),ni.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:function(n){bft(n)}}),ut.config({mode:"execution"}),g.config({store:{mode:"memory",initialValue:n.data}}),uo("item-type-events",ca(ca([],hn(),!0),[v(fv(),wft),v(po(),ni.focus)],!1))]),components:n.components,eventOrder:n.eventOrder}}),t("eventOrder",{})],udt=[r("dom"),r("components"),it("builder",function(n){return{dom:n.dom,components:n.components,events:ft([v(po(),function(n,t){t.stop()})])}})],cet=i("item-widget"),aet=i([il({name:"widget",overrides:function(n){return{behaviours:d([g.config({store:{mode:"manual",getValue:function(){return n.data},setValue:o}})])}}})]),fdt=of("type",{widget:[r("uid"),r("data"),r("components"),r("dom"),t("autofocus",!1),t("ignoreFocus",!1),pc("widgetBehaviours",[g,ni,ut]),t("domModification",{}),ert(aet()),it("builder",function(t){function i(n){return or(n,t,"widget").map(function(n){return ut.focusIn(n),n})}function r(i,r){return ge(r.event.target)||t.autofocus&&r.setSource(i.element),n.none()}var u=rrt(cet(),t,aet()),f=urt(cet(),t,u.internals());return{dom:t.dom,components:f,domModification:t.domModification,events:ft([is(function(n,t){i(n).each(function(){t.stop()})}),v(fv(),wft),v(po(),function(n){t.autofocus?i(n):ni.focus(n)})]),behaviours:wc(t.widgetBehaviours,[g.config({store:{mode:"memory",initialValue:t.data}}),ni.config({ignore:t.ignoreFocus,onFocus:function(n){bft(n)}}),ut.config({mode:"special",focusIn:t.autofocus?function(n){i(n)}:nat(),onLeft:r,onRight:r,onEscape:function(i,r){return ni.isFocused(i)||t.autofocus?(t.autofocus&&r.setSource(i.element),n.none()):(ni.focus(i),n.some(!0))}})])}})],item:rdt,separator:udt}),edt=i([gut({factory:{sketch:function(n){var t=gt("menu.spec item",fdt,n);return t.builder(t)}},name:"items",unit:"item",defaults:function(n,t){return cu(t,"uid")?t:u(u({},t),{uid:ls("item")})},overrides:function(n,t){return{type:t.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}}}})]),odt=i([r("value"),r("items"),r("dom"),r("components"),t("eventOrder",{}),uu("menuBehaviours",[ht,g,sr,ut]),ce("movement",{mode:"menu",moveOnTab:!0},of("mode",{grid:[yn(),it("config",function(n,t){return{mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:n.focusManager}})],matrix:[it("config",function(n,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+n.markers.item},focusManager:n.focusManager}}),r("rowSelector")],menu:[t("moveOnTab",!0),it("config",function(n,t){return{mode:"menu",selector:"."+n.markers.item,moveOnTab:t.moveOnTab,focusManager:n.focusManager}})]})),go("markers",hat()),t("fakeFocus",!1),t("focusManager",wy()),yt("onHighlight")]),vet=i("alloy.menu-focus"),yet=rl({name:"Menu",configFields:odt(),partFields:edt(),factory:function(t,i){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:wu(t.menuBehaviours,[ht.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),g.config({store:{mode:"memory",initialValue:t.value}}),sr.config({find:n.some}),ut.config(t.movement.config(t,t.movement))]),events:ft([v(idt(),function(n,t){var i=t.event;n.getSystem().getByDom(i.target).each(function(i){ht.highlight(n,i);t.stop();gr(n,vet(),{menu:n,item:i})})}),v(het(),function(n,t){var i=t.event.item;ht.highlight(n,i)})]),components:i,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),ta=function(n){return n.components()},pt=li({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(n,t,i,r){fw(n,0,vi,r)},prepend:function(n,t,i,r){fw(n,0,pct,r)},remove:kft,replaceAt:dft,replaceBy:function(n,t,i,r,u){return oe(ta(n),r).bind(function(t){return dft(n,0,0,t,u)})},set:function(t,i,r,u){var h,e,s,l;h=function(){var n,i,r,f,e=y(u,t.getSystem().build);i=e;f=(n=t).components();c((r=n).components(),function(n){return ff(n.element)});av(r.element);r.syncComponents();c(tk(f,i),function(t){ph(t);n.getSystem().removeFromWorld(t)});c(i,function(t){t.getSystem().isConnected()?sd(n,t):(n.getSystem().addToWorld(t),sd(n,t),hu(n.element)&&wh(t));n.syncComponents()})};e=t.element;s=yh(e);l=lf(s).bind(function(t){function i(n){return ct(t,n)}var r,u;return i(e)?n.some(e):(r=i,(u=function(t){for(var e,o,i=0;i<t.childNodes.length;i++){if(e=f.fromDom(t.childNodes[i]),r(e))return n.some(e);if(o=u(t.childNodes[i]),o.isSome())return o}return n.none()})(e.dom))});h(e);l.each(function(n){lf(s).filter(function(t){return ct(t,n)}).fold(function(){hf(n)},o)})},contents:ta})}),pet=function(t,i,r,u){return l(r,u).bind(function(u){return l(t,u).bind(function(u){var f=pet(t,i,r,u);return n.some([u].concat(f))})}).getOr([])},sdt=function(){function a(t){return function(i){for(var e,u,f=hi(i),r=0,o=f.length;r<o;r++)if(e=f[r],u=i[e],u===t)return n.some(u);return n.none()}(r.get())}function e(n){return h(n).bind(fet)}function o(n){return l(r.get(),n)}var r=k({}),t=k({}),i=k({}),f=ru(),s=k({}),h=function(n){return l(t.get(),n)};return{setMenuBuilt:function(n,i){var r;t.set(u(u({},t.get()),((r={})[n]={type:"prepared",menu:i},r)))},setContents:function(n,u,e,o){f.set(n);r.set(e);t.set(u);s.set(o);var h=function(n,t){var i={};ti(n,function(n,t){c(n,function(n){i[n]=t})});var u=t,r=pd(t,function(n,t){return{k:n,v:t}}),f=dt(r,function(n,t){return[t].concat(pet(i,u,r,t))});return dt(i,function(n){return l(f,n).getOr([n])})}(o,e);i.set(h)},expand:function(n){return l(r.get(),n).map(function(t){var r=l(i.get(),n).getOr([]);return[t].concat(r)})},refresh:function(n){return l(i.get(),n)},collapse:function(t){return l(i.get(),t).bind(function(t){return 1<t.length?n.some(t.slice(1)):n.none()})},lookupMenu:h,lookupItem:o,otherMenus:function(n){var t=s.get();return tk(hi(t),n)},getPrimary:function(){return f.get().bind(e)},getMenus:function(){return t.get()},clear:function(){r.set({});t.set({});i.set({});f.clear()},isClear:function(){return f.get().isNone()},getTriggeringPath:function(t,r){var u=bi(o(t).toArray(),function(n){return e(n).isSome()});return l(i.get(),t).bind(function(t){var i=lo(u.concat(t));return function(t){for(var u,r=[],i=0;i<t.length;i++){if(u=t[i],!u.isSome())return n.none();r.push(u.getOrDie())}return n.some(r)}(di(i,function(t,u){return o=t,s=r,h=i.slice(0,u+1),e(o).bind(function(n){return a(o).bind(function(t){return s(t).map(function(t){return{triggeredMenu:n,triggeringItem:t,triggeringPath:h}})})}).fold(function(){return og(f.get(),t)?[]:[n.none()]},function(t){return[n.some(t)]});var o,s,h}))})}}},hdt=fet,cdt=i("collapse-item"),bw=cs({name:"TieredMenu",configFields:[dg("onExecute"),dg("onEscape"),vy("onOpenMenu"),vy("onOpenSubmenu"),yt("onRepositionMenu"),yt("onCollapseMenu"),t("highlightImmediately",!0),lu("data",[r("primary"),r("menus"),r("expansions")]),t("fakeFocus",!1),yt("onHighlight"),yt("onHover"),lu("markers",[r("backgroundMenu")].concat(kg()).concat(ay())),r("dom"),t("navigateOnHover",!0),t("stayInDom",!1),uu("tmenuBehaviours",[ut,ht,sr,pt]),t("eventOrder",{})],apis:{collapseMenu:function(n,t){n.collapseMenu(t)},highlightPrimary:function(n,t){n.highlightPrimary(t)},repositionMenus:function(n,t){n.repositionMenus(t)}},factory:function(t){function ct(n){var r,f,e=(r=n,f=t.data.primary,dt(t.data.menus,function(n,i){function e(){return yet.sketch(u(u({},n),{value:i,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:(t.fakeFocus?gat:wy)()}))}return i===f?{type:"prepared",menu:r.getSystem().build(e())}:{type:"notbuilt",nbMenu:e}})),o=dt(t.data.menus,function(n){return di(n.items,function(n){return"separator"===n.type?[]:[n.data.value]})});return i.setContents(t.data.primary,e,t.data.expansions,o),i.getPrimary()}function r(n){return g.getValue(n).value}function h(n,t){ht.highlight(n,t);ht.getHighlighted(t).orThunk(function(){return ht.getFirst(t)}).each(function(t){ga(n,t.element,po())})}function k(t,i){return ry(y(i,function(i){return t.lookupMenu(i).bind(function(t){return"prepared"===t.type?n.some(t.menu):n.none()})}))}function d(n,i,r){c(k(i,i.otherMenus(r)),function(i){uw(i.element,[t.markers.backgroundMenu]);t.stayInDom||pt.remove(n,i)})}function l(n,i){var u;ti((u=n,nt.get().getOrThunk(function(){var n={};return c(bi(ri(u.element,"."+t.markers.item),function(n){return"true"===tt(n,"aria-haspopup")}),function(t){u.getSystem().getByDom(t).each(function(t){var i=r(t);n[i]=t})}),nt.set(n),n})),function(n,t){var r=fi(i,t);a(n.element,"aria-expanded",r)})}function p(i,r,u){return n.from(u[0]).bind(function(f){return r.lookupMenu(f).bind(function(f){if("notbuilt"===f.type)return n.none();var e=f.menu;return c(k(r,u.slice(1)),function(n){bt(n.element,t.markers.backgroundMenu)}),hu(e.element)||pt.append(i,ys(e)),uw(e.element,[t.markers.backgroundMenu]),h(i,e),d(i,r,u),n.some(e)})})}function w(u,e,o){if(void 0===o&&(o=f.HighlightSubmenu),e.hasConfigured(ww)&&ww.isDisabled(e))return n.some(e);var s=r(e);return i.expand(s).bind(function(r){return l(u,r),n.from(r[0]).bind(function(s){return i.lookupMenu(s).bind(function(h){var c=function(n,t,r){if("notbuilt"!==r.type)return r.menu;var u=n.getSystem().build(r.nbMenu());return i.setMenuBuilt(t,u),u}(u,s,h);return hu(c.element)||pt.append(u,ys(c)),t.onOpenSubmenu(u,e,c,lo(r)),o===f.HighlightSubmenu?(ht.highlightFirst(c),p(u,i,r)):(ht.dehighlightAll(c),n.some(e))})})})}function s(n,u){var f=r(u);return i.collapse(f).bind(function(r){return l(n,r),p(n,i,r).map(function(i){return t.onCollapseMenu(n,u,i),i})})}function b(n){return function(i,r){return iu(r.getSource(),"."+t.markers.item).bind(function(t){return i.getSystem().getByDom(t).toOptional().bind(function(t){return n(i,t).map(ot)})})}}function it(n){return ht.getHighlighted(n).bind(ht.getHighlighted)}var f,e,nt=ru(),i=sdt(),rt,st;return(e=f={})[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent",rt=ft([v(vet(),function(n,t){var u=t.event.item;i.lookupItem(r(u)).each(function(){var f=t.event.menu,u;ht.highlight(n,f);u=r(t.event.item);i.refresh(u).each(function(t){return d(n,i,t)})})}),is(function(n,i){var u=i.event.target;n.getSystem().getByDom(u).each(function(i){0===r(i).indexOf("collapse-item")&&s(n,i);w(n,i,f.HighlightSubmenu).fold(function(){t.onExecute(n,i)},o)})}),af(function(n){ct(n).each(function(i){pt.append(n,ys(i));t.onOpenMenu(n,i);t.highlightImmediately&&h(n,i)})})].concat(t.navigateOnHover?[v(het(),function(n,u){var e=u.event.item,o=n,s=r(e);i.refresh(s).bind(function(n){return l(o,n),p(o,i,n)});w(n,e,f.HighlightParent);t.onHover(n,e)})]:[])),st={collapseMenu:function(n){it(n).each(function(t){s(n,t)})},highlightPrimary:function(n){i.getPrimary().each(function(t){h(n,t)})},repositionMenus:function(u){i.getPrimary().bind(function(t){return it(u).bind(function(t){var u=r(t),f=ry(y(vv(i.getMenus(),et),hdt));return i.getTriggeringPath(u,function(t){return i=t,rh(f,function(t){return t.getSystem().isConnected()?ki(ht.getCandidates(t),function(n){return r(n)===i}):n.none()});var i})}).map(function(n){return{primary:t,triggeringPath:n}})}).fold(function(){n.from(u.components()[0]).filter(function(n){return"menu"===tt(n.element,"role")}).each(function(n){t.onRepositionMenu(u,n,[])})},function(n){var i=n.primary,r=n.triggeringPath;t.onRepositionMenu(u,i,r)})}},{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:wu(t.tmenuBehaviours,[ut.config({mode:"special",onRight:b(function(t,i){return ge(i.element)?n.none():w(t,i,f.HighlightSubmenu)}),onLeft:b(function(t,i){return ge(i.element)?n.none():s(t,i)}),onEscape:b(function(n,i){return s(n,i).orThunk(function(){return t.onEscape(n,i).map(function(){return n})})}),focusIn:function(n){i.getPrimary().each(function(t){ga(n,t.element,po())})}}),ht.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),sr.config({find:function(n){return ht.getHighlighted(n)}}),pt.config({})]),eventOrder:t.eventOrder,apis:st,events:rt}},extraApis:{tieredData:function(n,t,i){return{primary:n,menus:t,expansions:i}},singleData:function(n,t){return{primary:n,menus:pi(n,t),expansions:{}}},collapseItem:function(n){return{value:wf(cdt()),meta:{text:n}}}}}),wet=function(n,t,i,r){return ew(0,t,0,r).bind(function(n){return n.transition.map(function(t){return{transition:t,route:n}})})},kw=function(n,t){return hh(n.element,t.destinationAttr).map(function(i){return{start:tt(n.element,t.stateAttr),destination:i}})},ldt=Object.freeze({__proto__:null,findRoute:ew,disableTransition:ow,getCurrentRoute:kw,jumpTo:gl,progressTo:function(n,t,i,r){var u,f=t,e,o;yv((u=n).element,f.destinationAttr)&&(hh(u.element,f.destinationAttr).each(function(n){a(u.element,f.stateAttr,n)}),ii(u.element,f.destinationAttr));o=(e=r,{start:tt(n.element,t.stateAttr),destination:e});wet(n,t,i,o).fold(function(){gl(n,t,i,r)},function(u){ow(n,t,i);var f=u.transition;bt(n.element,f.transitionClass);a(n.element,t.destinationAttr,r)})},getState:function(n,t){return hh(n.element,t.stateAttr)}}),adt=Object.freeze({__proto__:null,events:function(n,t){return ft([v(ov(),function(i,r){var u=r.event.raw;kw(i,n).each(function(r){ew(0,n,0,r).each(function(f){f.transition.each(function(f){u.propertyName===f.property&&(gl(i,n,t,r.destination),n.onTransition(i,r))})})})}),af(function(i){gl(i,n,t,n.initialState)})])}}),du=li({fields:[t("destinationAttr","data-transitioning-destination"),t("stateAttr","data-transitioning-state"),r("initialState"),yt("onTransition"),yt("onFinish"),go("routes",gv(st.value,gv(st.value,rr([ug("transition",[r("property"),r("transitionClass")])]))))],name:"transitioning",active:adt,apis:ldt,extra:{createRoutes:function(n){var t={};return ti(n,function(n,i){var r=i.split("<->");t[r[0]]=pi(r[1],n);t[r[1]]=pi(r[0],n)}),t},createBistate:function(n,t,i){return ur([{key:n,value:pi(t,i)},{key:t,value:pi(n,i)}])},createTristate:function(n,t,i,r){return ur([{key:n,value:ur([{key:t,value:r},{key:i,value:r}])},{key:t,value:ur([{key:n,value:r},{key:i,value:r}])},{key:i,value:ur([{key:n,value:r},{key:t,value:r}])}])}}}),dw=e("scrollable"),vdt=dw,bet=function(n,t,i,r,u){return{data:{value:n,text:t},type:"item",dom:{tag:"div",classes:u?[e("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:e("format-matches"),selected:i},itemBehaviours:d(u?[]:[on(n,function(n,t){(t?p.on:p.off)(n)})]),components:[{dom:{tag:"div",attributes:{style:r},innerHtml:t}}]}},ket=function(n,t,i,r){return{value:n,dom:{tag:"div"},components:[re.sketch({dom:{tag:"div",classes:[e("styles-collapser")]},components:r?[{dom:{tag:"span",classes:[e("styles-collapse-icon")]}},pft(n)]:[pft(n)],action:function(n){var t;r&&(t=i().get(n),bw.collapseMenu(t))}}),{dom:{tag:"div",classes:[e("styles-menu-items-container")]},components:[yet.parts.items({})],behaviours:d([uo("adhoc-scrollable-menu",[af(function(n){w(n.element,"overflow-y","auto");w(n.element,"-webkit-overflow-scrolling","touch");sw(n.element)}),vg(function(n){yf(n.element,"overflow-y");yf(n.element,"-webkit-overflow-scrolling");hw(n.element)})])])}],items:t,menuBehaviours:d([du.config({initialState:"after",routes:du.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},det=function(n){return th(n,function(n,t){var i=kbt(t);return{menus:kt(n.menus,i.menus),items:[i.item].concat(n.items),expansions:kt(n.expansions,i.expansions)}},{menus:{},expansions:{},items:[]})},get=function(n){return di(n,function(n){return(ho(n)?get:gft)(n)})},ydt=function(n,t,i,r){n.dom.removeEventListener(t,i,r)},not=ot,cr=tinymce.util.Tools.resolve("tinymce.util.Delay"),ps=au([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);ps.ltr;ps.rtl;var ua,hst,cst,eb=function(n,t,i,r){return{start:n,soffset:t,finish:i,foffset:r}},egt=(ua=vh,{get:function(n){if(!ua(n))throw new Error("Can only get text value of a text node");return hst(n).getOr("")},getOption:hst=function(t){return ua(t)?n.from(t.dom.nodeValue):n.none()},set:function(n,t){if(!ua(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=t}}),ob=au([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),bs={before:ob.before,on:ob.on,after:ob.after,cata:function(n,t,i,r){return n.fold(t,i,r)},getStart:function(n){return n.fold(et,et,et)}},fa=au([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),sb={domRange:fa.domRange,relative:fa.relative,exact:fa.exact,exactFromRange:function(n){return fa.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){var t=n.match({domRange:function(n){return f.fromDom(n.startContainer)},relative:function(n){return bs.getStart(n)},exact:function(n){return n}});return f.fromDom(rd(t).dom.defaultView)},range:eb},ogt=(cst=tb,function(n){return n.getWin.getOrThunk(function(){var t=uot(n);return function(){return cst(t)}})()}),ea="data-ephox-mobile-fullscreen-style",lst="position:absolute!important;",ast="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",sgt=se().os.isAndroid(),hgt=6<=se().os.version.major,vst="data-"+e("last-outer-height"),oa=i({unbind:o}),yst=vt([lu("editor",[r("getFrame"),b("getBody"),b("getDoc"),b("getWin"),b("getSelection"),b("setSelection"),b("clearSelection"),b("cursorSaver"),b("onKeyup"),b("onNodeChanged"),b("getCursorBox"),r("onDomChanged"),t("onTouchContent",o),t("onTapContent",o),t("onTouchToolstrip",o),t("onScrollToCursor",oa),t("onScrollToElement",oa),t("onToEditing",oa),t("onToReading",oa),t("onToolbarScrollStart",et)]),r("socket"),r("toolstrip"),r("dropup"),r("toolbar"),r("container"),r("alloy"),ci("win",function(n){return nu(n.socket).dom.defaultView}),ci("body",function(n){return f.fromDom(n.socket.dom.ownerDocument.body)}),t("translate",et),t("setReadOnly",o),t("readOnlyOnInit",ot)]),cgt=i([r("dom"),t("shell",!0),uu("toolbarBehaviours",[pt])]),lgt=i([kp({name:"groups",overrides:function(){return{behaviours:d([pt.config({})])}}})]),sa=rl({name:"Toolbar",configFields:cgt(),partFields:lgt(),factory:function(t,i){var r=t.shell?{behaviours:[pt.config({})],components:[]}:{behaviours:[],components:i};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:wu(t.toolbarBehaviours,r.behaviours),apis:{setGroups:function(i,r){var u;u=i;(t.shell?n.some(u):or(u,t,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components");},function(n){pt.set(n,r)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(n,t,i){n.setGroups(t,i)}}}),agt=i([r("items"),lu("markers",y(["itemSelector"],r)),uu("tgroupBehaviours",[ut])]),vgt=i([gut({name:"items",unit:"item"})]),pst=rl({name:"ToolbarGroup",configFields:agt(),partFields:vgt(),factory:function(n,t){return{uid:n.uid,dom:n.dom,components:t,behaviours:wu(n.tgroupBehaviours,[ut.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),wst="data-"+e("horizontal-scroll"),ygt=Object.freeze({__proto__:null,refresh:function(n,t,i){var r;i.isExpanded()&&(yf(n.element,gu(t)),r=fo(t,n.element),w(n.element,gu(t),r))},grow:function(n,t,i){i.isExpanded()||tst(n,t,i)},shrink:function(n,t,i){i.isExpanded()&&nst(n,t,i)},immediateShrink:function(n,t,i){i.isExpanded()&&got(n,t,i)},hasGrown:function(n,t,i){return i.isExpanded()},hasShrunk:function(n,t,i){return i.isCollapsed()},isGrowing:ist,isShrinking:rst,isTransitioning:function(n,t){return ist(n,t)||rst(n,t)},toggleGrow:function(n,t,i){(i.isExpanded()?nst:tst)(n,t,i)},disableTransitions:ub}),pgt=Object.freeze({__proto__:null,exhibit:function(n,t){return ar(t.expanded?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:pi(t.dimension.property,"0px")})},events:function(n,t){return ft([kh(ov())(function(i,r){r.event.raw.propertyName===n.dimension.property&&(ub(i,n),t.isExpanded()&&yf(i.element,n.dimension.property),(t.isExpanded()?n.onGrown:n.onShrunk)(i))})])}}),ks=li({fields:[r("closedClass"),r("openClass"),r("shrinkingClass"),r("growingClass"),b("getAnimationRoot"),yt("onShrunk"),yt("onStartShrink"),yt("onGrown"),yt("onStartGrow"),t("expanded",!1),go("dimension",of("property",{width:[it("property","width"),it("getDimension",function(n){return io(n)+"px"})],height:[it("property","height"),it("getDimension",function(n){return wi(n)+"px"})]}))],name:"sliding",active:pgt,apis:ygt,state:Object.freeze({__proto__:null,init:function(n){var t=k(n.expanded);return pe({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:ir(t.set,!1),setExpanded:ir(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),ds=au([{stopped:[]},{resume:["element"]},{complete:[]}]),bst=function(n,t,i,r,u,f){return ost(n,t,i,r,u,f).fold(ot,function(r){return bst(n,t,i,r,u,f)},lt)},wgt=function(n){function b(t){return su(n.element).fold(ot,function(n){return ct(t,n)})}function u(n,i){return t.find(b,n,i)}function h(n){c(t.filter(sv()),function(t){rw(t.descHandler)(n)})}var t=fgt(),d=rgt(n.element,{triggerEvent:function(n,t){return cy(n,t.target,function(i){return sst(u,n,t,t.target,i)})}}),f={debugInfo:i("real"),triggerEvent:function(n,t,i){cy(n,t,function(r){return sst(u,n,i,t,r)})},triggerFocus:function(n,t){hs(n).fold(function(){hf(n)},function(){cy(ou(),n,function(i){var r,f,e=u,s=ou(),h=i,c=est(r={originator:t,kill:o,prevent:o,target:n},f=n);return ost(e,s,r,f,c,h),!1})})},triggerEscape:function(n,t){f.triggerEvent("keydown",n.element,t.event)},getByUid:function(n){return s(n)},getByDom:function(n){return w(n)},build:br,addToGui:function(n){l(n)},removeFromGui:function(n){a(n)},addToWorld:function(n){r(n)},removeFromWorld:function(n){e(n)},broadcast:function(n){v(n)},broadcastOn:function(n,t){y(n,t)},broadcastEvent:function(n,t){p(n,t)},isConnected:ot},r=function(n){n.connect(f);vh(n.element)||(t.register(n),c(n.components(),r),f.triggerEvent(oh(),n.element,{target:n.element}))},e=function(n){vh(n.element)||(c(n.components(),e),t.unregister(n));n.disconnect()},l=function(t){yd(n,t,vi)},a=function(n){hd(n)},v=function(n){h({universal:!0,data:n})},y=function(n,t){h({universal:!1,channels:n,data:t})},p=function(n,i){var u,r,f=t.filter(n);return r={stop:function(){u.set(!0)},cut:o,isStopped:(u=k(!1)).get,isCut:lt,event:i,setSource:ba("Cannot set source of a broadcasted event"),getSource:ba("Cannot get source of a broadcasted event")},c(f,function(n){rw(n.descHandler)(r)}),r.isStopped()},s=function(n){return t.getById(n).fold(function(){return st.error(new Error('Could not find component with uid: "'+n+'" in system.'))},st.value)},w=function(n){var t=hs(n).getOr("not found");return s(t)};return r(n),{root:n,element:n.element,destroy:function(){d.unbind();ff(n.element)},add:l,remove:a,getByUid:s,getByDom:w,addToWorld:r,removeFromWorld:e,broadcast:v,broadcastOn:y,broadcastEvent:p}},bgt=e("readonly-mode"),kgt=e("edit-mode");var eo,hb=function(t){function f(n){u()?e(n):r.push(n)}var i=n.none(),r=[],u=function(){return i.isSome()},e=function(n){i.each(function(t){setTimeout(function(){n(t)},0)})};return t(function(t){u()||(i=n.some(t),c(r,e),r=[])}),{get:f,map:function(n){return hb(function(t){f(function(i){t(n(i))})})},isReady:u}},cb={nu:hb,pure:function(n){return hb(function(t){t(n)})}},oo=function(n){function t(t){n().then(t,ggt)}return{map:function(t){return oo(function(){return n().then(t)})},bind:function(t){return oo(function(){return n().then(function(n){return t(n).toPromise()})})},anonBind:function(t){return oo(function(){return n().then(function(){return t.toPromise()})})},toLazy:function(){return cb.nu(t)},toCached:function(){var t=null;return oo(function(){return t=null===t?n():t})},toPromise:n,get:t}},gs=function(n){return oo(function(){return new vw(n)})},unt=function(n){return oo(function(){return vw.resolve(n)})},hht=au([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),kr="data-"+e("position-y-fixed"),ee="data-"+e("y-property"),lb="data-"+e("scrolling"),cht="data-"+e("last-window-height"),ab=(eo=null,{animate:function(t,i,r,u,f,e){function o(n){s=!0;f(n)}function h(n){cr.clearInterval(eo);o(n)}var s=!1;cr.clearInterval(eo);eo=cr.setInterval(function(){var c=t(),f=c,l=i,e=r;(Math.abs(f-l)<=e?n.none():f<l?n.some(f+e):n.some(f-e)).fold(function(){cr.clearInterval(eo);o(i)},function(n){var r;u(n,h);s||((r=t())!==n||Math.abs(r-i)>Math.abs(c-i))&&(cr.clearInterval(eo),o(i))})},e)}}),ha="data-"+e("last-scroll-top");var snt=tinymce.util.Tools.resolve("tinymce.EditorManager"),yht="toReading",pht="toEditing";iat.add("mobile",function(t){return{getNotificationManagerImpl:function(){return{open:i({progressBar:{value:o},close:o,text:o,getEl:i(null),moveTo:o,moveRel:o,settings:{}}),close:o,reposition:o,getArgs:i({})}},renderUI:function(){function et(){t.fire("ScrollIntoView")}function lt(n,r,u,f){!1===f&&t.selection.collapse();var e,o,s,h=(e=r,o=u,{readOnly:(s=n.get()).backToMask.concat(e.get()),main:s.backToMask.concat(o.get())});i.setToolbarGroups(!0===f?h.readOnly:h.main);t.setMode(!0===f?"readonly":"design");t.fire(!0===f?yht:pht);i.updateMode(f)}function at(n,i){return t.on(n,i),{unbind:function(){t.off(n)}}}var ut,p,ft=t.getElement(),b={content:(ut=n.from(t.getParam("skin_url")).getOrThunk(function(){return snt.baseURL+"/skins/ui/oxide"}))+"/content.mobile.min.css",ui:ut+"/skin.mobile.min.css"},ot,s,r,y,d,l,g,st,ht,h,u,a,nt,v,tt,it,i,ct,rt,vt;return!1===t.getParam("skin")==0?(p=tat.DOM.styleSheetLoader,t.contentCSS.push(b.content),p.load(b.ui,vht(t)),t.on("remove",function(){return p.unload(b.ui)})):vht(t)(),i=se().os.isAndroid()?(ot=et,s=kst({classes:[e("android-container")]}),r=pot(),y=to(),d=wot(y),l=bot(),g=ust(o,ot),s.add(r.wrapper),s.add(l),s.add(g.component),{system:s,element:s.element,init:function(n){y.set(tgt(n))},exit:function(){y.run(function(n){n.exit();pt.remove(l,d)})},setToolbarGroups:function(n){var t=r.createGroups(n);r.setGroups(t)},setContextToolbar:function(n){var t=r.createGroups(n);r.setContextToolbar(t)},focusToolbar:function(){r.focus()},restoreToolbar:function(){r.restoreToolbar()},updateMode:function(n){kot(l,d,n,s.root)},socket:l,dropup:g}):(ht=et,h=kst({classes:[e("ios-container")]}),u=pot(),a=to(),nt=wot(a),v=bot(),tt=ust(function(){a.run(function(n){n.refreshStructure()})},ht),h.add(u.wrapper),h.add(v),h.add(tt.component),{system:h,element:h.element,init:function(n){a.set(function(){var t=gt("Getting IosWebapp schema",yst,n),r,u,i;return w(t.toolstrip,"width","100%"),w(t.container,"position","relative"),r=br(yot(function(){t.setReadOnly(t.readOnlyOnInit());i.enter()},t.translate)),t.alloy.add(r),u={show:function(){t.alloy.add(r)},hide:function(){t.alloy.remove(r)}},i=ont(t,u),{setReadOnly:t.setReadOnly,refreshStructure:i.refreshStructure,enter:i.enter,exit:i.exit,destroy:o}}())},exit:function(){a.run(function(n){pt.remove(v,nt);n.exit()})},setToolbarGroups:function(n){var t=u.createGroups(n);u.setGroups(t)},setContextToolbar:function(n){var t=u.createGroups(n);u.setContextToolbar(t)},focusToolbar:function(){u.focus()},restoreToolbar:function(){u.restoreToolbar()},updateMode:function(n){kot(v,nt,n,h.root)},socket:v,dropup:tt}),ct=f.fromDom(ft),st=i.system,yct(ct,(it=st).element),c(tu(it.element),function(n){it.getByDom(n).each(wh)}),rt=ft.ownerDocument.defaultView,vt=tet(rt,{onChange:function(){var n,t,r;i.system.broadcastOn([hy],{width:(n=rt,t=se().os.isiOS(),r=lw(n).isPortrait(),t&&!r?n.screen.height:n.screen.width)})},onReady:o}),t.on("init",function(){i.init({editor:{getFrame:function(){return f.fromDom(t.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:o}},onToReading:function(n){return at(yht,n)},onToEditing:function(n){return at(pht,n)},onScrollToCursor:function(n){return t.on("ScrollIntoView",function(t){n(t)}),{unbind:function(){t.off("ScrollIntoView");vt.destroy()}}},onTouchToolstrip:function(){l()},onTouchContent:function(){dh(f.fromDom(t.editorContainer.querySelector("."+e("toolbar")))).bind(function(n){return i.system.getByDom(n).toOptional()}).each(uk);i.restoreToolbar();l()},onTapContent:function(n){var r=n.target;"img"===ai(r)?(t.selection.select(r.dom),n.kill()):"a"===ai(r)&&i.system.getByDom(f.fromDom(t.editorContainer)).each(function(n){gh.isAlpha(n)&&function(n){var t=document.createElement("a"),i;t.target="_blank";t.href=n.href;t.rel="noreferrer noopener";i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);document.body.appendChild(t);t.dispatchEvent(i);document.body.removeChild(t)}(r.dom)})}},container:f.fromDom(t.editorContainer),socket:f.fromDom(t.contentAreaContainer),toolstrip:f.fromDom(t.editorContainer.querySelector("."+e("toolstrip"))),toolbar:f.fromDom(t.editorContainer.querySelector("."+e("toolbar"))),dropup:i.dropup,alloy:i.system,translate:o,setReadOnly:function(n){lt(p,y,v,n)},readOnlyOnInit:function(){return!1}});var n,h,r,u,s,l=function(){i.dropup.disappear(function(){i.system.broadcastOn([bg],{})})},b={label:"The first group",scrollable:!1,items:[ue("back",function(){t.selection.collapse();i.exit()},{},t)]},d={label:"Back to read only",scrollable:!1,items:[ue("readonly-back",function(){lt(p,y,v,!0)},{},t)]},g=gbt(i,t),a={label:"The extra group",scrollable:!1,items:[]},v=k([{label:"the action group",scrollable:!0,items:(n=g,s=t.getParam("toolbar",uat,"array"),h=(ho(s)?get:gft)(s),r={},di(h,function(t){var i=!wt(r,t)&&wt(n,t)&&n[t].isSupported()?[n[t].sketch()]:[];return r[t]=!0,i}))},a]),y=k([{label:"The read only mode group",scrollable:!0,items:[]},a]),p=k({backToMask:[b],backToReadOnly:[d]}),w=i;c(hi((u=t).formatter.get()),function(n){u.formatter.formatChanged(n,function(t){aht(w,n,t)})});c(["ul","ol"],function(n){u.selection.selectorChanged(n,function(t){aht(w,n,t)})})}),t.on("remove",function(){i.exit()}),t.on("detach",function(){var n=i.system;c(tu(n.element),function(t){n.getByDom(t).each(ph)});ff(n.element);i.system.destroy()}),{iframeContainer:i.socket.element.dom,editorContainer:i.element.dom}}}})}();!function(){"use strict";function ort(n){return function(t){return r=typeof(i=t),(null===i?"null":"object"==r&&(Array.prototype.isPrototypeOf(i)||i.constructor&&"Array"===i.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(i)||i.constructor&&"String"===i.constructor.name)?"string":r)===n;var i,r}}function srt(n){return function(t){return typeof t===n}}function hyt(n){return function(t){return n===t}}function hrt(n){return null==n}function cyt(n,t){if(ic(n)){for(var i=0,r=n.length;i<r;++i)if(!t(n[i]))return;return 1}}function c(){}function crt(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,r))}}function r(n){return function(){return n}}function ct(n){return n}function lyt(n,t){return n===t}function ue(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return function(){for(var u,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return u=i.concat(r),n.apply(null,u)}}function vp(n){return function(t){return!n(t)}}function lrt(n){return function(){throw new Error(n);}}function ok(n,t){var u={},r;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(u[i[r]]=n[i[r]]);return u}function pt(n,t,i){if(i||2===arguments.length)for(var u,r=0,f=t.length;r<f;r++)!u&&r in t||((u=u||Array.prototype.slice.call(t,0,r))[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))}function art(){return sk}function vyt(n){return n()}function yyt(n,t){return hgi.call(n,t)}function eo(n,t){for(var i=0,r=n.length;i<r;i++)if(t(n[i],i))return!0;return!1}function pyt(n,t){for(var r=[],i=0;i<n;i++)r.push(t(i));return r}function wyt(n,t){for(var u,r=[],i=0;i<n.length;i+=t)u=ak.call(n,i,i+t),r.push(u);return r}function s(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i);return u}function byt(n,t){for(var r,u=[],f=[],i=0,e=n.length;i<e;i++)r=n[i],(t(r,i)?u:f).push(r);return{pass:u,fail:f}}function fi(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i)&&u.push(r);return u}function iv(n,t,i){return function(n){for(var u,r=n.length-1;0<=r;r--)u=n[r],i=t(i,u,r)}(n),i}function vu(n,t,i){return k(n,function(n,r){i=t(i,n,r)}),i}function wi(t,i){return function(t,i,r){for(var f,u=0,e=t.length;u<e;u++){if(f=t[u],i(f,u))return n.some(f);if(r(f,u))break}return n.none()}(t,i,dt)}function rv(t,i){for(var r=0,u=t.length;r<u;r++)if(i(t[r],r))return n.some(r);return n.none()}function sr(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!ic(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);cgi.apply(i,n[t])}return i}function bi(n,t){return sr(s(n,t))}function uv(n,t){for(var i=0,r=n.length;i<r;++i)if(!0!==t(n[i],i))return!1;return!0}function yp(n){var t=ak.call(n,0);return t.reverse(),t}function vrt(n,t){return fi(n,function(n){return!cr(t,n)})}function kyt(n,t){for(var r,u={},i=0,f=n.length;i<f;i++)r=n[i],u[String(r)]=t(r,i);return u}function sgi(n){return[n]}function dyt(n,t){var i=ak.call(n,0);return i.sort(t),i}function gyt(t,i){return 0<=i&&i<t.length?n.some(t[i]):n.none()}function rc(n){return gyt(n,0)}function yrt(n){return gyt(n,n.length-1)}function oo(t,i){for(var u,r=0;r<t.length;r++)if(u=i(t[r],r),u.isSome())return u;return n.none()}function su(n,t){for(var r,u=lr(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r)}function hr(n,t){return ipt(n,function(n,i){return{k:i,v:t(n,i)}})}function hk(n,t){var i=[];return su(n,function(n,r){i.push(t(n,r))}),i}function prt(t,i){for(var u,f,e=lr(t),r=0,o=e.length;r<o;r++)if(u=e[r],f=t[u],i(f,u,t))return n.some(f);return n.none()}function ck(n){return hk(n,ct)}function b(t,i){return ni(t,i)?n.from(t[i]):n.none()}function ve(n,t){return ni(n,t)&&void 0!==n[t]&&null!==n[t]}function ss(n,t,i){return void 0===i&&(i=lyt),n.exists(function(n){return i(n,t)})}function sl(n){for(var i=[],r=function(n){i.push(n)},t=0;t<n.length;t++)n[t].each(r);return i}function lk(t,i){return t?n.some(i):n.none()}function npt(n,t,i){return""===t||n.length>=t.length&&n.substr(i,i+t.length)===t}function yu(n,t){return-1!==n.indexOf(t)}function wrt(n){return 0<n.length}function pp(n){return void 0!==n.style&&wf(n.style.getPropertyValue)}function wp(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}}function hs(n){return n.dom.nodeName.toLowerCase()}function pk(n){return function(t){return t.dom.nodeType===n}}function fh(n){var t,i=!1;return function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];return i||(i=!0,t=n.apply(null,u)),t}}function rpt(n,t){var i=String(t).toLowerCase();return wi(n,function(n){return n.search(i)})}function eh(n){return function(t){return yu(t,n)}}function pgi(n){return window.matchMedia(n).matches}function krt(n,t){var r=n.dom,i;if(1!==r.nodeType)return!1;if(i=r,void 0!==i.matches)return i.matches(t);if(void 0!==i.msMatchesSelector)return i.msMatchesSelector(t);if(void 0!==i.webkitMatchesSelector)return i.webkitMatchesSelector(t);if(void 0!==i.mozMatchesSelector)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");}function upt(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount}function ki(n,t){return n.dom===t.dom}function wk(n,t){return we().browser.isIE()?(i=n.dom,r=t.dom,u=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(i.compareDocumentPosition(r)&u)):(f=n.dom)!==(e=t.dom)&&f.contains(e);var i,r,u,f,e}function so(n){return h.fromDom(n.dom.ownerDocument)}function bk(n){return ggi(n)?n:so(n)}function drt(n){return h.fromDom(bk(n).dom.documentElement)}function kk(n){return h.fromDom(bk(n).dom.defaultView)}function gu(t){return n.from(t.dom.parentNode).map(h.fromDom)}function fpt(t){return n.from(t.dom.offsetParent).map(h.fromDom)}function ye(n){return s(n.dom.childNodes,h.fromDom)}function grt(t,i){var r=t.dom.childNodes;return n.from(r[i]).map(h.fromDom)}function ept(n,t){return{element:n,offset:t}}function opt(n,t){var i=ye(n);return 0<i.length&&t<i.length?ept(i[t],0):ept(n,t)}function nut(n){return nni(n)&&fo(n.dom.host)}function dk(n){return nut(n)?n:h.fromDom(bk(n).dom.body)}function wgi(n){return h.fromDom(n.dom.host)}function spt(n,t,i){if(!(pi(i)||lp(i)||uh(i)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",i,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,i+"")}function rt(n,t,i){spt(n.dom,t,i)}function gk(n,t){var i=n.dom;su(t,function(n,t){spt(i,t,n)})}function hu(n,t){var i=n.dom.getAttribute(t);if(null!==i)return i}function pe(t,i){return n.from(hu(t,i))}function hpt(n,t){var i=n.dom;return!(!i||!i.hasAttribute)&&i.hasAttribute(t)}function nu(n,t){n.dom.removeAttribute(t)}function tut(n,t,i){if(!pi(i))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",i,":: Element ",n),new Error("CSS value must be a string: "+i);pp(n)&&n.style.setProperty(t,i)}function cpt(n,t){pp(n)&&n.style.removeProperty(t)}function tt(n,t,i){tut(n.dom,t,i)}function oh(n,t){var i=n.dom;su(t,function(n,t){tut(i,t,n)})}function nd(n,t){var i=n.dom;su(t,function(n,t){n.fold(function(){cpt(i,t)},function(n){tut(i,t,n)})})}function bf(n,t){var i=n.dom,r=window.getComputedStyle(i).getPropertyValue(t);return""!==r||lo(n)?r:lwt(i,t)}function tu(t,i){var r=t.dom,u=lwt(r,i);return n.from(u).filter(function(n){return 0<n.length})}function lpt(n,t,i){var r=h.fromTag(n);return tt(r,t,i),tu(r,t).isSome()}function ti(n,t){cpt(n.dom,t);ss(pe(n,"style").map(ygi),"")&&nu(n,"style")}function fv(n){return n.dom.offsetWidth}function apt(n,t){function i(i){var r=t(i),u;return r<=0||null===r?(u=bf(i,n),parseFloat(u)||0):r}function r(n,t){return vu(t,function(t,i){var r=bf(n,i),u=void 0===r?0:parseInt(r,10);return isNaN(u)?t:t+u},0)}return{set:function(t,i){if(!uh(i)&&!i.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+i);var r=t.dom;pp(r)&&(r.style[n]=i+"px")},get:i,getOuter:i,aggregate:r,max:function(n,t,i){var u=r(n,i);return u<t?t-u:0}}}function cu(n){return eut.get(n)}function hl(n){return eut.getOuter(n)}function td(n,t){return void 0!==n?n:void 0!==t?t:0}function uc(n){var u=n.dom.ownerDocument,t=u.body,i=u.defaultView,r=u.documentElement;if(t===n.dom)return ci(t.offsetLeft,t.offsetTop);var f=td(null==i?void 0:i.pageYOffset,r.scrollTop),e=td(null==i?void 0:i.pageXOffset,r.scrollLeft),o=td(r.clientTop,t.clientTop),s=td(r.clientLeft,t.clientLeft);return out(n).translate(e-s,f-o)}function nf(n){return ud.get(n)}function bp(n){return ud.getOuter(n)}function vpt(t){function i(){return t.stopPropagation()}function r(){return t.preventDefault()}var u=crt(r,i);return{target:h.fromDom(function(t){var i,r;return eni()&&fo(t.target)&&(i=h.fromDom(t.target),co(i)&&oni(i)&&t.composed&&t.composedPath&&(r=t.composedPath(),r))?rc(r):n.from(t.target)}(t).getOr(t.target)),x:t.clientX,y:t.clientY,stop:i,prevent:r,kill:u,raw:t}}function ypt(n,t,i,r,u){var f,e,o=(f=i,e=r,function(n){f(n)&&e(vpt(n))});return n.dom.addEventListener(t,o,u),{unbind:ue(sni,n,t,o,u)}}function id(n,t){gu(n).each(function(i){i.dom.insertBefore(t.dom,n.dom)})}function bgi(t,i){n.from(t.dom.nextSibling).map(h.fromDom).fold(function(){gu(t).each(function(n){tf(n,i)})},function(n){id(n,i)})}function kgi(n,t){grt(n,0).fold(function(){tf(n,t)},function(i){n.dom.insertBefore(t.dom,i.dom)})}function ppt(n,t){k(t,function(t){tf(n,t)})}function iut(n){n.dom.textContent="";k(ye(n),function(n){ls(n)})}function dgi(n){var t,i=ye(n);0<i.length&&(t=n,k(i,function(n){id(t,n)}));ls(n)}function cs(n){var t=void 0!==n?n.dom:document,i=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return ci(i,r)}function wpt(n,t,i){var r=(void 0!==i?i.dom:document).defaultView;r&&r.scrollTo(n,t)}function bpt(n,t,i,r){return{x:n,y:t,width:i,height:r,right:n+i,bottom:t+r}}function kpt(t){var i=void 0===t?window:t,u=i.document,r=cs(h.fromDom(u)),f=void 0===i?window:i;return(we().browser.isFirefox()?n.none():n.from(f.visualViewport)).fold(function(){var n=i.document.documentElement,t=n.clientWidth,u=n.clientHeight;return bpt(r.left,r.top,t,u)},function(n){return bpt(Math.max(n.pageLeft,r.left),Math.max(n.pageTop,r.top),n.width,n.height)})}function rut(t){var i,r=cs(h.fromDom(document)),u=(i=hni).owner(t),f=vwt(i,u);return n.some(f).fold(ue(uc,t),function(n){var i=out(t),u=iv(n,function(n,t){var i=out(t);return{left:n.left+i.left,top:n.top+i.top}},{left:0,top:0});return ci(u.left+i.left+r.left,u.top+i.top+r.top)})}function cl(n){var t=rut(n),i=bp(n),r=hl(n);return lu(t.left,t.top,i,r)}function dpt(){return uut(0,0)}function gpt(n){function t(n){return function(){return i===n}}var i=n.current,r=n.version;return{current:i,version:r,isEdge:t("Edge"),isChrome:t("Chrome"),isIE:t("IE"),isOpera:t("Opera"),isFirefox:t(iwt),isSafari:t("Safari")}}function nwt(n){function t(n){return function(){return i===n}}var i=n.current,r=n.version;return{current:i,version:r,isWindows:t(rwt),isiOS:t("iOS"),isAndroid:t(uwt),isOSX:t("OSX"),isLinux:t("Linux"),isSolaris:t(fwt),isFreeBSD:t(ewt),isChromeOS:t(owt)}}function sut(n,t,i){return n.stype===ho.Error?t(n.serror):i(n.svalue)}function ywt(n){return{stype:ho.Value,svalue:n}}function pwt(n){return{stype:ho.Error,serror:n}}function wwt(n,t,i,r){return{tag:"field",key:n,newKey:t,presence:i,prop:r}}function hut(n,t,i){switch(n.tag){case"field":return t(n.key,n.newKey,n.presence,n.prop);case"custom":return i(n.newKey,n.instantiator)}}function bwt(n){return function(){for(var u,f,r,e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(0===t.length)throw new Error("Can't merge zero objects");for(u={},f=0;f<t.length;f++){e=t[f];for(r in e)ni(e,r)&&(u[r]=n(u[r],e[r]))}return u}}function ao(){return{tag:"required",process:{}}}function ov(n){return{tag:"defaultedThunk",process:n}}function fd(n){return ov(r(n))}function cut(){return{tag:"option",process:{}}}function lut(n){return{tag:"mergeWithThunk",process:n}}function aut(n){return tc(n)&&100<lr(n).length?" removed due to size":JSON.stringify(n,null,2)}function gp(n,t){return vl([{path:n,getErrorInfo:t}])}function sv(n){return{extract:function(t,i){return vni(n(i),function(n){return gp(t,r(n))})},toString:r("val")}}function kwt(n,t,i,r){return r(b(n,t).getOrThunk(function(){return i(n)}))}function cni(t,i,u,f,e){function o(n){return e.extract(i.concat([f]),n)}function s(t){return t.fold(function(){return al(n.none())},function(t){var r=e.extract(i.concat([f]),t);return yni(r,n.some)})}var h,c,l,a,v,y;switch(t.tag){case"required":return l=i,y=o,b(a=u,v=f).fold(function(){return n=v,t=a,gp(l,function(){return'Could not find valid *required* value for "'+n+'" in '+aut(t)});var n,t},y);case"defaultedThunk":return kwt(u,f,t.process,o);case"option":return s(b(u,f));case"defaultedOptionThunk":return c=t.process,s(b(h=u,f).map(function(n){return!0===n?c(h):n}));case"mergeWithThunk":return kwt(u,f,r({}),function(n){return o(ri(t.process(u),n))})}}function dwt(n){return{extract:function(t,i){return n().extract(t,i)},toString:function(){return n().toString()}}}function kf(n){var t=w(n),i=iv(n,function(n,t){return hut(t,function(t){var i;return ri(n,((i={})[t]=!0,i))},r(n))},{});return{extract:function(n,r){var u,f,e,o,s,h,l=fi(lp(r)?[]:lr((e=fo,o=f={},s=function(n,t){o[t]=n},h=c,su(r,function(n,t){(e(n,t)?s:h)(n,t)}),f)),function(n){return!ve(i,n)});return 0===l.length?t.extract(n,r):(u=l,gp(n,function(){return"There are unsupported fields: ["+u.join(", ")+"] specified"}))},toString:t.toString}}function fc(n){return{extract:function(t,i){var r=s(i,function(i,r){return n.extract(t.concat(["["+r+"]"]),i)});return fbt(r)},toString:function(){return"array("+n.toString()+")"}}}function gwt(n){return{extract:function(t,i){for(var r,f=[],u=0,e=n;u<e.length;u++){if(r=e[u].extract(t,i),r.stype===ho.Value)return r;f.push(r)}return fbt(f)},toString:function(){return"oneOf("+s(n,function(n){return n.toString()}).join(", ")+")"}}}function ed(n,t){return sv(function(i){var r=typeof i;return n(i)?al(i):vl("Expected type: "+t+" but got: "+r)})}function od(n,t){return{extract:function(i,r){return b(r,n).fold(function(){return t=n,gp(i,function(){return'Choice schema did not contain choice key: "'+t+'"'});var t},function(n){return u=i,e=r,b(o=t,f=n).fold(function(){return n=o,t=f,gp(u,function(){return'The chosen schema: "'+t+'" did not exist in branches: '+aut(n)});var n,t},function(n){return n.extract(u.concat(["branch: "+f]),e)});var u,e,o,f})},toString:function(){return"chooseOn("+n+"). Possible values: "+lr(t)}}}function nw(n){return sv(function(t){return n(t).fold(vl,al)})}function nbt(n,t){return r=function(t){return n(t).fold(pwt,ywt)},i=t,{extract:function(n,t){var u=lr(t),f=fc(sv(r)).extract(n,u);return ani(f,function(r){var u=s(r,function(n){return wwt(n,n,ao(),i)});return w(u).extract(n,t)})},toString:function(){return"setOf("+i.toString()+")"}};var r,i}function si(n,t,i){return lni((u=t.extract([n],r=i),pni(u,function(n){return{input:r,errors:n}})));var r,u}function vs(n){return n.fold(function(n){throw new Error(yl(n));},ct)}function rf(n,t,i){return vs(si(n,t,i))}function fe(n,t){return od(n,hr(t,w))}function tbt(n){return nw(function(t){return cr(n,t)?et.value(t):et.error('Unsupported value: "'+t+'", choose one of "'+n.join(", ")+'".')})}function u(n){return ar(n,n,ao(),vo())}function lf(n,t){return ar(n,n,ao(),t)}function d(n){return lf(n,fr)}function sd(n,t){return ar(n,n,ao(),tbt(t))}function uf(n){return lf(n,but)}function ec(n,t){return ar(n,n,ao(),w(t))}function ibt(n,t){return ar(n,n,ao(),put(t))}function ee(n,t){return ar(n,n,ao(),fc(t))}function wt(n){return ar(n,n,cut(),vo())}function oc(n,t){return ar(n,n,cut(),t)}function rbt(n){return oc(n,wut)}function ii(n){return oc(n,fr)}function tw(n){return oc(n,but)}function ubt(n,t){return oc(n,fc(t))}function df(n,t){return oc(n,w(t))}function i(n,t){return ar(n,n,fd(t),vo())}function ke(n,t,i){return ar(n,n,fd(t),i)}function vut(n,t){return ke(n,t,wut)}function hv(n,t){return ke(n,t,fr)}function sc(n,t,i){return ke(n,t,tbt(i))}function ur(n,t){return ke(n,t,cd)}function ei(n,t){return ke(n,t,but)}function hd(n,t,i){return ke(n,t,fc(i))}function yut(n,t,i){return ke(n,t,w(i))}function p(n){var t=n;return{get:function(){return t},set:function(n){t=n}}}function oe(n){if(!ic(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],i={};return k(n,function(r,u){var o=lr(r),f,e;if(1!==o.length)throw new Error("one and only one name per case");if(f=o[0],e=r[f],void 0!==i[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!ic(e))throw new Error("case arguments must be an array");t.push(f);i[f]=function(){for(var o,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(o=i.length,o!==e.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+e.length+" ("+e+"), got "+o);return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+t.length);return t[u].apply(null,i)},match:function(n){var r=lr(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!uv(t,function(n){return cr(r,n)}))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[f].apply(null,i)},log:function(n){console.log(n,{constructors:t,constructor:f,params:i})}}}}),i}function hh(n,t){return(i={})[n]=t,i;var i}function cv(n){return t={},k(n,function(n){t[n.key]=n.value}),t;var t}function sbt(n){return wf(n)?n:dt}function hbt(t,i,r){for(var u=t.dom,f=sbt(r);u.parentNode;){var u=u.parentNode,e=h.fromDom(u),o=i(e);if(o.isSome())return o;if(f(e))break}return n.none()}function kut(t,i,r){var f=i(t),u=sbt(r);return f.orThunk(function(){return u(t)?n.none():hbt(t,i,u)})}function cbt(n,t){return ki(n.element,t.event.target)}function lv(n){if(!ve(n,"can")&&!ve(n,"abort")&&!ve(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return t(t({},utr),n)}function di(n){return r("alloy."+n)}function at(n,t){vft(n,n.element,t,{})}function y(n,t,i){vft(n,n.element,t,i)}function pl(n){at(n,gf())}function dut(n,t,i){vft(n,t,i,{})}function lbt(n,t,i,r){n.getSystem().triggerEvent(i,t,r.event)}function abt(n,t){return{key:n,value:lv({abort:t})}}function vbt(n){return{key:n,value:lv({run:function(n,t){t.event.prevent()}})}}function f(n,t){return{key:n,value:lv({run:t})}}function gut(n,t,i){return{key:n,value:lv({run:function(n,r){t.apply(void 0,[n,r].concat(i))}})}}function ld(n){return function(t){return{key:n,value:lv({run:function(n,i){cbt(n,i)&&t(n,i)}})}}}function av(n,t,i){var r,u=t.partUids[i];return f(r=n,function(n,t){n.getSystem().getByUid(u).each(function(n){lbt(n,n.element,r,t)})})}function nft(n,t){return f(n,function(n,i){var r=i.event,u=n.getSystem().getByDom(r.target).getOrThunk(function(){return kut(r.target,function(t){return n.getSystem().getByDom(t).toOptional()},dt).getOr(n)});t(n,u,i)})}function wl(n){return f(n,function(n,t){t.cut()})}function vv(n,t){return ld(n)(t)}function tft(n){return n.dom.innerHTML}function iw(n,t){var i,r,u=so(n).dom,f=h.fromDom(u.createDocumentFragment());ppt(f,(i=t,(r=(u||document).createElement("div")).innerHTML=i,ye(h.fromDom(r))));iut(n);tf(n,f)}function hc(n){if(nut(n))return"#shadow-root";var i=h.fromDom(n.dom.cloneNode(!1)),t=h.fromTag("div"),r=h.fromDom(i.dom.cloneNode(!0));return tf(t,r),tft(t)}function l(n){var t=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++btr+String(t)}function rw(t){var i=co(t)?t.dom[ikt]:null;return n.from(i)}function ad(n){function u(t){return"The component must be in a context to execute: "+t+(n?"\n"+hc(n().element)+" is not in context.":"")}function t(n){return function(){throw new Error(u(n));}}function i(n){return function(){console.warn(u(n))}}return{debugInfo:r("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),isConnected:dt}}function ift(n,t){var i=n.toString(),r=i.indexOf(")")+1,u=i.indexOf("("),f=i.substring(u+1,r-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:t,parameters:pft(f)}},n}function ybt(n){return hh(rkt,n)}function vd(n){return t=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return n.apply(void 0,pt([t.getApis(),t],r,!1))},r=(i=n.toString()).indexOf(")")+1,u=i.indexOf("("),f=i.substring(u+1,r-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:pft(f.slice(1))}},t;var t,i,r,u,f}function pbt(n,t){var i={};return su(n,function(n,r){su(n,function(n,u){var f=b(i,u).getOr([]);i[u]=f.concat([t(r,n)])})}),i}function yo(n){return{classes:ap(n.classes)?[]:n.classes,attributes:ap(n.attributes)?{}:n.attributes,styles:ap(n.styles)?{}:n.styles}}function rft(n){return n.cHandler}function dni(n,t){return{name:n,handler:t}}function gni(n,t,i){var r=t[i];return r?function(n,t,i){try{var r=dyt(t,function(t,r){var e=t.name,o=r.name,u=i.indexOf(e),f=i.indexOf(o);if(-1===u)throw new Error("The ordering for "+n+" does not have an entry for "+e+".\nOrder specified: "+JSON.stringify(i,null,2));if(-1===f)throw new Error("The ordering for "+n+" does not have an entry for "+o+".\nOrder specified: "+JSON.stringify(i,null,2));return u<f?-1:f<u?1:0});return et.value(r)}catch(t){return et.error([t])}}("Event: "+i,n,r).map(function(n){var t,i,r,u,f=s(n,function(n){return n.handler});return{can:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return vu(i,function(n,i){return n&&i.can.apply(void 0,t)},!0)},abort:(r=i=t=f,u=function(n){return n.abort},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return vu(r,function(n,i){return n||u(i).apply(void 0,t)},!1)}),run:function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];k(t,function(n){n.run.apply(void 0,i)})}}}):et.error(["The event ("+i+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(s(n,function(n){return n.name}),null,2)])}function uft(n,t){var i=hu(n,t);return void 0===i||""===i?[]:i.split(" ")}function yd(n){return void 0!==n.dom.classList}function pr(n,t){var i,r,u;yd(n)?n.dom.classList.add(t):(r=t,u=uft(i=n,"class").concat([r]),rt(i,"class",u.join(" ")))}function nr(n,t){var i,r,u,f;yd(n)?n.dom.classList.remove(t):(u=t,0<(f=fi(uft(r=n,"class"),function(n){return n!==u})).length?rt(r,"class",f.join(" ")):nu(r,"class"));0===(yd(i=n)?i.dom.classList:uft(i,"class")).length&&nu(i,"class")}function se(n,t){return yd(n)&&n.dom.classList.contains(t)}function bl(n,t){k(t,function(t){pr(n,t)})}function ys(n,t){k(t,function(t){nr(n,t)})}function kl(n){return n.dom.value}function pd(n,t){if(void 0===t)throw new Error("Value.set was undefined");n.dom.value=t}function ntr(n){var t,f,e,o,h=(t=b(n,"behaviours").getOr({}),bi(lr(t),function(n){var i=t[n];return fo(i)?[i.me]:[]}));return f=n,o=s(e=h,function(n){return df(n.name(),[u("config"),i("state",po)])}),{list:e,data:hr(si("component.behaviours",w(o),f.behaviours).fold(function(n){throw new Error(yl(n)+"\nComplete spec:\n"+JSON.stringify(f,null,2));},ct),function(n){return r(n.map(function(n){return{config:n.config,state:n.state.init(n.config)}}))})}}function ttr(n,i,r){var f,u,o=t(t({},(f=n).dom),{uid:f.uid,domChildren:s(f.components,function(n){return n.element})}),h=n.domModification.fold(function(){return yo({})},yo),e=0<i.length?function(n,i,r,u){function o(n){return iv(n,function(n,i){return t(t({},i.modification),n)},{})}var e=t({},i),f;return k(r,function(t){e[t.name()]=t.exhibit(n,u)}),f=pbt(e,function(n,t){return{name:n,modification:t}}),yo({classes:iv(f.classes,function(n,t){return t.modification.concat(n)},[]),attributes:o(f.attributes),styles:o(f.styles)})}(r,{"alloy.base.modification":h},i,o):h;return t(t({},u=o),{attributes:t(t({},u.attributes),e.attributes),styles:t(t({},u.styles),e.styles),classes:u.classes.concat(e.classes)})}function itr(n,i,r){var f,e,o,s,u,h={"alloy.base.behaviour":n.events},c=n.eventOrder;return e=r,o=i,f=pbt(t(t({},h),(s=e,u={},k(o,function(n){u[n.name()]=n.handlers(s)}),u)),dni),iir(f,c).getOrDie()}function rtr(n){function nt(){return v}var r,u,f,e,o,i,c,a,l,v,y=nir(n),k=y.events,w=ok(y,["events"]),d=s(b(w,"components").getOr([]),pu),g=t(t({},w),{events:t(t({},wtr),k),components:d});return et.value((u=p(tir),f=vs(si("custom.definition",rir,r=g)),e=ntr(r),o=e.list,i=e.data,c=function(n){var t=h.fromTag(n.tag),i;return gk(t,n.attributes),bl(t,n.classes),oh(t,n.styles),n.innerHtml.each(function(n){return iw(t,n)}),i=n.domChildren,ppt(t,i),n.value.each(function(n){pd(t,n)}),n.uid,yft(t,n.uid),t}(ttr(f,o,i)),a=itr(f,o,i),l=p(f.components),v={uid:r.uid,getSystem:u.get,config:function(n){var t=i;return(wf(t[n.name()])?t[n.name()]:function(){throw new Error("Could not find "+n.name()+" in "+JSON.stringify(r,null,2));})()},hasConfigured:function(n){return wf(i[n.name()])},spec:r,readState:function(n){return i[n]().map(function(n){return n.state.readState()}).getOr("not enabled")},getApis:function(){return f.apis},connect:function(n){u.set(n)},disconnect:function(){u.set(ad(nt))},element:c,syncComponents:function(){var n=bi(ye(c),function(n){return u.get().getByDom(n).fold(function(){return[]},sgi)});l.set(n)},components:l.get,events:a}))}function dl(n){var t=h.fromText(n);return wft({element:t})}function ukt(t,i,r,u,f){return t(r,u)?n.some(r):wf(f)&&f(r)?n.none():i(r,u,f)}function fkt(t,i,r){for(var f,u=t.dom,e=wf(r)?r:dt;u.parentNode;){if(u=u.parentNode,f=h.fromDom(u),i(f))return n.some(f);if(e(f))break}return n.none()}function ekt(n,t,i){return ukt(function(n,t){return t(n)},fkt,n,t,i)}function okt(n,t,i){return ekt(n,t,i).isSome()}function ng(n,t,i){return fkt(n,function(n){return krt(n,t)},i)}function er(t,i){return r=i,upt(u=void 0===t?document:t.dom)?n.none():n.from(u.querySelector(r)).map(h.fromDom);var r,u}function wo(n,t,i){return ukt(krt,ng,n,t,i)}function skt(){var n=l("aria-owns");return{id:n,link:function(t){rt(t,"aria-owns",n)},unlink:function(n){nu(n,"aria-owns")}}}function bft(t,i,r){var f,o,u,h,e,c;switch(b(kft.get(),t).orThunk(function(){return oo(lr(kft.get()),function(i){return-1<t.indexOf(i)?n.some(kft.get()[i]):n.none()})}).getOr(bv.NORMAL)){case bv.NORMAL:return r(eir());case bv.LOGGING:return e=(f=t,o=i,u=[],h=(new Date).getTime(),{logEventCut:function(n,t,i){u.push({outcome:"cut",target:t,purpose:i})},logEventStopped:function(n,t,i){u.push({outcome:"stopped",target:t,purpose:i})},logNoParent:function(n,t,i){u.push({outcome:"no-parent",target:t,purpose:i})},logEventNoHandlers:function(n,t){u.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(n,t,i){u.push({outcome:"response",purpose:i,target:t})},write:function(){var n=(new Date).getTime();cr(["mousemove","mouseover","mouseout",dd()],f)||console.log(f,{event:f,time:n-h,target:o.dom,sequence:s(u,function(n){return cr(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+hc(n.target)+")":n.outcome})})}}),c=r(e),e.write(),c;case bv.STOP:return!0}}function tg(){return ec("markers",[u("backgroundMenu")].concat(ckt()).concat(dft()))}function ia(n){return ec("markers",s(n,u))}function ig(n,t,i){return void 0!==(r=new Error).stack&&wi(r.stack.split("\n"),function(n){return 0<n.indexOf("alloy")&&!eo(fir,function(t){return-1<n.indexOf(t)})}).getOr(hkt),ar(t,t,i,nw(function(n){return et.value(function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n.apply(void 0,i)})}));var r}function vt(n){return ig(0,n,fd(c))}function af(t){return ig(0,t,fd(n.none))}function ra(n){return ig(0,n,ao())}function gft(n){return ig(0,n,ao())}function ui(n,t){return ff(n,r(t))}function lkt(n){return ff(n,ct)}function dr(n,t,i,r,u,f,e,o){return{x:n,y:t,bubble:i,direction:r,placement:u,restriction:f,label:e+"-"+u,alwaysFit:o=void 0!==o&&o}}function dv(n,t,i,r){var u=n+t;return r<u?i:u<i?r:u}function gr(n,t){return kyt(["left","right","top","bottom"],function(i){return b(t,i).map(function(t){return function(n){switch(t){case 1:return n.x;case 0:return n.x+n.width;case 2:return n.y;case 3:return n.y+n.height}}(n)})})}function akt(n,t){return n.x+n.width/2-t.width/2}function vkt(n,t){return n.x+n.width-t.width}function net(n,t){return n.y-t.height}function tet(n){return n.y+n.height}function ykt(n,t){return n.y+n.height/2-t.height/2}function iet(n,t,i){return dr(n.x+n.width,ykt(n,t),i.east(),sdt(),"east",gr(n,{left:0}),pc)}function ret(n,t,i){return dr(n.x-t.width,ykt(n,t),i.west(),hdt(),"west",gr(n,{right:1}),pc)}function pkt(){return[iu,ru,ef,of,uu,vf,iet,ret]}function wkt(){return[ru,iu,of,ef,uu,vf,iet,ret]}function bkt(){return[ef,of,iu,ru,vf,uu]}function kkt(){return[of,ef,ru,iu,vf,uu]}function uet(){return[iu,ru,ef,of,uu,vf]}function fet(){return[ru,iu,of,ef,uu,vf]}function eet(n,t,i){return ytr(function(r){i(r,n,t)})}function oir(n){return{key:n,value:void 0}}function wr(n){var i,r,u,f,e,o,s,h,t=rf("Creating behaviour: "+n.name,lir,n);return i=t.fields,r=t.name,u=t.active,f=t.apis,e=t.extra,o=t.state,s=kf(i),h=df(r,[oc("config",kf(i))]),cdt(s,h,r,u,f,e,o)}function dkt(n){var i,t=rf("Creating behaviour: "+n.name,air,n),u=fe(t.branchKey,t.branches),r=t.name,f=t.active,e=t.apis,o=t.extra,s=t.state,h=df(r,[oc("config",i=u)]);return cdt(i,h,r,f,e,o,s)}function gkt(){return h.fromDom(document)}function ah(n){return n.dom.focus()}function ndt(n){var t=be(n).dom;return n.dom===t.activeElement}function vh(t){return void 0===t&&(t=gkt()),n.from(t.dom.activeElement).map(h.fromDom)}function bo(n){return vh(be(n)).filter(function(t){return n.dom.contains(t.dom)})}function tdt(t,i){var r=be(i),u=vh(r).bind(function(t){function r(n){return ki(t,n)}var u,f;return r(i)?n.some(i):(u=r,(f=function(t){for(var r,e,i=0;i<t.childNodes.length;i++){if(r=h.fromDom(t.childNodes[i]),u(r))return n.some(r);if(e=f(t.childNodes[i]),e.isSome())return e}return n.none()})(i.dom))}),f=t(i);return u.each(function(n){vh(r).filter(function(t){return ki(t,n)}).fold(function(){ah(n)},c)}),f}function ko(n,t,i,r,u){function f(n){return n+"px"}return{position:n,left:t.map(f),top:i.map(f),right:r.map(f),bottom:u.map(f)}}function idt(i,r){var u;nd(i,t(t({},u=r),{position:n.some(u.position)}))}function rdt(t,i,r,u,f,e){var c=i.rect,v=c.x-r,y=c.y-u,p=f-(v+c.width),w=e-(y+c.height),s=n.some(v),h=n.some(y),l=n.some(p),a=n.some(w),o=n.none();return i.direction.fold(function(){return ko(t,s,h,o,o)},function(){return ko(t,o,h,l,o)},function(){return ko(t,s,o,o,a)},function(){return ko(t,o,o,l,a)},function(){return ko(t,s,h,o,o)},function(){return ko(t,s,o,o,a)},function(){return ko(t,s,h,o,o)},function(){return ko(t,o,h,l,o)})}function udt(t,i){return t.fold(function(){var t=i.rect;return ko("absolute",n.some(t.x),n.some(t.y),n.none(),n.none())},function(n,t,r,u){return rdt("absolute",i,n,t,r,u)},function(n,t,r,u){return rdt("fixed",i,n,t,r,u)})}function oet(n,t){var i=ue(rut,t),r=n.fold(i,i,function(){var n=cs();return rut(t).translate(-n.left,-n.top)}),u=bp(t),f=hl(t);return lu(r.left,r.top,u,f)}function adt(n){return pe(n,pet)}function pir(n,t,i,u){function ft(n,t){return ei[n].map(function(i){var r="top"===n||"bottom"===n,f=r?vt.top:vt.left,u=("left"===n||"top"===n?Math.max:Math.min)(i,t)+f;return r?ce(u,e.y,e.bottom):ce(u,e.x,e.right)}).getOr(t)}var c,l,y,p,a,v,w,b,kt,dt,et,ot,st,ht,gt,ni,ct,lt,ti,ii,k,d,ri,ui,at,g,nt,tt,s,fi,it,h,e,ei,vt,yt,pt,oi,si,wt=n.bubble,bt=wt.offset,o=(e=u,ei=n.restriction,vt=bt,yt=ft("left",e.x),pt=ft("top",e.y),oi=ft("right",e.right),si=ft("bottom",e.bottom),lu(yt,pt,oi-yt,si-pt)),vi=n.x+bt.left,hi=n.y+bt.top,f=lu(vi,hi,t,i),rt=(c=o.x,l=o.y,y=o.right,p=o.bottom,a=f.x,v=f.y,w=f.right,b=f.bottom,kt=f.width,dt=f.height,{originInBounds:c<=a&&a<=y&&l<=v&&v<=p,sizeInBounds:w<=y&&c<=w&&b<=p&&l<=b,visibleW:Math.min(kt,c<=a?y-a:w-c),visibleH:Math.min(dt,l<=v?p-v:b-l)}),yi=rt.visibleW,pi=rt.visibleH,ci=rt.originInBounds&&rt.sizeInBounds,ut=ci?f:(et=o.x,ot=o.y,st=o.right,ht=o.bottom,gt=f.x,ni=f.y,ct=f.width,lt=f.height,ti=Math.max(et,st-ct),ii=Math.max(ot,ht-lt),k=ce(gt,et,ti),d=ce(ni,ot,ii),ri=Math.min(k+ct,st)-k,ui=Math.min(d+lt,ht)-d,lu(k,d,ri,ui)),wi=0<ut.width&&0<ut.height,li=(at=n.direction,tt=r((g=ut).bottom-(nt=u).y),s=r(nt.bottom-g.y),fi=at.fold(s,s,tt,tt,s,tt,s,s),it=r(g.right-nt.x),h=r(nt.right-g.x),{maxWidth:at.fold(h,it,h,it,h,h,h,it),maxHeight:fi}),ai={rect:ut,maxHeight:li.maxHeight,maxWidth:li.maxWidth,direction:n.direction,placement:n.placement,classes:{on:wt.classesOn,off:wt.classesOff},layout:n.label,testY:hi};return ci||n.alwaysFit?eg.fit(ai):eg.nofit(ai,yi,pi,wi)}function vet(t){function r(){return i.get().each(t)}var i=p(n.none());return{clear:function(){r();i.set(n.none())},isSet:function(){return i.get().isSome()},get:function(){return i.get()},set:function(t){r();i.set(n.some(t))}}}function vdt(){return vet(function(n){return n.destroy()})}function gv(){return vet(function(n){return n.unbind()})}function vi(){var n=vet(c);return t(t({},n),{on:function(t){return n.get().each(t)}})}function tr(n,t,i){return ypt(n,t,wdt,i,!1)}function ug(n,t,i){return ypt(n,t,wdt,i,!0)}function wir(n,t){function u(t){var i,r=null!==(i=t.raw.pseudoElement)&&void 0!==i?i:"";return ki(t.target,n)&&!wrt(r)&&cr(kdt,t.raw.propertyName)}function i(i){var f;(hrt(i)||u(i))&&(o.clear(),s.clear(),!hrt(f=null==i?void 0:i.raw.type)&&f!==sw()||(clearTimeout(r),nu(n,og),ys(n,t.classes)))}function f(){o.set(tr(n,sw(),i));s.set(tr(n,otr(),i))}function a(n){var t=bf(h,n);return fi(pi(t)?t.split(/\s*,\s*/):[],wrt)}function v(n){if(pi(n)&&/^[\d.]+/.test(n)){var t=parseFloat(n);return yk(n,"ms")?t:1e3*t}return 0}var r,e,o=gv(),s=gv(),h,c,l;"ontransitionstart"in n.dom?e=tr(n,str(),function(n){u(n)&&(e.unbind(),f())}):f();l=(h=n,c=a("transition-delay"),vu(a("transition-duration"),function(n,t,i){var r=v(c[i])+v(t);return Math.max(n,r)},0));requestAnimationFrame(function(){r=setTimeout(i,l+17);rt(n,og,r)})}function bir(n,i,r,u,f,e){function b(n){return parseFloat(n).toFixed(3)}var h,c,l,a,s,o,v,y,p,w=(h=u,c=f,e.exists(function(n){var t=h.mode;return"all"===t||n[t]!==c[t]}));w||(p=n,uv(u.classes,function(n){return se(p,n)}))?(tt(n,"position",r.position),l=oet(i,n),a=udt(i,t(t({},f),{rect:l})),s=kyt(kdt,function(n){return a[n]}),y=r,prt(s,function(n,t){var r,u,i,f=y[t].map(b),e=n.map(b);return!vk(r=f,u=e,i=void 0===i?lyt:i).getOr(r.isNone()&&u.isNone())}).isSome()&&(nd(n,s),w&&(bl(o=n,(v=u).classes),pe(o,og).each(function(n){clearTimeout(parseInt(n,10));nu(o,og)}),wir(o,v)),fv(n))):ys(n,u.classes)}function kir(n,t,i,u){function p(n,t,i,u,s){var c=pir(n(e,f,l,h,o),a,v,o);return c.fold(r(c),function(n,r,f,e){return(s===e?u<f||i<r:!s&&e)?c:eg.nofit(t,i,u,s)})}ti(t,"max-height");ti(t,"max-width");var s,h,c,e,f,l,o,a,v,y={width:bp(s=t),height:hl(s)};return h=t,c=u.preference,e=n,f=y,l=i,o=u.bounds,a=f.width,v=f.height,vu(c,function(n,t){var i=ue(p,t);return n.fold(r(n),i)},eg.nofit({rect:e,maxHeight:f.height,maxWidth:f.width,direction:rg(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:e.y},-1,-1,!1)).fold(ct,ct)}function ydt(n,t){var i=n,r=Math.floor(t);tt(i,"max-height",eut.max(i,r,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"])+"px")}function pdt(n,t,i){return void 0===n[t]?i:n[t]}function ny(n,t,i,r){function o(n){return b(i,n).getOr([])}function u(n,t,i){var r=vrt(irr,i);return{offset:ci(n,t),classesOn:bi(i,o),classesOff:bi(r,o)}}var f=n*(r=void 0===r?1:r),e=t*r;return{southeast:function(){return u(-n,t,["top","alignLeft"])},southwest:function(){return u(n,t,["top","alignRight"])},south:function(){return u(-n/2,t,["top","alignCentre"])},northeast:function(){return u(-n,-t,["bottom","alignLeft"])},northwest:function(){return u(n,-t,["bottom","alignRight"])},north:function(){return u(-n/2,-t,["bottom","alignCentre"])},east:function(){return u(n,-t/2,["valignCentre","left"])},west:function(){return u(-n,-t/2,["valignCentre","right"])},insetNortheast:function(){return u(f,e,["top","alignLeft","inset"])},insetNorthwest:function(){return u(-f,e,["top","alignRight","inset"])},insetNorth:function(){return u(-f/2,e,["top","alignCentre","inset"])},insetSoutheast:function(){return u(f,-e,["bottom","alignLeft","inset"])},insetSouthwest:function(){return u(-f,-e,["bottom","alignRight","inset"])},insetSouth:function(){return u(-f/2,-e,["bottom","alignCentre","inset"])},insetEast:function(){return u(-f,-e/2,["valignCentre","right","inset"])},insetWest:function(){return u(f,-e/2,["valignCentre","left","inset"])}}}function fg(){return ny(0,0,{})}function yet(n,t){return function(i){return"rtl"===rrr(i)?t:n}}function urr(n){return okt(n,function(n){return co(n)&&hu(n,"data-alloy-vertical-dir")===bs.BottomToTop})}function wc(){return df("layouts",[u("onLtr"),u("onRtl"),wt("onBottomLtr"),wt("onBottomRtl")])}function hg(n,t,i,r,u,f,e){var o=e.map(urr).getOr(!1),s=t.layouts.map(function(t){return t.onLtr(n)}),h=t.layouts.map(function(t){return t.onRtl(n)});return yet(o?t.layouts.bind(function(t){return t.onBottomLtr.map(function(t){return t(n)})}).or(s).getOr(u):s.getOr(i),o?t.layouts.bind(function(t){return t.onBottomRtl.map(function(t){return t(n)})}).or(h).getOr(f):h.getOr(r))(n)}function frr(n){return n.fold(ct,function(n,t,i){return n.translate(-t,-i)})}function err(n){return n.fold(ct,ct)}function ddt(n){return vu(n,function(n,t){return n.translate(t.left,t.top)},ci(0,0))}function gdt(n){return ddt(s(n,err))}function ngt(t,i,r){var f,e,u=cs(so(t.element)),o=(f=t,e=kk(r.root).dom,n.from(e.frameElement).map(h.fromDom).filter(function(n){return ki(so(n),so(f.element))}).map(uc).getOr(u));return crr(o,u.left,u.top)}function tgt(t,i,r,u){var f=hrr(ci(t,i));return n.some({point:f,width:r,height:u})}function igt(t,i,r,u,f){return t.map(function(t){var e=[i,t.point],o=u.fold(function(){return gdt(e)},function(){return gdt(e)},function(){return ddt(s(e,frr))}),l={x:o.left,y:o.top,width:t.width,height:t.height},h=(r.showAbove?bkt:uet)(),c=(r.showAbove?kkt:fet)(),a=hg(f,r,h,c,h,c,n.none());return sg({anchorBox:l,bubble:r.bubble.getOr(fg()),overrides:r.overrides,layouts:a,placer:n.none()})})}function rgt(n,t,i){var r,u=n.document.createRange(),f=u;return t.fold(function(n){f.setStartBefore(n.dom)},function(n,t){f.setStart(n.dom,t)},function(n){f.setStartAfter(n.dom)}),r=u,i.fold(function(n){r.setEndBefore(n.dom)},function(n,t){r.setEnd(n.dom,t)},function(n){r.setEndAfter(n.dom)}),u}function ugt(n,t,i,r,u){var f=n.document.createRange();return f.setStart(t.dom,i),f.setEnd(r.dom,u),f}function fgt(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}}function egt(n,t,i){return t(h.fromDom(i.startContainer),i.startOffset,h.fromDom(i.endContainer),i.endOffset)}function ogt(t,i){return u=t,o=i.match({domRange:function(t){return{ltr:r(t),rtl:n.none}},relative:function(t,i){return{ltr:fh(function(){return rgt(u,t,i)}),rtl:fh(function(){return n.some(rgt(u,i,t))})}},exact:function(t,i,r,f){return{ltr:fh(function(){return ugt(u,t,i,r,f)}),rtl:fh(function(){return n.some(ugt(u,r,f,t,i))})}}}),((f=(e=o).ltr()).collapsed?e.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return yw.rtl(h.fromDom(n.endContainer),n.endOffset,h.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return egt(0,yw.ltr,f)}):egt(0,yw.ltr,f)).match({ltr:function(n,i,r,u){var f=t.document.createRange();return f.setStart(n.dom,i),f.setEnd(r.dom,u),f},rtl:function(n,i,r,u){var f=t.document.createRange();return f.setStart(r.dom,u),f.setEnd(n.dom,i),f}});var u,e,f,o}function hgt(n){return wti.getOption(n)}function vrr(n){return hgt(n).filter(function(n){return 0!==n.trim().length||-1<n.indexOf("")}).isSome()||cr(nur,hs(n))}function wu(n,t){return upt(i=void 0===n?document:n.dom)?[]:s(i.querySelectorAll(t),h.fromDom);var i}function cgt(t){if(0<t.rangeCount){var i=t.getRangeAt(0),r=t.getRangeAt(t.rangeCount-1);return n.some(bet(h.fromDom(i.startContainer),i.startOffset,h.fromDom(r.endContainer),r.endOffset))}return n.none()}function yrr(t){if(null===t.anchorNode||null===t.focusNode)return cgt(t);var i,r,u,f,o,s,c,l,e,a,v,y=h.fromDom(t.anchorNode),p=h.fromDom(t.focusNode);return i=y,r=t.anchorOffset,u=p,f=t.focusOffset,s=r,c=u,l=f,(e=so(o=i).dom.createRange()).setStart(o.dom,s),e.setEnd(c.dom,l),a=e,v=ki(i,u)&&r===f,a.collapsed&&!v?n.some(bet(y,t.anchorOffset,p,t.focusOffset)):cgt(t)}function lgt(t,i){var u,r,f=(u=ogt(t,i)).getClientRects();return 0<(r=0<f.length?f[0]:u.getBoundingClientRect()).width||0<r.height?n.some(r).map(fgt):n.none()}function lg(n,t){return{element:n,offset:t}}function agt(n,t){return(ll(n)?lg:function(n,t){var i=ye(n),r;return 0===i.length?lg(n,t):t<i.length?lg(i[t],0):(r=i[i.length-1],lg(r,(ll(r)?wti.get(r):ye(r)).length))})(n,t)}function vgt(t,i){return i.getSelection.getOrThunk(function(){return function(){return n.from(t.getSelection()).filter(function(n){return 0<n.rangeCount}).bind(yrr)}})().map(function(n){var t=agt(n.start,n.soffset),i=agt(n.finish,n.foffset);return vw.range(t.element,t.offset,i.element,i.offset)})}function ygt(n){return n.x+n.width}function pgt(n,t){return n.x-t.width}function wgt(n,t){return n.y-t.height+n.height}function bgt(n,t,i){return dr(ygt(n),n.y,i.southeast(),rg(),"southeast",gr(n,{left:0,top:2}),wg)}function kgt(n,t,i){return dr(pgt(n,t),n.y,i.southwest(),set(),"southwest",gr(n,{right:1,top:2}),wg)}function dgt(n,t,i){return dr(ygt(n),wgt(n,t),i.northeast(),het(),"northeast",gr(n,{left:0,bottom:3}),wg)}function ggt(n,t,i){return dr(pgt(n,t),wgt(n,t),i.northwest(),cet(),"northwest",gr(n,{right:1,bottom:3}),wg)}function nnt(){return[bgt,kgt,dgt,ggt]}function tnt(){return[kgt,bgt,ggt,dgt]}function prr(n,t,i,r,u,f,e){var s,a,v,y,p,w,h,b,o,k,d,g,l,nt,tt={anchorBox:i.anchorBox,origin:t};return s=tt,a=u.element,v=i.bubble,y=i.layouts,p=f,w=r,h=i.overrides,b=e,k=pdt(h,"maxHeightFunction",nrr()),d=pdt(h,"maxWidthFunction",c),g=s.anchorBox,l=s.origin,nt={bounds:(o=l,w.fold(function(){return o.fold(as,as,lu)},function(n){return o.fold(n,n,function(){var t=n(),i=ldt(o,t.x,t.y);return lu(i.left,i.top,t.width,t.height)})})),origin:l,preference:y,maxHeightFunction:k,maxWidthFunction:d,lastPlacement:p,transition:b},trr(g,a,v,nt)}function int(n,t){tf(n.element,t.element)}function rnt(n,t){var i,u=n.components(),r;k((i=n).components(),function(n){return ls(n.element)});iut(i.element);i.syncComponents();r=vrt(u,t);k(r,function(t){bg(t);n.getSystem().removeFromWorld(t)});k(t,function(t){t.getSystem().isConnected()?int(n,t):(n.getSystem().addToWorld(t),int(n,t),lo(n.element)&&kg(t));n.syncComponents()})}function ua(n,t){kti(n,t,tf)}function unt(n){bg(n);ls(n.element);n.getSystem().removeFromWorld(n)}function fa(n){var t=gu(n.element).bind(function(t){return n.getSystem().getByDom(t).toOptional()});unt(n);t.each(function(n){n.syncComponents()})}function fnt(n){var t=n.components();k(t,unt);iut(n.element);n.syncComponents()}function det(n,t){dti(n,t,tf)}function ent(n){var t=ye(n.element);k(t,function(t){n.getByDom(t).each(bg)});ls(n.element)}function ont(n,t,i,r){i.get().each(function(){fnt(n)});ua(t.getAttachPoint(n),n);var u=n.getSystem().build(r);return ua(n,u),i.set(u),u}function snt(n,t,i,r){var u=ont(n,t,i,r);return t.onOpen(n,u),u}function hnt(n,t,i){i.get().each(function(r){fnt(n);fa(n);t.onClose(n,r);i.clear()})}function cnt(n,t,i){return i.isOpen()}function get(n){var t=rf("Dismissal",sur,n),i={};return i[ea()]={schema:kf([u("target")]),onReceive:function(n,i){ot.isOpen(n)&&(ot.isPartOf(n,i.target)||t.isExtraPart(n,i.target)||t.fireEventInstead.fold(function(){return ot.close(n)},function(t){return at(n,t.event)}))}},i}function not(n){var t=rf("Reposition",hur,n),i={};return i[ry()]={onReceive:function(n){ot.isOpen(n)&&t.fireEventInstead.fold(function(){return t.doReposition(n)},function(t){return at(n,t.event)})}},i}function tot(n,t,i){t.store.manager.onLoad(n,t,i)}function lnt(n,t,i){t.store.manager.onUnload(n,t,i)}function ant(){var n=p(null);return ne({set:n.set,get:n.get,isNotSet:function(){return null===n.get()},clear:function(){n.set(null)},readState:function(){return{mode:"memory",value:n.get()}}})}function vnt(){var n=p({}),i=p({});return ne({readState:function(){return{mode:"dataset",dataByValue:n.get(),dataByText:i.get()}},lookup:function(t){return b(n.get(),t).orThunk(function(){return b(i.get(),t)})},update:function(r){var e=n.get(),o=i.get(),u={},f={};k(r,function(n){b(u[n.value]=n,"meta").each(function(t){b(t,"text").each(function(t){f[t]=n})})});n.set(t(t({},e),u));i.set(t(t({},o),f))},clear:function(){n.set({});i.set({})}})}function ynt(n,t,i,r){var u=t.store;i.update([r]);u.setValue(n,r);t.onSetValue(n,r)}function vr(n,t){return yut(n,{},s(t,function(t){return i=t.name(),r="Cannot configure "+t.name()+" for "+n,ar(i,i,cut(),sv(function(){return vl("The field: "+i+" is forbidden. "+r)}));var i,r}).concat([ff("dump",ct)]))}function iot(n){return n.dump}function br(n,i){return t(t({},e(i)),n.dump)}function rot(n){return ni(n,"uiType")}function pnt(t){return t.fold(n.some,n.none,n.some,n.some)}function wnt(n){function t(n){return n.name}return n.fold(t,t,t,t)}function ag(n,t){return function(i){var r=rf("Converting part type",t,i);return n(r)}}function uot(n,t,i,r){return ri(t.defaults(n,i,r),i,{uid:n.partUids[t.name]},t.overrides(n,i,r))}function fot(n,i){var r={};return k(i,function(i){pnt(i).each(function(i){var u=tfr(n,i.pname);r[i.name]=function(r){var f=rf("Part: "+i.name+" in "+n,w(i.schema),r);return t(t({},u),{config:r,validated:f})}})}),r}function eot(n,t,i){return{uiType:iii(),owner:n,name:t,config:i,validated:{}}}function bnt(t){return bi(t,function(t){return t.fold(n.none,n.some,n.none,n.none).map(function(n){return ec(n.name,n.schema.concat([lkt(kot())]))}).toArray()})}function knt(n){return s(n,wnt)}function oot(n,t,i){return f=t,u={},e={},k(i,function(n){n.fold(function(n){u[n.pname]=tii(!0,function(t,i,r){return n.factory.sketch(uot(t,n,i,r))})},function(n){var t=f.parts[n.name];e[n.name]=r(n.factory.sketch(uot(f,n,t[kot()]),t))},function(n){u[n.pname]=tii(!1,function(t,i,r){return n.factory.sketch(uot(t,n,i,r))})},function(n){u[n.pname]=pur(!0,function(t,i,r){return s(t[n.name],function(i){return n.factory.sketch(ri(n.defaults(t,i,r),i,n.overrides(t,i)))})})})}),{internals:r(u),externals:r(e)};var f,u,e}function sot(t,i,u){return f=n.some(t),s=(e=i).components,o=hr(u,function(n,t){return u=n,i=!1,{name:r(f=t),required:function(){return u.fold(function(n){return n},function(n){return n})},used:function(){return i},replace:function(){if(i)throw new Error("Trying to use the same placeholder more than once: "+f);return i=!0,u}};var f,u,i}),h=f,c=e,l=o,a=bi(s,function(n){return nii(h,c,n,l)}),su(o,function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+f.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2));}),a;var f,e,s,h,c,l,o,a}function kt(n,t,i){var r=t.partUids[i];return n.getSystem().getByUid(r).toOptional()}function ks(n,t,i){return kt(n,t,i).getOrDie("Could not find part: "+i)}function dnt(n,t,i){var u={},f=t.partUids,e=n.getSystem();return k(i,function(n){u[n]=r(e.getByUid(f[n]))}),u}function gnt(n,t){var i=n.getSystem();return hr(t.partUids,function(n){return r(i.getByUid(n))})}function nti(n){return lr(n.partUids)}function hot(n,t,i){var u={},f=t.partUids,e=n.getSystem();return k(i,function(n){u[n]=r(e.getByUid(f[n]).getOrDie())}),u}function tti(n,t){return cv(s(knt(t),function(t){return{key:t,value:n+"-"+t}}))}function cot(n){return ar("partUids","partUids",lut(function(t){return tti(t.uid,n)}),vo())}function iti(n,t,r,f,e){var o;return rf(n+" [SpecSchema]",kf((o=e,(0<f.length?[ec("parts",f)]:[]).concat([u("uid"),i("dom",{}),i("components",[]),lkt("originalSpec"),i("debug.sketcher",{})]).concat(o)).concat(t)),r)}function lot(n,t,i,r,u){var e=rii(u),f=iti(n,t,e,bnt(i),[cot(i)]),o=oot(0,f,i);return r(f,sot(n,f,o.internals()),e,o.externals())}function le(n){var i=rf("Sketcher for "+n.name,rfr,n),r=hr(i.apis,vd),u=hr(i.extraApis,ift);return t(t({name:i.name,configFields:i.configFields,sketch:function(n){return t=i.name,r=i.configFields,i.factory(iti(t,r,u=rii(n),[],[]),u);var t,r,u}},r),u)}function bu(n){var i=rf("Sketcher for "+n.name,ufr,n),r=fot(i.name,i.partFields),u=hr(i.apis,vd),f=hr(i.extraApis,ift);return t(t({name:i.name,partFields:i.partFields,configFields:i.configFields,sketch:function(n){return lot(i.name,i.configFields,i.partFields,i.factory,n)},parts:r},u),f)}function ty(n){return"input"===hs(n)&&"radio"!==hu(n,"type")||"textarea"===hs(n)}function rti(n,t){(t.disabled()?dot:got)(n,t)}function aot(n,t){return!0===t.useNative&&cr(efr,hs(n.element))}function uti(n,t){return aot(n,t)?hpt(n.element,"disabled"):"true"===hu(n.element,"aria-disabled")}function fti(n,t,i,r){var u=wu(n.element,"."+t.highlightClass);k(u,function(i){eo(r,function(n){return n.element===i})||(nr(i,t.highlightClass),n.getSystem().getByDom(i).each(function(i){t.onDehighlight(n,i);at(i,aft())}))})}function pw(n,t,i,r){fti(n,t,0,[r]);vot(0,t,0,r)||(pr(r.element,t.highlightClass),t.onHighlight(n,r),at(r,tkt()))}function eti(n,t,i,r){var u=wu(n.element,"."+t.itemClass);return rv(u,function(n){return se(n,t.highlightClass)}).bind(function(t){var i=dv(t,r,0,u.length-1);return n.getSystem().getByDom(u[i]).toOptional()})}function wrr(n,t,i){var r=yp(n.slice(0,t)),u=yp(n.slice(t+1));return wi(r.concat(u),i)}function brr(n,t,i){return wi(yp(n.slice(0,t)),i)}function krr(n,t,i){var r=n.slice(0,t);return wi(n.slice(t+1).concat(r),i)}function drr(n,t,i){return wi(n.slice(t+1),i)}function ut(n){return function(t){var i=t.raw;return cr(n,i.which)}}function go(n){return function(t){return uv(n,function(n){return n(t)})}}function iy(n){return!0===n.raw.shiftKey}function grr(n){return!0===n.raw.ctrlKey}function st(n,t){return{matches:n,classification:t}}function oti(n,t,i){t.exists(function(n){return i.exists(function(t){return ki(t,n)})})||y(n,dbt(),{prevFocus:t,newFocus:i})}function vg(){function n(n){return bo(n.element)}return{get:n,set:function(t,i){var r=n(t);t.getSystem().triggerFocus(i,t.element);oti(t,r,n(t))}}}function sti(){function n(n){return bt.getHighlighted(n).map(function(n){return n.element})}return{get:n,set:function(t,i){var u=n(t),r;t.getSystem().getByDom(i).fold(c,function(n){bt.highlight(t,n)});r=n(t);oti(t,u,r)}}}function hti(n,t,i,r,u,f){var e=f.map(cf);return bti(n,t,i,r,u,e)}function cti(n,t){var i,u,r,f=t.getAttachPoint(n);tt(n.element,"position",ku.getMode(f));r=t.cloakVisibilityAttr;tu((i=n).element,u="visibility").fold(function(){nu(i.element,r)},function(n){rt(i.element,r,n)});tt(i.element,u,"hidden")}function lti(n,t){var i,r,u,f=n.element;eo(["top","left","right","bottom"],function(n){return tu(f,n).isSome()})||ti(n.element,"position");r="visibility";u=t.cloakVisibilityAttr;pe((i=n).element,u).fold(function(){return ti(i.element,r)},function(n){return tt(i.element,r,n)})}function vot(n,t,i,r){return se(r.element,t.highlightClass)}function ati(n,t){return er(n.element,"."+t.itemClass).bind(function(t){return n.getSystem().getByDom(t).toOptional()})}function vti(t,i){var r=wu(t.element,"."+i.itemClass);return(0<r.length?n.some(r[r.length-1]):n.none()).bind(function(n){return t.getSystem().getByDom(n).toOptional()})}function yti(n,t){return sl(s(wu(n.element,"."+t.itemClass),function(t){return n.getSystem().getByDom(t).toOptional()}))}function oa(t,r,u,e,o){function s(n,t,i,r,u){var f=i(n,t,r,u),e=t.event;return wi(f,function(n){return n.matches(e)}).map(function(n){return n.classification}).bind(function(i){return i(n,t,r,u)})}var h={schema:function(){return t.concat([i("focusManager",vg()),ke("focusInside","onFocus",nw(function(n){return cr(["onFocus","onEnterOrSpace","onApi"],n)?et.value(n):et.error("Invalid value for focusInside")})),ui("handler",h),ui("state",r),ui("sendFocusIn",o)])},processKey:s,toEvents:function(t,i){var r=t.focusInside!==pg.OnFocusMode?n.none():o(t).map(function(n){return f(ac(),function(r,u){n(r,t,i);u.stop()})}),h=[f(bd(),function(n,r){s(n,r,u,t,i).fold(function(){var f=n,u=r,e=ut(yf.concat(ds))(u.event);t.focusInside===pg.OnEnterOrSpaceMode&&e&&cbt(f,u)&&o(t).each(function(n){n(f,t,i);u.stop()})},function(){r.stop()})}),f(etr(),function(n,r){s(n,r,e,t,i).each(function(){r.stop()})})];return gt(r.toArray().concat(h))}};return h}function uii(t){function u(n,t){return 0<cu(n.visibilitySelector.bind(function(n){return wo(t,n)}).getOr(t))}function e(t,i){var r=i,f=fi(wu(t.element,r.selector),function(n){return u(r,n)});n.from(f[r.firstTabstop]).each(function(n){i.focusManager.set(t,n)})}function f(t,i,r,f){var e,o=wu(t.element,r.selector);return(e=r).focusManager.get(t).bind(function(n){return wo(n,e.selector)}).bind(function(i){return rv(o,ue(ki,i)).bind(function(i){return s=t,e=r,f(o,i,function(n){return u(t=e,i=n)&&t.useTabstopAt(i);var t,i}).fold(function(){return e.cyclic?n.some(!0):n.none()},function(t){return e.focusManager.set(s,t),n.some(!0)});var s,e})})}var o=[wt("onEscape"),wt("onEnter"),i("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),i("firstTabstop",0),i("useTabstopAt",gi),wt("visibilitySelector")].concat([t]),s=r([st(go([iy,ut(bc)]),function(n,t,i){return f(n,0,i,i.cyclic?wrr:brr)}),st(ut(bc),function(n,t,i){return f(n,0,i,i.cyclic?krr:drr)}),st(ut(en),function(n,t,i){return i.onEscape.bind(function(i){return i(n,t)})}),st(go([bw,ut(ds)]),function(n,t,i){return i.onEnter.bind(function(i){return i(n,t)})})]),h=r([]);return oa(o,po.init,s,h,function(){return n.some(e)})}function kw(t,i,r){return ty(r)&&ut(yf)(i.event)?n.none():(dut(t,r,gf()),n.some(!0))}function oy(){return n.some(!0)}function fii(n,t,i){return i.execute(n,t,n.element)}function eii(){var n=vi();return ne({readState:function(){return n.get().map(function(n){return{numRows:String(n.numRows),numColumns:String(n.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,i){n.set({numRows:t,numColumns:i})},getNumRows:function(){return n.get().map(function(n){return n.numRows})},getNumColumns:function(){return n.get().map(function(n){return n.numColumns})}})}function oii(n){return function(t,i,r,u){var f=n(t.element);return fui(f,t,i,r,u)}}function nst(n,t){return oii(yet(n,t))}function tst(n,t){return oii(yet(t,n))}function ist(n){return function(t,i,r,u){return fui(n,t,i,r,u)}}function sii(n){return!((t=n.dom).offsetWidth<=0&&t.offsetHeight<=0);var t}function hii(n,t,i){var r,u=fi(wu(n,i),sii);return rv(r=u,function(n){return ki(n,t)}).map(function(n){return{index:n,candidates:r}})}function cii(n,t){return rv(n,function(n){return ki(t,n)})}function lii(t,i,r,u){return u(Math.floor(i/r),i%r).bind(function(i){var u=i.row*r+i.column;return 0<=u&&u<t.length?n.some(t[u]):n.none()})}function aii(t,i,r,u,f){return lii(t,i,u,function(i,e){var o=i===r-1?t.length-i*u:u,s=dv(e,f,0,o-1);return n.some({row:i,column:s})})}function vii(t,i,r,u,f){return lii(t,i,u,function(i,e){var o=dv(i,f,0,r-1),s=o===r-1?t.length-o*u:u,h=ce(e,0,s-1);return n.some({row:o,column:h})})}function lfr(n,t){er(n.element,t.selector).each(function(i){t.focusManager.set(n,i)})}function hn(n){return function(t,i,r,u){return hii(t,i,r.selector).bind(function(t){return n(t.candidates,t.index,u.getNumRows().getOr(r.initSize.numRows),u.getNumColumns().getOr(r.initSize.numColumns))})}}function yii(t,i,r){return r.captureTab?n.some(!0):n.none()}function cn(t,i,r,u){var f=function(t,i,r){var o,e=dv(i,u,0,r.length-1);return e===t?n.none():"button"===hs(o=r[e])&&"disabled"===hu(o,"disabled")?f(t,e,r):n.from(r[e])};return hii(t,r,i).bind(function(n){var t=n.index,i=n.candidates;return f(t,t,i)})}function rst(n,t,i){return(r=i).focusManager.get(n).bind(function(n){return wo(n,r.selector)}).bind(function(r){return i.execute(n,t,r)});var r}function afr(n,t){t.getInitial(n).orThunk(function(){return er(n.element,t.selector)}).each(function(i){t.focusManager.set(n,i)})}function pii(n,t,i){return cn(n,i.selector,t,-1)}function wii(n,t,i){return cn(n,i.selector,t,1)}function bii(t){return function(i,r,u,f){return t(i,r,u,f).bind(function(){return u.executeOnMove?rst(i,r,u):n.some(!0)})}}function vfr(n,t,i){return i.onEscape(n,t)}function ln(t,i,r){return n.from(t[i]).bind(function(t){return n.from(t[r]).map(function(n){return{rowIndex:i,columnIndex:r,cell:n}})})}function kii(n,t,i,r){return ln(n,t,dv(i,r,0,n[t].length-1))}function dii(n,t,i,r){var u=dv(i,r,0,n.length-1),f=n[u].length;return ln(n,u,ce(t,0,f-1))}function gii(n,t,i,r){var u=n[t].length;return ln(n,t,ce(i+r,0,u-1))}function nri(n,t,i,r){var u=ce(i+r,0,n.length-1),f=n[u].length;return ln(n,u,ce(t,0,f-1))}function yfr(n,t){t.previousSelector(n).orThunk(function(){var i=t.selectors;return er(n.element,i.cell)}).each(function(i){t.focusManager.set(n,i)})}function an(n,t){return function(i,r,u){var f=u.cycles?n:t;return wo(r,u.selectors.row).bind(function(n){return cii(wu(n,u.selectors.cell),r).bind(function(t){var r=wu(i,u.selectors.row);return cii(r,n).bind(function(n){var i,e=(i=u,s(r,function(n){return wu(n,i.selectors.cell)}));return f(e,n,t).map(function(n){return n.cell})})})})}}function tri(n,t,i){return i.focusManager.get(n).bind(function(r){return i.execute(n,t,r)})}function pfr(n,t){er(n.element,t.selector).each(function(i){t.focusManager.set(n,i)})}function iri(n,t,i){return cn(n,i.selector,t,-1)}function rri(n,t,i){return cn(n,i.selector,t,1)}function ust(n,t,i,r){var u=n.getSystem().build(r);kti(n,u,i)}function uri(n,t,i,r){wi(bn(n),function(n){return ki(r.element,n.element)}).each(fa)}function fri(t,i,r,u,f){var e=bn(t);return n.from(e[u]).map(function(n){return uri(t,0,0,n),f.each(function(n){ust(t,0,function(n,t){var i,r=t;grt(i=n,u).fold(function(){tf(i,r)},function(n){id(n,r)})},n)}),n})}function it(n,t){var i,f;return{key:n,value:{config:{},me:(i=n,f=gt(t),wr({fields:[u("enabled")],name:i,active:{events:r(f)}})),configAsRaw:r({}),initialConfig:{},state:po}}}function eri(n,t){t.ignore||(ah(n.element),t.onFocus(n))}function ori(n,t,i){var r=t.aria;r.update(n,r,i.get())}function sri(n,t,i){t.toggleClass.each(function(t){(i.get()?pr:nr)(n.element,t)})}function hri(n,t,i){cst(n,t,i,!i.get())}function cri(n,t,i){i.set(!0);sri(n,t,i);ori(n,t,i)}function lri(n,t,i){i.set(!1);sri(n,t,i);ori(n,t,i)}function ari(n,t,i){cst(n,t,i,t.selected)}function vri(){function n(n,t){t.stop();pl(n)}return[f(ow(),n),f(cw(),n),wl(ch()),wl(de())]}function vn(n){return gt(sr([n.map(function(n){return lh(function(t,i){n(t);i.stop()})}).toArray(),vri()]))}function yri(n){(bo(n.element).isNone()||g.isFocused(n))&&(g.isFocused(n)||g.focus(n),y(n,aui,{item:n}))}function pri(n){y(n,vui,{item:n})}function wri(n,t){return n.x+n.width/2-t.width/2}function fst(n,t){return n.x+n.width-t.width}function est(n,t){return n.y+n.height-t.height}function bri(n,t){return n.y+n.height/2-t.height/2}function yn(n,t,i){return dr(fst(n,t),est(n,t),i.insetSouthwest(),cet(),"southwest",gr(n,{right:0,bottom:3}),dc)}function pn(n,t,i){return dr(n.x,est(n,t),i.insetSoutheast(),het(),"southeast",gr(n,{left:1,bottom:3}),dc)}function dw(n,t,i){return dr(fst(n,t),n.y,i.insetNorthwest(),set(),"northwest",gr(n,{right:0,top:2}),dc)}function gw(n,t,i){return dr(n.x,n.y,i.insetNortheast(),rg(),"northeast",gr(n,{left:1,top:2}),dc)}function kri(n,t,i){return dr(fst(n,t),bri(n,t),i.insetEast(),hdt(),"east",gr(n,{right:0}),dc)}function dri(n,t,i){return dr(n.x,bri(n,t),i.insetWest(),sdt(),"west",gr(n,{left:1}),dc)}function wfr(n){switch(n){case"north":return is;case"northeast":return gw;case"northwest":return dw;case"south":return sy;case"southeast":return pn;case"southwest":return yn;case"east":return kri;case"west":return dri}}function gri(n,t,i,r,u){return adt(r).map(wfr).getOr(is)(n,t,i,r,u)}function bfr(n){switch(n){case"north":return sy;case"northeast":return pn;case"northwest":return yn;case"south":return is;case"southeast":return gw;case"southwest":return dw;case"east":return dri;case"west":return kri}}function kfr(n,t,i,r,u){return adt(r).map(bfr).getOr(is)(n,t,i,r,u)}function yt(n){var i=void 0!==n.uid&&ve(n,"uid")?n.uid:wv("memento");return{get:function(n){return n.getSystem().getByUid(i).getOrDie()},getOpt:function(n){return n.getSystem().getByUid(i).toOptional()},asSpec:function(){return t(t({},n),{uid:i})}}}function ost(n){return function(){return b(n,bui).getOr("!not found!")}}function sst(n,t){var i,r=n.toLowerCase(),u;return rs.isRtl()?(u=yk(i=r,"-rtl")?i:i+"-rtl",ni(t,u)?u:r):r}function nui(n,t){return b(t,sst(n,t))}function tui(n,t){var i=t();return nui(n,i).getOrThunk(ost(i))}function hst(){return it("add-focusable",[li(function(n){var t,i,r;t=n.element;i="svg";r=function(n){return krt(n,i)};wi(t.dom.childNodes,function(n){return r(h.fromDom(n))}).map(h.fromDom).each(function(n){return rt(n,"focusable","false")})})])}function iui(n,t,i,r){var u,f,o,s=(o=t,rs.isRtl()&&ni(gor,o)?["tox-icon--flip"]:[]),h=b(i,sst(t,i)).or(r).getOrThunk(ost(i));return{dom:{tag:n.tag,attributes:null!==(u=n.attributes)&&void 0!==u?u:{},classes:n.classes.concat(s),innerHtml:h},behaviours:e(pt(pt([],null!==(f=n.behaviours)&&void 0!==f?f:[],!0),[hst()],!1))}}function ts(t,i,r,u){return void 0===u&&(u=n.none()),iui(i,t,r(),u)}function cst(n,t,i,r){(r?cri:lri)(n,t,i)}function rui(n,t,i){rt(n.element,"aria-expanded",i)}function uui(t){return"prepared"===t.type?n.some(t.menu):n.none()}function yst(n,t){function r(){ayt(i)||(clearTimeout(i),i=null)}var i=null;return{cancel:r,throttle:function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];r();i=setTimeout(function(){i=null;n.apply(null,f)},t)}}}function kui(t,i,r,u,f){var e=isr(t,function(n){return(r=t).isBlock(i=n)||cr(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===r.getContentEditable(i);var r,i});return n.from(e.backwards(i,r,u,f))}function tsr(t,i){return dn(h.fromDom(t.selection.getNode())).getOrThunk(function(){var u,f,r=h.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"><\/span>',t.getDoc());return tf(r,h.fromDom(i.extractContents())),i.insertNode(r.dom),gu(r).each(function(n){return n.dom.normalize()}),u=vrr,(f=function(t){for(var r,o,e=ye(t),i=e.length-1;0<=i;i--){if(r=e[i],u(r))return n.some(r);if(o=f(r),o.isSome())return o}return n.none()})(r).map(function(n){var i;t.selection.setCursorLocation(n.dom,"img"===hs(i=n)?1:hgt(i).fold(function(){return ye(i).length},function(n){return n.length}))}),r})}function dui(n){return n.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")}function gui(n){return""!==n&&-1!==" \xa0\f\n\r\t\v".indexOf(n)}function pst(n,t){return n.substring(t.length)}function wst(t,i,r,u){return void 0===u&&(u=0),dn(h.fromDom(i.startContainer)).fold(function(){return function(t,i,r,u){if(void 0===u&&(u=0),!i.collapsed||3!==i.startContainer.nodeType)return n.none();var f=t.getParent(i.startContainer,t.isBlock)||t.getRoot();return kui(t,i.startContainer,i.startOffset,function(t,i,u){return function(t,r){for(var f,u=i-1;0<=u;u--){if(f=t.charAt(u),gui(f))return n.none();if(f===r)break}return n.some(u)}(u,r).getOr(i)},f).bind(function(t){var f=i.cloneRange(),e;return(f.setStart(t.container,t.offset),f.setEnd(i.endContainer,i.endOffset),f.collapsed)?n.none():(e=dui(f),0!==e.lastIndexOf(r)||pst(e,r).length<u?n.none():n.some({text:pst(e,r),range:f,triggerChar:r}))})}(t,i,r,u)},function(i){var u=t.createRng(),f;return u.selectNode(i.dom),f=dui(u),n.some({range:u,text:pst(f,r),triggerChar:r})})}function bst(n,t){return{container:n,offset:t}}function nfi(n){return si("toolbarbutton",fsr,n)}function tfi(n){return si("ToggleButton",esr,n)}function ifi(t,i,r,u){var e;void 0===u&&(u={});var o=i(),h=t.selection.getRng().startContainer.nodeValue,f=fi(o.lookupByChar(r.triggerChar),function(n){return r.text.length>=n.minChars&&n.matches.getOrThunk(function(){return n=t.dom,function(t){var i=ffi(t.startContainer,t.startOffset);return!kui(n,i.container,i.offset,function(n,t){return 0===t?-1:t},n.getRoot()).filter(function(n){return!gui(n.container.data.charAt(n.offset-1))}).isSome()};var n})(r.range,h,r.text)});return 0===f.length?n.none():(e=nb.all(s(f,function(n){return n.fetch(r.text,n.maxResults,u).then(function(t){return{matchText:r.text,items:t,columns:n.columns,onAction:n.onAction,highlightOn:n.highlightOn}})})),n.some({lookupData:e,context:r}))}function sfi(n){return b(psr,n).getOr(oht)}function dst(n){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===n?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}}function hy(n){var t=dst(n);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:sfi(n)}}function gn(n,t,i){return{dom:{tag:"div",classes:sr([[dst(i).tieredMenu]])},markers:hy(i)}}function gst(n,t){return function(i){return s(wyt(i,t),function(t){return{dom:n,components:t}})}}function hfi(n,t){var r=[],i=[];return k(n,function(n,u){t(n,u)?(0<i.length&&r.push(i),i=[],ni(n.dom,"innerHtml")&&i.push(n)):i.push(n)}),0<i.length&&r.push(i),s(r,function(n){return{dom:{tag:"div",classes:["tox-collection__group"]},components:n}})}function nht(n,t){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===n?["tox-collection--list"]:["tox-collection--grid"])},components:[kc.parts.items({preprocess:function(i){return"auto"!==n&&1<n?gst({tag:"div",classes:["tox-collection__group"]},n)(i):hfi(i,function(n,i){return"separator"===t[i].type})}})]}}function ntt(n){return eo(n,function(n){return"icon"in n&&void 0!==n.icon})}function ph(t){return console.error(yl(t)),console.log(t),n.none()}function ysr(n,t,i){var r,u=(r=i,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[kc.parts.items({preprocess:function(n){return hfi(n,function(n,t){return"separator"===r[t].type})}})]});return{value:n,dom:u.dom,components:u.components,items:i}}function tht(n,t,i,r,u){var f,e;return"color"===u?{value:n,dom:(f={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[kc.parts.items({preprocess:"auto"!==r?gst({tag:"div",classes:["tox-swatches__row"]},r):ct})]}]}).dom,components:f.components,items:i}:"normal"===u&&"auto"===r?{value:n,dom:(f=nht(r,i)).dom,components:f.components,items:i}:"normal"===u&&1===r?{value:n,dom:(f=nht(1,i)).dom,components:f.components,items:i}:"normal"===u?{value:n,dom:(f=nht(r,i)).dom,components:f.components,items:i}:"listpreview"!==u||"auto"===r?{value:n,dom:{tag:"div",classes:sr([[(e=dst(u)).menu,"tox-menu-"+r+"-column"],t?[e.hasIcons]:[]])},components:wsr,items:i}:{value:n,dom:(f={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[kc.parts.items({preprocess:gst({tag:"div",classes:["tox-collection__group"]},r)})]}).dom,components:f.components,items:i}}function iht(t,i,r){var u=wu(t.element,"."+r),f;return 0<u.length?(f=rv(u,function(n){var t=n.dom.getBoundingClientRect().top,r=u[0].dom.getBoundingClientRect().top;return Math.abs(t-r)>i}).getOr(u.length),n.some({numColumns:f,numRows:Math.ceil(u.length/f)})):n.none()}function cfi(n){n.getSystem().broadcastOn([rei],{})}function lfi(n){return n.getParam("height",Math.max(n.getElement().offsetHeight,200))}function afi(n){return n.getParam("width",fb.DOM.getStyle(n.getElement(),"width"))}function vfi(t){return n.from(t.getParam("min_width")).filter(uh)}function yfi(t){return n.from(t.getParam("min_height")).filter(uh)}function rht(t){return n.from(t.getParam("max_width")).filter(uh)}function pfi(t){return n.from(t.getParam("max_height")).filter(uh)}function uht(n){return!1!==n.getParam("menubar",!0,"boolean")}function fht(n){var t=n.getParam("toolbar",!0),i=!0===t,r=pi(t),u=ic(t)&&0<t.length;return!rtt(n)&&(u||r||i)}function wfi(t){var i=fi(pyt(9,function(n){return t.getParam("toolbar"+(n+1),!1,"string")}),function(n){return"string"==typeof n});return 0<i.length?n.some(i):n.none()}function eb(n){return n.getParam("toolbar_mode","","string")}function fei(n){return n.getParam("toolbar_location",ha.auto,"string")}function eei(n){return fei(n)===ha.bottom}function oei(t){var i,r;return t.inline?(i=t.getParam("fixed_toolbar_container","","string"),0<i.length)?er(sh(),i):(r=t.getParam("fixed_toolbar_container_target"),fo(r)?n.some(h.fromDom(r)):n.none()):n.none()}function utt(n){return n.inline&&oei(n).isSome()}function sei(n){return oei(n).getOrThunk(function(){return dk(be(h.fromDom(n.getElement())))})}function hei(n){return n.inline&&!uht(n)&&!fht(n)&&!rtt(n)}function ftt(n){return(n.getParam("toolbar_sticky",!1,"boolean")||n.inline)&&!utt(n)&&!hei(n)}function ly(n,t){var i=n.outerContainer.element;t&&(n.mothership.broadcastOn([ea()],{target:i}),n.uiMothership.broadcastOn([ea()],{target:i}));n.mothership.broadcastOn([pht],{readonly:t});n.uiMothership.broadcastOn([pht],{readonly:t})}function cei(n,t){n.on("init",function(){n.mode.isReadOnly()&&ly(t,!0)});n.on("SwitchMode",function(){return ly(t,n.mode.isReadOnly())});n.getParam("readonly",!1,"boolean")&&n.setMode("readonly")}function ir(){var n;return ge.config({channels:((n={})[pht]={schema:vhr,onReceive:function(n,t){a.set(n,t.readonly)}},n)})}function ett(n,t){var i=n.getApi(t);return function(n){n(i)}}function ob(n,t){return li(function(i){ett(n,i)(function(i){var r=n.onSetup(i);wf(r)&&t.set(r)})})}function sb(n,t){return ws(function(i){return ett(n,i)(t.get())})}function ay(n,t,i,r){var u,f,o=p(c);return{type:"item",dom:t.dom,components:py(t.optComponents),data:n.data,eventOrder:yhr,hasSubmenu:n.triggersSubmenu,itemBehaviours:e([it("item-events",[(u=n,f=i,lh(function(n,t){ett(u,n)(u.onAction);u.triggersSubmenu||f!==us.CLOSE_ON_EXECUTE||(at(n,kd()),t.stop())})),ob(n,o),sb(n,o)]),a.config({disabled:function(){return n.disabled||r.isDisabled()},disableClass:"tox-collection__item--state-disabled"}),ir(),nt.config({})].concat(n.itemBehaviours))}}function vy(n){return{value:n.value,meta:t({text:n.text.getOr("")},n.meta)}}function cht(n,t,i){return ts(n,{tag:"div",classes:i=void 0===i?[kfi]:i},t)}function lei(n){return{dom:{tag:"div",classes:[hht]},components:[dl(rs.translate(n))]}}function aei(n,t){return{dom:{tag:"div",classes:t,innerHtml:n}}}function chr(n,t){return{dom:{tag:"div",classes:[hht]},components:[{dom:{tag:n.tag,styles:n.styles},components:[dl(rs.translate(t))]}]}}function lhr(n){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(t=bht.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},i=s(n.split("+"),function(n){var i=n.toLowerCase().trim();return ni(t,i)?t[i]:n}),bht.mac?i.join(""):i.join("+"))}};var t,i}function vei(n){return cht("checkmark",n,["tox-collection__item-checkmark"])}function yei(n){var i=n.map(function(n){return{attributes:{title:rs.translate(n)}}}).getOr({});return t({tag:"div",classes:[oht,sht]},i)}function hb(i,r,u,f){return void 0===f&&(f=n.none()),"color"===i.presets?(h=r,a=f,v=i.ariaLabel,s=i.value,{dom:(c=i.iconContent.map(function(n){return t=h.icons,i=a,nui(n,r=t()).or(i).getOrThunk(ost(r));var t,i,r}).getOr(""),o={tag:"div",attributes:v.map(function(n){return{title:h.translate(n)}}).getOr({}),classes:["tox-swatch"]},t(t({},o),"custom"===s?{tag:"button",classes:pt(pt([],o.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:c}:"remove"===s?{classes:pt(pt([],o.classes,!0),["tox-swatch--remove"],!1),innerHtml:c}:{attributes:t(t({},o.attributes),{"data-mce-color":s}),styles:{"background-color":s}})),optComponents:[]}):(e=i,y=r,p=f,l={tag:"div",classes:[kfi]},w=u?e.iconContent.map(function(n){return ts(n,l,y.icons,p)}).orThunk(function(){return n.some({dom:l})}):n.none(),b=e.checkMark,k=n.from(e.meta).fold(function(){return lei},function(n){return ni(n,"style")?ue(chr,n.style):lei}),d=e.htmlContent.fold(function(){return e.textContent.map(k)},function(t){return n.some(aei(t,[hht]))}),{dom:yei(e.ariaLabel),optComponents:[w,d,e.shortcutContent.map(lhr),b,e.caret]});var h,a,c,o,v,s,e,y,p,l,w,b,k,d}function pei(n,t){return b(n,"tooltipWorker").map(function(n){return[uei.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(n){return{type:"submenu",item:n,overrides:{maxHeightFunction:aw}}},mode:"follow-highlight",onShow:function(t){n(function(n){uei.setComponents(t,[wft({element:h.fromDom(n)})])})}})]}).getOr([])}function wei(n,t){var u=rs.translate(n),i=fb.DOM.encode(u),r;return 0<t.length?(r=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"),i.replace(r,function(n){return'<span class="tox-autocompleter-highlight">'+n+"<\/span>"})):i}function bei(n){return{value:n}}function kei(n){return ooi.test(n)||soi.test(n)}function lht(n){var t=n.toString(16);return(1===t.length?"0"+t:t).toUpperCase()}function cb(n){return bei(lht(n.red)+lht(n.green)+lht(n.blue))}function gc(n,t,i,r){return{red:n,green:t,blue:i,alpha:r}}function aht(n){var t=parseInt(n,10);return t.toString()===n&&0<=t&&t<=255}function dei(n){var r,t,i,c=(n.hue||0)%360,o=n.saturation/100,e=n.value/100,o=coi(0,hoi(o,1)),e=coi(0,hoi(e,1));if(0===o)return gc(r=t=i=ott(255*e),t,i,1);var h=c/60,u=e*o,f=u*(1-Math.abs(h%2-1)),s=e-u;switch(Math.floor(h)){case 0:r=u;t=f;i=0;break;case 1:r=f;t=u;i=0;break;case 2:r=0;t=u;i=f;break;case 3:r=0;t=f;i=u;break;case 4:r=f;t=0;i=u;break;case 5:r=u;t=0;i=f;break;default:r=t=i=0}return gc(r=ott(255*(r+s)),t=ott(255*(t+s)),i=ott(255*(i+s)),1)}function lb(n){var i,r,t=(i={value:n.value.replace(ooi,function(n,t,i,r){return t+t+i+i+r+r})},null===(r=soi.exec(i.value))?["FFFFFF","FF","FF","FF"]:r);return gc(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1)}function gei(n,t,i,r){return gc(parseInt(n,10),parseInt(t,10),parseInt(i,10),parseFloat(r))}function noi(t){var r,i;return"transparent"===t?n.some(gc(0,0,0,0)):(r=phr.exec(t),null!==r)?n.some(gei(r[1],r[2],r[3],"1")):(i=whr.exec(t),null!==i?n.some(gei(i[1],i[2],i[3],i[4])):n.none())}function toi(n){return"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")"}function vht(n,t){return n.fire("ResizeContent",t)}function ab(n,t,i){return{hue:n,saturation:t,value:i}}function yht(n){var o,s,e=0,i=n.red/255,f=n.green/255,r=n.blue/255,t=Math.min(i,Math.min(f,r)),u=Math.max(i,Math.max(f,r));return t===u?ab(0,0,100*(e=t)):(s=60*((i===t?3:r===t?1:5)-(i===t?f-r:r===t?i-f:r-i)/(u-t)),o=(u-t)/u,e=u,ab(Math.round(s),Math.round(100*o),Math.round(100*e)))}function ioi(n){return cb(dei(n))}function ahr(t){return(kei(r=t)?n.some({value:(vgi(i=r,"#")?i.substring(1):i).toUpperCase()}):n.none()).orThunk(function(){return noi(t).map(cb)}).getOrThunk(function(){var i=document.createElement("canvas"),n,r;return i.height=1,i.width=1,n=i.getContext("2d"),n.clearRect(0,0,i.width,i.height),n.fillStyle="#FFFFFF",n.fillStyle=t,n.fillRect(0,0,1,1),r=n.getImageData(0,0,1,1).data,cb(gc(r[0],r[1],r[2],r[3]))});var i,r}function roi(n){return a.config({disabled:n,disableClass:"tox-tbtn--disabled"})}function voi(n){return!1!==n.getParam("custom_colors")}function kht(n){var t=n.getParam("color_map");return void 0!==t?function(n){for(var i=[],t=0;t<n.length;t+=2)i.push({text:n[t+1],value:"#"+ahr(n[t]).value,type:"choiceitem"});return i}(t):bhr}function yoi(n){isi.add(n)}function poi(n){var t,i=(t=kht(n).length,Math.max(5,Math.ceil(Math.sqrt(t))));return n.getParam("color_cols",i,"number")}function woi(n){var t="choiceitem",i={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return n?[i,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[i]}function dht(n,t,i,r){"custom"===i?rsi(n)(function(i){i.each(function(i){yoi(i);n.execCommand("mceApplyTextcolor",t,i);r(i)})},nct):"remove"===i?(r(""),n.execCommand("mceRemoveTextcolor",t)):(r(i),n.execCommand("mceApplyTextcolor",t,i))}function boi(n,t){return n.concat(s(isi.state(),function(n){return{type:or,text:n,value:n}}).concat(woi(t)))}function koi(n,t){return function(i){i(boi(n,t))}}function doi(n,t,i){n.setIconFill("forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",i)}function goi(t,i,r,u,f){t.ui.registry.addSplitButton(i,{tooltip:u,presets:"color",icon:"forecolor"===i?"text-color":"highlight-bg-color",select:function(i){var u,f=r;return t.dom.getParents(t.selection.getStart(),function(n){var t;(t=n.style["forecolor"===f?"color":"background-color"])&&(u=u||t)}),n.from(u).bind(function(n){return noi(n).map(function(n){var t=cb(n).value;return yu(i.toLowerCase(),t)})}).getOr(!1)},columns:poi(t),fetch:koi(kht(t),voi(t)),onAction:function(){dht(t,r,f.get(),c)},onItemAction:function(n,u){dht(t,r,u,function(n){f.set(n);t.fire("TextColorChange",{name:i,color:n})})},onSetup:function(n){function r(t){t.name===i&&doi(n,t.name,t.color)}return doi(n,i,f.get()),t.on("TextColorChange",r),function(){t.off("TextColorChange",r)}}})}function nsi(n,t,i,r){n.ui.registry.addNestedMenuItem(t,{text:r,icon:"forecolor"===t?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(t){dht(n,i,t.value,c)}}]}})}function ght(n,t,i,r,u,f,e,o){return tht(n,ntt(t),khr(t,i,r,"color"!==u?"normal":"color",f,e,o),r,u)}function htt(n,t){var i=hy(t);return 1===n?{mode:"menu",moveOnTab:!0}:"auto"===n?{mode:"grid",selector:"."+i.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group")}}function tsi(n,t){return dl(t+"x"+n)}function rcr(i,u,f,e,o,h,l){var v=1===e,y=!v||ntt(i);return sl(s(i,function(i){switch(i.type){case"separator":return si("Autocompleter.Separator",efi,i).fold(ph,function(t){return n.some(esi(t))});case"cardmenuitem":return si("cardmenuitem",thr,i).fold(ph,function(i){return n.some((r=t(t({},i),{onAction:function(n){i.onAction(n);f(i.value,i.meta)}}),s=o,c=h,e={itemBehaviours:pei(i.meta,h),cardText:{matchText:u,highlightOn:l}},v={dom:yei(r.label),optComponents:[n.some({dom:{tag:"div",classes:[gfi,nei]},components:foi(r.items,e)})]},ay({data:vy(t({text:n.none()},r)),disabled:r.disabled,getApi:function(n){return{isDisabled:function(){return a.isDisabled(n)},setDisabled:function(t){a.set(n,t);k(wu(n.element,"*"),function(i){n.getSystem().getByDom(i).each(function(n){n.hasConfigured(a)&&a.set(n,t)})})}}},onAction:r.onAction,onSetup:r.onSetup,triggersSubmenu:!1,itemBehaviours:n.from(e.itemBehaviours).getOr([])},v,s,c.providers)));var r,s,c,e,v});default:return si("Autocompleter.Item",rsr,i).fold(ph,function(t){return n.some(function(t,i,u,f,e,o,s,h){void 0===h&&(h=!0);var l=hb({presets:f,textContent:n.none(),htmlContent:u?t.text.map(function(n){return wei(n,i)}):n.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:n.none(),checkMark:n.none(),caret:n.none(),value:t.value},s.providers,h,t.icon);return ay({data:vy(t),disabled:t.disabled,getApi:r({}),onAction:function(){return e(t.value,t.meta)},onSetup:r(c),triggersSubmenu:!1,itemBehaviours:pei(t.meta,s)},l,o,s.providers)}(t,u,v,"normal",f,o,h,y))})}}))}function osi(i,r,u,f,e){var o=ntt(r),h=sl(s(r,function(i){function r(i){return function(i,r,u,f,e){function o(i){return e?t(t({},i),{shortcut:n.none(),icon:i.text.isSome()?n.none():i.icon}):i}var s=u.shared.providers;switch(i.type){case"menuitem":return si("menuitem",uhr,i).fold(ph,function(t){return n.some(ghr(o(t),r,s,f))});case"nestedmenuitem":return si("nestedmenuitem",fhr,i).fold(ph,function(t){return n.some(ncr(o(t),r,s,f,e))});case"togglemenuitem":return si("togglemenuitem",ehr,i).fold(ph,function(t){return n.some(tcr(o(t),r,s,f))});case"separator":return si("separatormenuitem",efi,i).fold(ph,function(t){return n.some(esi(t))});case"fancymenuitem":return si("fancymenuitem",rhr,i).fold(ph,function(n){return icr(o(n),u)});default:return console.error("Unknown item in general menu",i),n.none()}}(i,u,f,e?!ni(i,"text"):o,e)}return"nestedmenuitem"===i.type&&i.getSubmenuItems().length<=0?r(t(t({},i),{disabled:!0})):r(i)}));return(e?ysr:tht)(i,o,h,1,"normal")}function ssi(n){return sa.singleData(n.value,n)}function vb(n,t,i){return wo(n,t,i).isSome()}function hsi(n,t){var i=null;return{cancel:function(){null!==i&&(clearTimeout(i),i=null)},schedule:function(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];i=setTimeout(function(){n.apply(null,u);i=null},t)}}}function csi(t){var i=t.raw;return void 0===i.touches||1!==i.touches.length?n.none():n.some(i.touches[0])}function lsi(){return we().browser.isFirefox()}function ucr(i,r){var h,c,l,a,v,f,o,e,y,u=t({stopBackspace:!0},r),w=(v=u,f=vi(),o=p(!1),e=hsi(function(n){v.triggerEvent(ltr(),n);o.set(!0)},400),y=cv([{key:ch(),value:function(t){return csi(t).each(function(n){e.cancel();var i={x:n.clientX,y:n.clientY,target:t.target};e.schedule(t);o.set(!1);f.set(i)}),n.none()}},{key:uw(),value:function(t){return e.cancel(),csi(t).each(function(n){f.on(function(t){var i=n,r=t,u=Math.abs(i.clientX-r.x),e=Math.abs(i.clientY-r.y);(5<u||5<e)&&f.clear()})}),n.none()}},{key:fw(),value:function(n){return e.cancel(),f.get().filter(function(t){return ki(t.target,n.target)}).map(function(){return o.get()?(n.prevent(),!1):v.triggerEvent(cw(),n)})}}]),{fireIfReady:function(n,t){return b(y,t).bind(function(t){return t(n)})}}),nt=s(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(n){return tr(i,n,function(t){w.fireIfReady(t,n).each(function(n){n&&t.kill()});u.triggerEvent(n,t)&&t.kill()})}),d=vi(),tt=tr(i,"paste",function(n){w.fireIfReady(n,"paste").each(function(t){t&&n.kill()});u.triggerEvent("paste",n)&&n.kill();d.set(setTimeout(function(){u.triggerEvent(sft(),n)},0))}),it=tr(i,"keydown",function(n){var t;u.triggerEvent("keydown",n)?n.kill():!u.stopBackspace||(t=n).raw.which!==cfr[0]||cr(["input","textarea"],hs(t.target))||vb(t.target,'[contenteditable="true"]')||n.prevent()}),rt=(h=i,c=function(n){u.triggerEvent("focusin",n)&&n.kill()},lsi()?ug(h,"focus",c):tr(h,"focusin",c)),g=vi(),ut=(l=i,a=function(n){u.triggerEvent("focusout",n)&&n.kill();g.set(setTimeout(function(){u.triggerEvent(oft(),n)},0))},lsi()?ug(l,"blur",a):tr(l,"focusout",a));return{unbind:function(){k(nt,function(n){n.unbind()});it.unbind();rt.unbind();ut.unbind();tt.unbind();d.on(clearTimeout);g.on(clearTimeout)}}}function asi(n,t){return p(b(n,"target").getOr(t))}function vsi(n,t,i,r,u,f){var e,o,h=n(t,r),s=(e=p(!1),o=p(!1),{stop:function(){e.set(!0)},cut:function(){o.set(!0)},isStopped:e.get,isCut:o.get,event:i,setSource:u.set,getSource:u.get});return h.fold(function(){return f.logEventNoHandlers(t,r),pb.complete()},function(n){var i=n.descHandler;return rft(i)(s),s.isStopped()?(f.logEventStopped(t,n.element,i.purpose),pb.stopped()):s.isCut()?(f.logEventCut(t,n.element,i.purpose),pb.complete()):gu(n.element).fold(function(){return f.logNoParent(t,n.element,i.purpose),pb.complete()},function(r){return f.logEventResponse(t,n.element,i.purpose),pb.resume(r)})})}function fcr(){function r(n){rw(n.element).each(function(n){delete t[n];i.unregisterId(n)})}var n,i=(n={},{registerId:function(t,i,r){su(r,function(r,u){var f,e=void 0!==n[u]?n[u]:{};e[i]={cHandler:ue.apply(void 0,[(f=r).handler].concat(t)),purpose:f.purpose};n[u]=e})},unregisterId:function(t){su(n,function(n){ni(n,t)&&delete n[t]})},filterByType:function(t){return b(n,t).map(function(n){return hk(n,function(n,t){return{id:t,descHandler:n}})}).getOr([])},find:function(t,i,r){return b(n,i).bind(function(n){return kut(r,function(t){return i=n,rw(r=t).bind(function(n){return b(i,n)}).map(function(n){return{element:r,descHandler:n}});var i,r},t)})}}),t={};return{find:function(n,t,r){return i.find(n,t,r)},filter:function(n){return i.filterByType(n)},register:function(n){var f,u=rw((f=n).element).getOrThunk(function(){return t=f.element,n=l(gtr+"uid-"),yft(t,n),n;var t,n});ve(t,u)&&function(n){var i=t[u];if(i!==n)throw new Error('The tagId "'+u+'" is already used by: '+hc(i.element)+"\nCannot use it for: "+hc(n.element)+"\nThe conflicting element is"+(lo(i.element)?" ":" not ")+"already in the DOM");r(n)}(n);i.registerId([n],u,n.events);t[u]=n},unregister:r,getById:function(n){return b(t,n)}}}function ysi(n){function b(t){return gu(n.element).fold(gi,function(n){return ki(t,n)})}function u(n,i){return t.find(b,n,i)}function s(n){var i=t.filter(gl());k(i,function(t){rft(t.descHandler)(n)})}var t=fcr(),d=ucr(n.element,{triggerEvent:function(n,t){return bft(n,t.target,function(i){return ksi(u,n,t,t.target,i)})}}),f={debugInfo:r("real"),triggerEvent:function(n,t,i){bft(n,t,function(r){return ksi(u,n,i,t,r)})},triggerFocus:function(n,t){rw(n).fold(function(){ah(n)},function(){bft(ac(),n,function(i){var r,f,e=u,o=ac(),s=i,h=asi(r={originator:t,kill:c,prevent:c,target:n},f=n);return vsi(e,o,r,f,h,s),!1})})},triggerEscape:function(n,t){f.triggerEvent("keydown",n.element,t.event)},getByUid:function(n){return o(n)},getByDom:function(n){return w(n)},build:pu,addToGui:function(n){h(n)},removeFromGui:function(n){l(n)},addToWorld:function(n){i(n)},removeFromWorld:function(n){e(n)},broadcast:function(n){a(n)},broadcastOn:function(n,t){v(n,t)},broadcastEvent:function(n,t){y(n,t)},isConnected:gi},i=function(n){n.connect(f);ll(n.element)||(t.register(n),k(n.components(),i),f.triggerEvent(dd(),n.element,{target:n.element}))},e=function(n){ll(n.element)||(k(n.components(),e),t.unregister(n));n.disconnect()},h=function(t){ua(n,t)},l=function(n){fa(n)},a=function(n){s({universal:!0,data:n})},v=function(n,t){s({universal:!1,channels:n,data:t})},y=function(n,i){var u,r,f=t.filter(n);return r={stop:function(){u.set(!0)},cut:c,isStopped:(u=p(!1)).get,isCut:dt,event:i,setSource:lrt("Cannot set source of a broadcasted event"),getSource:lrt("Cannot get source of a broadcasted event")},k(f,function(n){rft(n.descHandler)(r)}),r.isStopped()},o=function(n){return t.getById(n).fold(function(){return et.error(new Error('Could not find component with uid: "'+n+'" in system.'))},et.value)},w=function(n){var t=rw(n).getOr("not found");return o(t)};return i(n),{root:n,element:n.element,destroy:function(){d.unbind();ls(n.element)},add:h,remove:l,getByUid:o,getByDom:w,addToWorld:i,removeFromWorld:e,broadcast:a,broadcastOn:v,broadcastEvent:y}}function yb(n,t,i,r){var u=lcr(n,t,i,r);return lt.sketch(u)}function nl(n,t){return lt.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(n)}})}function psi(n){return e([g.config({onFocus:n.selectOnFocus?function(n){var t=n.element,i=kl(t);t.dom.setSelectionRange(0,i.length)}:c})])}function wsi(n){return{tag:n.tag,attributes:t({type:"text"},n.inputAttributes),styles:n.inputStyles,classes:n.inputClasses}}function ecr(t,i){function l(){return u.get().isSome()}function w(){l()&&oi.hide(s)}function g(n,t){y(n,bd(),{raw:t})}var r,a,u=vi(),o=p(!1),s=pu(oi.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:e([it("dismissAutocompleter",[f(pv(),function(){return c()})])]),lazySink:i.getSink})),c=function(){var n;l()&&(n=u.get().map(function(n){return n.element}),dn(n.getOr(h.fromDom(t.selection.getNode()))).each(dgi),w(),u.clear(),o.set(!1))},b=fh(function(){return n=hr(t.ui.registry.getAll().popups,function(n){return si("Autocompleter",usr,n).fold(function(n){throw new Error(yl(n));},ct)}),r=hk(n,function(n){return n.ch}),i={},k(r,function(n){i[n]={}}),u=lr(i),f=ck(n),{dataset:n,triggerChars:u,lookupByChar:function(n){return fi(f,function(t){return t.ch===n})}};var r,i,n,u,f}),d=function(r){var f=r;u.get().map(function(n){return wst(t.dom,t.selection.getRng(),n.triggerChar).bind(function(n){return ifi(t,b,n,f)})}).getOrThunk(function(){return n=t,r=(i=b)(),u=n.selection.getRng(),f=n.dom,e=u,oo(r.triggerChars,function(n){return wst(f,e,n)}).bind(function(t){return ifi(n,i,t)});var n,i,r,u,f,e}).fold(c,function(r){var e,f=r.context;l()||(e=tsr(t,f.range),u.set({triggerChar:f.triggerChar,element:e,matchLength:f.text.length}),o.set(!1));r.lookupData.then(function(f){u.get().map(function(u){var l,a,y,p,e=r.context;u.triggerChar===e.triggerChar&&(a=e.triggerChar,p=oo(y=f,function(t){return n.from(t.columns)}).getOr(1),0<(l=bi(y,function(n){return rcr(n.items,n.matchText,function(i,r){var u=t.selection.getRng();wst(t.dom,u,a).fold(function(){return console.error("Lost context. Cursor probably moved")},function(t){var u=t.range,f={hide:function(){c()},reload:function(n){w();d(n)}};o.set(!0);n.onAction(f,u,i,r);o.set(!1)})},p,us.BUBBLE_TO_SANDBOX,i,n.highlightOn)})).length?function(i,r,u,f){i.matchLength=r.text.length;var e,c,l,a,y,o,p=oo(u,function(t){return n.from(t.columns)}).getOr(1);oi.showAt(s,kc.sketch((e=tht("autocompleter-value",!0,f,p,"normal"),c=p,a=((l=ctt.ContentFocus)===ctt.ContentFocus?sti:vg)(),y=htt(c,"normal"),o=hy("normal"),{dom:e.dom,components:e.components,items:e.items,value:e.value,markers:{selectedItem:o.selectedItem,item:o.item},movement:y,fakeFocus:l===ctt.ContentFocus,focusManager:a,menuBehaviours:itt("auto"!==c?[]:[li(function(n){iht(n,4,o.item).each(function(t){var i=t.numColumns,r=t.numRows;v.setGridSize(n,r,i)})})])})),{anchor:{type:"node",root:h.fromDom(t.getBody()),node:n.from(i.element)}});oi.getContent(s).each(bt.highlightFirst)}(u,e,f,l):(10<=e.text.length-u.matchLength?c:w)())})})})},nt={onKeypress:yst(function(n){27!==n.which&&d()},50),cancelIfNecessary:c,isMenuOpen:function(){return oi.isOpen(s)},isActive:l,isProcessingAction:o.get,getView:function(){return oi.getContent(s)}};!1===t.hasPlugin("rtc")&&(r=nt,(a=t).on("keypress compositionend",r.onKeypress.throttle),a.on("remove",r.onKeypress.cancel),a.on("keydown",function(n){function t(){return r.getView().bind(bt.getHighlighted)}8===n.which&&r.onKeypress.throttle(n);r.isActive()&&(27===n.which&&r.cancelIfNecessary(),r.isMenuOpen()?13===n.which?(t().each(pl),n.preventDefault()):40===n.which?(t().fold(function(){r.getView().each(bt.highlightFirst)},function(t){g(t,n)}),n.preventDefault(),n.stopImmediatePropagation()):37!==n.which&&38!==n.which&&39!==n.which||t().each(function(t){g(t,n);n.preventDefault();n.stopImmediatePropagation()}):13!==n.which&&38!==n.which&&40!==n.which||r.cancelIfNecessary())}),a.on("NodeChange",function(n){r.isActive()&&!r.isProcessingAction()&&dn(h.fromDom(n.element)).isNone()&&r.cancelIfNecessary()}))}function acr(n){setTimeout(function(){throw n;},0)}function rhi(n){var t=hs(n);return cr(ycr,t)}function uhi(n,t){nr(t.getRoot(n).getOr(n.element),t.invalidClass);t.notify.each(function(t){rhi(n.element)&&rt(n.element,"aria-invalid",!1);t.getContainer(n).each(function(n){iw(n,t.validHtml)});t.onValid(n)})}function fhi(n,t,i,r){pr(t.getRoot(n).getOr(n.element),t.invalidClass);t.notify.each(function(t){rhi(n.element)&&rt(n.element,"aria-invalid",!0);t.getContainer(n).each(function(n){iw(n,r)});t.onInvalid(n,r)})}function ehi(n,t){return t.validator.fold(function(){return bh(et.value(!0))},function(t){return t.validate(n)})}function uct(n,t){return t.notify.each(function(t){t.onValidate(n)}),ehi(n,t).map(function(i){return n.getSystem().isConnected()?i.fold(function(i){return fhi(n,t,0,i),et.error(i)},function(i){return uhi(n,t),et.value(i)}):et.error("No longer in system")})}function hhi(n,t){var i=n.getHotspot(t).getOr(t),r=n.getAnchorOverrides();return n.layouts.fold(function(){return{type:"hotspot",hotspot:i,overrides:r}},function(n){return{type:"hotspot",hotspot:i,overrides:r,layouts:n}})}function ect(i,r,u,f,e,o,s){var a,v=hhi(i,u),h=u,c=f,y=e,p=s,w=r,b=(a=i).fetch(h).map(w),l=bli(h,a);return b.map(function(i){return i.bind(function(i){return n.from(sa.sketch(t(t({},y.menu()),{uid:wv(""),data:i,highlightImmediately:p===fs.HighlightFirst,onOpenMenu:function(n,t){var i=l().getOrDie();ku.position(i,t,{anchor:v});ot.decloak(c)},onOpenSubmenu:function(n,t,i){var r=l().getOrDie();ku.position(r,i,{anchor:{type:"submenu",item:t}});ot.decloak(c)},onRepositionMenu:function(n,t,i){var r=l().getOrDie();ku.position(r,t,{anchor:v});k(i,function(n){ku.position(r,n.triggeredMenu,{anchor:{type:"submenu",item:n.triggeringItem}})})},onEscape:function(){return g.focus(h),ot.close(c),n.some(!0)}})))})}).map(function(n){return n.fold(function(){ot.isOpen(f)&&ot.close(f)},function(n){ot.cloak(f);ot.open(f,n);o(f)}),f})}function by(n,t,i,r,u,f){var e=yi.getCoupled(i,"sandbox");return(ot.isOpen(e)?function(n,t,i,r){return ot.close(r),bh(r)}:ect)(n,t,i,e,r,u,f)}function chi(n){ot.getState(n).each(function(n){sa.repositionMenus(n)})}function oct(n,i,r){var u=skt(),f=bli(i,n);return{dom:{tag:"div",classes:n.sandboxClasses,attributes:{id:u.id,role:"listbox"}},behaviours:fy(n.sandboxBehaviours,[o.config({store:{mode:"memory",initialValue:i}}),ot.config({onOpen:function(t,f){var h,e,c,l,o,s,a=hhi(n,i);u.link(i.element);n.matchWidth&&(h=a.hotspot,e=f,c=n.useMinWidth,o=ft.getCurrent(e).getOr(e),s=nf(h.element),c?tt(o.element,"min-width",s+"px"):(l=o.element,ud.set(l,s)));n.onOpen(a,t,f);void 0!==r&&void 0!==r.onOpen&&r.onOpen(t,f)},onClose:function(n,t){u.unlink(i.element);void 0!==r&&void 0!==r.onClose&&r.onClose(n,t)},isPartOf:function(n,t,r){return vc(t,r)||vc(i,r)},getAttachPoint:function(){return f().getOrDie()}}),ft.config({find:function(n){return ot.getState(n).bind(function(n){return ft.getCurrent(n)})}}),ge.config({channels:t(t({},get({isExtraPart:dt})),not({doReposition:chi}))})])}}function lhi(n){chi(yi.getCoupled(n,"sandbox"))}function sct(){return[i("sandboxClasses",[]),uy("sandboxBehaviours",[ft,ge,ot,o])]}function il(n){return ns({name:n+"-edge",overrides:function(t){return t.model.manager.edgeActions[n].fold(function(){return{}},function(n){return{events:gt([gut(ch(),function(t,i,r){return n(t,r)},[t]),gut(de(),function(t,i,r){return n(t,r)},[t]),gut(wd(),function(t,i,r){r.mouseIsDown.get()&&n(t,r)},[t])])}})}})}function hct(t){var i=t.event.raw;return-1===i.type.indexOf("touch")?void 0!==i.clientX?n.some(i).map(function(n){return ci(n.clientX,n.clientY)}):n.none():void 0!==i.touches&&1===i.touches.length?n.some(i.touches[0]).map(function(n){return ci(n.clientX,n.clientY)}):n.none()}function la(n){return n.model.minX}function aa(n){return n.model.minY}function vtt(n){return n.model.minX-1}function ytt(n){return n.model.minY-1}function va(n){return n.model.maxX}function ya(n){return n.model.maxY}function ptt(n){return n.model.maxX+1}function wtt(n){return n.model.maxY+1}function ahi(n,t,i){return t(n)-i(n)}function cct(n){return ahi(n,va,la)}function lct(n){return ahi(n,ya,aa)}function vhi(n){return cct(n)/2}function yhi(n){return lct(n)/2}function ky(n){return n.stepSize}function phi(n){return n.snapToGrid}function whi(n){return n.snapStart}function bhi(n){return n.rounded}function btt(n,t){return void 0!==n[t+"-edge"]}function khi(n){return btt(n,"left")}function dhi(n){return btt(n,"right")}function ghi(n){return btt(n,"top")}function nci(n){return btt(n,"bottom")}function kh(n){return n.model.value.get()}function rl(n,t){return{x:n,y:t}}function to(n,t){y(n,tk(),{value:t})}function act(n,t,i,r){return n<t?n:i<n?i:n===t?t-1:Math.max(t,n-r)}function vct(n,t,i,r){return i<n?n:n<t?t:n===i?i+1:Math.min(i,n+r)}function tci(n,t,i){return Math.max(t,Math.min(i,n))}function ici(n){var r=n.min,u=n.max,y=n.range,o=n.value,p=n.step,w=n.snap,b=n.snapStart,k=n.rounded,d=n.hasMinEdge,g=n.hasMaxEdge,c=n.minBound,l=n.maxBound,nt=n.screenRange,a=d?r-1:r,v=g?u+1:u,f,e,s,t,h,i;return o<c?a:l<o?v:(i=tci((h=c,Math.min(l,Math.max(o,h))-h)/nt*y+r,a,v),w&&r<=i&&i<=u?(f=i,e=r,s=u,t=p,b.fold(function(){var n=Math.round((f-e)/t)*t;return tci(e+n,e-1,s+1)},function(n){var i=Math.round((f-n)%t/t),r=Math.floor((f-n)/t),u=Math.floor((s-n)/t),e=Math.min(u,r+i);return Math.max(n,n+e*t)})):k?Math.round(i):i)}function rci(n){var i=n.min,r=n.max,u=n.range,t=n.value,f=n.hasMinEdge,e=n.hasMaxEdge,o=n.maxBound,s=n.maxOffset,h=n.centerMinEdge,c=n.centerMaxEdge;return t<i?f?0:h:r<t?e?o:c:(t-i)/u*s}function th(n){return n.element.dom.getBoundingClientRect()}function ktt(n){return th(n)[hlt]}function uci(n){return th(n).right}function dtt(n){return th(n).top}function fci(n){return th(n).bottom}function eci(n){return th(n).width}function oci(n){return th(n).height}function sci(n,t){var i=th(n),r=th(t);return(i[hlt]+i.right)/2-r[hlt]}function hci(n,t){var i=th(n),r=th(t);return(i.top+i.bottom)/2-r.top}function gtt(n,t){y(n,tk(),{value:t})}function yct(n,t,i){return ici({min:la(t),max:va(t),range:cct(t),value:i,step:ky(t),snap:phi(t),snapStart:whi(t),rounded:bhi(t),hasMinEdge:khi(t),hasMaxEdge:dhi(t),minBound:ktt(n),maxBound:uci(n),screenRange:eci(n)})}function cci(t){return function(i,r){return gtt(i,{x:f=(0<t?vct:act)(kh(u=r).x,la(u),va(u),ky(u))}),n.some(f).map(gi);var u,f}}function pct(t,i,r,u,f,e){var s,o,c,l,a,h,v,y,p=(o=e,c=r,l=u,a=f,h=eci(s=i),v=l.bind(function(t){return n.some(sci(t,s))}).getOr(0),y=a.bind(function(t){return n.some(sci(t,s))}).getOr(h),rci({min:la(o),max:va(o),range:cct(o),value:c,hasMinEdge:khi(o),hasMaxEdge:dhi(o),minBound:ktt(s),minOffset:0,maxBound:uci(s),maxOffset:h,centerMinEdge:v,centerMaxEdge:y}));return ktt(i)-ktt(t)+p}function nit(n,t){y(n,tk(),{value:t})}function wct(n,t,i){return ici({min:aa(t),max:ya(t),range:lct(t),value:i,step:ky(t),snap:phi(t),snapStart:whi(t),rounded:bhi(t),hasMinEdge:ghi(t),hasMaxEdge:nci(t),minBound:dtt(n),maxBound:fci(n),screenRange:oci(n)})}function lci(t){return function(i,r){return nit(i,{y:f=(0<t?vct:act)(kh(u=r).y,aa(u),ya(u),ky(u))}),n.some(f).map(gi);var u,f}}function bct(t,i,r,u,f,e){var s,o,c,l,a,h,v,y,p=(o=e,c=r,l=u,a=f,h=oci(s=i),v=l.bind(function(t){return n.some(hci(t,s))}).getOr(0),y=a.bind(function(t){return n.some(hci(t,s))}).getOr(h),rci({min:aa(o),max:ya(o),range:lct(o),value:c,hasMinEdge:ghi(o),hasMaxEdge:nci(o),minBound:dtt(s),minOffset:0,maxBound:fci(s),maxOffset:h,centerMinEdge:v,centerMaxEdge:y}));return dtt(i)-dtt(t)+p}function tit(n,t){y(n,tk(),{value:t})}function iit(n,t){return{x:n,y:t}}function rit(t,i){return function(r,u){return f=u,e=0<t?vct:act,tit(r,iit(s=(o=i)?kh(f).x:e(kh(f).x,la(f),va(f),ky(f)),o?e(kh(f).y,aa(f),ya(f),ky(f)):kh(f).y)),n.some(s).map(gi);var o,f,e,s}}function aci(n){return"<alloy.field."+n+">"}function kcr(i,r,u,s){function h(n,u,f,s,h){var l,a,v=i(llt+"range"),p=[lt.parts.label({dom:{tag:"label",innerHtml:f,attributes:{"aria-label":s}}}),lt.parts.field({data:h,factory:kb,inputAttributes:t({type:"text"},"hex"===u?{"aria-live":"polite"}:{}),inputClasses:[r("textfield")],inputBehaviours:e([(l=u,a=n,nh.config({invalidClass:r("invalid"),notify:{onValidate:function(n){y(n,uai,{type:l})},onValid:function(n){y(n,iai,{type:l,value:o.getValue(n)})},onInvalid:function(n){y(n,rai,{type:l,value:o.getValue(n)})}},validator:{validate:function(n){var t=o.getValue(n),r=a(t)?et.value(!0):et.error(i("aria.input.invalid"));return bh(r)},validateOnLoad:!1}})),ai.config({})]),onSetValue:function(n){nh.isInvalid(n)&&nh.run(n).get(c)}})],w="hex"!==u?[lt.parts["aria-descriptor"]({text:v})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:p.concat(w)}}function a(n,t){var i=t.red,r=t.green,u=t.blue;o.setValue(n,{red:i,green:r,blue:u})}function l(n,t){v.getOpt(n).each(function(n){tt(n.element,"background-color","#"+t.value)})}var v=yt({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return le({factory:function(){function w(n){return d[n].get()}function t(n,t){d[n].set(t)}function b(i,r){var u=r.event;"hex"!==u.type?t(u.type,n.none()):s(i)}function ft(i,r){var f,s,h,c,e=r.event;"hex"===e.type?function(i,r){var f,e;u(i);f=bei(r);t("hex",n.some(r));e=lb(f);a(i,e);k(e);y(i,clt,{hex:f});l(i,f)}(i,e.value):(f=i,s=e.type,h=e.value,c=parseInt(h,10),t(s,n.some(c)),w("red").bind(function(n){return w("green").bind(function(t){return w("blue").map(function(i){return gc(n,t,i,1)})})}).each(function(n){var t,i,r=(t=f,i=cb(n),np.getField(t,"hex").each(function(n){g.isFocused(n)||o.setValue(t,{hex:i.value})}),i);y(f,clt,{hex:r});l(f,r)}))}function c(n){return{label:i(llt+n+".label"),description:i(llt+n+".description")}}function k(i){var r=i.red,u=i.green,f=i.blue;t("red",n.some(r));t("green",n.some(u));t("blue",n.some(f))}var d={red:p(n.some(255)),green:p(n.some(255)),blue:p(n.some(255)),hex:p(n.some("ffffff"))},nt=c("red"),tt=c("green"),rt=c("blue"),ut=c("hex");return ri(np.sketch(function(n){return{dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":i("aria.color.picker")}},components:[n.field("red",lt.sketch(h(aht,"red",nt.label,nt.description,255))),n.field("green",lt.sketch(h(aht,"green",tt.label,tt.description,255))),n.field("blue",lt.sketch(h(aht,"blue",rt.label,rt.description,255))),n.field("hex",lt.sketch(h(kei,"hex",ut.label,ut.description,"ffffff"))),v.asSpec()],formBehaviours:e([nh.config({invalidClass:r("form-invalid")}),it("rgb-form-events",[f(iai,ft),f(rai,b),f(uai,b)])])}}),{apis:{updateHex:function(n,t){var i;o.setValue(n,{hex:t.value});a(n,i=lb(t));k(i);l(n,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(n,t,i){n.updateHex(t,i)}},extraApis:{}})}function dcr(t,o){return le({name:"ColourPicker",configFields:[u("dom"),i("onValidHex",c),i("onInvalidHex",c)],factory:function(i){function b(n,t,i){a.getOpt(n).each(function(n){l.setHue(n,i)})}function d(n,t){w.getOpt(n).each(function(n){ht.updateHex(n,t)})}function h(n,t,i,r){var u=i,f=lb(t);s.paletteRgba.set(f);s.paletteHue.set(u);k(r,function(r){r(n,t,i)})}function lt(n,t){var f,e,r=n.width,u=n.height,i=n.getContext("2d");null!==i&&(i.fillStyle=t,i.fillRect(0,0,r,u),(f=i.createLinearGradient(0,0,r,0)).addColorStop(0,"rgba(255,255,255,1)"),f.addColorStop(1,"rgba(255,255,255,0)"),i.fillStyle=f,i.fillRect(0,0,r,u),(e=i.createLinearGradient(0,0,0,u)).addColorStop(0,"rgba(0,0,0,0)"),e.addColorStop(1,"rgba(0,0,0,1)"),i.fillStyle=e,i.fillRect(0,0,r,u))}var c,nt,tt,rt,ut,et,u,ot,st,ht=kcr(t,o,i.onValidHex,i.onInvalidHex),l=(u=o,ot=ro.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[u("sv-palette-spectrum")]}}),st=ro.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[u("sv-palette-thumb")],innerHtml:"<div class="+u("sv-palette-inner-thumb")+' role="presentation"><\/div>'}}),le({factory:function(){var t=r({x:0,y:0}),i=e([ft.config({find:n.some}),g.config({})]);return ro.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[u("sv-palette")]},model:{mode:"xy",getInitialValue:t},rounded:!1,components:[ot,st],onChange:function(n,t,i){y(n,tai,{value:i})},onInit:function(n,t,i){lt(i.element.dom,toi(loi))},sliderBehaviours:i})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(n,t,i){var r=i;lt(t.components()[0].element.dom,toi(dei(ab(r,100,100))))},setThumb:function(n,t,i){var u=t,r=yht(lb(i));ro.setValue(u,{x:r.saturation,y:100-r.value})}},extraApis:{}})),s={paletteRgba:p(loi),paletteHue:p(0)},ct=yt((nt=ro.parts.spectrum({dom:{tag:"div",classes:[(c=o)("hue-slider-spectrum")],attributes:{role:"presentation"}}}),tt=ro.parts.thumb({dom:{tag:"div",classes:[c("hue-slider-thumb")],attributes:{role:"presentation"}}}),ro.sketch({dom:{tag:"div",classes:[c("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:r({y:0})},components:[nt,tt],sliderBehaviours:e([g.config({})]),onChange:function(n,t,i){y(n,nai,{value:i})}}))),a=yt(l.sketch({})),w=yt(ht.sketch({}));return{uid:i.uid,dom:i.dom,components:[a.asSpec(),ct.asSpec(),w.asSpec()],behaviours:e([it("colour-picker-events",[f(clt,(et=[b,function(n,t,i){ct.getOpt(n).each(function(n){ro.setValue(n,{y:100-i/360*100})})},function(n,t){a.getOpt(n).each(function(n){l.setThumb(n,t)})}],function(n,t){var i=t.event.hex;h(n,i,yht(lb(i)).hue,et)})),f(tai,(ut=[d],function(n,t){var i=t.event.value,r=s.paletteHue.get();h(n,ioi(ab(r,i.x,100-i.y)),r,ut)})),f(nai,(rt=[b,d],function(n,t){var i=(100-t.event.value.y)/100*360,r=yht(s.paletteRgba.get());h(n,ioi(ab(i,r.saturation,r.value)),i,rt)}))]),ft.config({find:function(n){return w.getOpt(n)}}),v.config({mode:"acyclic"})])}}})}function gcr(n){return uvr[n]}function vci(n,t,i){return o.config(ri({store:{mode:"manual",getValue:t,setValue:i}},n.map(function(n){return{store:{initialValue:n}}}).getOr({})))}function nlr(n,t){function i(n,t){t.stop()}function r(n){return function(t,i){k(n,function(n){n(t,i)})}}function h(n,t){var i;a.isDisabled(n)||(i=t.event.raw,u(n,i.dataTransfer.files))}function c(n,t){var i=t.event.raw.target;u(n,i.files)}function u(i,r){var u,f;o.setValue(i,(u=r,f=ul.explode(t.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),fi(lgi(u),function(n){return eo(f,function(t){return yk(n.name.toLowerCase(),"."+t.toLowerCase())})})));y(i,ie,{name:n.name})}var s=yt({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:e([it("input-file-events",[wl(ow()),wl(cw())])])});return yb(n.label.map(function(n){return nl(n,t)}),lt.parts.field({factory:{sketch:function(n){return{uid:n.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:e([eit([]),wa(),a.config({}),ht.config({toggleClass:"dragenter",toggleOnExecute:!1}),it("dropzone-events",[f("dragenter",r([i,ht.toggle])),f("dragleave",r([i,ht.toggle])),f("dragover",i),f("drop",r([i,h])),f(ew(),c)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:t.translate("Drop an image here")}},du.sketch({dom:{tag:"button",innerHtml:t.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[s.asSpec()],action:function(n){s.get(n).element.dom.click()},buttonBehaviours:e([ai.config({}),yy(t.isDisabled),ir()])})]}]}}}}),["tox-form__group--stretched"],[])}function yci(n){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:n},behaviours:e([g.config({ignore:!0}),ai.config({})])}}function pci(n){return{dom:{tag:"div",classes:["tox-navobj"]},components:[yci([vlt]),n,yci([ylt])],behaviours:e([alt(1)])}}function wci(n,t){y(n,bd(),{raw:{which:9,shiftKey:t}})}function tlr(n,t){var i=t.element;se(i,vlt)?wci(n,!0):se(i,ylt)&&wci(n,!1)}function db(n){return vb(n,["."+vlt,"."+ylt].join(","),dt)}function dy(n,t){return cvr(document.createElement("canvas"),n,t)}function ilr(n){var t=dy(n.width,n.height);return dh(t).drawImage(n,0,0),t}function kct(n){return n.naturalWidth||n.width}function dct(n){return n.naturalHeight||n.height}function bci(t,i,r){return i=i||"image/png",wf(HTMLCanvasElement.prototype.toBlob)?new wh(function(n,u){t.toBlob(function(t){t?n(t):u()},i,r)}):(u=t.toDataURL(i,r),new wh(function(t,i){!function(){var f=u.split(","),e=/data:([^;]+)/.exec(f[0]);if(!e)return n.none();for(var y=e[1],p=f[1],o=atob(p),s=o.length,h=Math.ceil(s/1024),c=new Array(h),t=0;t<h;++t){for(var i=1024*t,l=Math.min(1024+i,s),a=new Array(l-i),r=i,v=0;r<l;++v,++r)a[v]=o[r].charCodeAt(0);c[t]=new Uint8Array(a)}return n.some(new Blob(c,{type:y}))}().fold(function(){i("uri is not base64: "+u)},t)}));var u}function kci(n,t,i){function u(t,i){return n.then(function(n){return n.toDataURL(t||"image/png",i)})}return{getType:r(t.type),toBlob:function(){return wh.resolve(t)},toDataURL:r(i),toBase64:function(){return i.split(",")[1]},toAdjustedBlob:function(t,i){return n.then(function(n){return bci(n,t,i)})},toAdjustedDataURL:u,toAdjustedBase64:function(n,t){return u(n,t).then(function(n){return n.split(",")[1]})},toCanvas:function(){return n.then(ilr)}}}function pa(n,t){return bci(n,t).then(function(t){return kci(wh.resolve(n),t,n.toDataURL())})}function rlr(n){return t=n,new wh(function(n){var i=new FileReader;i.onloadend=function(){n(i.result)};i.readAsDataURL(t)}).then(function(t){return kci((i=n,new wh(function(n,t){function f(){r.removeEventListener("load",u);r.removeEventListener("error",o)}var e=URL.createObjectURL(i),r=new Image,u=function(){f();n(r)},o=function(){f();t("Unable to load data of type "+i.type+": "+e)};r.addEventListener("load",u);r.addEventListener("error",o);r.src=e;r.complete&&setTimeout(u,0)}).then(function(n){lvr(n);var t=dy(kct(n),dct(n));return dh(t).drawImage(n,0,0),t})),n,t);var i});var t}function gb(n,t,i){var r="string"==typeof n?parseFloat(n):n;return i<r?r=i:r<t&&(r=t),r}function dci(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}function gct(n,t){for(var i,f,r,e=[],o=new Array(25),u=0;u<5;u++){for(i=0;i<5;i++)e[i]=t[i+5*u];for(i=0;i<5;i++){for(f=0,r=0;r<5;r++)f+=n[i+5*r]*e[r];o[i+5*u]=f}}return o}function nlt(n,t){return n.toCanvas().then(function(i){return avr(i,n.getType(),t)})}function gci(n){return function(t,i){return nlt(t,n(dci(),i))}}function nli(n,t){void 0===t&&(t=2);var i=Math.pow(10,t),r=Math.round(n*i);return Math.ceil(r/i)}function ulr(n){return vvr(n)}function flr(n){return wvr(n)}function elr(n,t){return bvr(n,t)}function olr(n,t){return yvr(n,t)}function slr(n,t){return pvr(n,t)}function tli(n,t){return r=t,(i=n).toCanvas().then(function(n){return gvr(n,i.getType(),r)});var i,r}function ili(n,t){return r=t,(i=n).toCanvas().then(function(n){return dvr(n,i.getType(),r)});var i,r}function rli(n,t,i){return ts(n,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:i},t)}function uit(n,t){return rli(n,t,[])}function uli(n,t){return rli(n,t,[nt.config({})])}function tlt(n,t,i){return{dom:{tag:"span",innerHtml:i.translate(n),classes:[t+"__select-label"]},behaviours:e([nt.config({})])}}function ilt(i,r,u){function h(t,i){var r=o.getValue(t);return g.focus(r),y(r,"keydown",{raw:i.event.raw}),io.close(r),n.some(!0)}var l=p(c),a=i.text.map(function(n){return yt(tlt(n,r,u.providers))}),w=i.icon.map(function(n){return yt(uli(n,u.providers.icons))}),b=i.role.fold(function(){return{}},function(n){return{role:n}}),k=i.tooltip.fold(function(){return{}},function(n){var t=u.providers.translate(n);return{title:t,"aria-label":t}}),d=ts("chevron-down",{tag:"div",classes:[r+"__select-chevron"]},u.providers.icons);return yt(io.sketch(t(t(t({},i.uid?{uid:i.uid}:{}),b),{dom:{tag:"button",classes:[r,r+"--select"].concat(s(i.classes,function(n){return r+"--"+n})),attributes:t({},k)},components:py([w.map(function(n){return n.asSpec()}),a.map(function(n){return n.asSpec()}),n.some(d)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:e(pt(pt([],i.dropdownBehaviours,!0),[yy(function(){return i.disabled||u.providers.isDisabled()}),ir(),nk.config({}),nt.config({}),it("dropdown-events",[ob(i,l),sb(i,l)]),it("menubutton-update-display-text",[f(tp,function(n,t){a.bind(function(t){return t.getOpt(n)}).each(function(n){nt.set(n,[dl(u.providers.translate(t.event.text))])})}),f(sai,function(n,t){w.bind(function(t){return t.getOpt(n)}).each(function(n){nt.set(n,[uli(t.event.icon,u.providers.icons)])})})])],!1)),eventOrder:ri(oai,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:e([v.config({mode:"special",onLeft:h,onRight:h})]),lazySink:u.getSink,toggleClass:r+"--active",parts:{menu:gn(0,i.columns,i.presets)},fetch:function(n){return tl(ue(i.fetch,n))}}))).asSpec()}function rlt(n){return"separator"===n.type}function gy(t,i,r,u){var e=l("primary-menu"),f=hai(t,r.shared.providers.menuItems());if(0===f.items.length)return n.none();var o=osi(e,f.items,i,r,u),s=hr(f.menus,function(n,t){return osi(t,n,i,r,!1)}),h=ri(s,hh(e,o));return n.from(sa.tieredData(e,h,f.expansions))}function hlr(n){return{isDisabled:function(){return a.isDisabled(n)},setDisabled:function(t){return a.set(n,t)},setActive:function(t){var i=n.element;t?(pr(i,"tox-tbtn--enabled"),rt(i,"aria-pressed",!0)):(nr(i,"tox-tbtn--enabled"),nu(i,"aria-pressed"))},isActive:function(){return se(n.element,"tox-tbtn--enabled")}}}function ult(n,t,i,r){return ilt({text:n.text,icon:n.icon,tooltip:n.tooltip,role:r,fetch:function(t,r){n.fetch(function(n){r(gy(n,us.CLOSE_ON_EXECUTE,i,!1))})},onSetup:n.onSetup,getApi:hlr,columns:1,presets:"normal",classes:[],dropdownBehaviours:[ai.config({})]},t,i.shared)}function fli(n,i,r,u,f,o){void 0===r&&(r=[]);var s=i.fold(function(){return{}},function(n){return{action:n}}),h=t({buttonBehaviours:e([yy(function(){return n.disabled||o.isDisabled()}),ir(),ai.config({}),it("button press",[vbt("click"),vbt("mousedown")])].concat(r)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},s),c=ri(h,{dom:u});return ri(c,{components:f})}function eli(n,t,i,r){void 0===r&&(r=[]);var u={tag:"button",classes:["tox-tbtn"],attributes:n.tooltip.map(function(n){return{"aria-label":i.translate(n),title:i.translate(n)}}).getOr({})},f=n.icon.map(function(n){return uit(n,i.icons)});return fli(n,t,r,u,py([f]),i)}function oli(t,i,r,u){void 0===u&&(u=[]);var f=eli(t,n.some(i),r,u);return du.sketch(f)}function sli(i,r,u,f,e){void 0===f&&(f=[]);void 0===e&&(e=[]);var s=u.translate(i.text),o=i.icon?i.icon.map(function(n){return uit(n,u.icons)}):n.none(),h=o.isSome()?py([o]):[],c=o.isSome()?{}:{innerHtml:s},l=pt(pt(pt(pt([],i.primary||i.borderless?["tox-button"]:["tox-button","tox-button--secondary"],!0),o.isSome()?["tox-button--icon"]:[],!0),i.borderless?["tox-button--naked"]:[],!0),e,!0);return fli(i,r,f,t(t({tag:"button",classes:l},c),{attributes:{title:s}}),h,u)}function flt(t,i,r,u,f){void 0===u&&(u=[]);void 0===f&&(f=[]);var e=sli(t,n.some(i),r,u,f);return du.sketch(e)}function hli(n,t){return function(i){"custom"===t?y(i,gs,{name:n,value:{}}):"submit"===t?at(i,bb):"cancel"===t?at(i,ca):console.error("Unknown button type: ",t)}}function fit(i,r,u){var e,f,o,h,l,a;if("menu"===r)return e=i,f=yt(ult(t(t({},i),{onSetup:function(n){return n.setDisabled(i.disabled),c},fetch:(o=e.items,h=function(){return f},l=u,function(n){n(s(o,function(n){var r,i,u=n.text.fold(function(){return{}},function(n){return{text:n}});return t(t({type:n.type,active:!1},u),{onAction:function(n){var t=!n.isActive();n.setActive(t);i.storage.set(t);l.shared.getSink().each(function(n){h().getOpt(n).each(function(n){ah(n.element);y(n,gs,{name:i.name,value:i.storage.get()})})})},onSetup:(r=i=n,function(n){n.setActive(r.storage.get())})})}))})}),"tox-tbtn",u,n.none())),f.asSpec();if("custom"===r||"cancel"===r||"submit"===r)return a=hli(i.name,r),flt(t(t({},i),{borderless:!1}),a,u.shared.providers,[]);console.error("Unknown footer button type: ",r)}function cli(n,t){return fu({factory:lt,name:n,overrides:function(n){return{fieldBehaviours:e([it("coupled-input-behaviour",[f(yv(),function(i){kt(i,n,t).bind(ft.getCurrent).each(function(t){kt(i,n,"lock").each(function(r){ht.isOn(r)&&n.onLockedChange(i,t,r)})})})])])}}})}function elt(n){var t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(n),i,r;return null===t?et.error(n):(i=parseFloat(t[1]),r=t[2],et.value({value:i,unit:r}))}function lli(t,i){function u(n){return ni(r,n)}var r={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,"in":1};return t.unit===i?n.some(t.value):u(t.unit)&&u(i)?r[t.unit]===r[i]?n.some(t.value):n.some(t.value/r[t.unit]*r[i]):n.none()}function olt(){return n.none()}function ali(n,t){function u(n){return ts(n,{tag:"span",classes:["tox-icon","tox-lock-icon__"+n]},t.icons)}function i(n){return{dom:{tag:"div",classes:["tox-form__group"]},components:n}}function s(i){return lt.parts.field({factory:kb,inputClasses:["tox-textfield"],inputBehaviours:e([a.config({disabled:function(){return n.disabled||t.isDisabled()}}),ir(),ai.config({}),it("size-input-events",[f(lc(),function(n){y(n,c,{isField1:i})}),f(ew(),function(t){y(t,ie,{name:n.name})})])]),selectOnFocus:!1})}function r(n){return{dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(n)}}}var h=olt,c=l("ratio-event"),v=re.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(n.label.getOr("Constrain proportions"))}},components:[u("lock"),u("unlock")],buttonBehaviours:e([a.config({disabled:function(){return n.disabled||t.isDisabled()}}),ir(),ai.config({})])}),p=re.parts.field1(i([lt.parts.label(r("Width")),s(!0)])),w=re.parts.field2(i([lt.parts.label(r("Height")),s(!1)]));return re.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[p,w,i([r("&nbsp;"),v])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(n,t){elt(o.getValue(n)).each(function(n){h(n).each(function(n){var r,u,f,i;o.setValue(t,(i=-1!==(i=(r=n).value.toFixed((u=r.unit)in(f={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,"in":4,"%":4})?f[u]:1)).indexOf(".")?i.replace(/\.?0*$/,""):i)+r.unit)})})},coupledFieldBehaviours:e([a.config({disabled:function(){return n.disabled||t.isDisabled()},onDisabled:function(n){re.getField1(n).bind(lt.getField).each(a.disable);re.getField2(n).bind(lt.getField).each(a.disable);re.getLock(n).each(a.disable)},onEnabled:function(n){re.getField1(n).bind(lt.getField).each(a.enable);re.getField2(n).bind(lt.getField).each(a.enable);re.getLock(n).each(a.enable)}}),ir(),it("size-input-events2",[f(c,function(n,t){var i,r,u,f=t.event.isField1,e=f?re.getField1(n):re.getField2(n),s=f?re.getField2(n):re.getField1(n),c=e.map(o.getValue).getOr(""),l=s.map(o.getValue).getOr("");i=l;r=elt(c).toOptional();u=elt(i).toOptional();h=vk(r,u,function(n,t){return lli(n,t.unit).map(function(n){return t.value/n}).map(function(n){return r=n,i=t.unit,function(n){return lli(n,i).map(function(n){return{value:n*r,unit:i}})};var r,i}).getOr(olt)}).getOr(olt)})])])})}function clr(t,i){function k(t,r,u,f){return yt(flt({name:t,text:t,disabled:u,primary:f,icon:n.none(),borderless:!1},r,i))}function u(t,r,u,f){return yt(oli({name:t,icon:n.some(t),tooltip:n.some(r),disabled:f,primary:!1,borderless:!1},u,i))}function d(n,t){n.map(function(n){var i=n.get(t);i.hasConfigured(a)&&a.disable(i)})}function tt(n,t){n.map(function(n){var i=n.get(t);i.hasConfigured(a)&&a.enable(i)})}function v(n,t,i){y(n,t,i)}function et(n){return at(n,sf.disable()),0}function ot(n){return at(n,sf.enable()),0}function bt(n,t){et(n);v(n,ou.transform(),{transform:t});ot(n)}function st(n){return function(){ft.getOpt(n).each(function(n){nt.set(n,[ri])})}}function kt(n,t){et(n);v(n,ou.transformApply(),{transform:t,swap:st(n)});ot(n)}function p(){return k("Back",function(n){return v(n,ou.back(),{swap:st(n)})},!1,!1)}function w(){return yt({dom:{tag:"div",classes:["tox-spacer"]},behaviours:e([a.config({})])})}function rt(){return k("Apply",function(n){return v(n,ou.apply(),{swap:st(n)})},!0,!0)}function b(n,t){return function(i){return n(i,t)}}function ut(n,t){var i,r=t;et(i=n);v(i,ou.tempTransform(),{transform:r});ot(i)}function dt(n,t,u,f,o){var s=ro.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:i.translate(n)}}),h=ro.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),c=ro.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return yt(ro.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:u,maxX:o,getInitialValue:r({x:f})},components:[s,h,c],sliderBehaviours:e([g.config({})]),onChoose:t}))}function ht(n,t,i,r,u){var s,c,l,a,v,y,o=(s=n,c=t,l=i,a=r,v=u,[p(),(y=c,dt(s,function(n,t,i){bt(n,b(y,i.x/100))},l,a,v)),rt()]);return eu.sketch({dom:h,components:o.map(function(n){return n.asSpec()}),containerBehaviours:e([it("image-tools-filter-panel-buttons-events",[f(sf.disable(),function(n){d(o,n)}),f(sf.enable(),function(n){tt(o,n)})])])})}function ct(n){return dt(n,function(n){var t=ni.getOpt(n),i=ii.getOpt(n),r=ti.getOpt(n);t.each(function(t){i.each(function(i){r.each(function(r){var u,f,e,s=o.getValue(t).x/100,h=o.getValue(r).x/100,c=o.getValue(i).x/100,l=(u=s,f=h,e=c,function(n){return nlt(n,(t=f,i=e,gct(dci(),[gb(u,0,2),0,0,0,0,0,gb(t,0,2),0,0,0,0,0,gb(i,0,2),0,0,0,0,0,1,0,0,0,0,0,1])));var t,i});bt(n,l)})})})},0,100,200)}function s(n,t,i){return function(r){v(r,ou.swap(),{transform:t,swap:function(){ft.getOpt(r).each(function(t){nt.set(t,[n]);i(t)})}})}}var h={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},l=c,lt=[p(),w(),k("Apply",function(n){kt(n,function(n){var r,u,f,e,o,s,h,c,l,i=t.getRect();return r=i.x,u=i.y,f=i.w,e=i.h,s=r,h=u,c=f,l=e,(o=n).toCanvas().then(function(n){return nyr(n,o.getType(),s,h,c,l)})});t.hideCrop()},!1,!0)],ui=eu.sketch({dom:h,components:lt.map(function(n){return n.asSpec()}),containerBehaviours:e([it("image-tools-crop-buttons-events",[f(sf.disable(),function(n){d(lt,n)}),f(sf.enable(),function(n){tt(lt,n)})])])}),vt=yt(ali({name:"size",label:n.none(),constrain:!0,disabled:!1},i)),pt=[p(),w(),vt,w(),k("Apply",function(n){vt.getOpt(n).each(function(t){var i,r,u=o.getValue(t),f=parseInt(u.width,10),e=parseInt(u.height,10),s=(i=f,r=e,function(n){return u=i,f=r,(t=n).toCanvas().then(function(n){return fai(n,u,f).then(function(n){return pa(n,t.getType())})});var t,u,f});kt(n,s)})},!1,!0)],fi=eu.sketch({dom:h,components:pt.map(function(n){return n.asSpec()}),containerBehaviours:e([it("image-tools-resize-buttons-events",[f(sf.disable(),function(n){d(pt,n)}),f(sf.enable(),function(n){tt(pt,n)})])])}),ei=b(tli,"h"),oi=b(tli,"v"),si=b(ili,-90),hi=b(ili,90),wt=[p(),w(),u("flip-horizontally","Flip horizontally",function(n){ut(n,ei)},!1),u("flip-vertically","Flip vertically",function(n){ut(n,oi)},!1),u("rotate-left","Rotate counterclockwise",function(n){ut(n,si)},!1),u("rotate-right","Rotate clockwise",function(n){ut(n,hi)},!1),w(),rt()],ci=eu.sketch({dom:h,components:wt.map(function(n){return n.asSpec()}),containerBehaviours:e([it("image-tools-fliprotate-buttons-events",[f(sf.disable(),function(n){d(wt,n)}),f(sf.enable(),function(n){tt(wt,n)})])])}),li=[p(),w(),rt()],gt=eu.sketch({dom:h,components:li.map(function(n){return n.asSpec()})}),ai=ht("Brightness",olr,-100,0,100),vi=ht("Contrast",slr,-100,0,100),yi=ht("Gamma",elr,-100,0,100),ni=ct("R"),ti=ct("G"),ii=ct("B"),pi=[p(),ni,ti,ii,rt()],wi=eu.sketch({dom:h,components:pi.map(function(n){return n.asSpec()})}),bi=n.some(flr),ki=n.some(ulr),di=[u("crop","Crop",s(ui,n.none(),function(){t.showCrop()}),!1),u("resize","Resize",s(fi,n.none(),function(n){vt.getOpt(n).each(function(n){var i=t.getMeasurements(),r=i.width,u=i.height;o.setValue(n,{width:r,height:u})})}),!1),u("orientation","Orientation",s(ci,n.none(),l),!1),u("brightness","Brightness",s(ai,n.none(),l),!1),u("sharpen","Sharpen",s(gt,bi,l),!1),u("contrast","Contrast",s(vi,n.none(),l),!1),u("color-levels","Color levels",s(wi,n.none(),l),!1),u("gamma","Gamma",s(yi,n.none(),l),!1),u("invert","Invert",s(gt,ki,l),!1)],ri=eu.sketch({dom:h,components:di.map(function(n){return n.asSpec()})}),ft=yt(eu.sketch({dom:{tag:"div"},components:[ri],containerBehaviours:e([nt.config({})])}));return{memContainer:ft,getApplyButton:function(n){return ft.getOpt(n).map(function(n){var t=n.components()[0];return t.components()[t.components().length-1]})}}}function slt(n){if(fo(n.changedTouches))for(var i="screenX screenY pageX pageY clientX clientY".split(" "),t=0;t<i.length;t++)n[i[t]]=n.changedTouches[0][i[t]]}function llr(n,t){return{uid:n.uid,dom:n.dom,components:t,behaviours:br(n.formBehaviours,[o.config({store:{mode:"manual",getValue:function(t){return hr(gnt(t,n),function(n,t){return n().bind(function(n){var i=ft.getCurrent(n),r=new Error("Cannot find a current component to extract the value from for form part '"+t+"': "+hc(n.element));return i.fold(function(){return et.error(r)},et.value)}).map(o.getValue)})},setValue:function(t,i){su(i,function(i,r){kt(t,n,r).each(function(n){ft.getCurrent(n).each(function(n){o.setValue(n,i)})})})}}})]),apis:{getField:function(t,i){return kt(t,n,i).bind(ft.getCurrent)}}}}function wa(){return ft.config({find:n.some})}function alr(n){return t=tft,i=iw,vci(n,function(n){return t(n.element)},function(n,t){return i(n.element,t)});var t,i}function syr(n,t){function v(n){var e,o,s,v,d,g,k,nt,c=n.raw,tt=(e=Math.max,o=u.documentElement,s=u.body,v=e(o.scrollWidth,s.scrollWidth),d=e(o.clientWidth,s.clientWidth),g=e(o.offsetWidth,s.offsetWidth),k=e(o.scrollHeight,s.scrollHeight),nt=e(o.clientHeight,s.clientHeight),{width:v<g?d:v,height:k<e(o.offsetHeight,s.offsetHeight)?nt:k}),it;slt(c);n.prevent();p=c.button;w=c.screenX;b=c.screenY;it=bf(l,"cursor");oh(i=h.fromTag("div",u),{position:"absolute",top:"0",left:"0",width:tt.width+"px",height:tt.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:it});tf(cwt(f),i);r.push(tr(f,"mousemove",y),tr(f,"touchmove",y),tr(f,"mouseup",a),tr(f,"touchend",a));t.start(c)}function y(n){var i=n.raw;if(slt(i),i.button!==p)return a(n);i.deltaX=i.screenX-w;i.deltaY=i.screenY-b;n.prevent();t.drag(i)}var e,o,s,i,p,w,b,c=[],r=[],u=null!==(e=t.document)&&void 0!==e?e:document,d=null!==(o=t.root)&&void 0!==o?o:u,f=h.fromDom(u),l=h.fromDom(d.getElementById(null!==(s=t.handle)&&void 0!==s?s:n)),a=function(n){slt(n.raw);k(r,function(n){return n.unbind()});r=[];ls(i);t.stop&&t.stop(n.raw)};return c.push(tr(l,"mousedown",v),tr(l,"touchstart",v)),{destroy:function(){k(r.concat(c),function(n){return n.unbind()});r=[];c=[];fo(i)&&ls(i)}}}function oit(t,i,r,u,f){return oli({name:t,icon:n.some(i),disabled:r,tooltip:n.some(t),primary:!1,borderless:!1},u,f)}function lai(n,t){t?a.enable(n):a.disable(n)}function hyr(n){function f(n){e.set(n)}function l(n){URL.revokeObjectURL(n.url)}function a(n){var t=o(n),i;return f(t),i=u.add(t).removed,ul.each(i,l),t.url}function o(n){return{blob:n,url:URL.createObjectURL(n)}}function v(){r.on(l);r.clear()}var i,t,s,h,e=p(n),r=vi(),u=(t=-1,{data:i=[],add:function(n){var r=i.splice(++t);return i.push(n),{state:n,removed:r}},undo:function(){if(s())return i[--t]},redo:function(){if(h())return i[++t]},canUndo:s=function(){return 0<t},canRedo:h=function(){return-1!==t&&t<i.length-1}});return u.add(n),{getBlobState:function(){return e.get()},setBlobState:f,addBlobState:a,getTempState:function(){return r.get().getOrThunk(e.get)},updateTempState:function(n){var t=o(n);return v(),r.set(t),t.url},addTempState:function(n){var t=o(n);return r.set(t),t.url},applyTempState:function(n){return r.get().fold(c,function(t){a(t.blob);n()})},destroyTempState:v,undo:function(){var n=u.undo();return f(n),n.url},redo:function(){var n=u.redo();return f(n),n.url},getHistoryStates:function(){return{undoEnabled:u.canUndo(),redoEnabled:u.canRedo()}}}}function cyr(i,r){function d(n){var t=u.getHistoryStates();at.updateButtonUndoStates(n,t.undoEnabled,t.redoEnabled);y(n,sf.formActionEvent,{name:sf.saveState(),value:t.undoEnabled})}function dt(n){return n.toBlob()}function vt(n){y(n,sf.formActionEvent,{name:sf.disable(),value:{}})}function ft(n,t,i,r,u){vt(n);rlr(t).then(i).then(dt).then(r).then(function(t){return ut(n,t)}).then(function(){d(n);u();b(n)}).catch(function(t){console.log(t);n.getSystem().isConnected()&&b(n)})}function pt(n,t,i){ft(n,u.getBlobState().blob,t,function(n){return u.updateTempState(n)},i)}function et(n){var t=u.getBlobState().url;return u.destroyTempState(),d(n),t}function bt(n,t){v.getOpt(n).each(function(n){var i=s.get(),o=nf(n.element),h=cu(n.element),r=t.dom.naturalWidth*i,u=t.dom.naturalHeight*i,f=Math.max(0,o/2-r/2),e=Math.max(0,h/2-u/2),c={left:f.toString()+"px",top:e.toString()+"px",width:r.toString()+"px",height:u.toString()+"px",position:"absolute"};oh(t,c);lt.getOpt(n).each(function(n){oh(n.element,c)});l.run(function(n){var t=w.get();n.setRect({x:t.x*i+f,y:t.y*i+e,w:t.w*i,h:t.h*i});n.setClampRect({x:f,y:e,w:r,h:u});n.setViewPortRect({x:0,y:0,w:o,h:h})})})}function kt(t,i){var u,r=h.fromTag("img");return rt(r,"src",i),u=r.dom,new nb(function(n){var t=function(){u.removeEventListener("load",t);n(u)};u.complete?n(u):u.addEventListener("load",t)}).then(function(){t.getSystem().isConnected()&&v.getOpt(t).map(function(t){var o=wft({element:r}),u,i,f,e;nt.replaceAt(t,1,n.some(o));u=tt.get();i={x:0,y:0,w:r.dom.naturalWidth,h:r.dom.naturalHeight};tt.set(i);e=cai.inflate(i,-20,-20);w.set(e);u.w===i.w&&u.h===i.h||(f=r,v.getOpt(t).each(function(n){var i=nf(n.element),r=cu(n.element),u=f.dom.naturalWidth,e=f.dom.naturalHeight,t=Math.min(i/u,r/e);1<=t?s.set(1):s.set(t)}));bt(t,r)})})}var g,ot,st,ht,ct,lt,s,l,w,tt,v,u=hyr(i.currentState),b=function(n){wt.getApplyButton(n).each(function(n){a.enable(n)});y(n,sf.formActionEvent,{name:sf.enable(),value:{}})},ut=function(n,t){return vt(n),k.updateSrc(n,t)},k=(ht=i.currentState.url,lt=yt({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),s=p(1),ct=vdt(),l=t(t({},ct),{run:function(n){return ct.get().each(n)}}),w=p({x:0,y:0,w:1,h:1}),tt=p({x:0,y:0,w:1,h:1}),{memContainer:v=yt(eu.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[lt.asSpec(),{dom:{tag:"img",attributes:{src:ht}}},{dom:{tag:"div"},behaviours:e([it("image-panel-crop-events",[li(function(n){v.getOpt(n).each(function(n){var i=n.element.dom,t=vai({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},i,c);t.toggleVisibility(!1);t.on("updateRect",function(n){var t=n.rect,i=s.get(),r={x:Math.round(t.x/i),y:Math.round(t.y/i),w:Math.round(t.w/i),h:Math.round(t.h/i)};w.set(r)});l.set(t)})}),ws(function(){l.clear()})])])}],containerBehaviours:e([nt.config({}),it("image-panel-events",[li(function(n){kt(n,ht)})])])})),updateSrc:kt,zoom:function(n,t){var i=s.get(),r=0<t?Math.min(2,i+.1):Math.max(.1,i-.1);s.set(r);v.getOpt(n).each(function(n){var t=n.components()[1].element;bt(n,t)})},showCrop:function(){l.run(function(n){n.toggleVisibility(!0)})},hideCrop:function(){l.run(function(n){n.toggleVisibility(!1)})},getRect:function(){return w.get()},getMeasurements:function(){var n=tt.get();return{width:n.w,height:n.h}}}),at=(ot=yt(oit("Undo","undo",!0,function(n){y(n,ou.undo(),{direction:1})},g=r)),st=yt(oit("Redo","redo",!0,function(n){y(n,ou.redo(),{direction:1})},g)),{container:eu.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[ot.asSpec(),st.asSpec(),oit("Zoom in","zoom-in",!1,function(n){y(n,ou.zoom(),{direction:1})},g),oit("Zoom out","zoom-out",!1,function(n){y(n,ou.zoom(),{direction:-1})},g)]}),updateButtonUndoStates:function(n,t,i){ot.getOpt(n).each(function(n){lai(n,t)});st.getOpt(n).each(function(n){lai(n,i)})}}),wt=clr(k,r);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[wt.memContainer.asSpec(),k.memContainer.asSpec(),at.container],behaviours:e([o.config({store:{mode:"manual",getValue:function(){return u.getBlobState()}}}),it("image-tools-events",[f(ou.undo(),function(n){var t=u.undo();ut(n,t).then(function(){b(n);d(n)})}),f(ou.redo(),function(n){var t=u.redo();ut(n,t).then(function(){b(n);d(n)})}),f(ou.zoom(),function(n,t){var i=t.event.direction;k.zoom(n,i)}),f(ou.back(),function(n,t){var i,r=et(i=n);ut(i,r).then(function(){b(i)});t.event.swap();k.hideCrop()}),f(ou.apply(),function(n,t){u.applyTempState(function(){et(n);t.event.swap()})}),f(ou.transform(),function(n,t){return pt(n,t.event.transform,c)}),f(ou.tempTransform(),function(n,t){var i=t.event.transform;ft(n,u.getTempState().blob,i,function(n){return u.addTempState(n)},c)}),f(ou.transformApply(),function(n,t){var i=n,r=t.event.transform,f=t.event.swap,e=u.getBlobState().blob;ft(i,e,r,function(n){var t=u.addBlobState(n);return et(i),t},f)}),f(ou.swap(),function(n,t){at.updateButtonUndoStates(n,!1,!1);var r=t.event.transform,i=t.event.swap;r.fold(function(){i()},function(t){pt(n,t,i)})})]),wa()])}}function wlt(n){return!ni(n,"items")}function lyr(n,t){function i(n){return{dom:{tag:"td",innerHtml:t.translate(n)}}}return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:s(n.header,function(n){return{dom:{tag:"th",innerHtml:t.translate(n)}}})}]},{dom:{tag:"tbody"},components:s(n.cells,function(n){return{dom:{tag:"tr"},components:s(n,i)}})}],behaviours:e([ai.config({}),g.config({})])}}function yai(i,u){var s=i.label.map(function(n){return nl(n,u)}),h=[a.config({disabled:function(){return i.disabled||u.isDisabled()}}),ir(),v.config({mode:"execution",useEnter:!0!==i.multiline,useControlEnter:!0===i.multiline,execute:function(t){return at(t,bb),n.some(!0)}}),it("textfield-change",[f(yv(),function(n){y(n,ie,{name:i.name})}),f(sft(),function(n){y(n,ie,{name:i.name})})]),ai.config({})],c=i.validation.map(function(n){return nh.config({getRoot:function(n){return gu(n.element)},invalidClass:"tox-invalid",validator:{validate:function(t){var i=o.getValue(t),r=n.validator(i);return bh(!0===r?et.value(i):et.error(r))},validateOnLoad:n.validateOnLoad}})}).toArray(),l=i.placeholder.fold(r({}),function(n){return{placeholder:u.translate(n)}}),p=i.inputMode.fold(r({}),function(n){return{inputmode:n}}),w=t(t({},l),p);return yb(s,lt.parts.field({tag:!0===i.multiline?"textarea":"input",inputAttributes:w,inputClasses:[i.classname],inputBehaviours:e(sr([h,c])),selectOnFocus:!1,factory:kb}),(i.flex?["tox-form__group--stretched"]:[]).concat(i.maximized?["tox-form-group--maximize"]:[]),[a.config({disabled:function(){return i.disabled||u.isDisabled()},onDisabled:function(n){lt.getField(n).each(a.disable)},onEnabled:function(n){lt.getField(n).each(a.enable)}}),ir()])}function pai(){var n=p(null);return ne({readState:function(){return{timer:null!==n.get()?"set":"unset"}},setTimer:function(t){n.set(t)},cancel:function(){var t=n.get();null!==t&&t.cancel()}})}function sit(n,t,i){var r=o.getValue(i);o.setValue(t,r);hpi(t)}function wai(n,t){var i=n.element,r=kl(i),u=i.dom;"number"!==hu(i,"type")&&t(u,r)}function ayr(n){return{type:"menuitem",value:n.url,text:n.title,meta:{attach:n.attach},onAction:c}}function blt(n,t){return{type:"menuitem",value:t,text:n,meta:{attach:void 0},onAction:c}}function bai(n,t){return i=n,s(fi(t,function(n){return n.type===i}),ayr);var i}function klt(n,t){var i=n.toLowerCase();return fi(t,function(n){return yu((void 0!==n.meta&&void 0!==n.meta.text?n.meta:n).text.toLowerCase(),i)||yu(n.value.toLowerCase(),i)})}function vyr(i,r,u){function v(n){var t=o.getValue(n);u.addToHistory(t.value,i.filetype)}var k,p,d,w,h=r.shared.providers,ot=lt.parts.field({factory:bpr,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":cpi,type:"url"},minChars:0,responseTime:0,fetch:function(t){var h,c,f,e,l=gy((h=i.filetype,c=u,f=o.getValue(t),e=void 0!==f.meta.text?f.meta.text:f.value,c.getLinkInformation().fold(function(){return[]},function(t){var i=klt(e,s(c.getHistory(h),function(n){return blt(n,n)}));return"file"===h?vu([i,klt(e,bai("header",t.targets)),klt(e,sr([n.from(t.anchorTop).map(function(n){return blt("<top>",n)}).toArray(),bai("anchor",t.targets),n.from(t.anchorBottom).map(function(n){return blt("<bottom>",n)}).toArray()]))],function(n,t){return 0===n.length||0===t.length?n.concat(t):n.concat(dpr,t)},[]):i})),us.BUBBLE_TO_SANDBOX,r,!1);return bh(l)},getHotspot:function(n){return ut.getOpt(n)},onSetValue:function(n){n.hasConfigured(nh)&&nh.run(n).get(c)},typeaheadBehaviours:e(sr([u.getValidationHandler().map(function(n){return nh.config({getRoot:function(n){return gu(n.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(n,t){g.getOpt(n).each(function(n){rt(n.element,"title",h.translate(t))})}},validator:{validate:function(t){var r=o.getValue(t);return kpr(function(t){n({type:i.filetype,url:r.value},function(n){var i,r;"invalid"===n.status?(i=et.error(n.message),t(i)):(r=et.value(n.message),t(r))})})},validateOnLoad:!1}})}).toArray(),[a.config({disabled:function(){return i.disabled||h.isDisabled()}}),ai.config({}),it("urlinput-events",sr(["file"===i.filetype?[f(yv(),function(n){y(n,ie,{name:i.name})})]:[],[f(ew(),function(n){y(n,ie,{name:i.name});v(n)}),f(sft(),function(n){y(n,ie,{name:i.name});v(n)})]]))]])),eventOrder:((k={})[yv()]=["streaming","urlinput-events","invalidating"],k),model:{getDisplayText:function(n){return n.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:r.shared.getSink,parts:{menu:gn(0,0,"normal")},onExecute:function(n,t){y(t,bb,{})},onItemExecute:function(n){v(n);y(n,ie,{name:i.name})}}),st=i.label.map(function(n){return nl(n,h)}),g=yt((p="invalid",d=n.some(cpi),ts("warning",{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+p],attributes:t({title:h.translate(w=void 0===w?p:w),"aria-live":"polite"},d.fold(function(){return{}},function(n){return{id:n}}))},h.icons))),ht=yt({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[g.asSpec()]}),nt=u.getUrlPicker(i.filetype),tt=l("browser.url.event"),ut=yt({dom:{tag:"div",classes:["tox-control-wrap"]},components:[ot,ht.asSpec()],behaviours:e([a.config({disabled:function(){return i.disabled||h.isDisabled()}})])}),b=yt(flt({name:i.name,icon:n.some("browse"),text:i.label.getOr(""),disabled:i.disabled,primary:!1,borderless:!0},function(n){return at(n,tt)},h,[],["tox-browse-url"]));return lt.sketch({dom:dsi([]),components:st.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:sr([[ut.asSpec()],nt.map(function(){return b.asSpec()}).toArray()])}]),fieldBehaviours:e([a.config({disabled:function(){return i.disabled||h.isDisabled()},onDisabled:function(n){lt.getField(n).each(a.disable);b.getOpt(n).each(a.disable)},onEnabled:function(n){lt.getField(n).each(a.enable);b.getOpt(n).each(a.enable)}}),ir(),it("url-input-events",[f(tt,function(n){ft.getCurrent(n).each(function(r){var u=o.getValue(r),f=t({fieldname:i.name},u);nt.each(function(t){t(f).get(function(t){o.setValue(r,t);y(n,ie,{name:i.name})})})})})])])})}function yr(n){return function(t,i,r){return b(i,"name").fold(function(){return n(i,r)},function(u){return t.field(u,n(i,r))})}}function kai(n,t,i){var r=ri(i,{shared:{interpreter:function(t){return lat(n,t,r)}}});return lat(n,t,r)}function yyr(t,i,r){function o(){return h.fromDom(t.getContentAreaContainer())}function s(){return b||!r()}var c,l,a,u,v,y,f,p,w,e,b=utt(t);return{inlineDialog:(f=o,p=i,w=s,e={maxHeightFunction:aw()},function(){return w()?{type:"node",root:dk(f()),node:n.from(f()),bubble:ny(12,12,lpi),layouts:{onRtl:function(){return[gw]},onLtr:function(){return[dw]}},overrides:e}:{type:"hotspot",hotspot:p(),bubble:ny(-12,12,lpi),layouts:{onRtl:function(){return[iu]},onLtr:function(){return[ru]}},overrides:e}}),banner:(u=o,v=i,y=s,function(){return y()?{type:"node",root:dk(u()),node:n.from(u()),layouts:{onRtl:function(){return[is]},onLtr:function(){return[is]}}}:{type:"hotspot",hotspot:v(),layouts:{onRtl:function(){return[uu]},onLtr:function(){return[uu]}}}}),cursor:(l=t,function(){return{type:"selection",root:a(),getSelection:function(){var t=l.selection.getRng();return n.some(vw.range(h.fromDom(t.startContainer),t.startOffset,h.fromDom(t.endContainer),t.endOffset))}}}),node:(c=a=function(){return h.fromDom(t.getBody())},function(n){return{type:"node",root:c(),node:n}})}}function dai(t){return n.from(t.getParam("style_formats")).filter(ic).map(function(n){function f(n){k(n,function(n){i.formatter.has(n.name)||i.formatter.register(n.name,n.format)})}var i,r,u=(i=t,r=vpi(n),i.formatter?f(r.customFormats):i.on("init",function(){f(r.customFormats)}),r.formats);return t.getParam("style_formats_merge",!1,"boolean")?api.concat(u):u}).getOr(api)}function gai(n,t,i){var r={type:"formatter",isSelected:t(n.format),getStylePreview:i(n.format)};return ri(n,r)}function nvi(n,t,i,u){var f=function(t){return s(t,function(t){var e,h,o,c,s,a=lr(t),v;return ve(t,"items")?(v=f(t.items),ri(ri(t,{type:"submenu"}),{getStyleItems:r(v)})):ve(t,"format")?gai(t,i,u):1===a.length&&cr(a,"title")?ri(t,{type:"separator"}):(c={type:"formatter",format:o="custom-"+(h=pi((e=t).name)?e.name:l(e.title)),isSelected:i(o),getStylePreview:u(o)},s=ri(e,c),n.formatter.register(h,s),s)})};return f(t)}function tvi(n){return function(t){if(fo(i=t)&&1===i.nodeType&&(t.contentEditable===n||t.getAttribute("data-mce-contenteditable")===n))return!0;var i;return!1}}function ivi(n,t,i,r,u){return{type:n,title:t,url:i,level:r,attach:u}}function rvi(n){return n.innerText||n.textContent}function pyr(n){return n&&"A"===n.nodeName&&void 0!==(n.id||n.name)&&rpi(n)}function uvi(n){return n&&/^(H[1-6])$/.test(n.nodeName)}function wyr(n){return uvi(n)&&rpi(n)}function byr(n){var t,i=n.id||l("h");return ivi("header",rvi(n),"#"+i,uvi(t=n)?parseInt(t.nodeName.substr(1),10):0,function(){n.id=i})}function kyr(n){var t=n.id||n.name;return ivi("anchor",rvi(n)||"#"+t,"#"+t,0,c)}function dyr(n){return 0<twr(n.title).length}function fvi(n){return pi(n)&&/^https?/.test(n)}function evi(n){return tc(n)&&prt(n,function(n){return!(ic(t=n)&&t.length<=5&&uv(t,fvi));var t}).isNone()}function ovi(){var n,t=stt.getItem(yit);if(null===t)return{};try{n=JSON.parse(t)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+yit+" was not valid JSON",n),{};throw n;}return evi(n)?n:(console.log("Local storage "+yit+" was not valid format",n),{})}function gyr(n){return b(ovi(),n).getOr([])}function npr(n,t){var i,r;fvi(n)&&(r=fi(b(i=ovi(),t).getOr([]),function(t){return t!==n}),i[t]=[n].concat(r).slice(0,5),function(n){if(!evi(n))throw new Error("Bad format for history:\n"+JSON.stringify(n));stt.setItem(yit,JSON.stringify(n))}(i))}function dlt(n){return!!n}function tpr(n){return hr(ul.makeMap(n,/[, ]/),dlt)}function glt(t){return n.from(t.getParam("file_picker_callback")).filter(wf)}function svi(t){return n.from(t).filter(pi).getOrUndefined()}function ipr(i){return{getHistory:gyr,addToHistory:npr,getLinkInformation:function(){return!1===(t=i).getParam("typeahead_urls")?n.none():n.some({targets:uwr(t.getBody()),anchorTop:svi(t.getParam("anchor_top","#top")),anchorBottom:svi(t.getParam("anchor_bottom","#bottom"))});var t},getValidationHandler:function(){return n.from(void 0===(r=(t=i).getParam("file_picker_validator_handler",void 0,"function"))?t.getParam("filepicker_validator_handler",void 0,"function"):r);var t,r},getUrlPicker:function(r){return u=l=i,o=a=r,s=n.some((e=u).getParam("file_picker_types")).filter(dlt),h=n.some(e.getParam("file_browser_callback_types")).filter(dlt),c=s.or(h).map(tpr),f=glt(e).fold(dt,function(){return c.fold(gi,function(n){return 0<lr(n).length&&n})}),(lp(f)?f?glt(u):n.none():f[o]?glt(u):n.none()).map(function(i){return function(r){return tl(function(u){var f=t({filetype:a,fieldname:r.fieldname},n.from(r.meta).getOr({}));i.call(l,function(n,t){if(!pi(n))throw new Error("Expected value to be string");if(void 0!==t&&!tc(t))throw new Error("Expected meta to be a object");u({value:n,meta:t})},r.value,f)})}});var u,o,e,s,h,c,f,l,a}}}function rpr(t,i,r){function nt(n){return function(){return u.formatter.match(n)}}function tt(t){return function(){var i=u.formatter.get(t);return void 0!==i?n.some({tag:0<i.length&&(i[0].inline||i[0].block)||"div",styles:u.dom.parseStyle(u.formatter.getCssText(t))}):n.none()}}var o,a,v,y,w,b,u,f,s,h,c,l,e,k=p(!1),d={isPositionedAtTop:function(){return"top"===o.get()},getDockingMode:(o=p(eei(i)?"bottom":"top")).get,setDockingMode:o.set},g={shared:{providers:{icons:function(){return i.ui.registry.getAll().icons},menuItems:function(){return i.ui.registry.getAll().menuItems},translate:rs.translate,isDisabled:function(){return i.mode.isReadOnly()||i.ui.isDisabled()},getSetting:i.getParam.bind(i)},interpreter:function(n){return lat(nwr,n,g)},anchors:yyr(i,r,d.isPositionedAtTop),header:d,getSink:function(){return et.value(t)}},urlinput:ipr(i),styleselect:(s=p([]),h=p([]),c=p([]),l=p([]),e=p(!(f=function(n){var t=n.items;return void 0!==t&&0<t.length?bi(t,f):[n.format]})),(u=i).on("PreInit",function(){var t=dai(u),n=nvi(u,t,nt,tt);s.set(n);h.set(bi(n,f))}),u.on("addStyleModifications",function(n){var t=nvi(u,n.items,nt,tt);c.set(t);e.set(n.replace);l.set(bi(t,f))}),{getData:function(){var n=e.get()?[]:s.get(),t=c.get();return n.concat(t)},getFlattenedKeys:function(){var n=e.get()?[]:h.get(),t=l.get();return n.concat(t)}}),colorinput:{colorPicker:function(n,t){rsi(b)(n,t)},hasCustomColors:function(){return voi(w)},getColors:function(){return kht(y)},getColorCols:(v=y=w=b=i,function(){return poi(v)})},dialog:{isDraggableModal:(a=i,function(){return a.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return k.get()},setContextMenuState:function(n){return k.set(n)}};return g}function hvi(t){return(ss(tu(t,"position"),"fixed")?n.none():fpt(t)).orThunk(function(){var n=h.fromTag("span");return gu(t).bind(function(t){tf(t,n);var i=fpt(n);return ls(n),i})})}function cvi(n){return hvi(n).map(uc).getOrThunk(function(){return ci(0,0)})}function upr(n,t){var i=n.element;pr(i,t.transitionClass);nr(i,t.fadeOutClass);pr(i,t.fadeInClass);t.onShow(n)}function fpr(n,t){var i=n.element;pr(i,t.transitionClass);nr(i,t.fadeInClass);pr(i,t.fadeOutClass);t.onHide(n)}function lvi(n,t,i){return uv(n,function(n){switch(n){case"bottom":return t.bottom<=i.bottom;case"top":return t.y>=i.y}})}function avi(n,t){return t.getInitialPos().map(function(t){return lu(t.bounds.x,t.bounds.y,nf(n),cu(n))})}function vvi(t,i,r){return r.getInitialPos().bind(function(u){switch(r.clearInitialPos(),u.position){case"static":return n.some(aat.static());case"absolute":var f=hvi(t).map(cf).getOrThunk(function(){return cf(sh())});return n.some(aat.absolute(ko("absolute",b(u.style,"left").map(function(){return i.x-f.x}),b(u.style,"top").map(function(){return i.y-f.y}),b(u.style,"right").map(function(){return f.right-i.right}),b(u.style,"bottom").map(function(){return f.bottom-i.bottom}))));default:return n.none()}})}function epr(t,i,r){var e,o,u,f=t.element;return ss(tu(f,"position"),"fixed")?(o=i,avi(e=f,u=r).filter(function(n){return lvi(u.getModes(),n,o)}).bind(function(n){return vvi(e,n,u)})):function(t,i,r){var f,o,u=cf(t);if(lvi(r.getModes(),u,i))return n.none();f=t;o=u;r.setInitialPos({style:function(){var r={},n=f.dom,t,i;if(pp(n))for(t=0;t<n.style.length;t++)i=n.style.item(t),r[i]=n.style[i];return r}(),position:bf(f,"position")||"static",bounds:o});var e=as(),h=u.x-e.x,c=i.y-e.y,l=e.bottom-i.bottom,s=u.y<=i.y;return n.some(aat.fixed(ko("fixed",n.some(h),s?n.some(c):n.none(),n.none(),s?n.none():n.some(l))))}(f,i,r)}function yvi(n,t,i){i.setDocked(!1);k(["left","right","top","bottom","position"],function(t){return ti(n.element,t)});t.onUndocked(n)}function nat(n,t,i,r){var u="fixed"===r.position;i.setDocked(u);idt(n.element,r);(u?t.onDocked:t.onUndocked)(n)}function pvi(n,t,i,r,u){void 0===u&&(u=!1);t.contextual.each(function(t){t.lazyContext(n).each(function(f){var e=f.y<r.bottom&&f.bottom>r.y;e!==i.isVisible()&&(i.setVisible(e),u&&!e?(bl(n.element,[t.fadeOutClass]),t.onHide(n)):(e?upr:fpr)(n,t))})})}function wvi(n,t,i){var u,f,r,e,o,s;i.isDocked()&&(f=t,r=i,s=(u=n).element,r.setDocked(!1),avi(o=u.element,e=r).bind(function(n){return vvi(o,n,e)}).each(function(n){n.fold(function(){return yvi(u,f,r)},function(n){return nat(u,f,r,n)},c)}),r.setVisible(!0),f.contextual.each(function(n){ys(s,[n.fadeInClass,n.fadeOutClass,n.transitionClass]);n.onShow(u)}),vat(u,f,r))}function tat(n,t){return cr(au.getModes(n),t)}function iat(n){var t=n.element;gu(t).each(function(i){var u,r,f="padding-"+au.getModes(n)[0];au.isDocked(n)?(u=nf(i),tt(t,"width",u+"px"),tt(i,f,hl(r=t)+(parseInt(bf(r,"margin-top"),10)||0)+(parseInt(bf(r,"margin-bottom"),10)||0)+"px")):(ti(t,"width"),ti(i,f))})}function bvi(n,t){t?(nr(n,ih.fadeOutClass),bl(n,[ih.transitionClass,ih.fadeInClass])):(nr(n,ih.fadeInClass),bl(n,[ih.fadeOutClass,ih.transitionClass]))}function kvi(n,t){var i=h.fromDom(n.getContainer());t?(pr(i,wpi),nr(i,bpi)):(pr(i,bpi),nr(i,wpi))}function dvi(i,r){function u(n){e().each(function(t){return n(t.element)})}function o(n){i.inline||iat(n);kvi(i,au.isDocked(n));n.getSystem().broadcastOn([ry()],{});e().each(function(n){return n.getSystem().broadcastOn([ry()],{})})}var s,f=vi(),e=r.getSink,c=i.inline?[]:[ge.config({channels:((s={})[yat()]={onReceive:iat},s)})];return pt([g.config({}),au.config({contextual:t({lazyContext:function(t){var u=hl(t.element),f=i.inline?i.getContentAreaContainer():i.getContainer(),r=cf(h.fromDom(f)),e=r.height-u,o=r.y+(tat(t,"top")?0:u);return n.some(lu(r.x,o,r.width,e))},onShow:function(){u(function(n){return bvi(n,!0)})},onShown:function(n){u(function(n){return ys(n,[ih.transitionClass,ih.fadeInClass])});f.get().each(function(t){var i,u=n.element,r=so(i=t);vh(r).filter(function(n){return!ki(i,n)}).filter(function(n){return ki(n,h.fromDom(r.dom.body))||wk(u,n)}).each(function(){return ah(i)});f.clear()})},onHide:function(n){var t=n.element,i=e;bo(t).orThunk(function(){return i().toOptional().bind(function(n){return bo(n.element)})}).fold(f.clear,f.set);u(function(n){return bvi(n,!1)})},onHidden:function(){u(function(n){return ys(n,[ih.transitionClass])})}},ih),lazyViewport:function(n){var t=as(),r=i.getParam("toolbar_sticky_offset",0,"number"),u=t.y+(tat(n,"top")?r:0),f=t.height-(tat(n,"bottom")?r:0);return lu(t.x,u,t.width,f)},modes:[r.header.getDockingMode()],onDocked:o,onUndocked:o})],c,!0)}function gvi(n){return si("menubutton",ywr,n)}function ik(n,t){return t.getAnimationRoot.fold(function(){return n.element},function(t){return t(n)})}function fl(n){return n.dimension.property}function rp(n,t){return n.dimension.getDimension(t)}function rat(n,t){ys(ik(n,t),[t.shrinkingClass,t.growingClass])}function uat(n,t){nr(n.element,t.openClass);pr(n.element,t.closedClass);tt(n.element,fl(t),"0px");fv(n.element)}function nyi(n,t){nr(n.element,t.closedClass);pr(n.element,t.openClass);ti(n.element,fl(t))}function tyi(n,t,i){i.setCollapsed();tt(n.element,fl(t),rp(t,n.element));fv(n.element);rat(n,t);uat(n,t);t.onStartShrink(n);t.onShrunk(n)}function iyi(t,i,r){var u=rp(i,t.element);("0px"===u?tyi:function(n,t,i,r){var f=r.getOrThunk(function(){return rp(t,n.element)}),u;i.setCollapsed();tt(n.element,fl(t),f);fv(n.element);u=ik(n,t);nr(u,t.growingClass);pr(u,t.shrinkingClass);uat(n,t);t.onStartShrink(n)})(t,i,r,n.some(u))}function ryi(n,t,i){var r=ik(n,t),f=se(r,t.shrinkingClass),e=rp(t,n.element),u;nyi(n,t);u=rp(t,n.element);(f?function(){tt(n.element,fl(t),e);fv(n.element)}:function(){uat(n,t)})();nr(r,t.shrinkingClass);pr(r,t.growingClass);nyi(n,t);tt(n.element,fl(t),u);i.setExpanded();t.onStartGrow(n)}function uyi(n,t){return!0===se(ik(n,t),t.growingClass)}function fyi(n,t){return!0===se(ik(n,t),t.shrinkingClass)}function eyi(n){return"<alloy.field."+n+">"}function opr(n){return{element:function(){return n.element.dom}}}function spr(n,t){ft.getCurrent(n).each(function(n){return nt.set(n,[(i=t,rh.sketch(function(n){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(r=n,t=s(lr(u=i),function(n){var i=u[n],t=vs(si("sidebar",gwr,i));return{name:n,getApi:opr,onSetup:t.onSetup,onShow:t.onShow,onHide:t.onHide}}),s(t,function(n){var i=p(c);return r.slot(n.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:itt([ob(n,i),sb(n,i),f(lft(),function(n,i){var r=i.event;wi(t,function(n){return n.name===r.name}).each(function(t){(r.visible?t.onShow:t.onHide)(t.getApi(n))})})])})})),slotBehaviours:itt([li(function(n){return rh.hideAllSlots(n)})])};var r,u,t}))]);var i})}function hpr(t){return ft.getCurrent(t).bind(function(t){return os.isGrowing(t)||os.hasGrown(t)?ft.getCurrent(t).bind(function(n){return wi(rh.getSlotNames(n),function(t){return rh.isShowing(n,t)})}):n.none()})}function el(n){var i=h.fromHtml(n),r=ye(i),u=vu(void 0!==i.dom.attributes?i.dom.attributes:[],function(n,i){var r;return"class"===i.name?n:t(t({},n),((r={})[i.name]=i.value,r))},{}),f=Array.prototype.slice.call(i.dom.classList,0),e=0===r.length?{}:{innerHtml:tft(i)};return t({tag:hs(i),classes:f,attributes:u},e)}function oyi(n){return ft.getCurrent(n).each(function(n){return ah(n.element)})}function cpr(t,i,r){function e(r){var f;!u.get()||"focusin"===(f=r).type&&(f.composed?rc(f.composedPath()):n.from(f.target)).map(h.fromDom).filter(co).exists(function(n){return se(n,"mce-pastebin")})||(r.preventDefault(),oyi(i()),t.editorManager.setActive(t))}function o(f){var c,e,a,v,o,y,p,s,w,l;f!==u.get()&&(u.set(f),c=t,e=i(),a=f,v=r.providers,s=e.element,w=a,l="data-mce-"+(o="tabindex"),n.from(c.iframeElement).map(h.fromDom).each(function(n){w?(pe(n,o).each(function(t){return rt(n,l,t)}),rt(n,o,-1)):(nu(n,o),pe(n,l).each(function(t){rt(n,o,t);nu(n,l)}))}),a?(gh.block(e,(p=v,function(){return{dom:{tag:"div",attributes:{"aria-label":p.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:el('<div class="tox-spinner"><div><\/div><div><\/div><div><\/div><\/div>')}]}})),ti(s,"display"),nu(s,"aria-hidden"),c.hasFocus()&&oyi(e)):(y=ft.getCurrent(e).exists(function(n){return ndt(n.element)}),gh.unblock(e),tt(s,"display","none"),rt(s,"aria-hidden","true"),y&&c.focus()),t.fire("AfterProgressState",{state:f}))}var u=p(!1),f=vi();t.inline||t.on("PreInit",function(){t.dom.bind(t.getWin(),"focusin",e);t.on("BeforeExecCommand",function(n){"mcefocus"===n.command.toLowerCase()&&!0!==n.value&&e(n)})});t.on("ProgressState",function(n){var i;f.on(yh.clearTimeout);uh(n.time)?(i=yh.setEditorTimeout(t,function(){return o(n.state)},n.time),f.set(i)):(o(n.state),f.clear())})}function fat(n,t,i){return{within:n,extra:t,withinWidth:i}}function syi(t,i,u){var e,o=(e=function(t,i){var r=u(t);return n.some({element:t,start:i,finish:i+r,width:r})},vu(t,function(n,t){return e(t,n.len).fold(r(n),function(t){return{len:t.finish,list:n.list.concat([t])}})},{len:0,list:[]}).list),f=fi(o,function(n){return n.finish<=i}),s=iv(f,function(n,t){return n+t.width},0);return{within:f,extra:o.slice(f.length),withinWidth:s}}function hit(n){return s(n,function(n){return n.element})}function hyi(n,t){var i=s(t,function(n){return he(n)});es.setGroups(n,i)}function cyi(t,i,r){var u,e,p,w,b,a,v,y,o,s,k,d,it,rt,ut,ft,h,c,f,l,et=i.builtGroups.get();0!==et.length&&(u=ks(t,i,"primary"),e=yi.getCoupled(t,"overflowGroup"),tt(u.element,"visibility","hidden"),w=oo(p=et.concat([e]),function(n){return bo(n.element).bind(function(t){return n.getSystem().getByDom(t).toOptional()})}),r([]),hyi(u,p),b=nf(u.element),0===(v=b,y=i.builtGroups.get(),s=e,h=(0===(k=syi(y,v,o=function(n){return nf(n.element)})).extra.length?n.some(k):n.none()).getOrThunk(function(){return syi(y,v-o(s),o)}),c=h.within,f=h.extra,l=h.withinWidth,(a=1===f.length&&f[0].width<=o(s)?(ft=l,fat(hit(c.concat(f)),[],ft)):1<=f.length?(it=f,rt=s,ut=l,fat(hit(c).concat([rt]),hit(it),ut)):(d=l,fat(hit(c),[],d))).extra.length)?(nt.remove(u,e),r([])):(hyi(u,a.within),r(a.extra)),ti(u.element,"visibility"),fv(u.element),w.each(g.focus))}function lyi(n,t){var i=yi.getCoupled(n,"toolbarSandbox");ot.isOpen(i)?ot.close(i):ot.open(i,t.toolbar())}function eat(n,t,i,r){var u=i.getBounds.map(function(n){return n()}),f=i.lazySink(n).getOrDie();ku.positionWithinBounds(f,t,{anchor:{type:"hotspot",hotspot:n,layouts:r,overrides:{maxWidthFunction:kat()}}},u)}function ayi(n,t,i,r,u){es.setGroups(t,u);eat(n,t,i,r);ht.on(n)}function vyi(n){return s(n,function(n){return he(n)})}function yyi(n,t,i){cyi(n,i,function(r){i.overflowGroups.set(r);t.getOpt(n).each(function(n){da.setGroups(n,vyi(r))})})}function pyi(n,t){kt(n,t,"overflow-button").bind(function(){return kt(n,t,"overflow")}).each(function(i){hat(n,t);os.toggleGrow(i)})}function wyi(n){var i=n.title.fold(function(){return{}},function(n){return{attributes:{title:n}}});return{dom:t({tag:"div",classes:["tox-toolbar__group"]},i),components:[pit.parts.items({})],items:n.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:e([ai.config({}),g.config({})])}}function cit(n){return pit.sketch(wyi(n))}function byi(n,t){var i=li(function(t){var i=s(n.initGroups,cit);es.setGroups(t,i)});return e([wht(n.providers.isDisabled),ir(),v.config({mode:t,onEscape:n.onEscape,selector:".tox-toolbar__group"}),it("toolbar-events",[i])])}function kyi(t){var i=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":wyi({title:n.none(),items:[]}),"overflow-button":eli({name:"more",icon:n.some("more-drawer"),disabled:!1,tooltip:n.some("More..."),primary:!1,borderless:!1},n.none(),t.providers)},splitToolbarBehaviours:byi(t,i)}}function oat(n){var t=n.cyclicKeying?"cyclic":"acyclic";return es.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(n.type===te.scrolling?["tox-toolbar--scrolling"]:[])},components:[es.parts.groups({})],toolbarBehaviours:byi(n,t)})}function sat(n){return"string"==typeof n?n.split(" "):n}function dyi(n,i){var r=t(t({},nwi),i.menus),u=0<lr(i.menus).length,f=fi(void 0===i.menubar||!0===i.menubar?sat("file edit view insert format tools table help"):sat(!1===i.menubar?"":i.menubar),function(n){var t=ni(nwi,n);return u?t||b(i.menus,n).exists(function(n){return ni(n,"items")}):t});return fi(s(f,function(t){var u=r[t],f={title:u.title,items:sat(u.items)},e=i,o=n.getParam("removed_menuitems","").split(/[ ,]/);return{text:f.title,getItems:function(){return bi(f.items,function(n){var t=n.toLowerCase();return 0===t.trim().length||eo(o,function(n){return n===t})?[]:"separator"===t||"|"===t?[{type:"separator"}]:e.menuItems[t]?[e.menuItems[t]]:[]})}}}),function(n){return 0<n.getItems().length&&eo(n.getItems(),function(n){return"separator"!==n.type})})}function gyi(n){function t(){n._skinLoaded=!0;n.fire("SkinLoaded")}return function(){n.initialized?t():n.on("init",t)}}function npi(n,t,i){return new nb(function(r,u){i.load(t,r,u);n.on("remove",function(){return i.unload(t)})})}function tpi(n,t){var u,o,f,i,s,c,e,l,a,r=(f=(u=t).getParam("skin"),i=u.getParam("skin_url"),!1!==f&&(o=f||"oxide",i=i?u.documentBaseURI.toAbsolute(i):hhr.baseURL+"/skins/ui/"+o),i);r&&t.contentCSS.push(r+(n?"/content.inline":"/content")+".min.css");!1===t.getParam("skin")==0&&pi(r)?nb.all([npi(t,r+"/skin.min.css",t.ui.styleSheetLoader),(e=t,l=r,a=h.fromDom(e.getElement()),hwt(a).isSome()?npi(e,l+"/skin.shadowdom.min.css",fb.DOM.styleSheetLoader):nb.resolve())]).then(gyi(t),(s=t,c="Skin could not be loaded",function(){return s.fire("SkinLoadError",{message:c})})):gyi(t)()}function lit(n,t){return function(i){function r(){i.setActive(n.formatter.match(t));var r=n.formatter.formatChanged(t,i.setActive);u.set(r)}var u=gv();return n.initialized?r():n.once("init",r),function(){n.off("init",r);u.clear()}}}function ait(n,t,i){return function(r){function f(){return i(r)}function u(){i(r);n.on(t,f)}return n.initialized?u():n.once("init",u),function(){n.off("init",u);n.off(t,f)}}}function ipi(n){return function(t){return function(){n.undoManager.transact(function(){n.focus();n.execCommand("mceToggleFormat",!1,t.format)})}}}function ae(n,t){return function(){return n.execCommand(t)}}function up(i,r,u){function c(i,r,u,o){var s=h.shared.providers.translate(i.title),c;return"separator"===i.type?n.some({type:"separator",text:s}):"submenu"!==i.type?n.some(t({type:"togglemenuitem",text:s,icon:i.icon,active:i.isSelected(o),disabled:u,onAction:f.onAction(i)},i.getStylePreview().fold(function(){return{}},function(n){return{meta:{style:n}}}))):(c=bi(i.getStyleItems(),function(n){return e(n,r,o)}),0===r&&c.length<=0?n.none():n.some({type:"nestedmenuitem",text:s,disabled:c.length<=0,getSubmenuItems:function(){return bi(i.getStyleItems(),function(n){return e(n,r,o)})}}))}function l(n){var t=f.getCurrentValue(),i=f.shouldHide?0:1;return bi(n,function(n){return e(n,i,t)})}var h,f,e,o=u.dataset,a="basic"===o.type?function(){return s(o.data,function(n){return gai(n,u.isSelectedFor,u.getPreviewFor)})}:o.getData;return{items:(h=r,f=u,e=function(n,t,i){var r="formatter"===n.type&&f.isInvalid(n);return 0===t?r?[]:c(n,t,!1,i).toArray():c(n,t,r,i).toArray()},{validateItems:l,getFetch:function(n,t){return function(i,r){r(gy(l(t()),us.CLOSE_ON_EXECUTE,n,!1))}}}),getStyleItems:a}}function rk(t,i,u){var f=up(0,i,u),e=f.items,o=f.getStyleItems,s=ait(t,"NodeChange",function(n){var t=n.getComponent();u.updateText(t)});return ilt({text:u.icon.isSome()?n.none():u.text,icon:u.icon,tooltip:n.from(u.tooltip),role:n.none(),fetch:e.getFetch(i,o),onSetup:s,getApi:function(n){return{getComponent:r(n)}},columns:1,presets:"normal",classes:u.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",i.shared)}function rpi(n){return function(n){for(;n=n.parentNode;){var t=n.contentEditable;if(t&&"inherit"!==t)return iwr(n)}return!1}(n)&&!rwr(n)}function lpr(n,t){function u(){return nti(n)}function i(t,i){return function(r,u){return kt(r,n,u).map(function(n){return t(n,u)}).getOr(i)}}function r(n){return"true"!==hu(n.element,"aria-hidden")}var f,o=i(r,!1),e=i(function(n,t){var i;r(n)&&(tt(i=n.element,"display","none"),rt(i,"aria-hidden","true"),y(n,lft(),{name:t,visible:!1}))}),s=(f=e,function(n,t){k(t,function(t){return f(n,t)})}),h=i(function(n,t){var i;r(n)||(ti(i=n.element,"display"),nu(i,"aria-hidden"),y(n,lft(),{name:t,visible:!0}))});return{uid:n.uid,dom:n.dom,components:t,behaviours:iot(n.slotBehaviours),apis:{getSlotNames:u,getSlot:function(t,i){return kt(t,n,i)},isShowing:o,hideSlot:e,hideAllSlots:function(n){return s(n,u())},showSlot:h}}}function hat(n,t){kt(n,t,"overflow").each(function(i){cyi(n,t,function(n){var t=s(n,function(n){return he(n)});es.setGroups(i,t)});kt(n,t,"overflow-button").each(function(n){os.hasGrown(i)&&ht.on(n)});os.refresh(i)})}function gat(n,t,i,r){var u;return{type:"basic",data:(u=n.getParam(t,i,"string"),s(r===fp.SemiColon?u.replace(/;$/,"").split(";"):u.split(" "),function(n){var i=n,r=n,t=n.split("=");return 1<t.length&&(i=t[0],r=t[1]),{title:i,format:r}}))}}function twi(t){var i={type:"basic",data:evt};return{tooltip:"Align",text:n.none(),icon:n.some("align-left"),isSelectedFor:function(n){return function(){return t.formatter.match(n)}},getCurrentValue:n.none,getPreviewFor:function(){return n.none},onAction:function(n){return function(){return wi(evt,function(t){return t.format===n.format}).each(function(n){return t.execCommand(n.command)})}},updateText:function(n){var i=wi(evt,function(n){return t.formatter.match(n.format)}).fold(r("left"),function(n){return n.title.toLowerCase()});y(n,sai,{icon:"align-"+i})},dataset:i,shouldHide:!1,isInvalid:function(n){return!t.formatter.canApply(n.format)}}}function iwi(n){return s(n.split(/\s*,\s*/),function(n){return n.replace(/^['"]+|['"]+$/g,"")})}function rwi(t){function i(){function r(n){return n?iwi(n)[0]:""}var i=t.queryCommandValue("FontName"),e=f.data,n=i?i.toLowerCase():"";return{matchOpt:wi(e,function(t){var i=t.format;return i.toLowerCase()===n||r(i).toLowerCase()===r(n).toLowerCase()}).orThunk(function(){return lk(0===(t=n).indexOf("-apple-system")&&(i=iwi(t.toLowerCase()),uv(ukr,function(n){return-1<i.indexOf(n.toLowerCase())})),{title:u,format:n});var t,i}),font:i}}var u="System Font",f=gat(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",fp.SemiColon);return{tooltip:"Fonts",text:n.some(u),icon:n.none(),isSelectedFor:function(n){return function(t){return t.exists(function(t){return t.format===n})}},getCurrentValue:function(){return i().matchOpt},getPreviewFor:function(t){return function(){return n.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(n){return function(){t.undoManager.transact(function(){t.focus();t.execCommand("FontName",!1,n.format)})}},updateText:function(n){var t=i(),u=t.matchOpt,f=t.font,e=u.fold(r(f),function(n){return n.title});y(n,tp,{text:e})},dataset:f,shouldHide:!1,isInvalid:dt}}function uwi(t){function i(){var f=n.none(),o=u.data,i=t.queryCommandValue("FontSize"),e,r;if(i)for(e=function(n){var t,u,e,r,s=(u=n,/[0-9.]+px$/.test(t=i)?(e=72*parseInt(t,10)/96,r=Math.pow(10,u||0),Math.round(e*r)/r+"pt"):b(ekr,t).getOr(t)),h=b(fkr,s).getOr("");f=wi(o,function(n){return n.format===i||n.format===s||n.format===h})},r=3;f.isNone()&&0<=r;r--)e(r);return{matchOpt:f,size:i}}var f=r(n.none),u=gat(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",fp.Space);return{tooltip:"Font sizes",text:n.some("12pt"),icon:n.none(),isSelectedFor:function(n){return function(t){return t.exists(function(t){return t.format===n})}},getPreviewFor:f,getCurrentValue:function(){return i().matchOpt},onAction:function(n){return function(){t.undoManager.transact(function(){t.focus();t.execCommand("FontSize",!1,n.format)})}},updateText:function(n){var t=i(),u=t.matchOpt,f=t.size,e=u.fold(r(f),function(n){return n.title});y(n,tp,{text:e})},dataset:u,shouldHide:!1,isInvalid:dt}}function fwi(t,i){var r=i(),u=s(r,function(n){return n.format});return n.from(t.formatter.closest(u)).bind(function(n){return wi(r,function(t){return t.format===n})}).orThunk(function(){return lk(t.formatter.match("p"),{title:"Paragraph",format:"p"})})}function ewi(t){var i=gat(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",fp.SemiColon);return{tooltip:"Blocks",text:n.some("Paragraph"),icon:n.none(),isSelectedFor:function(n){return function(){return t.formatter.match(n)}},getCurrentValue:n.none,getPreviewFor:function(i){return function(){var r=t.formatter.get(i);return n.some({tag:0<r.length&&(r[0].inline||r[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(i))})}},onAction:ipi(t),updateText:function(n){var u=fwi(t,function(){return i.data}).fold(r("Paragraph"),function(n){return n.title});y(n,tp,{text:u})},dataset:i,shouldHide:!1,isInvalid:function(n){return!t.formatter.canApply(n.format)}}}function owi(t,i){return{tooltip:"Formats",text:n.some("Paragraph"),icon:n.none(),isSelectedFor:function(n){return function(){return t.formatter.match(n)}},getCurrentValue:n.none,getPreviewFor:function(i){return function(){var r=t.formatter.get(i);return void 0!==r?n.some({tag:0<r.length&&(r[0].inline||r[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(i))}):n.none()}},onAction:ipi(t),updateText:function(n){var i=function(n){var t=n.items;return void 0!==t&&0<t.length?bi(t,i):[{title:n.title,format:n.format}]},u=bi(dai(t),i),f=fwi(t,r(u)).fold(r("Paragraph"),function(n){return n.title});y(n,tp,{text:f})},shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(n){return!t.formatter.canApply(n.format)},dataset:i}}function kbr(n){return{isDisabled:function(){return a.isDisabled(n)},setDisabled:function(t){return a.set(n,t)}}}function dbr(n){return{setActive:function(t){ht.set(n,t)},isActive:function(){return ht.isOn(n)},isDisabled:function(){return a.isDisabled(n)},setDisabled:function(t){return a.set(n,t)}}}function swi(n,t){return n.map(function(n){return{"aria-label":t.translate(n),title:t.translate(n)}}).getOr({})}function nvt(n,t,i,r,u,o){var s;return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:swi(i,o)},components:py([n.map(function(n){return uit(n,o.icons)}),t.map(function(n){return tlt(n,"tox-tbtn",o)})]),eventOrder:((s={})[de()]=["focusing","alloy.base.behaviour","common-button-display-events"],s),buttonBehaviours:e([wht(o.isDisabled),ir(),it("common-button-display-events",[f(de(),function(n,t){t.event.prevent();at(n,kwi)})])].concat(r.map(function(i){return pf.config({channel:i,initialData:{icon:n,text:t},renderComponents:function(n){return py([n.icon.map(function(n){return uit(n,o.icons)}),n.text.map(function(n){return tlt(n,"tox-tbtn",o)})])}})}).toArray()).concat(u.getOr([])))}}function hwi(t,i,r){var u,f=p(c),o=nvt(t.icon,t.text,t.tooltip,n.none(),n.none(),r);return du.sketch({dom:o.dom,components:o.components,eventOrder:oai,buttonBehaviours:e([it("toolbar-button-events",[(u={onAction:t.onAction,getApi:i.getApi},lh(function(n){ett(u,n)(function(t){y(n,eai,{buttonApi:t});u.onAction(t)})})),ob(i,f),sb(i,f)]),wht(function(){return t.disabled||r.isDisabled()}),ir()].concat(i.toolbarButtonBehaviours))})}function uk(n,t){return function(i,r,u){var f=n(i).mapError(function(n){return yl(n)}).getOrDie();return t(f,r,u)}}function cwi(t,i,r,u){var f,e=i.outerContainer,o=r.toolbar,s=r.buttons;cyt(o,pi)?(f=o.map(function(i){var f={toolbar:i,buttons:s,allowToolbarGroups:r.allowToolbarGroups};return dit(t,f,{backstage:u},n.none())}),hi.setToolbars(e,f)):hi.setToolbar(e,dit(t,r,{backstage:u},n.none()))}function tvt(t){return/^[0-9\.]+(|px)$/i.test(""+t)?n.some(parseInt(""+t,10)):n.none()}function ivt(n){return uh(n)?n+"px":n}function wit(n,t,i){var r=t.filter(function(t){return n<t}),u=i.filter(function(t){return t<n});return r.or(u).getOr(n)}function lwi(n){var t=afi(n),i=vfi(n),r=rht(n);return tvt(t).map(function(n){return wit(n,i,r)})}function gbr(n,t,i,u,f){function o(){return v.get()&&!n.removed}function y(n){return nt?n.fold(r(0),function(n){return 1<n.components().length?cu(n.components()[1].element):0}):0}function w(){h.broadcastOn([ry()],{})}function s(n){var u,s,i,h,r;void 0===n&&(n=!1);o()&&(c||(u=it.getOrThunk(function(){var n=tvt(bf(sh(),"margin-left")).getOr(0);return nf(sh())-uc(t).left+n}),tt(f.get().element,"max-width",u+"px")),nt&&hi.refreshToolbar(e),c||(s=y(hi.getToolbar(e)),i=cf(t),h=a()?Math.max(i.y-cu(f.get().element)+s,0):i.bottom,oh(e.element,{position:"absolute",top:Math.round(h)+"px",left:Math.round(i.x)+"px"})),d&&(r=f.get(),n?au.reset(r):au.refresh(r)),w())}function b(i){var r,u;void 0===i&&(i=!0);!c&&d&&o()&&(r=l.getDockingMode(),(u=function(i){var f,o;switch(fei(n)){case ha.auto:var s=y(hi.getToolbar(e)),r=cu(i.element)-s,u=cf(t);return u.y>r?"top":(f=drt(t),o=Math.max(f.dom.scrollHeight,cu(f)),u.bottom<o-r||as().bottom<u.bottom-r?"bottom":"top");case ha.bottom:return"bottom";default:return ha.top,"top"}}(f.get()))!==r&&(function(n){var t=f.get(),i;au.setModes(t,[n]);l.setDockingMode(n);i=a()?bs.TopToBottom:bs.BottomToTop;rt(t.element,wet,i)}(u),i&&s(!0)))}var h=i.uiMothership,e=i.outerContainer,k=fb.DOM,c=utt(n),d=ftt(n),it=rht(n).or(lwi(n)),l=u.shared.header,a=l.isPositionedAtTop,g=eb(n),nt=g===te.sliding||g===te.floating,v=p(!1);return{isVisible:o,isPositionedAtTop:a,show:function(){v.set(!0);tt(e.element,"display","flex");k.addClass(n.getBody(),"mce-edit-focus");ti(h.element,"display");b(!1);s()},hide:function(){v.set(!1);i.outerContainer&&(tt(e.element,"display","none"),k.removeClass(n.getBody(),"mce-edit-focus"));tt(h.element,"display","none")},update:s,updateMode:b,repositionPopups:w}}function awi(n,t){var i=cf(n);return{pos:t?i.y:i.bottom,bounds:i}}function vwi(n,t){return f(eai,function(i,r){var u,f=n.get(i),e=(u=f,{hide:function(){return at(u,kd())},getValue:function(){return o.getValue(u)}});t.onAction(e,r.event.buttonApi)})}function ywi(n,t,i){return t.bottom-n.y>=(i=void 0===i?.01:i)&&n.bottom-t.y>=i}function rvt(t){var i=function(t){var i=t.getBoundingClientRect(),r;return i.height<=0&&i.width<=0?(r=opt(h.fromDom(t.startContainer),t.startOffset).element,(ll(r)?gu(r):n.some(r)).filter(co).map(function(n){return n.dom.getBoundingClientRect()}).getOr(i)):i}(t.selection.getRng()),r,u;return t.inline?(r=cs(),lu(r.left+i.left,r.top+i.top,i.width,i.height)):(u=cl(h.fromDom(t.getBody())),lu(u.x+i.left,u.y+i.top,i.width,i.height))}function pwi(n,t,i,r){void 0===r&&(r=0);var f,e,o,s,u=kpt(window),c=cf(h.fromDom(n.getContentAreaContainer())),w=uht(n)||fht(n)||rtt(n),l=(f=c,e=u,o=r,{x:s=Math.max(f.x+o,e.x),width:Math.min(f.right-o,e.right)-s}),a=l.x,v=l.width;if(n.inline&&!w)return lu(a,u.y,v,u.height);var y=function(n,t,i,r,u,f){var o=h.fromDom(n.getContainer()),l=er(o,".tox-editor-header").getOr(o),e=cf(l),a=e.y>=t.bottom,s=r&&!a,c;return n.inline&&s?{y:Math.max(e.bottom+f,i.y),bottom:i.bottom}:n.inline&&!s?{y:i.y,bottom:Math.min(e.y-f,i.bottom)}:(c="line"===u?cf(o):t,s?{y:Math.max(e.bottom+f,i.y),bottom:Math.min(c.bottom-f,i.bottom)}:{y:Math.max(c.y+f,i.y),bottom:Math.min(e.y-f,i.bottom)})}(n,c,u,t.header.isPositionedAtTop(),i,r),p=y.y,b=y.bottom;return lu(a,p,v,b-p)}function wwi(n){return"node"===n}function nkr(n,t,i,r,u){var e=rvt(n),o=r.lastElement().exists(function(n){return ki(i,n)}),s=i,f=n.selection.getRng(),c=opt(h.fromDom(f.startContainer),f.startOffset);return f.startContainer===f.endContainer&&f.startOffset===f.endOffset-1&&ki(c.element,s)?o?gri:is:o?function(n,i){var f=tu(n,"position"),u;return tt(n,"position",i),u=ywi(e,cf(t))&&!r.isReposition()?kfr:gri,f.each(function(t){return tt(n,"position",t)}),u}(t,r.getMode()):("fixed"===r.getMode()?u.y+cs().top:u.y)+(cu(t)+12)<=e.y?is:sy}function uvt(n,t){var i=byt(fi(t,function(t){return t.predicate(n.dom)}),function(n){return"contexttoolbar"===n.type});return{contextToolbars:i.pass,contextForms:i.fail}}function tkr(i,r){function f(n){return ki(n,o)}var e,o=h.fromDom(r.getBody()),u=h.fromDom(r.selection.getNode());return f(e=u)||wk(o,e)?function(i,r,u){var e=uvt(i,r),f,o;return 0<e.contextForms.length?n.some({elem:i,toolbars:[e.contextForms[0]]}):(f=uvt(i,u),0<f.contextForms.length)?n.some({elem:i,toolbars:[f.contextForms[0]]}):0<e.contextToolbars.length||0<f.contextToolbars.length?(o=function(n){function f(t){return eo(n,function(n){return n.position===t})}function i(t){return fi(n,function(n){return n.position===t})}var r,u,e,o;return n.length<=1?n:(r=f("selection"),u=f("node"),r||u)?u&&r?(e=i("node"),o=s(i("selection"),function(n){return t(t({},n),{position:"node"})}),e.concat(o)):i(r?"selection":"node"):i("line")}(e.contextToolbars.concat(f.contextToolbars)),n.some({elem:i,toolbars:o})):n.none()}(u,i.inNodeScope,i.inEditorScope).orThunk(function(){return e=i,(t=f)(r=u)?n.none():hbt(r,function(t){function r(n){return wi(i,function(t){return t.position===n})}var i;if(co(t)){var u=uvt(t,e.inNodeScope),s=u.contextToolbars,f=u.contextForms,o=0<f.length?f:(i=s).length<=1?i:r("selection").orThunk(function(){return r("node")}).orThunk(function(){return r("line")}).map(function(n){return n.position}).fold(function(){return[]},function(n){return fi(i,function(t){return t.position===n})});return 0<o.length?n.some({elem:t,toolbars:o}):n.none()}return n.none()},t);var t,r,e}):n.none()}function ikr(n,i){var e={},r=[],u=[],o={},f={},s=lr(n);return k(s,function(s){var a,v,c,y,h,l=n[s];"contextform"===l.type?(c=s,h=vs(si("ContextForm",asr,y=l)),(e[c]=h).launch.map(function(n){o["form:"+c]=t(t({},y.launch),{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){i(h)}})}),("editor"===h.scope?u:r).push(h),f[c]=h):"contexttoolbar"===l.type&&(a=s,si("ContextToolbar",vsr,v=l).each(function(n){("editor"===v.scope?u:r).push(n);f[a]=n}))}),{forms:e,inNodeScope:r,inEditorScope:u,lookupTable:f,formNavigators:o}}function rkr(i,r,u,o){function ot(){var n=rt.get().getOr("node"),t=wwi(n)?1:0;return pwi(i,d,n,t)}function st(){return!(i.removed||yt()&&vt.isContextMenuOpen())}function ht(){var n,t,r;return st()?(n=ot(),t=ss(rt.get(),"node")?(r=i,k.get().filter(lo).map(cl).getOrThunk(function(){return rvt(r)})):rvt(i),n.height<=0||!ywi(t,n)):1}function w(){k.clear();nt.clear();rt.clear();oi.hide(h)}function wt(){var n;oi.isOpen(h)&&(ti(n=h.element,"display"),ht()?tt(n,"display","none"):(nt.set(0),oi.reposition(h)))}function ct(n){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[n],behaviours:e([v.config({mode:"acyclic"}),it("pop-dialog-wrap-events",[li(function(n){i.shortcuts.add("ctrl+F9","focus statusbar",function(){return v.focusIn(n)})}),ws(function(){i.shortcuts.remove("ctrl+F9")})])])}}function bt(n,r){function f(n){return wwi(a)?[(i=n,function(n,r,u,f,e){var o=nkr(c,f,i,l,e),s=t(t({},n),{y:e.y,height:e.height});return t(t({},o(s,r,u,f,e)),{alwaysFit:!0})})]:[];var i}var o,e,s,h,c,l,a,v="node"===n?d.anchors.node(r):d.anchors.cursor(),y=(o=i,e=n,s=yt(),h={lastElement:k.get,isReposition:function(){return ss(nt.get(),0)},getMode:function(){return ku.getMode(u)}},"line"===e?{bubble:ny(12,0,rbi),layouts:{onLtr:function(){return[iet]},onRtl:function(){return[ret]}},overrides:ubi}:{bubble:ny(0,12,rbi,1/12),layouts:(c=o,l=h,a=e,s?{onLtr:function(n){return[uu,iu,ru,ef,of,vf].concat(f(n))},onRtl:function(n){return[uu,ru,iu,of,ef,vf].concat(f(n))}}:{onLtr:function(n){return[vf,uu,ef,iu,of,ru].concat(f(n))},onRtl:function(n){return[vf,uu,of,ru,ef,iu].concat(f(n))}}),overrides:ubi});return ri(v,y)}function lt(t,i){var f,e,o,r;g.cancel();st()&&(f=pt(t),o=bt(e=t[0].position,i),rt.set(e),nt.set(1),ti(r=h.element,"display"),ss(vk(i,k.get(),ki),!0)||(nr(r,hvt),ku.reset(u,h)),oi.showWithinBounds(h,ct(f),{anchor:o,transition:{classes:[hvt],mode:"placement"}},function(){return n.some(ot())}),i.fold(k.clear,k.set),ht()&&tt(r,"display","none"))}var ut,a,vt=o.backstage,d=vt.shared,yt=we().deviceType.isTouch,k=vi(),nt=vi(),rt=vi(),h=pu((ut={sink:u,onEscape:function(){return i.focus(),n.some(!0)}},a=p([]),oi.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(n){a.set([]);oi.getContent(n).each(function(n){ti(n.element,"visibility")});nr(n.element,svt);ti(n.element,"width")},inlineBehaviours:e([it("context-toolbar-events",[vv(sw(),function(n,t){"width"===t.event.raw.propertyName&&(nr(n.element,svt),ti(n.element,"width"))}),f(ovt,function(n,t){var i=n.element,r,u;ti(i,"width");r=nf(i);oi.setContent(n,t.event.contents);pr(i,svt);u=nf(i);tt(i,"width",r+"px");oi.getContent(n).each(function(n){t.event.focus.bind(function(n){return ah(n),bo(i)}).orThunk(function(){return v.focusIn(n),vh(be(i))})});yh.setTimeout(function(){tt(n.element,"width",u+"px")},0)}),f(fbi,function(t,i){oi.getContent(t).each(function(n){a.set(a.get().concat([{bar:n,focus:vh(be(t.element))}]))});y(t,ovt,{contents:i.event.forwardContents,focus:n.none()})}),f(ebi,function(n){yrt(a.get()).each(function(t){a.set(a.get().slice(0,a.get().length-1));y(n,ovt,{contents:he(t.bar),focus:t.focus})})})]),v.config({mode:"special",onEscape:function(t){return yrt(a.get()).fold(function(){return ut.onEscape()},function(){return at(t,ebi),n.some(!0)})}})]),lazySink:function(){return et.value(ut.sink)}}))),ft=fh(function(){return ikr(r,function(n){var t=pt([n]);y(h,fbi,{forwardContents:ct(t)})})}),pt=function(r){var u=i.ui.registry.getAll().buttons,f=ft(),e=t(t({},u),f.formNavigators),h=eb(i)===te.scrolling?te.scrolling:te.default,c=sr(s(r,function(t){return"contexttoolbar"===t.type?dit(i,{buttons:e,toolbar:t.items,allowToolbarGroups:!1},o,n.some(["form:"])):(r=d.providers,pkr(t,r));var r}));return oat({type:h,uid:l("context-toolbar"),initGroups:c,onEscape:n.none,cyclicKeying:!0,providers:d.providers})},g=yst(function(){i.hasFocus()&&!i.removed&&(se(h.element,hvt)?g.throttle():tkr(ft(),i).fold(w,function(t){lt(t.toolbars,n.some(t.elem))}))},17);i.on("init",function(){i.on("remove",w);i.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",wt);i.on("click keyup focus SetContent",g.throttle);i.on(ibi,w);i.on("contexttoolbar-show",function(n){b(ft().lookupTable,n.toolbarKey).each(function(t){lt([t],lk(n.target!==i,n.target));oi.getContent(h).each(v.focusIn)})});i.on("focusout",function(){yh.setEditorTimeout(i,function(){bo(u.element).isNone()&&bo(h.element).isNone()&&w()},0)});i.on("SwitchMode",function(){i.mode.isReadOnly()&&w()});i.on("AfterProgressState",function(n){n.state?w():i.hasFocus()&&g.throttle()});i.on("NodeChange",function(){bo(h.element).fold(g.throttle,c)})})}function git(n){return"(?:"+n+")?"}function obi(n,t){function i(){var r=t.getOptions(n),u=t.getCurrent(n).map(t.hash),i=vi();return s(r,function(r){return{type:"togglemenuitem",text:t.display(r),onSetup:function(f){function e(n){n&&(i.on(function(n){return n.setActive(!1)}),i.set(f));f.setActive(n)}e(ss(u,t.hash(r)));var o=t.watcher(n,r,e);return function(){i.clear();o()}},onAction:function(){return t.setCurrent(n,r)}}})}n.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:function(n){return n(i())},onSetup:t.onToolbarSetup});n.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:i,onSetup:t.onMenuSetup})}function cvt(n,t){return function(){n.execCommand("mceToggleFormat",!1,t)}}function kkr(n){var i,t;!function(n){var t,i;for(ul.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:lit(n,t.name),onAction:cvt(n,t.name)})}),t=1;t<=6;t++)i="h"+t,n.ui.registry.addToggleButton(i,{text:i.toUpperCase(),tooltip:"Heading "+t,onSetup:lit(n,i),onAction:cvt(n,i)})}(n);i=n;ul.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(n){i.ui.registry.addButton(n.name,{tooltip:n.text,icon:n.icon,onAction:ae(i,n.action)})});t=n;ul.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(n){t.ui.registry.addToggleButton(n.name,{tooltip:n.text,icon:n.icon,onAction:ae(t,n.action),onSetup:lit(t,n.name)})})}function nrt(n,t){return ait(n,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(i){i.setDisabled(n.mode.isReadOnly()||!n.undoManager[t]())})}function dkr(n){var t;n.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:ae(n,"mceToggleVisualAid")});n.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:ait(t=n,"VisualAid",function(n){n.setActive(t.hasVisual)}),onAction:ae(n,"mceToggleVisualAid")})}function gkr(i,u){var y,v,o,it,rt,f,e,s,c,ut,ft,et,ot,w,b,st,ht,d,ct,g,lt,nt,tt,at,l,a=i;k([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(n){a.ui.registry.addToggleButton(n.name,{tooltip:n.text,icon:n.icon,onAction:ae(a,n.cmd),onSetup:lit(a,n.name)})});a.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:ae(a,"JustifyNone")});kkr(at=i);l=at;ul.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(n){l.ui.registry.addMenuItem(n.name,{text:n.text,icon:n.icon,shortcut:n.shortcut,onAction:ae(l,n.action)})});l.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:cvt(l,"code")});tt=up(0,ft=c=u,twi(ut=s=i));ut.ui.registry.addNestedMenuItem("align",{text:ft.shared.providers.translate("Align"),getSubmenuItems:function(){return tt.items.validateItems(tt.getStyleItems())}});w=up(0,ot=c,rwi(et=s));et.ui.registry.addNestedMenuItem("fontformats",{text:ot.shared.providers.translate("Fonts"),getSubmenuItems:function(){return w.items.validateItems(w.getStyleItems())}});b=s;ht=t({type:"advanced"},(st=c).styleselect);d=up(0,st,owi(b,ht));b.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return d.items.validateItems(d.getStyleItems())}});g=up(0,c,ewi(ct=s));ct.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return g.items.validateItems(g.getStyleItems())}});nt=up(0,c,uwi(lt=s));lt.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return nt.items.validateItems(nt.getStyleItems())}});(f=rt=i).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:nrt(f,"hasUndo"),onAction:ae(f,"undo")});f.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:nrt(f,"hasRedo"),onAction:ae(f,"redo")});(e=rt).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:nrt(e,"hasUndo"),onAction:ae(e,"undo")});e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:nrt(e,"hasRedo"),onAction:ae(e,"redo")}),function(n){var t,i,r;(t=n).addCommand("mceApplyTextcolor",function(n,i){var r,u=n,f=i;(r=t).undoManager.transact(function(){r.focus();r.formatter.apply(u,{value:f});r.nodeChanged()})});t.addCommand("mceRemoveTextcolor",function(n){var i,r=n;(i=t).undoManager.transact(function(){i.focus();i.formatter.remove(r,{value:null},null,!0);i.nodeChanged()})});i=p(nct);r=p(nct);goi(n,"forecolor","forecolor","Text color",i);goi(n,"backcolor","hilitecolor","Background color",r);nsi(n,"forecolor","forecolor","Text color");nsi(n,"backcolor","hilitecolor","Background color")}(i);dkr(i);(o=i).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:ait(it=o,"NodeChange",function(n){n.setDisabled(!it.queryCommandState("outdent"))}),onAction:ae(o,"outdent")});o.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:ae(o,"indent")});obi(y=i,edr);v=y;n.from(v.getParam("content_langs",void 0,"array")).map(function(t){return{name:"language",text:"Language",icon:"language",getOptions:r(t),hash:function(n){return ap(n.customCode)?n.code:n.code+"/"+n.customCode},display:function(n){return n.title},watcher:function(n,t,i){return n.formatter.formatChanged("lang",i,!1,{value:t.code,customValue:t.customCode}).unbind},getCurrent:function(t){return kut(h.fromDom(t.selection.getNode()),function(t){return n.some(t).filter(co).bind(function(n){return pe(n,"lang").map(function(t){return{code:t,customCode:pe(n,"data-mce-lang").getOrUndefined(),title:""}})})})},setCurrent:function(n,t){return n.execCommand("Lang",!1,t)},onToolbarSetup:function(n){var t=gv();return n.setActive(v.formatter.match("lang",{},void 0,!0)),t.set(v.formatter.formatChanged("lang",n.setActive,!0)),t.clear}}}).each(function(n){return obi(y,n)})}function fk(n,t){return{type:"makeshift",x:n,y:t}}function sbi(n){return"longpress"===n.type||0===n.type.indexOf("touch")}function ndr(n,t){return"contextmenu"===t.type||"longpress"===t.type?n.inline?function(n){if(sbi(n)){var t=n.touches[0];return fk(t.pageX,t.pageY)}return fk(n.pageX,n.pageY)}(t):(u=n.getContentAreaContainer(),i=function(n){if(sbi(n)){var t=n.touches[0];return fk(t.clientX,t.clientY)}return fk(n.clientX,n.clientY)}(t),r=fb.DOM.getPos(u),f=r.x,e=r.y,fk(i.x+f,i.y+e)):ski(n);var u,i,r,f,e}function hbi(t,i,r){switch(r){case"node":return{type:"node",node:n.some(h.fromDom((u=t).selection.getNode())),root:h.fromDom(u.getBody())};case"point":return ndr(t,i);case"selection":return ski(t)}var u}function tdr(i,r,u,f,e,o){function c(){var s,c,p,h,w,b,k,d,g,nt,tt=u();p=tt;h=f;w=e;k=!(v||l||a&&y);g=hbi(s=i,c=r,d=b=o);nt=t({bubble:ny(0,"point"===d?12:0,sdr),layouts:odr,overrides:{maxWidthFunction:kat(),maxHeightFunction:aw()}},g);gy(p,us.CLOSE_ON_EXECUTE,h,!0).map(function(t){c.preventDefault();oi.showMenuWithinBounds(w,{anchor:nt},{menu:{markers:hy("normal"),highlightImmediately:k},data:t,type:"horizontal"},function(){return n.some(pwi(s,h.shared,"node"===b?"node":"selection"))});s.fire(ibi)})}var s,h=we(),l=h.os.isiOS(),a=h.os.isOSX(),v=h.os.isAndroid(),y=h.deviceType.isTouch();(a||l)&&"node"!==o?(s=function(){(function(n){function i(){yh.setEditorTimeout(n,function(){n.selection.setRng(f)},10);t()}function r(n){n.preventDefault();n.stopImmediatePropagation()}function u(){return t()}var f=n.selection.getRng(),t;n.once("touchend",i);n.on("mousedown",r,!0);n.once("longpresscancel",u);t=function(){n.off("touchend",i);n.off("longpresscancel",u);n.off("mousedown",r)}})(i);c()},function(n,t){var r=n.selection,i,u;if(!(r.isCollapsed()||t.touches.length<1))return i=t.touches[0],u=r.getRng(),lgt(n.getWin(),vw.domRange(u)).exists(function(n){return n.left<=i.clientX&&n.right>=i.clientX&&n.top<=i.clientY&&n.bottom>=i.clientY})}(i,r)?s():(i.once("selectionchange",s),i.once("touchend",function(){return i.off("selectionchange",s)}))):c()}function cbi(n){return"string"==typeof n?n.split(/[ ,]/):n}function lbi(n){return n.getParam("contextmenu_never_use_native",!1,"boolean")}function abi(n){return pi(n)?"|"===n:"separator"===n.type}function vbi(n,t){if(0===t.length)return n;var i=yrt(n).filter(function(n){return!abi(n)}).fold(function(){return[]},function(){return[yvt]});return n.concat(i).concat(t).concat([yvt])}function ybi(n,t){return"longpress"!==t.type&&(2!==t.button||t.target===n.getBody()&&""===t.pointerType)}function pbi(n,t){return ybi(n,t)?n.selection.getStart(!0):t.target}function idr(t,i,r){function c(){return oi.hide(o)}function l(i){var f;lbi(t)&&i.preventDefault();i.ctrlKey&&!lbi(t)||!1===t.getParam("contextmenu")||(f=function(n,t){var i=n.getParam("contextmenu_avoid_overlap","","string"),r=ybi(n,t)?"selection":"point",u;return wrt(i)?(u=pbi(n,t),vb(h.fromDom(u),i)?"node":r):r}(t,i),(u()?tdr:function(n,t,i,r,u,f){var e=i(),o=hbi(n,t,f);gy(e,us.CLOSE_ON_EXECUTE,r,!1).map(function(n){t.preventDefault();oi.showMenuAt(u,{anchor:o},{menu:{markers:hy("normal")},data:n})})})(t,i,function(){var r,u,f,e=pbi(t,i),o=t.ui.registry.getAll(),h=(f=(u=t).ui.registry.getAll().contextMenus,n.from(u.getParam("contextmenu")).map(cbi).getOrThunk(function(){return fi(cbi("link linkchecker image imagetools table spellchecker configurepermanentpen"),function(n){return ni(f,n)})})),c=o.contextMenus,l=e;return 0<(r=vu(h,function(n,t){return b(c,t.toLowerCase()).map(function(t){var i=t.update(l),r;return pi(i)?vbi(n,i.split(" ")):0<i.length?(r=s(i,hki),vbi(n,r)):n}).getOrThunk(function(){return n.concat([t])})},[])).length&&abi(r[r.length-1])&&r.pop(),r},r,o,f))}var u=we().deviceType.isTouch,o=pu(oi.sketch({dom:{tag:"div"},lazySink:i,onEscape:function(){return t.focus()},onShow:function(){return r.setContextMenuState(!0)},onHide:function(){return r.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:e([it("dismissContextMenu",[f(pv(),function(n){ot.close(n);t.focus()})])])}));t.on("init",function(){var n="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(u()?"":" ResizeWindow");t.on(n,c);t.on("longpress contextmenu",l)})}function trt(n){return function(t){return t.translate(-n.left,-n.top)}}function irt(n){return function(t){return t.translate(n.left,n.top)}}function nc(n){return function(t,i){return vu(n,function(n,t){return t(n)},ci(t,i))}}function rrt(n,t,i){return n.fold(nc([irt(i),trt(t)]),nc([trt(t)]),nc([]))}function sp(n,t,i){return n.fold(nc([irt(i)]),nc([]),nc([irt(t)]))}function wbi(n,t,i){return n.fold(nc([]),nc([trt(i)]),nc([irt(t),trt(i)]))}function bbi(i,r,u){var f=i.fold(function(t,i){return{position:n.some("absolute"),left:n.some(t+"px"),top:n.some(i+"px")}},function(t,i){return{position:n.some("absolute"),left:n.some(t-u.left+"px"),top:n.some(i-u.top+"px")}},function(t,i){return{position:n.some("fixed"),left:n.some(t+"px"),top:n.some(i+"px")}});return t({right:n.none(),bottom:n.none()},f)}function lvt(n,t,i,r){function u(n,u){return function(f,e){var o=n(t,i,r);return u(f.getOr(o.left),e.getOr(o.top))}}return n.fold(u(wbi,urt),u(sp,ol),u(rrt,nv))}function kbi(n,t){var i=hu(n,t);return ap(i)?NaN:parseInt(i,10)}function rdr(t,i,r,u,f,e){var l,o,a,v,s,h,y=(l=r,o=u,s=kbi(v=t.element,(a=i).leftAttr),h=kbi(v,a.topAttr),(isNaN(s)||isNaN(h)?n.none():n.some(ci(s,h))).fold(function(){return l},function(n){return nv(n.left+o.left,n.top+o.top)})),k=(i.mustSnap?hdr:cdr)(t,i,y,f,e),c=rrt(y,f,e),p=i,w=c,b=t.element;return rt(b,p.leftAttr,w.left+"px"),rt(b,p.topAttr,w.top+"px"),k.fold(function(){return{coord:nv(c.left,c.top),extra:n.none()}},function(n){return{coord:n.output,extra:n.extra}})}function dbi(t,i,r,u){return oo(t,function(t){var f,e,h=t.sensor,c=t.range.left,l=t.range.top,o=sp(i,f=r,e=u),s=sp(h,f,e);return Math.abs(o.left-s.left)<=c&&Math.abs(o.top-s.top)<=l?n.some({output:lvt(t.output,i,r,u),extra:t.extra}):n.none()})}function gbi(n,t){var i;n.getSystem().addToGui(t);gu((i=t).element).filter(co).each(function(n){tu(n,"z-index").each(function(t){rt(n,wvt,t)});tt(n,"z-index",bf(i.element,"z-index"))})}function udr(n){gu(n.element).filter(co).each(function(n){pe(n,wvt).fold(function(){return ti(n,"z-index")},function(t){return tt(n,"z-index",t)});nu(n,wvt)});n.getSystem().removeFromGui(n)}function nki(n,t,i){return n.getSystem().build(eu.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:i}))}function tki(n,t){return{bounds:n.getBounds(),height:hl(t.element),width:bp(t.element)}}function avt(t,i,u,f,e){var o=u.update(f,e),s=u.getStartData().getOrThunk(function(){return tki(i,t)});o.each(function(u){var e,ft,b,et,k,ot,d,o,h,c,st,g,nt,l,a,f,tt,ht,ct,v,y,it,rt,ut,lt,p=t,vt=s,at=u,w=(e=i).getTarget(p.element);e.repositionTarget&&(ft=cs(so(p.element)),b=cvi(w),it=tu(y=w,"left"),rt=tu(y,"top"),ut=tu(y,"position"),lt=function(n,t,i){return("fixed"===i?nv:urt)(parseInt(n,10),parseInt(t,10))},et=(it.isSome()&&rt.isSome()&&ut.isSome()?n.some(lt(it.getOrDie(),rt.getOrDie(),ut.getOrDie())):n.none()).getOrThunk(function(){var n=uc(y);return ol(n.left,n.top)}),k=p,ot=e.snaps,d=et,o=ft,h=b,c=at,st=vt,nt=ot.fold(function(){var n,t,i=rrt((n=c.left,t=c.top,d.fold(function(i,r){return urt(i+n,r+t)},function(i,r){return ol(i+n,r+t)},function(i,r){return nv(i+n,r+t)})),o,h);return nv(i.left,i.top)},function(n){var t=rdr(k,n,d,c,o,h);return t.extra.each(function(t){n.onSensor(k,t)}),t.coord}),l=o,a=h,f=(g=st).bounds,tt=sp(nt,l,a),ht=ce(tt.left,f.x,f.x+f.width-g.width),ct=ce(tt.top,f.y,f.y+f.height-g.height),v=ol(ht,ct),nd(w,bbi(nt.fold(function(){var n=wbi(v,l,a);return urt(n.left,n.top)},r(v),function(){var n=rrt(v,l,a);return nv(n.left,n.top)}),0,b)));e.onDrag(p,w,at)})}function iki(n,t,i,r){t.each(udr);i.snaps.each(function(t){var i,r;i=t;nu(r=n.element,i.leftAttr);nu(r,i.topAttr)});var u=i.getTarget(n.element);r.reset();i.onDrop(n,u)}function vvt(n){return function(t,i){function r(n){i.setStartData(tki(t,n))}return gt(pt([f(cft(),function(n){i.getStartData().each(function(){return r(n)})})],n(t,i,r),!0))}}function rki(t,i,r){return[f(de(),function(u,e){var s,c,l,h,o;0===e.event.raw.button&&(e.stop(),l={drop:s=function(){return iki(u,n.some(h),t,i)},delayDrop:(c=hsi(s,200)).schedule,forceDrop:s,move:function(n){c.cancel();avt(u,t,i,vdr,n)}},h=nki(u,t.blockerClass,(o=l,gt([f(de(),o.forceDrop),f(eft(),o.drop),f(wd(),function(n,t){o.move(t.event)}),f(fft(),o.delayDrop)]))),r(u),gbi(u,h))})]}function uki(n,t,i){function r(i){iki(i,u.get(),n,t);u.clear()}var u=vi();return[f(ch(),function(e,o){function a(){return r(e)}o.stop();var s,h,c,l=nki(e,n.blockerClass,(h=s=a,c=function(i){avt(e,n,t,cki,i)},gt([f(ch(),h),f(fw(),s),f(bbt(),s),f(uw(),function(n,t){c(t.event)})])));u.set(l);i(e);gbi(e,l)}),f(uw(),function(i,r){r.stop();avt(i,n,t,cki,r.event)}),f(fw(),function(n,t){t.stop();r(n)}),f(bbt(),r)]}function fki(t,i,r,u,f,e){return t.fold(function(){return tv.snap({sensor:ol(r-20,u-20),range:ci(f,e),output:ol(n.some(r),n.some(u)),extra:{td:i}})},function(t){var e=r-20,o=u-20,f=t.element.dom.getBoundingClientRect();return tv.snap({sensor:ol(e,o),range:ci(40,40),output:ol(n.some(r-f.width/2),n.some(u-f.height/2)),extra:{td:i}})})}function eki(n,t,i){return{getSnapPoints:n,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(n,r){var u=r.td,f=t.get(),e=u;f.exists(function(n){return ki(n,e)})||(t.set(u),i(u))},mustSnap:!0}}function oki(n){return yt(du.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:e([tv.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:n}),nk.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}function fdr(n,t){function o(n){var i=cl(n);return fki(b.getOpt(t),n,i.x,i.y,i.width,i.height)}function c(n){var i=cl(n);return fki(k.getOpt(t),n,i.right,i.bottom,i.width,i.height)}function l(t,i,r,u){var f=r(i);tv.snapTo(t,f),function(t){var r=i.dom.getBoundingClientRect();ti(t.element,"display");var f=kk(h.fromDom(n.getBody())).dom.innerHeight,e=r[u]<0,o=r[u]>f;(e||o)&&tt(t.element,"display","none")}(t)}function a(n){return l(f,n,o,"top")}function v(n){return l(e,n,c,"bottom")}var y=p([]),w=p([]),u=p(!1),i=vi(),r=vi(),d=eki(function(){return s(y.get(),o)},i,function(t){r.get().each(function(i){n.fire("TableSelectorChange",{start:t,finish:i})})}),g=eki(function(){return s(w.get(),c)},r,function(t){i.get().each(function(i){n.fire("TableSelectorChange",{start:i,finish:t})})}),b=oki(d),k=oki(g),f=pu(b.asSpec()),e=pu(k.asSpec());we().deviceType.isTouch()&&(n.on("TableSelectionChange",function(n){u.get()||(ua(t,f),ua(t,e),u.set(!0));i.set(n.start);r.set(n.finish);n.otherCells.each(function(t){y.set(t.upOrLeftCells);w.set(t.downOrRightCells);a(n.start);v(n.finish)})}),n.on("ResizeEditor ResizeWindow ScrollContent",function(){i.get().each(a);r.get().each(v)}),n.on("TableSelectionClear",function(){u.get()&&(fa(f),fa(e),u.set(!1));i.clear();r.clear()}))}function lki(n,t,i){var r,u,o,s,c,f,e=h.fromDom(n.getContainer());su((r=n,u=t,o=i,s=cu(e),c=nf(e),(f={}).height=wit(s+u.top,yfi(r),pfi(r)),o===ga.Both&&(f.width=wit(c+u.left,vfi(r),rht(r))),f),function(n,t){return tt(e,t,ivt(n)),0});n.fire("ResizeEditor")}function frt(t,i,r,u){return lki(t,ci(20*r,20*u),i),n.some(!0)}function bdr(t,i){function et(n,t,i){return nt.set(n,[dl(l.translate(["{0} "+i,t[i]]))])}var w,b,u,c,k,d,tt,f,rt,ut,l,ft,r,y,p,h;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(h=[],t.getParam("elementpath",!0,"boolean")&&h.push((r=t,p=i,(y={}).delimiter||(y.delimiter=""),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:e([v.config({mode:"flow",selector:"div[role=button]"}),a.config({disabled:p.isDisabled}),ir(),ai.config({}),nt.config({}),it("elementPathEvents",[li(function(n){r.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return v.focusIn(n)});r.on("NodeChange",function(t){var i,u,f=function(n){for(var t,i,u=[],f=n.length;0<f--;)if(t=n[f],1===t.nodeType&&!function(n){if(1===n.nodeType&&("BR"===n.nodeName||n.getAttribute("data-mce-bogus")||"bookmark"===n.getAttribute("data-mce-type")))return 1}(t)&&(i=r.fire("ResolveName",{name:t.nodeName.toLowerCase(),target:t}),i.isDefaultPrevented()||u.push({name:i.name,element:t}),i.isPropagationStopped()))break;return u}(t.parents);0<f.length?nt.set(n,(i=s(f||[],function(n,t){return du.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":t,"tab-index":-1,"aria-level":t+1},innerHtml:n.name},action:function(){r.focus();r.selection.select(n.element);r.nodeChanged()},buttonBehaviours:e([yy(p.isDisabled),ir()])})}),u={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+y.delimiter+" "}},vu(i.slice(1),function(n,t){var i=n;return i.push(u),i.push(t),i},[i[0]]))):nt.set(n,[])})})])]),components:[]})),t.hasPlugin("wordcount")&&h.push((ut=t,l=i,du.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:e([yy(l.isDisabled),ir(),ai.config({}),nt.config({}),o.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),it("wordcount-events",[lh(function(n){var t=o.getValue(n),i="words"===t.mode?"characters":"words";o.setValue(n,{mode:i,count:t.count});et(n,t.count,i)}),li(function(n){ut.on("wordCountUpdate",function(t){var i=o.getValue(n).mode;o.setValue(n,{mode:i,count:t.wordCount});et(n,t.wordCount,i)})})])]),eventOrder:((ft={})[gf()]=["disabling","alloy.base.behaviour","wordcount-events"],ft)}))),t.getParam("branding",!0,"boolean")&&h.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(rt=rs.translate(["Powered by {0}","Tiny"]))+'">'+rt+"<\/a>"}}),w=0<h.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:h}]:[],c=i,d=!(k=u=t).hasPlugin("autoresize"),b=(f=!1===(tt=k.getParam("resize",d))?ga.None:"both"===tt?ga.Both:ga.Vertical)===ga.None?n.none():n.some(ts("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:c.translate("Resize")},behaviours:[tv.config({mode:"mouse",repositionTarget:!1,onDrag:function(n,t,i){return lki(u,i,f)},blockerClass:"tox-blocker"}),v.config({mode:"special",onLeft:function(){return frt(u,f,-1,0)},onRight:function(){return frt(u,f,1,0)},onUp:function(){return frt(u,f,0,-1)},onDown:function(){return frt(u,f,0,1)}}),ai.config({}),g.config({})]},c.icons)),w.concat(b.toArray()))}}function kdr(i){function ft(){return g.bind(hi.getHeader)}function st(){return et.value(w)}function di(){return g.bind(function(n){return hi.getThrobber(n)}).getOrDie("Could not find throbber element")}function gr(){var r,u,n,f,e,s,t=ivt((f=lfi(n=u=i),e=yfi(n),s=pfi(n),tvt(f).map(function(n){return wit(n,e,s)}).getOr(lfi(u)))),h=ivt(lwi(r=i).getOr(afi(r)));return i.inline||(lpt("div","width",h)&&tt(o.element,"width",h),lpt("div","height",t)?tt(o.element,"height",t):tt(o.element,"height","200px")),t}function rt(n,t){k([b,d],function(i){i.broadcastEvent(n,t)})}function s(n,t){k([b,d],function(i){i.broadcastOn([n],t)})}function ci(n){return s(ea(),{target:n.target})}function ut(n){return s(ea(),{target:h.fromDom(n.target)})}function li(n){0===n.button&&s(pot(),{target:h.fromDom(n.target)})}function ai(){k(r.editorManager.get(),function(n){r!==n&&n.fire("DismissPopups",{relatedTarget:r})})}function vi(n){return rt(cft(),bdt(n))}function yi(n){s(ry(),{});rt(gd(),bdt(n))}function pi(){return s(ry(),{})}function wi(n){n.state&&s(ea(),{target:h.fromDom(r.getContainer())})}function bi(n){s(ea(),{target:h.fromDom(n.relatedTarget.getContainer())})}var ht,ct,lt,at,p=i.inline,gi=p?ykr:vkr,vt=ftt(i)?lwr:swr,g=n.none(),pt=we(),wt=pt.browser.isIE()?["tox-platform-ie"]:[],bt=pt.deviceType.isTouch()?["tox-platform-touch"]:[],nt=eei(i),kt=sei(i),nr=rs.isRtl()?{attributes:{dir:"rtl"}}:{},dt={attributes:((ht={})[wet]=nt?bs.BottomToTop:bs.TopToBottom,ht)},w=pu((ct=ki(sh(),kt)&&"grid"===bf(kt,"display"),lt={dom:t({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(wt).concat(bt)},nr),behaviours:e([ku.config({useFixed:function(){return vt.isDocked(ft)}})])},at={dom:{styles:{width:document.body.clientWidth+"px"}},events:gt([f(gd(),function(){tt(l.element,"width",document.body.clientWidth+"px")})])},ri(lt,ct?at:{}))),ni=yt({dom:{tag:"div",classes:["tox-anchorbar"]}}),u=rpr(w,i,function(){return g.bind(function(n){return ni.getOpt(n)}).getOrDie("Could not find a anchor bar element")}),rr=hi.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:u,onEscape:function(){i.focus()}}),ot=eb(i),ur=hi.parts.toolbar(t({dom:{tag:"div",classes:["tox-toolbar"]},getSink:st,providers:u.shared.providers,onEscape:function(){i.focus()},type:ot,lazyToolbar:function(){return g.bind(function(n){return hi.getToolbar(n)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return ft().getOrDie("Could not find header element")}},dt)),fr=hi.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:u.shared.providers,onEscape:function(){i.focus()},type:ot}),er=hi.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),or=hi.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),cr=hi.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:u}),ar=i.getParam("statusbar",!0,"boolean")&&!p?n.some(bdr(i,u.shared.providers)):n.none(),vr={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[er,or]},yr=rtt(i),pr=fht(i),wr=uht(i),ti=hi.parts.header({dom:t({tag:"div",classes:["tox-editor-header"]},dt),components:sr([wr?[rr]:[],yr?[fr]:pr?[ur]:[],utt(i)?[]:[ni.asSpec()]]),sticky:ftt(i),editor:i,sharedBackstage:u.shared}),br=sr([nt?[]:[ti],p?[]:[vr],nt?[ti]:[]]),kr=sr([[{dom:{tag:"div",classes:["tox-editor-container"]},components:br}],p?[]:ar.toArray(),[cr]]),ii=hei(i),dr=t(t({role:"application"},rs.isRtl()?{dir:"rtl"}:{}),ii?{"aria-hidden":"true"}:{}),o=pu(hi.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(p?["tox-tinymce-inline"]:[]).concat(nt?["tox-tinymce--toolbar-bottom"]:[]).concat(bt).concat(wt),styles:t({visibility:"hidden"},ii?{opacity:"0",border:"0"}:{}),attributes:dr},components:kr,behaviours:e([ir(),a.config({disableClass:"tox-tinymce--disabled"}),v.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),g=n.some(o),r,b,d,y,ui,fi,ei,oi,si,it,l;return i.shortcuts.add("alt+F9","focus menubar",function(){hi.focusMenubar(o)}),i.shortcuts.add("alt+F10","focus toolbar",function(){hi.focusToolbar(o)}),i.addCommand("ToggleToolbarDrawer",function(){hi.toggleToolbarDrawer(o)}),i.addQueryStateHandler("ToggleToolbarDrawer",function(){return hi.isToolbarDrawerToggled(o)}),it=ysi(o),l=ysi(w),r=i,b=it,d=l,y=gkt(),ui=tr(y,"touchstart",ci),fi=tr(y,"touchmove",function(n){return rt(atr(),n)}),ei=tr(y,"touchend",function(n){return rt(vtr(),n)}),oi=tr(y,"mousedown",ci),si=tr(y,"mouseup",function(n){0===n.raw.button&&s(pot(),{target:n.target})}),r.on("PostRender",function(){r.on("click",ut);r.on("tap",ut);r.on("mouseup",li);r.on("mousedown",ai);r.on("ScrollWindow",vi);r.on("ResizeWindow",yi);r.on("ResizeEditor",pi);r.on("AfterProgressState",wi);r.on("DismissPopups",bi)}),r.on("remove",function(){r.off("click",ut);r.off("tap",ut);r.off("mouseup",li);r.off("mousedown",ai);r.off("ScrollWindow",vi);r.off("ResizeWindow",yi);r.off("ResizeEditor",pi);r.off("AfterProgressState",wi);r.off("DismissPopups",bi);oi.unbind();ui.unbind();fi.unbind();ei.unbind();si.unbind()}),r.on("detach",function(){ent(b);ent(d);b.destroy();d.destroy()}),{mothership:it,uiMothership:l,backstage:u,renderUI:function(){var r,e,h,c;vt.setup(i,u.shared,ft);gkr(i,u);idr(i,st,u);e=(r=i).ui.registry.getAll().sidebars;k(lr(e),function(t){function i(){return ss(n.from(r.queryCommandValue("ToggleSidebar")),t)}var u=e[t];r.ui.registry.addToggleButton(t,{icon:u.icon,tooltip:u.tooltip,onAction:function(n){r.execCommand("ToggleSidebar",!1,t);n.setActive(i())},onSetup:function(n){function t(){return n.setActive(i())}return r.on("ToggleSidebar",t),function(){r.off("ToggleSidebar",t)}}})});cpr(i,di,u.shared);hr(i.getParam("toolbar_groups",{},"object"),function(n,t){i.ui.registry.addGroupToolbarButton(t,n)});var s,f=i.ui.registry.getAll(),a=f.buttons,v=f.menuItems,y=f.contextToolbars,p=f.sidebars,b=wfi(i),d={menuItems:v,menus:(s=i.getParam("menu"))?hr(s,function(n){return t(t({},n),{items:n.items})}):{},menubar:i.getParam("menubar"),toolbar:b.getOrThunk(function(){return i.getParam("toolbar",!0)}),allowToolbarGroups:ot===te.floating,buttons:a,sidebar:p};return rkr(i,y,w,{backstage:u}),fdr(i,w),h=i.getElement(),c=gr(),gi.render(i,{mothership:it,uiMothership:l,outerContainer:o},d,u,{targetNode:h,height:c})},getUi:function(){return{channels:{broadcastAll:l.broadcast,broadcastOn:l.broadcastOn,register:c}}}}}function kvt(n){return ar("items","items",ao(),fc(nw(function(t){return si("Checking item of "+n,fyt,t).fold(function(n){return et.error(yl(n))},function(n){return et.value(n)})})))}function ddr(n){return pi(n.type)&&pi(n.name)}function aki(t){return{internalDialog:vs(si("dialog",gtu,t)),dataValidator:(i=bi(fi(eyt(t),ddr),function(t){return n.from(iiu[t.type]).fold(function(){return[]},function(n){return[lf(t.name,n)]})}),w(i)),initialData:t.initialData};var i}function vki(n){var t=[],i={};return su(n,function(n,r){n.fold(function(){t.push(r)},function(n){i[r]=n})}),0<t.length?et.error(t):et.value(i)}function yki(n,t){tt(n,"height",t+"px");we().browser.isIE()?ti(n,"flex-basis"):tt(n,"flex-basis",t+"px")}function ert(n,t,i){ng(n,'[role="dialog"]').each(function(n){er(n,'[role="tablist"]').each(function(r){i.get().map(function(i){return tt(t,"height","0"),tt(t,"flex-basis","0"),Math.min(i,(o=t,f=r,e=drt(u=n).dom,h="fixed"===bf(ng(u,".tox-dialog-wrap").getOr(u),"position")?Math.max(e.clientHeight,window.innerHeight):Math.max(e.offsetHeight,e.scrollHeight),s=cu(o),c=o.dom.offsetLeft>=f.dom.offsetLeft+nf(f)?Math.max(cu(f),s):s,l=parseInt(bf(u,"margin-top"),10)||0,a=parseInt(bf(u,"margin-bottom"),10)||0,h-(cu(u)+l+a-c)));var u,o,f,e,h,s,c,l,a}).each(function(n){yki(t,n)})})})}function dvt(n){return er(n,'[role="tabpanel"]')}function gdr(n,t){function h(n){var t=vki(o.getValue(n)).getOr({}),i=r.get(),u=ri(i,t);r.set(u)}function c(n){var t=r.get();o.setValue(n,t)}var u,i,r=p({}),l=p(null),a=s(n.tabs,function(n){return{value:n.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:t.shared.providers.translate(n.title)},view:function(){return[np.sketch(function(i){return{dom:{tag:"div",classes:["tox-form"]},components:s(n.items,function(n){return kai(i,n,t)}),formBehaviours:e([v.config({mode:"acyclic",useTabstopAt:vp(db)}),it("TabView.form.events",[li(c),ws(h)]),ge.config({channels:cv([{key:ngi,value:{onReceive:h}},{key:tgi,value:{onReceive:c}}])})])}})]}}}),w=(u=a,i=vi(),{extraEvents:[li(function(n){var t=n.element;dvt(t).each(function(r){var f;tt(r,"visibility","hidden");n.getSystem().getByDom(r).toOptional().each(function(n){var f,e,t;rc(dyt((e=r,t=n,s(f=u,function(n,i){nt.set(t,f[i].view());var r=e.dom.getBoundingClientRect();return nt.set(t,[]),r.height})),function(n,t){return t<n?-1:n<t?1:0})).fold(i.clear,i.set)});ert(t,r,i);ti(r,"visibility");f=n;rc(u).each(function(n){return cp.showTab(f,n.value)});yh.requestAnimationFrame(function(){ert(t,r,i)})})}),f(gd(),function(n){var t=n.element;dvt(t).each(function(n){ert(t,n,i)})}),f(nhi,function(n){var t=n.element;dvt(t).each(function(n){var f=vh(be(n)),r,u;tt(n,"visibility","hidden");r=tu(n,"height").map(function(n){return parseInt(n,10)});ti(n,"height");ti(n,"flex-basis");u=n.dom.getBoundingClientRect().height;r.forall(function(n){return n<u})?(i.set(u),ert(t,n,i)):r.each(function(t){yki(n,t)});ti(n,"visibility");f.each(ah)})})],selectFirst:!1});return cp.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(n,t){var i=o.getValue(t);y(n,gsi,{name:i,oldName:l.get()});l.set(i)},tabs:a,components:[cp.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[gdi.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:e([ai.config({})])}),cp.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:w.selectFirst,tabSectionBehaviours:e([it("tabpanel",w.extraEvents),v.config({mode:"acyclic"}),ft.config({find:function(n){return rc(cp.getViewItems(n))}}),o.config({store:{mode:"manual",getValue:function(n){return n.getSystem().broadcastOn([ngi],{}),r.get()},setValue:function(n,t){r.set(t);n.getSystem().broadcastOn([tgi],{})}}})])})}function pki(i,r,u,f){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:t(t({},r.map(function(n){return{id:n}}).getOr({})),f?{"aria-live":"polite"}:{})},components:[],behaviours:e([alt(0),pf.config({channel:rgi,updateState:function(t,i){return n.some({isTabPanel:function(){return"tabpanel"===i.body.type}})},renderComponents:function(n){return"tabpanel"!==n.body.type?[(t=n.body,r=u,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(i=yt(np.sketch(function(n){return{dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:s(t.items,function(t){return kai(n,t,r)})}}))).asSpec()]}],behaviours:e([v.config({mode:"acyclic",useTabstopAt:vp(db)}),rvr(i),ovr(i,{postprocess:function(n){return vki(n).fold(function(n){return console.error(n),{}},ct)}})])})]:[gdr(n.body,u)];var t,r,i},initialData:i})])}}function wki(n,t){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[n,t]}}function bki(n,t){return rr.parts.close(du.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:n,buttonBehaviours:e([ai.config({})])}))}function kki(){return rr.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function dki(n,t){return rr.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:el("<p>"+t.translate(n)+"<\/p>")}]}]})}function gki(n){return rr.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:n})}function ndi(n,t){return[eu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:n}),eu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})]}function gvt(i){var r,u="tox-dialog",f=u+"-wrap",o=f+"__backdrop",s=u+"__disable-scroll";return rr.sketch({lazySink:i.lazySink,onEscape:function(t){return i.onEscape(t),n.some(!0)},useTabstopAt:function(n){return!db(n)},dom:{tag:"div",classes:[u].concat(i.extraClasses),styles:t({position:"relative"},i.extraStyles)},components:pt([i.header,i.body],i.footer.toArray(),!0),parts:{blocker:{dom:el('<div class="'+f+'"><\/div>'),components:[{dom:{tag:"div",classes:hiu?[o,o+"--opaque"]:[o]}}]}},dragBlockClass:f,modalBehaviours:e(pt([g.config({}),it("dialog-events",i.dialogEvents.concat([vv(lc(),function(n){v.focusIn(n)})])),it("scroll-lock",[li(function(){pr(sh(),s)}),ws(function(){nr(sh(),s)})])],i.extraBehaviours,!0)),eventOrder:t(((r={})[gf()]=["dialog-events"],r[na()]=["scroll-lock","dialog-events","alloy.base.behaviour"],r[lw()]=["alloy.base.behaviour","dialog-events","scroll-lock"],r),i.eventOrder)})}function tdi(n){return du.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close"),title:n.translate("Close")}},components:[ts("close",{tag:"div",classes:["tox-icon"]},n.icons)],action:function(n){at(n,ca)}})}function idi(n,i,r){function u(n){return[dl(r.translate(n.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:t({},i.map(function(n){return{id:n}}).getOr({}))},components:u(n),behaviours:e([pf.config({channel:igi,renderComponents:u})])}}function rdi(){return{dom:el('<div class="tox-dialog__draghandle"><\/div>')}}function udi(t,i){return r={title:i.shared.providers.translate(t),draggable:i.dialog.isDraggableModal()},u=i.shared.providers,f=rr.parts.title(idi(r,n.none(),u)),e=rr.parts.draghandle(rdi()),o=rr.parts.close(tdi(u)),s=[f].concat(r.draggable?[e]:[]).concat([o]),eu.sketch({dom:el('<div class="tox-dialog__header"><\/div>'),components:s});var r,u,f,e,o,s}function fdi(n,t,i){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":i.translate(n)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:el('<div class="tox-spinner"><div><\/div><div><\/div><div><\/div><\/div>')}]}}function edi(n,t,i){return{onClose:function(){return i.closeWindow()},onBlock:function(i){rr.setBusy(n(),function(n,r){return fdi(i.message,r,t)})},onUnblock:function(){rr.setIdle(n())}}}function odi(i,r,u,f){var e;return pu(gvt(t(t({},i),{lazySink:f.shared.getSink,extraBehaviours:pt([pf.config({channel:oyt,updateState:function(t,i){return n.some(i)},initialData:r}),eit({})],i.extraBehaviours,!0),onEscape:function(n){at(n,ca)},dialogEvents:u,eventOrder:((e={})[gl()]=[pf.name(),ge.name()],e[na()]=["scroll-lock",pf.name(),"messages","dialog-events","alloy.base.behaviour"],e[lw()]=["alloy.base.behaviour","dialog-events","messages",pf.name(),"scroll-lock"],e)})))}function sdi(n){return s(n,function(n){return"menu"===n.type?(r=s((i=n).items,function(n){var i=p(!1);return t(t({},n),{storage:i})}),t(t({},i),{items:r})):n;var i,r})}function hdi(n){return vu(n,function(n,t){return"menu"!==t.type?n:vu(t.items,function(n,t){return n[t.name]=t.storage,n},n)},{})}function cdi(n,t){return[nft(lc(),tlr),n(wb,function(n,i){t.onClose();i.onClose()}),n(ca,function(n,t,i,r){t.onCancel(n);at(r,wb)}),f(ict,function(){return t.onUnblock()}),f(tct,function(n,i){return t.onBlock(i.event)})]}function ngr(n,t){function i(n,t){return eu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+n]},components:s(t,function(n){return n.memento.asSpec()})})}var r=byt(t.map(function(n){return n.footerButtons}).getOr([]),function(n){return"start"===n.align});return[i("start",r.pass),i("end",r.fail)]}function ldi(t,i){return{dom:el('<div class="tox-dialog__footer"><\/div>'),components:[],behaviours:e([pf.config({channel:ugi,initialData:t,updateState:function(t,r){var u=s(r.buttons,function(n){var t=yt(fit(n,n.type,i));return{name:n.name,align:n.align,memento:t}});return n.some({lookupByName:function(n,t){return i=n,r=t,wi(u,function(n){return n.name===r}).bind(function(n){return n.memento.getOpt(i)});var i,r},footerButtons:u})},renderComponents:ngr})])}}function adi(n,t){return rr.parts.footer(ldi(n,t))}function nyt(t,i){if(t.getRoot().getSystem().isConnected()){var r=ft.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return np.getField(r,i).fold(function(){var n=t.getFooter();return pf.getState(n).get().bind(function(n){return n.lookupByName(r,i)})},function(t){return n.some(t)})}return n.none()}function vdi(n,i,r){function u(t){var i=n.getRoot();i.getSystem().isConnected()&&t(i)}var f={getData:function(){var i=n.getRoot(),u=i.getSystem().isConnected()?n.getFormWrapper():i,f=o.getValue(u),e=hr(r,function(n){return n.get()});return t(t({},f),e)},setData:function(i){u(function(){var u,s,h=f.getData(),e=t(t({},h),i),c=(u=e,s=n.getRoot(),pf.getState(s).get().map(function(n){return vs(si("data",n.dataValidator,u))}).getOr(u)),l=n.getFormWrapper();o.setValue(l,c);su(r,function(n,t){ni(e,t)&&n.set(e[t])})})},disable:function(t){nyt(n,t).each(a.disable)},enable:function(t){nyt(n,t).each(a.enable)},focus:function(t){nyt(n,t).each(g.focus)},block:function(n){if(!pi(n))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");u(function(t){y(t,tct,{message:n})})},unblock:function(){u(function(n){at(n,ict)})},showTab:function(t){u(function(){var i=n.getBody();pf.getState(i).get().exists(function(n){return n.isTabPanel()})&&ft.getCurrent(i).each(function(n){cp.showTab(n,t)})})},redial:function(n){u(function(t){var r=i(n);t.getSystem().broadcastOn([oyt],r);t.getSystem().broadcastOn([igi],r.internalDialog);t.getSystem().broadcastOn([rgi],r.internalDialog);t.getSystem().broadcastOn([ugi],r.internalDialog);f.setData(r.initialData)})},close:function(){u(function(n){at(n,wb)})}};return f}function ydi(n){return tc(n)&&-1!==aiu.indexOf(n.mceAction)}function tgr(i,r,u,f){function c(n){l.getSystem().isConnected()&&n(l)}var a,p,l,k=udi(i.title,f),d=(p={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[pci({dom:{tag:"iframe",attributes:{src:i.url}},behaviours:e([ai.config({}),g.config({})])})]}],behaviours:e([v.config({mode:"acyclic",useTabstopAt:vp(db)})])},rr.parts.body(p)),nt=i.buttons.bind(function(t){return 0===t.length?n.none():n.some(adi({buttons:t},f))}),tt=ciu(function(){return s},edi(function(){return b},f.shared.providers,r)),rt=t(t({},i.height.fold(function(){return{}},function(n){return{height:n+"px","max-height":n+"px"}})),i.width.fold(function(){return{}},function(n){return{width:n+"px","max-width":n+"px"}})),ut=i.width.isNone()&&i.height.isNone()?["tox-dialog--width-lg"]:[],o=new syt(i.url,{base_uri:new syt(window.location.href)}),ft=o.protocol+"://"+o.host+(o.port?":"+o.port:""),w=gv(),b=odi({header:k,body:d,footer:nt,extraClasses:ut,extraBehaviours:[it("messages",[li(function(){var n=tr(h.fromDom(window),"message",function(n){var t,r;o.isSameOrigin(new syt(n.raw.origin))&&(ydi(t=n.raw.data)?function(n,t,i){switch(i.mceAction){case"insertContent":n.insertContent(i.content);break;case"setContent":n.setContent(i.content);break;case"execCommand":var r=!!lp(i.ui)&&i.ui;n.execCommand(i.cmd,r,i.value);break;case"close":t.close();break;case"block":t.block(i.message);break;case"unblock":t.unblock()}}(u,s,t):!ydi(r=t)&&tc(r)&&ni(r,"mceAction")&&i.onMessage(s,t))});w.set(n)}),ws(w.clear)]),ge.config({channels:((a={})[fgi]={onReceive:function(n,t){er(n.element,"iframe").each(function(n){n.dom.contentWindow.postMessage(t,ft)})}},a)})],extraStyles:rt},i,tt,f),s={block:function(n){if(!pi(n))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");c(function(t){y(t,tct,{message:n})})},unblock:function(){c(function(n){at(n,ict)})},close:function(){c(function(n){at(n,wb)})},sendMessage:function(n){c(function(t){t.getSystem().broadcastOn([fgi],n)})}};return{dialog:l=b,instanceApi:s}}function igr(i){function b(t,i){return ek.open(function(t,f,e){var h,l,o,y,p,w,b,a,k,d,g,nt,s,v,tt=f,c=(l={redial:ek.redial,closeWindow:function(){rr.hide(c.dialog);i(c.instanceApi)}},o=u,w=udi((h={dataValidator:e,initialData:tt,internalDialog:t}).internalDialog.title,o),y=o,p=pki({body:h.internalDialog.body},n.none(),y,!1),b=rr.parts.body(p),a=sdi(h.internalDialog.buttons),k=hdi(a),d=adi({buttons:a},o),g=egi(function(){return v},edi(function(){return s},o.shared.providers,l),o.shared.getSink),nt=function(){switch(h.internalDialog.size){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(),s=odi({header:w,body:b,footer:n.some(d),extraClasses:nt,extraBehaviours:[],extraStyles:{}},h,g,o),v=vdi({getRoot:r(s),getBody:function(){return rr.getBody(s)},getFooter:function(){return rr.getFooter(s)},getFormWrapper:function(){var n=rr.getBody(s);return ft.getCurrent(n).getOr(n)}},l.redial,k),{dialog:s,instanceApi:v});return rr.show(c.dialog),c.instanceApi.setData(tt),c.instanceApi},t)}function y(i,s,c,a){return ek.open(function(i,y,p){function gt(){return et.on(function(n){oi.reposition(n);au.refresh(n)})}var ni,tt,ot,k,ti,st,rt,ii,ri,ht,ui,fi,ei,ct,lt,hi,ut,vt,ci,wt,li,b,bt,ai=vs(si("data",p,y)),et=vi(),kt=u.shared.header.isPositionedAtTop(),d=(tt={dataValidator:p,initialData:ai,internalDialog:i},ot={redial:ek.redial,closeWindow:function(){et.on(oi.hide);o.off("ResizeEditor",gt);et.clear();c(d.instanceApi)}},k=u,ti=a,ct=l("dialog-label"),lt=l("dialog-content"),hi=yt((ii={title:tt.internalDialog.title,draggable:!0},ri=ct,ht=k.shared.providers,eu.sketch({dom:el('<div class="tox-dialog__header"><\/div>'),components:[idi(ii,n.some(ri),ht),rdi(),tdi(ht)],containerBehaviours:e([tv.config({mode:"mouse",blockerClass:"blocker",getTarget:function(n){return wo(n,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),ut=yt((ui={body:tt.internalDialog.body},fi=k,ei=ti,pki(ui,n.some(lt),fi,ei))),vt=sdi(tt.internalDialog.buttons),ci=hdi(vt),wt=yt(liu({buttons:vt},k)),li=egi(function(){return bt},{onBlock:function(n){gh.block(b,function(t,i){return fdi(n.message,i,k.shared.providers)})},onUnblock:function(){gh.unblock(b)},onClose:function(){return ot.closeWindow()}},k.shared.getSink),b=pu({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((st={role:"dialog"})["aria-labelledby"]=ct,st["aria-describedby"]=lt,st)},eventOrder:((rt={})[gl()]=[pf.name(),ge.name()],rt[gf()]=["execute-on-form"],rt[na()]=["reflecting","execute-on-form"],rt),behaviours:e([v.config({mode:"cyclic",onEscape:function(t){return at(t,wb),n.some(!0)},useTabstopAt:function(n){return!db(n)&&("button"!==hs(n)||"disabled"!==hu(n,"disabled"))}}),pf.config({channel:oyt,updateState:function(t,i){return n.some(i)},initialData:tt}),g.config({}),it("execute-on-form",li.concat([vv(lc(),function(n){v.focusIn(n)})])),gh.config({getRoot:function(){return n.some(b)}}),nt.config({}),eit({})]),components:[hi.asSpec(),ut.asSpec(),wt.asSpec()]}),bt=vdi({getRoot:r(b),getFooter:function(){return wt.get(b)},getBody:function(){return ut.get(b)},getFormWrapper:function(){var n=ut.get(b);return ft.getCurrent(n).getOr(n)}},ot.redial,ci),{dialog:b,instanceApi:bt}),dt=pu(oi.sketch(t(t({lazySink:u.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},kt?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:e(pt([it("window-manager-inline-events",[f(pv(),function(){at(d.dialog,ca)})])],(ni=o,w&&kt?[]:[au.config({contextual:{lazyContext:function(){return n.some(cf(h.fromDom(ni.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]),!0)),isExtraPart:function(n,t){return vb(i=t,".tox-alert-dialog")||vb(i,".tox-confirm-dialog");var i}})));return et.set(dt),oi.showWithin(dt,he(d.dialog),{anchor:s},n.some(sh())),w&&kt||(au.refresh(dt),o.on("ResizeEditor",gt)),d.instanceApi.setData(ai),v.focusIn(d.dialog),d.instanceApi},i)}var p,s,a,c,u=i.backstage,o=i.editor,w=ftt(o),k=(s=(p=i).backstage.shared,{open:function(t,i){function r(){rr.hide(u);i()}var e=yt(fit({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:n.none()},"cancel",p.backstage)),h=kki(),c=bki(r,s.providers),u=pu(gvt({lazySink:function(){return s.getSink()},header:wki(h,c),body:dki(t,s.providers),footer:n.some(gki(ndi([],[e.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[f(ca,r)],eventOrder:{}})),o;rr.show(u);o=e.get(u);g.focus(o)}}),d=(c=(a=i).backstage.shared,{open:function(t,i){function r(n){rr.hide(u);i(n)}var e=yt(fit({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:n.none()},"submit",a.backstage)),s=fit({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:n.none()},"cancel",a.backstage),h=kki(),l=bki(function(){return r(!1)},c.providers),u=pu(gvt({lazySink:function(){return c.getSink()},header:wki(h,l),body:dki(t,c.providers),footer:n.some(gki(ndi([],[s,e.asSpec()]))),onEscape:function(){return r(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[f(ca,function(){return r(!1)}),f(bb,function(){return r(!0)})],eventOrder:{}})),o;rr.show(u);o=e.get(u);g.focus(o)}});return{open:function(n,t,i){return void 0!==t&&"toolbar"===t.inline?y(n,u.shared.anchors.inlineDialog(),i,t.ariaAttrs):void 0!==t&&"cursor"===t.inline?y(n,u.shared.anchors.cursor(),i,t.ariaAttrs):b(n,i)},openUrl:function(n,t){return i=t,ek.openUrl(function(n){var t=tgr(n,{closeWindow:function(){rr.hide(t.dialog);i(t.instanceApi)}},o,u);return rr.show(t.dialog),t.instanceApi},n);var i},alert:function(n,t){k.open(n,function(){t()})},close:function(n){n.close()},confirm:function(n,t){d.open(n,function(n){t(n)})}}}var pi=ort("string"),tc=ort("object"),ic=ort("array"),ayt=hyt(null),lp=srt("boolean"),ap=hyt(void 0),fo=function(n){return!hrt(n)},wf=srt("function"),uh=srt("number"),dt=r(!1),gi=r(!0),ogi=tinymce.util.Tools.resolve("tinymce.ThemeManager"),t=function(){return(t=Object.assign||function(n){for(var r,i,t=1,u=arguments.length;t<u;t++)for(i in r=arguments[t])Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n}).apply(this,arguments)},sk={fold:function(n){return n()},isSome:dt,isNone:gi,getOr:ct,getOrThunk:vyt,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},getOrNull:r(null),getOrUndefined:r(void 0),or:ct,orThunk:vyt,map:art,each:c,bind:art,exists:dt,forall:gi,filter:function(){return sk},toArray:function(){return[]},toString:r("none()")},tpt,brt=function(n){function f(){return u}function i(t){return t(n)}var t=r(n),u={fold:function(t,i){return i(n)},isSome:gi,isNone:dt,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:f,orThunk:f,map:function(t){return brt(t(n))},each:function(t){t(n)},bind:i,exists:i,forall:i,filter:function(t){return t(n)?u:sk},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return u},n={some:brt,none:art,from:function(n){return null==n?sk:brt(n)}},ak=Array.prototype.slice,hgi=Array.prototype.indexOf,cgi=Array.prototype.push,cr=function(n,t){return-1<yyt(n,t)},k=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i)},lgi=wf(Array.from)?Array.from:function(n){return ak.call(n)},lr=Object.keys,agi=Object.hasOwnProperty,ipt=function(n,t){var i={};return su(n,function(n,r){var u=t(n,r);i[u.k]=u.v}),i},ni=function(n,t){return agi.call(n,t)},vk=function(t,i,r){return t.isSome()&&i.isSome()?n.some(r(t.getOrDie(),i.getOrDie())):n.none()},vgi=function(n,t){return npt(n,t,0)},yk=function(n,t){return npt(n,t,n.length-t.length)},ygi=(tpt=/^\s+|\s+$/g,function(n){return n.replace(tpt,"")}),h={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return wp(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return wp(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return wp(i)},fromDom:wp,fromPoint:function(t,i,r){return n.from(t.dom.elementFromPoint(i,r)).map(wp)}},bv,kv,vc,hkt,aai,vai;"undefined"!=typeof window||Function("return this;")();var ho,rd,co=pk(1),ll=pk(3),ggi=pk(9),nni=pk(11),uut=function(n,t){return{major:n,minor:t}},kp={nu:uut,detect:function(n,t){function u(n){return Number(i.replace(r,"$"+n))}var i,r,f=String(t).toLowerCase();return 0===n.length?dpt():(r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r}(n,i=f))?uut(u(1),u(2)):{major:0,minor:0}},unknown:dpt},fut=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,twt={browsers:r([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return yu(n,"edge/")&&yu(n,"chrome")&&yu(n,"safari")&&yu(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,fut],search:function(n){return yu(n,"chrome")&&!yu(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return yu(n,"msie")||yu(n,"trident")}},{name:"Opera",versionRegexes:[fut,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:eh("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:eh("firefox")},{name:"Safari",versionRegexes:[fut,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(yu(n,"safari")||yu(n,"mobile/"))&&yu(n,"applewebkit")}}]),oses:r([{name:"Windows",search:eh("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return yu(n,"iphone")||yu(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:eh("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:eh("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:eh("linux"),versionRegexes:[]},{name:"Solaris",search:eh("sunos"),versionRegexes:[]},{name:"FreeBSD",search:eh("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:eh("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},iwt="Firefox",tni=function(){return gpt({current:void 0,version:kp.unknown()})},ini=gpt,rwt=(r("Edge"),r("Chrome"),r("IE"),r("Opera"),r(iwt),r("Safari"),"Windows"),uwt="Android",fwt="Solaris",ewt="FreeBSD",owt="ChromeOS",rni=function(){return nwt({current:void 0,version:kp.unknown()})},uni=nwt,we=(r(rwt),r("iOS"),r(uwt),r("Linux"),r("OSX"),r(fwt),r(ewt),r(owt),fh(function(){return i=navigator.userAgent,p=n.from(navigator.userAgentData),w=pgi,a=twt.browsers(),g=twt.oses(),v=p.bind(function(n){return t=a,oo(n.brands,function(n){var i=n.brand.toLowerCase();return wi(t,function(n){var t;return i===(null===(t=n.brand)||void 0===t?void 0:t.toLowerCase())}).map(function(t){return{current:t.name,version:kp.nu(parseInt(n.version,10),0)}})});var t}).orThunk(function(){return rpt(a,n=i).map(function(t){var i=kp.detect(t.versionRegexes,n);return{current:t.name,version:i}});var n}).fold(tni,ini),y=rpt(g,b=i).map(function(n){var t=kp.detect(n.versionRegexes,b);return{current:n.name,version:t}}).fold(rni,uni),{browser:v,os:y,deviceType:(k=v,o=i,s=w,u=(t=y).isiOS()&&!0===/ipad/i.test(o),f=t.isiOS()&&!u,d=(h=t.isiOS()||t.isAndroid())||s("(pointer:coarse)"),e=u||!f&&h&&s("(min-device-width:768px)"),c=f||h&&!e,l=k.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),{isiPad:r(u),isiPhone:r(f),isTablet:r(e),isPhone:r(c),isTouch:r(d),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:r(l),isDesktop:r(!c&&!e&&!l)})};var i,p,w,b,t,k,o,s,u,f,h,d,e,c,l,a,g,v,y})),fni=gu,swt=wf(Element.prototype.attachShadow)&&wf(Node.prototype.getRootNode),eni=r(swt),be=swt?function(n){return h.fromDom(n.dom.getRootNode())}:bk,hwt=function(t){var i=be(t);return nut(i)?n.some(i):n.none()},oni=function(n){return fo(n.dom.shadowRoot)},lo=function(n){var t=ll(n)?n.dom.parentNode:n.dom,i,r,u;return null==t||null===t.ownerDocument?!1:(u=t.ownerDocument,hwt(h.fromDom(t)).fold(function(){return u.body.contains(t)},(i=lo,r=wgi,function(n){return i(r(n))})))},sh=function(){return cwt(h.fromDom(document))},cwt=function(n){var t=n.dom.body;if(null==t)throw new Error("Body is not available yet");return h.fromDom(t)},lwt=function(n,t){return pp(n)?n.style.getPropertyValue(t):""},eut=apt("height",function(n){var t=n.dom;return lo(n)?t.getBoundingClientRect().height:t.offsetHeight}),awt=function(n,t){return{left:n,top:t,translate:function(i,r){return awt(n+i,t+r)}}},ci=awt,out=function(n){var t,i=n.dom,r=i.ownerDocument.body;return r===i?ci(r.offsetLeft,r.offsetTop):lo(n)?(t=i.getBoundingClientRect(),ci(t.left,t.top)):ci(0,0)},ud=apt("width",function(n){return n.dom.offsetWidth}),sni=function(n,t,i,r){n.dom.removeEventListener(t,i,r)},tf=function(n,t){n.dom.appendChild(t.dom)},ls=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},vwt=function(n,t){return n.view(t).fold(r([]),function(t){var i=n.owner(t),r=vwt(n,i);return[t].concat(r)})},hni=Object.freeze({__proto__:null,view:function(t){var i;return(t.dom===document?n.none():n.from(null===(i=t.dom.defaultView)||void 0===i?void 0:i.frameElement)).map(h.fromDom)},owner:so}),lu=function(n,t,i,r){return{x:n,y:t,width:i,height:r,right:n+i,bottom:t+r}},cf=function(n){var t=uc(n),i=bp(n),r=hl(n);return lu(t.left,t.top,i,r)},as=function(){return kpt(window)},ev=function(t){return{isValue:gi,isError:dt,getOr:r(t),getOrThunk:r(t),getOrDie:r(t),or:function(){return ev(t)},orThunk:function(){return ev(t)},fold:function(n,i){return i(t)},map:function(n){return ev(n(t))},mapError:function(){return ev(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return n.some(t)}}},dp=function(t){return{isValue:dt,isError:gi,getOr:ct,getOrThunk:function(n){return n()},getOrDie:function(){return lrt(String(t))()},or:ct,orThunk:function(n){return n()},fold:function(n){return n(t)},map:function(){return dp(t)},mapError:function(n){return dp(n(t))},each:c,bind:function(){return dp(t)},exists:dt,forall:gi,toOptional:n.none}},et={value:ev,error:dp,fromOption:function(n,t){return n.fold(function(){return dp(t)},ev)}};(rd=ho={})[rd.Error=0]="Error";rd[rd.Value=1]="Value";var lni=function(n){return sut(n,et.error,et.value)},al=ywt,vl=pwt,ani=function(n,t){return n.stype===ho.Value?t(n.svalue):n},vni=function(n,t){return n.stype===ho.Error?t(n.serror):n},yni=function(n,t){return n.stype===ho.Value?{stype:ho.Value,svalue:t(n.svalue)}:n},pni=function(n,t){return n.stype===ho.Error?{stype:ho.Error,serror:t(n.serror)}:n},wni=sut,ri=bwt(function(n,t){return tc(n)&&tc(t)?ri(n,t):t}),bni=bwt(function(n,t){return t}),fbt=function(n){var t,i,r=(t=[],i=[],k(n,function(n){sut(n,function(n){return i.push(n)},function(n){return t.push(n)})}),{values:t,errors:i});return 0<r.errors.length?crt(vl,sr)(r.errors):al(r.values)},ebt=sv(al),w=function(n){return{extract:function(t,i){for(var u={},r=[],f=0,e=n;f<e.length;f++)hut(e[f],function(n,f,e,o){var s=cni(e,t,i,n,o);wni(s,function(n){r.push.apply(r,n)},function(n){u[f]=n})},function(n,t){u[n]=t(i)});return 0<r.length?vl(r):al(u)},toString:function(){return"obj{\n"+s(n,function(n){return hut(n,function(n,t,i,r){return n+" -> "+r.toString()},function(n){return"state("+n+")"})}).join("\n")+"}"}}},put=crt(fc,w),vo=r(ebt),wut=ed(uh,"number"),fr=ed(pi,"string"),cd=ed(lp,"boolean"),but=ed(wf,"function"),obt=function(n){if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(function(t){return obt(n[t])});default:return!1}},kni=sv(function(n){return obt(n)?al(n):vl("Expected value to be acceptable for sending via postMessage")}),yl=function(n){return"Errors: \n"+s(10<(t=n.errors).length?t.slice(0,10).concat([{path:[],getErrorInfo:r("... (only showing first ten failures)")}]):t,function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}).join("\n")+"\n\nInput object: "+aut(n.input);var t},ar=wwt,ff=function(n,t){return{tag:"custom",newKey:n,instantiator:t}};oe([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var wbt,ps,utr={can:gi,abort:dt,run:c},kr=r,ch=kr("touchstart"),uw=kr("touchmove"),fw=kr("touchend"),bbt=kr("touchcancel"),de=kr("mousedown"),wd=kr("mousemove"),fft=kr("mouseout"),eft=kr("mouseup"),cc=kr("mouseover"),lc=kr("focusin"),ftr=kr("focusout"),bd=kr("keydown"),etr=kr("keyup"),yv=kr("input"),ew=kr("change"),ow=kr("click"),otr=kr("transitioncancel"),sw=kr("transitionend"),str=kr("transitionstart"),htr=kr("selectstart"),ctr={tap:di("tap")},ac=di("focus"),oft=di("blur.post"),sft=di("paste.post"),gl=di("receive"),gf=di("execute"),hw=di("focus.item"),cw=ctr.tap,ltr=di("longpress"),kd=di("sandbox.close"),hft=di("typeahead.cancel"),dd=di("system.init"),atr=di("system.touchmove"),vtr=di("system.touchend"),cft=di("system.scroll"),gd=di("system.resize"),na=di("system.attached"),lw=di("system.detached"),pv=di("system.dismissRequested"),kbt=di("system.repositionRequested"),dbt=di("focusmanager.shifted"),lft=di("slotcontainer.visibility"),gbt=di("change.tab"),nkt=di("dismiss.tab"),tkt=di("highlight"),aft=di("dehighlight"),vft=function(n,i,r,u){var f=t({target:i},u);n.getSystem().triggerEvent(r,i,f)},gt=cv,li=ld(na()),ws=ld(lw()),ytr=ld(dd()),lh=(wbt=gf(),function(n){return f(wbt,n)}),ptr=gt([{key:ac(),value:lv({can:function(n,t){var i,r=t.event,u=r.originator,f=r.target;return!(ki(i=u,n.element)&&!ki(i,f)&&(console.warn(ac()+" did not get interpreted by the desired target. \nOriginator: "+hc(u)+"\nTarget: "+hc(f)+"\nCheck the "+ac()+" event handlers"),1))}})}]),wtr=Object.freeze({__proto__:null,events:ptr}),btr=0,ktr=r("alloy-id-"),dtr=r("data-alloy-id"),gtr=ktr(),ikt=dtr(),yft=function(n,t){Object.defineProperty(n.dom,ikt,{value:t,writable:!0})},wv=l,nir=ct,tir=ad(),pft=function(n){return s(n,function(n){return yk(n,"/*")?n.substring(0,n.length-2):n})},rkt=l("alloy-premade"),po={init:function(){return ne({readState:r("No State required")})}},ne=function(n){return n},iir=function(n,t){var e,i,r,o,u,f,s=hk(n,function(n,i){return(1===n.length?et.value(n[0].handler):gni(n,t,i)).map(function(r){var f,u,e=(u=wf(f=r)?{can:gi,abort:dt,run:f}:f,function(n,t){for(var r,f=[],i=2;i<arguments.length;i++)f[i-2]=arguments[i];r=[n,t].concat(f);u.abort.apply(void 0,r)?t.stop():u.can.apply(void 0,r)&&u.run.apply(void 0,r)}),o=1<n.length?fi(t[i],function(t){return eo(n,function(n){return n.name===t})}).join(" > "):n[0].name;return hh(i,{handler:e,purpose:o})})});return e={},i=[],r=[],k(s,function(n){n.fold(function(n){i.push(n)},function(n){r.push(n)})}),0<(f={errors:i,values:r}).errors.length?et.error(sr(f.errors)):(u=e,0===(o=f.values).length?et.value(u):et.value(ri(u,bni.apply(void 0,o))))},ta="alloy.base.behaviour",rir=w([ar("dom","dom",ao(),w([u("tag"),i("styles",{}),i("classes",[]),i("attributes",{}),wt("value"),wt("innerHtml")])),u("components"),u("uid"),i("events",{}),i("apis",{}),ar("eventOrder","eventOrder",((ps={})[gf()]=["disabling",ta,"toggling","typeaheadevents"],ps[ac()]=[ta,"focusing","keying"],ps[dd()]=[ta,"disabling","toggling","representing"],ps[yv()]=[ta,"representing","streaming","invalidating"],ps[lw()]=[ta,"representing","item-events","tooltipping"],ps[de()]=["focusing",ta,"item-type-events"],ps[ch()]=["focusing",ta,"item-type-events"],ps[cc()]=["item-type-events","tooltipping"],ps[gl()]=["receiving","reflecting","tooltipping"],lut(r(ps))),vo()),wt("domModification")]),wft=function(t){var i=rf("external.component",kf([u("element"),wt("uid")]),t),f=p(ad()),o=i.uid.getOrThunk(function(){return wv("external")}),e;return yft(i.element,o),e={uid:o,getSystem:f.get,config:n.none,hasConfigured:dt,connect:function(n){f.set(n)},disconnect:function(){f.set(ad(function(){return e}))},getApis:function(){return{}},element:i.element,spec:t,readState:r("No state"),syncComponents:c,components:r([]),events:{}},ybt(e)},uir=wv,pu=function(n){return b(n,rkt).getOrThunk(function(){return rtr(ni(n,"uid")?n:t({uid:uir("")},n)).getOrDie()})},he=ybt;vc=function(n,t){return okt(t,function(t){return ki(t,n.element)},dt)||(i=n,ekt(t,function(n){if(!co(n))return!1;var t=hu(n,"id");return void 0!==t&&-1<t.indexOf("aria-owns")}).bind(function(n){var t=hu(n,"id");return er(be(n),'[aria-owns="'+t+'"]')}).exists(function(n){return vc(i,n)}));var i};hkt="unknown";(kv=bv=bv||{})[kv.STOP=0]="STOP";kv[kv.NORMAL=1]="NORMAL";kv[kv.LOGGING=2]="LOGGING";var kft=p({}),fir=["alloy/data/Fields","alloy/debugging/Debugging"],eir=r({logEventCut:c,logEventStopped:c,logNoParent:c,logEventNoHandlers:c,logEventResponse:c,write:c}),ckt=r([u("menu"),u("selectedMenu")]),dft=r([u("item"),u("selectedItem")]);r(w(dft().concat(ckt())));var sir=r(w(dft())),fdt=r(ec("initSize",[u("numColumns"),u("numRows")])),yc=oe([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),rg=yc.southeast,set=yc.southwest,het=yc.northeast,cet=yc.northwest,edt=yc.south,odt=yc.north,sdt=yc.east,hdt=yc.west,ce=function(n,t,i){return Math.min(Math.max(n,t),i)},pc="layout",iu=function(n,t,i){return dr(n.x,tet(n),i.southeast(),rg(),"southeast",gr(n,{left:1,top:3}),pc)},ru=function(n,t,i){return dr(vkt(n,t),tet(n),i.southwest(),set(),"southwest",gr(n,{right:0,top:3}),pc)},ef=function(n,t,i){return dr(n.x,net(n,t),i.northeast(),het(),"northeast",gr(n,{left:1,bottom:2}),pc)},of=function(n,t,i){return dr(vkt(n,t),net(n,t),i.northwest(),cet(),"northwest",gr(n,{right:0,bottom:2}),pc)},vf=function(n,t,i){return dr(akt(n,t),net(n,t),i.north(),odt(),"north",gr(n,{bottom:2}),pc)},uu=function(n,t,i){return dr(akt(n,t),tet(n),i.south(),edt(),"south",gr(n,{top:3}),pc)},hir=Object.freeze({__proto__:null,events:function(n){return gt([f(gl(),function(t,i){var r,u=n.channels,f=lr(u),e=i,o=(r=e).universal?f:fi(f,function(n){return cr(r.channels,n)});k(o,function(n){var i=u[n],r=i.schema,f=rf("channel["+n+"] data\nReceiver: "+hc(t.element),r,e.data);i.onReceive(t,f)})})])}}),cir=[lf("channels",nbt(et.value,kf([ra("onReceive"),i("schema",vo())])))],cdt=function(i,u,f,e,o,s,h){function c(t){return ve(t,f)?t[f]():n.none()}var a=hr(o,function(n,t){return u=f,e=function(n){for(var f,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return f=[n].concat(i),n.config({name:r(u)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+u+". Using API: "+h);},function(t){var i=Array.prototype.slice.call(f,1);return s.apply(void 0,[n,t.config,t.state].concat(i))})},c=h=t,i=(s=n).toString(),l=i.indexOf(")")+1,a=i.indexOf("("),o=i.substring(a+1,l-1).split(/,\s*/),e.toFunctionAnnotation=function(){return{name:c,parameters:pft(o.slice(0,1).concat(o.slice(3)))}},e;var u,s,h,e,c,i,l,a,o}),v=hr(s,ift),l=t(t(t({},v),a),{revoke:ue(oir,f),config:function(n){var t=rf(f+"-config",i,n);return{key:f,value:{config:t,me:l,configAsRaw:fh(function(){return rf(f+"-config",i,n)}),initialConfig:n,state:h}}},schema:r(u),exhibit:function(n,t){return vk(c(n),b(e,"exhibit"),function(n,i){return i(t,n.config,n.state)}).getOrThunk(function(){return yo({})})},name:r(f),handlers:function(n){return c(n).map(function(n){return b(e,"events").getOr(function(){return{}})(n.config,n.state)}).getOr({})}});return l},e=cv,lir=kf([u("fields"),u("name"),i("active",{}),i("apis",{}),i("state",po),i("extra",{})]),air=kf([u("branchKey"),u("branches"),u("name"),i("active",{}),i("apis",{}),i("state",po),i("extra",{})]),vir=r(void 0),ge=wr({fields:cir,name:"receiving",active:hir}),yir=Object.freeze({__proto__:null,exhibit:function(n,t){return yo({classes:[],styles:t.useFixed()?{}:{position:"relative"}})}}),aet=oe([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),ldt=function(n,t,i){var u=ci(t,i);return n.fold(r(u),r(u),function(){var n=cs();return u.translate(-n.left,-n.top)})};aet.none;var bs,dir=aet.relative,gir=aet.fixed,pet="data-alloy-placement",eg=oe([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),wdt=gi,bdt=vpt,kdt=["top","bottom","right","left"],og="data-alloy-transition-timer",nrr=r(function(n,t){ydt(n,t);oh(n,{"overflow-x":"hidden","overflow-y":"auto"})}),aw=r(function(n,t){ydt(n,t)}),trr=function(n,t,i,r){var f,e,o,s,u=kir(n,t,i,r),h=t,c=u,l=udt((f=r).origin,c);return f.transition.each(function(n){bir(h,f.origin,l,n,c,f.lastPlacement)}),idt(h,l),s=u.placement,rt(t,pet,s),ys(e=t,(o=u.classes).off),bl(e,o.on),r.maxHeightFunction(t,u.maxHeight),r.maxWidthFunction(t,u.maxWidth),{layout:u.layout,placement:u.placement}},irr=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],sg=ct,rrr=function(n){return"rtl"===bf(n,"direction")?"rtl":"ltr"};(bs=bs||{}).TopToBottom="toptobottom";bs.BottomToTop="bottomtotop";var wet="data-alloy-vertical-dir",orr=[u("hotspot"),wt("bubble"),i("overrides",{}),wc(),ui("placement",function(t,i,r){var u=oet(r,i.hotspot.element),f=hg(t.element,i,uet(),fet(),bkt(),kkt(),n.some(i.hotspot.element));return n.some(sg({anchorBox:u,bubble:i.bubble.getOr(fg()),overrides:i.overrides,layouts:f,placer:n.none()}))})],srr=[u("x"),u("y"),i("height",0),i("width",0),i("bubble",fg()),i("overrides",{}),wc(),ui("placement",function(t,i,r){var u=ldt(r,i.x,i.y),f=lu(u.left,u.top,i.width,i.height),e=hg(t.element,i,pkt(),wkt(),pkt(),wkt(),n.none());return n.some(sg({anchorBox:f,bubble:i.bubble,overrides:i.overrides,layouts:e,placer:n.none()}))})],sgt=oe([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),hrr=sgt.screen,crr=sgt.absolute,lrr=[u("node"),u("root"),wt("bubble"),wc(),i("overrides",{}),i("showAbove",!1),ui("placement",function(n,t,i){var r=ngt(n,0,t);return t.node.filter(lo).bind(function(u){var f=u.dom.getBoundingClientRect(),e=tgt(f.left,f.top,f.width,f.height),o=t.node.getOr(n.element);return igt(e,r,t,i,o)})})],bet=function(n,t,i,r){return{start:n,soffset:t,finish:i,foffset:r}},ket=oe([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),arr=(ket.before,ket.on,ket.after,function(n){return n.fold(ct,ct,ct)}),cg=oe([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),vw={domRange:cg.domRange,relative:cg.relative,exact:cg.exact,exactFromRange:function(n){return cg.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){return kk(n.match({domRange:function(n){return h.fromDom(n.startContainer)},relative:function(n){return arr(n)},exact:function(n){return n}}))},range:bet},yw=oe([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);yw.ltr;yw.rtl;var yg,pti,pg,yot,wti=(yg=ll,{get:function(n){if(!yg(n))throw new Error("Can only get text value of a text node");return pti(n).getOr("")},getOption:pti=function(t){return yg(t)?n.from(t.dom.nodeValue):n.none()},set:function(n,t){if(!yg(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=t}}),nur=["img","br"],tur=[wt("getSelection"),u("root"),wt("bubble"),wc(),i("overrides",{}),i("showAbove",!1),ui("placement",function(t,i,r){var u=kk(i.root).dom,f=ngt(t,0,i);return igt(vgt(u,i).bind(function(t){return r=u,f=vw.exactFromRange(t),(0<(i=ogt(r,f).getBoundingClientRect()).width||0<i.height?n.some(i).map(fgt):n.none()).orThunk(function(){var n=h.fromText(""),i;return id(t.start,n),i=lgt(u,vw.exact(n,0,n,1)),ls(n),i}).bind(function(n){return tgt(n.left,n.top,n.width,n.height)});var r,f,i}),f,i,r,vgt(u,i).bind(function(t){return co(t.start)?n.some(t.start):fni(t.start)}).getOr(t.element))})],wg="link-layout",iur=fe("type",{selection:tur,node:lrr,hotspot:orr,submenu:[u("item"),wc(),i("overrides",{}),ui("placement",function(t,i,r){var u=oet(r,i.item.element),f=hg(t.element,i,nnt(),tnt(),nnt(),tnt(),n.none());return n.some(sg({anchorBox:u,bubble:fg(),overrides:i.overrides,layouts:f,placer:n.none()}))})],makeshift:srr}),rur=[ee("classes",fr),sc("mode","all",["all","layout","placement"])],uur=[i("useFixed",dt),wt("getBounds")],fur=[lf("anchor",iur),df("transition",rur)],bti=function(n,t,i,u,f,e){var s=rf("placement.info",w(fur),f),h=s.anchor,o=u.element,c=i.get(u.uid);tdt(function(){var v;tt(o,"position","fixed");v=tu(o,"visibility");tt(o,"visibility","hidden");var y,f,l,a,p=t.useFixed()?(a=document.documentElement,gir(0,0,a.clientWidth,a.clientHeight)):(f=uc((y=n).element),l=y.element.dom.getBoundingClientRect(),dir(f.left,f.top,l.width,l.height)),w=h.placement,b=e.map(r).or(t.getBounds);w(n,h,p).each(function(t){var r=t.placer.getOr(prr)(n,p,t,b,u,c,s.transition);i.set(u.uid,r)});v.fold(function(){ti(o,"visibility")},function(n){tt(o,"visibility",n)});tu(o,"left").isNone()&&tu(o,"top").isNone()&&tu(o,"right").isNone()&&tu(o,"bottom").isNone()&&ss(tu(o,"position"),"fixed")&&ti(o,"position")},o)},ku=wr({fields:uur,name:"positioning",active:yir,apis:Object.freeze({__proto__:null,position:function(t,i,r,u,f){hti(t,i,r,u,f,n.none())},positionWithin:hti,positionWithinBounds:bti,getMode:function(n,t){return t.useFixed()?"fixed":"absolute"},reset:function(n,t,i,r){var u=r.element;k(["position","left","right","top","bottom"],function(n){return ti(u,n)});nu(u,pet);i.clear(r.uid)}}),state:Object.freeze({__proto__:null,init:function(){var n={};return ne({readState:function(){return n},clear:function(t){fo(t)?delete n[t]:n={}},set:function(t,i){n[t]=i},get:function(t){return b(n,t)}})}})}),bg=function(n){at(n,lw());var t=n.components();k(t,bg)},kg=function(n){var t=n.components();k(t,kg);at(n,na())},kti=function(n,t,i){n.getSystem().addToWorld(t);i(n.element,t.element);lo(n.element)&&kg(t);n.syncComponents()},dti=function(n,t,i){i(n,t.element);var r=ye(t.element);k(r,function(n){t.getByDom(n).each(kg)})},eur=Object.freeze({__proto__:null,cloak:cti,decloak:lti,open:snt,openWhileCloaked:function(n,t,i,r,u){cti(n,t);snt(n,t,i,r);u();lti(n,t)},close:hnt,isOpen:cnt,isPartOf:function(n,t,i,r){return cnt(0,0,i)&&i.get().exists(function(i){return t.isPartOf(n,i,r)})},getState:function(n,t,i){return i.get()},setContent:function(n,t,i,r){return i.get().map(function(){return ont(n,t,i,r)})}}),our=Object.freeze({__proto__:null,events:function(n,t){return gt([f(kd(),function(i){hnt(i,n,t)})])}}),ot=wr({fields:[vt("onOpen"),vt("onClose"),u("isPartOf"),u("getAttachPoint"),i("cloakVisibilityAttr","data-precloak-visibility")],name:"sandboxing",active:our,apis:eur,state:Object.freeze({__proto__:null,init:function(){var n=vi(),t=r("not-implemented");return ne({readState:t,isOpen:n.isSet,clear:n.clear,set:n.set,get:n.get})}})}),ea=r("dismiss.popups"),ry=r("reposition.popups"),pot=r("mouse.released"),sur=kf([i("isExtraPart",dt),df("fireEventInstead",[i("event",pv())])]),hur=kf([df("fireEventInstead",[i("event",kbt())]),uf("doReposition")]),cur=Object.freeze({__proto__:null,onLoad:tot,onUnload:lnt,setValue:function(n,t,i,r){t.store.manager.setValue(n,t,i,r)},getValue:function(n,t,i){return t.store.manager.getValue(n,t,i)},getState:function(n,t,i){return i}}),lur=Object.freeze({__proto__:null,events:function(n,t){var i=n.resetOnDom?[li(function(i){tot(i,n,t)}),ws(function(i){lnt(i,n,t)})]:[eet(n,t,tot)];return gt(i)}}),aur=Object.freeze({__proto__:null,memory:ant,dataset:vnt,manual:function(){return ne({readState:c})},init:function(n){return n.store.manager.state(n)}}),vur=[wt("initialValue"),u("getFallbackEntry"),u("getDataKey"),u("setValue"),ui("manager",{setValue:ynt,getValue:function(n,t,i){var r=t.store,u=r.getDataKey(n);return i.lookup(u).getOrThunk(function(){return r.getFallbackEntry(u)})},onLoad:function(n,t,i){t.store.initialValue.each(function(r){ynt(n,t,i,r)})},onUnload:function(n,t,i){i.clear()},state:vnt})],yur=[u("getValue"),i("setValue",c),wt("initialValue"),ui("manager",{setValue:function(n,t,i,r){t.store.setValue(n,r);t.onSetValue(n,r)},getValue:function(n,t){return t.store.getValue(n)},onLoad:function(n,t){t.store.initialValue.each(function(i){t.store.setValue(n,i)})},onUnload:c,state:po.init})],o=wr({fields:[ke("store",{mode:"memory"},fe("mode",{memory:[wt("initialValue"),ui("manager",{setValue:function(n,t,i,r){i.set(r);t.onSetValue(n,r)},getValue:function(n,t,i){return i.get()},onLoad:function(n,t,i){t.store.initialValue.each(function(n){i.isNotSet()&&i.set(n)})},onUnload:function(n,t,i){i.clear()},state:ant})],manual:yur,dataset:vur})),vt("onSetValue"),i("resetOnDom",!1)],name:"representing",active:lur,apis:cur,extra:{setValueFrom:function(n,t){var i=o.getValue(t);o.setValue(n,i)}},state:aur}),uy=vr,fy=br,gti="placeholder",dg=oe([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),nii=function(n,i,u,f){return h=n,c=f,(rot(o=u)&&o.uiType===gti?(e=o,s=c,(l=h).exists(function(n){return n!==e.owner})?dg.single(!0,r(e)):b(s,e.name).fold(function(){throw new Error("Unknown placeholder component: "+e.name+"\nKnown: ["+lr(s)+"]\nNamespace: "+l.getOr("none")+"\nSpec: "+JSON.stringify(e,null,2));},function(n){return n.replace()})):dg.single(!1,r(o))).fold(function(r,e){var o=rot(u)?e(i,u.config,u.validated):e(i),s=bi(b(o,"components").getOr([]),function(t){return nii(n,i,t,f)});return[t(t({},o),{components:s})]},function(n,t){if(rot(u)){var r=t(i,u.config,u.validated);return u.validated.preprocess.getOr(ct)(r)}return t(i)});var h,o,c,l,e,s},tii=dg.single,pur=dg.multiple,iii=r(gti),gg=oe([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),nn=i("factory",{sketch:ct}),wot=i("schema",[]),tn=u("name"),bot=ar("pname","pname",ov(function(n){return"<alloy."+l(n.name)+">"}),vo()),wur=ff("schema",function(){return[wt("preprocess")]}),rn=i("defaults",r({})),un=i("overrides",r({})),bur=w([nn,wot,tn,bot,rn,un]),kur=w([nn,wot,tn,rn,un]),dur=w([nn,wot,tn,bot,rn,un]),gur=w([nn,wur,tn,u("unit"),bot,rn,un]),fu=ag(gg.required,bur),no=ag(gg.external,kur),ns=ag(gg.optional,dur),fn=ag(gg.group,gur),kot=r("entirety"),nfr=Object.freeze({__proto__:null,required:fu,external:no,optional:ns,group:fn,asNamedPart:pnt,name:wnt,asCommon:function(n){return n.fold(ct,ct,ct,ct)},original:kot}),tfr=function(n,t){return{uiType:iii(),owner:n,name:t}},ifr=Object.freeze({__proto__:null,generate:fot,generateOne:eot,schemas:bnt,names:knt,substitutes:oot,components:sot,defaultUids:tti,defaultUidsSchema:cot,getAllParts:gnt,getAllPartNames:nti,getPart:kt,getPartOrDie:ks,getParts:dnt,getPartsOrDie:hot}),rii=function(n){return ni(n,"uid")?n:t(t({},n),{uid:wv("uid")})},rfr=kf([u("name"),u("factory"),u("configFields"),i("apis",{}),i("extraApis",{})]),ufr=kf([u("name"),u("factory"),u("configFields"),u("partFields"),i("apis",{}),i("extraApis",{})]),ffr=Object.freeze({__proto__:null,getCurrent:function(n,t){return t.find(n)}}),ft=wr({fields:[u("find")],name:"composing",apis:ffr}),efr=["input","button","textarea","select"],dot=function(n,t){t.disableClass.each(function(t){pr(n.element,t)});(aot(n,t)?function(n){rt(n.element,"disabled","disabled")}:function(n){rt(n.element,"aria-disabled","true")})(n);t.onDisabled(n)},got=function(n,t){t.disableClass.each(function(t){nr(n.element,t)});(aot(n,t)?function(n){nu(n.element,"disabled")}:function(n){rt(n.element,"aria-disabled","false")})(n);t.onEnabled(n)},ofr=Object.freeze({__proto__:null,enable:got,disable:dot,isDisabled:uti,onLoad:rti,set:function(n,t,i,r){(r?dot:got)(n,t)}}),sfr=Object.freeze({__proto__:null,exhibit:function(n,t){return yo({classes:t.disabled()?t.disableClass.toArray():[]})},events:function(n,t){return gt([abt(gf(),function(t){return uti(t,n)}),eet(n,t,rti)])}}),a=wr({fields:[ei("disabled",dt),i("useNative",!0),wt("disableClass"),vt("onDisabled"),vt("onEnabled")],name:"disabling",active:sfr,apis:ofr}),hfr=Object.freeze({__proto__:null,dehighlightAll:function(n,t){return fti(n,t,0,[])},dehighlight:function(n,t,i,r){vot(0,t,0,r)&&(nr(r.element,t.highlightClass),t.onDehighlight(n,r),at(r,aft()))},highlight:pw,highlightFirst:function(n,t){ati(n,t).each(function(i){pw(n,t,0,i)})},highlightLast:function(n,t){vti(n,t).each(function(i){pw(n,t,0,i)})},highlightAt:function(t,i,r,u){var e,f,o;f=u;o=wu((e=t).element,"."+i.itemClass);n.from(o[f]).fold(function(){return et.error(new Error("No element found with index "+f))},e.getSystem().getByDom).fold(function(n){throw n;},function(n){pw(t,i,0,n)})},highlightBy:function(n,t,i,r){wi(yti(n,t),r).each(function(i){pw(n,t,0,i)})},isHighlighted:vot,getHighlighted:function(n,t){return er(n.element,"."+t.highlightClass).bind(function(t){return n.getSystem().getByDom(t).toOptional()})},getFirst:ati,getLast:vti,getPrevious:function(n,t){return eti(n,t,0,-1)},getNext:function(n,t){return eti(n,t,0,1)},getCandidates:yti}),bt=wr({fields:[u("highlightClass"),u("itemClass"),vt("onHighlight"),vt("onDehighlight")],name:"highlighting",apis:hfr}),cfr=[8],bc=[9],ds=[13],en=[27],yf=[32],on=[37],ww=[38],sn=[39],ey=[40],bw=vp(iy);(yot=pg=pg||{}).OnFocusMode="onFocus";yot.OnEnterOrSpaceMode="onEnterOrSpace";yot.OnApiMode="onApi";var dfr=uii(ff("cyclic",dt)),gfr=uii(ff("cyclic",gi)),ner=oa([i("execute",kw),i("useSpace",!1),i("useEnter",!0),i("useControlEnter",!1),i("useDown",!1)],po.init,function(n,t,i){var r=i.useSpace&&!ty(n.element)?yf:[],u=i.useEnter?ds:[],f=i.useDown?ey:[];return[st(ut(r.concat(u).concat(f)),fii)].concat(i.useControlEnter?[st(go([grr,ut(ds)]),fii)]:[])},function(n,t,i){return i.useSpace&&!ty(n.element)?[st(ut(yf),oy)]:[]},function(){return n.none()}),ter=Object.freeze({__proto__:null,flatgrid:eii,init:function(n){return n.state(n)}}),fui=function(n,t,i,r,u){return r.focusManager.get(t).bind(function(i){return n(t.element,i,r,u)}).map(function(n){return r.focusManager.set(t,n),!0})},eui=ist,oui=ist,wn=ist,sui=hn(function(n,t,i,r){return aii(n,t,i,r,-1)}),hui=hn(function(n,t,i,r){return aii(n,t,i,r,1)}),ier=hn(function(n,t,i,r){return vii(n,t,i,r,-1)}),rer=hn(function(n,t,i,r){return vii(n,t,i,r,1)}),uer=oa([u("selector"),i("execute",kw),af("onEscape"),i("captureTab",!1),fdt()],eii,r([st(ut(on),nst(sui,hui)),st(ut(sn),tst(sui,hui)),st(ut(ww),eui(ier)),st(ut(ey),oui(rer)),st(go([iy,ut(bc)]),yii),st(go([bw,ut(bc)]),yii),st(ut(en),function(n,t,i){return i.onEscape(n,t)}),st(ut(yf.concat(ds)),function(n,t,i){return(r=i).focusManager.get(n).bind(function(n){return wo(n,r.selector)}).bind(function(r){return i.execute(n,t,r)});var r})]),r([st(ut(yf),oy)]),function(){return n.some(lfr)}),fer=[u("selector"),i("getInitial",n.none),i("execute",kw),af("onEscape"),i("executeOnMove",!1),i("allowVertical",!0)],eer=r([st(ut(yf),oy)]),oer=oa(fer,po.init,function(n,t,i){var r=on.concat(i.allowVertical?ww:[]),u=sn.concat(i.allowVertical?ey:[]);return[st(ut(r),bii(nst(pii,wii))),st(ut(u),bii(tst(pii,wii))),st(ut(ds),rst),st(ut(yf),rst),st(ut(en),vfr)]},eer,function(){return n.some(afr)}),ser=[ec("selectors",[u("row"),u("cell")]),i("cycles",!0),i("previousSelector",n.none),i("execute",kw)],cui=an(function(n,t,i){return kii(n,t,i,-1)},function(n,t,i){return gii(n,t,i,-1)}),lui=an(function(n,t,i){return kii(n,t,i,1)},function(n,t,i){return gii(n,t,i,1)}),her=an(function(n,t,i){return dii(n,i,t,-1)},function(n,t,i){return nri(n,i,t,-1)}),cer=an(function(n,t,i){return dii(n,i,t,1)},function(n,t,i){return nri(n,i,t,1)}),ler=r([st(ut(on),nst(cui,lui)),st(ut(sn),tst(cui,lui)),st(ut(ww),eui(her)),st(ut(ey),oui(cer)),st(ut(yf.concat(ds)),function(n,t,i){return bo(n.element).bind(function(r){return i.execute(n,t,r)})})]),aer=r([st(ut(yf),oy)]),ver=oa(ser,po.init,ler,aer,function(){return n.some(yfr)}),yer=[u("selector"),i("execute",kw),i("moveOnTab",!1)],per=r([st(ut(ww),wn(iri)),st(ut(ey),wn(rri)),st(go([iy,ut(bc)]),function(t,i,r,u){return r.moveOnTab?wn(iri)(t,i,r,u):n.none()}),st(go([bw,ut(bc)]),function(t,i,r,u){return r.moveOnTab?wn(rri)(t,i,r,u):n.none()}),st(ut(ds),tri),st(ut(yf),tri)]),wer=r([st(ut(yf),oy)]),ber=oa(yer,po.init,per,wer,function(){return n.some(pfr)}),ker=oa([af("onSpace"),af("onEnter"),af("onShiftEnter"),af("onLeft"),af("onRight"),af("onTab"),af("onShiftTab"),af("onUp"),af("onDown"),af("onEscape"),i("stopSpaceKeyup",!1),wt("focusIn")],po.init,function(n,t,i){return[st(ut(yf),i.onSpace),st(go([bw,ut(ds)]),i.onEnter),st(go([iy,ut(ds)]),i.onShiftEnter),st(go([iy,ut(bc)]),i.onShiftTab),st(go([bw,ut(bc)]),i.onTab),st(ut(ww),i.onUp),st(ut(ey),i.onDown),st(ut(on),i.onLeft),st(ut(sn),i.onRight),st(ut(yf),i.onSpace),st(ut(en),i.onEscape)]},function(n,t,i){return i.stopSpaceKeyup?[st(ut(yf),oy)]:[]},function(n){return n.focusIn}),der=dfr.schema(),ger=gfr.schema(),nor=oer.schema(),tor=uer.schema(),ior=ver.schema(),ror=ner.schema(),uor=ber.schema(),eor=ker.schema(),v=dkt({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:der,cyclic:ger,flow:nor,flatgrid:tor,matrix:ior,execution:ror,menu:uor,special:eor}),name:"keying",active:{events:function(n,t){return n.handler.toEvents(n,t)}},apis:{focusIn:function(n,t,i){t.sendFocusIn(t).fold(function(){n.getSystem().triggerFocus(n.element,n.element)},function(r){r(n,t,i)})},setGridSize:function(n,t,i,r,u){ve(i,"setGridSize")?i.setGridSize(r,u):console.error("Layout does not support setGridSize")}},state:ter}),bn=function(n){return n.components()},nt=wr({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(n,t,i,r){ust(n,0,tf,r)},prepend:function(n,t,i,r){ust(n,0,kgi,r)},remove:uri,replaceAt:fri,replaceBy:function(n,t,i,r,u){return rv(bn(n),r).bind(function(t){return fri(n,0,0,t,u)})},set:function(n,t,i,r){tdt(function(){var t=s(r,n.getSystem().build);rnt(n,t)},n.element)},contents:bn})}),oor=Object.freeze({__proto__:null,focus:eri,blur:function(n,t){t.ignore||n.element.dom.blur()},isFocused:function(n){return ndt(n.element)}}),sor=Object.freeze({__proto__:null,exhibit:function(n,t){return yo(t.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(n){return gt([f(ac(),function(t,i){eri(t,n);i.stop()})].concat(n.stopMousedown?[f(de(),function(n,t){t.event.prevent()})]:[]))}}),g=wr({fields:[vt("onFocus"),i("stopMousedown",!1),i("ignore",!1)],name:"focusing",active:sor,apis:oor}),hor=Object.freeze({__proto__:null,onLoad:ari,toggle:hri,isOn:function(n,t,i){return i.get()},on:cri,off:lri,set:cst}),cor=Object.freeze({__proto__:null,exhibit:function(){return yo({})},events:function(n,t){var i,r,u,f=(i=n,r=t,u=hri,lh(function(n){u(n,i,r)})),e=eet(n,t,ari);return gt(sr([n.toggleOnExecute?[f]:[],[e]]))}}),ht=wr({fields:[i("selected",!1),wt("toggleClass"),i("toggleOnExecute",!0),ke("aria",{mode:"none"},fe("mode",{pressed:[i("syncWithExpanded",!1),ui("update",function(n,t,i){rt(n.element,"aria-pressed",i);t.syncWithExpanded&&rui(n,0,i)})],checked:[ui("update",function(n,t,i){rt(n.element,"aria-checked",i)})],expanded:[ui("update",rui)],selected:[ui("update",function(n,t,i){rt(n.element,"aria-selected",i)})],none:[ui("update",c)]}))],name:"toggling",active:cor,apis:hor,state:{init:function(){var n=p(!1);return{get:function(){return n.get()},set:function(t){return n.set(t)},clear:function(){return n.set(!1)},readState:function(){return n.get()}}}}}),aui="alloy.item-hover",vui="alloy.item-focus",yui=r(aui),lor=r(vui),aor=[u("data"),u("components"),u("dom"),i("hasSubmenu",!1),wt("toggling"),uy("itemBehaviours",[ht,g,v,o]),i("ignoreFocus",!1),i("domModification",{}),ui("builder",function(n){return{dom:n.dom,domModification:t(t({},n.domModification),{attributes:t(t(t({role:n.toggling.isSome()?"menuitemcheckbox":"menuitem"},n.domModification.attributes),{"aria-haspopup":n.hasSubmenu}),n.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:fy(n.itemBehaviours,[n.toggling.fold(ht.revoke,function(n){return ht.config(t({aria:{mode:"checked"}},n))}),g.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:function(n){pri(n)}}),v.config({mode:"execution"}),o.config({store:{mode:"memory",initialValue:n.data}}),it("item-type-events",pt(pt([],vri(),!0),[f(cc(),yri),f(hw(),g.focus)],!1))]),components:n.components,eventOrder:n.eventOrder}}),i("eventOrder",{})],vor=[u("dom"),u("components"),ui("builder",function(n){return{dom:n.dom,components:n.components,events:gt([f(hw(),function(n,t){t.stop()})])}})],lst=r("item-widget"),ast=r([fu({name:"widget",overrides:function(n){return{behaviours:e([o.config({store:{mode:"manual",getValue:function(){return n.data},setValue:c}})])}}})]),yor=fe("type",{widget:[u("uid"),u("data"),u("components"),u("dom"),i("autofocus",!1),i("ignoreFocus",!1),uy("widgetBehaviours",[o,g,v]),i("domModification",{}),cot(ast()),ui("builder",function(t){function i(n){return kt(n,t,"widget").map(function(n){return v.focusIn(n),n})}function r(i,r){return ty(r.event.target)||t.autofocus&&r.setSource(i.element),n.none()}var u=oot(lst(),t,ast()),e=sot(lst(),t,u.internals());return{dom:t.dom,components:e,domModification:t.domModification,events:gt([lh(function(n,t){i(n).each(function(){t.stop()})}),f(cc(),yri),f(hw(),function(n){t.autofocus?i(n):g.focus(n)})]),behaviours:fy(t.widgetBehaviours,[o.config({store:{mode:"memory",initialValue:t.data}}),g.config({ignore:t.ignoreFocus,onFocus:function(n){pri(n)}}),v.config({mode:"special",focusIn:t.autofocus?function(n){i(n)}:vir(),onLeft:r,onRight:r,onEscape:function(i,r){return g.isFocused(i)||t.autofocus?(t.autofocus&&r.setSource(i.element),n.none()):(g.focus(i),n.some(!0))}})])}})],item:aor,separator:vor}),por=r([fn({factory:{sketch:function(n){var t=rf("menu.spec item",yor,n);return t.builder(t)}},name:"items",unit:"item",defaults:function(n,i){return ni(i,"uid")?i:t(t({},i),{uid:wv("item")})},overrides:function(n,t){return{type:t.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}}}})]),wor=r([u("value"),u("items"),u("dom"),u("components"),i("eventOrder",{}),vr("menuBehaviours",[bt,o,ft,v]),ke("movement",{mode:"menu",moveOnTab:!0},fe("mode",{grid:[fdt(),ui("config",function(n,t){return{mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:n.focusManager}})],matrix:[ui("config",function(n,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+n.markers.item},focusManager:n.focusManager}}),u("rowSelector")],menu:[i("moveOnTab",!0),ui("config",function(n,t){return{mode:"menu",selector:"."+n.markers.item,moveOnTab:t.moveOnTab,focusManager:n.focusManager}})]})),lf("markers",sir()),i("fakeFocus",!1),i("focusManager",vg()),vt("onHighlight")]),pui=r("alloy.menu-focus"),kc=bu({name:"Menu",configFields:wor(),partFields:por(),factory:function(t,i){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:br(t.menuBehaviours,[bt.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),o.config({store:{mode:"memory",initialValue:t.value}}),ft.config({find:n.some}),v.config(t.movement.config(t,t.movement))]),events:gt([f(lor(),function(n,t){var i=t.event;n.getSystem().getByDom(i.target).each(function(i){bt.highlight(n,i);t.stop();y(n,pui(),{menu:n,item:i})})}),f(yui(),function(n,t){var i=t.event.item;bt.highlight(n,i)})]),components:i,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),wui=function(t,i,r,u){return b(r,u).bind(function(u){return b(t,u).bind(function(u){var f=wui(t,i,r,u);return n.some([u].concat(f))})}).getOr([])},bor=function(){function e(n){return h(n).bind(uui)}function o(n){return b(u.get(),n)}var u=p({}),i=p({}),r=p({}),f=vi(),s=p({}),h=function(n){return b(i.get(),n)};return{setMenuBuilt:function(n,r){var u;i.set(t(t({},i.get()),((u={})[n]={type:"prepared",menu:r},u)))},setContents:function(n,t,e,o){f.set(n);u.set(e);i.set(t);s.set(o);var h=function(n,t){var i={};su(n,function(n,t){k(n,function(n){i[n]=t})});var u=t,r=ipt(t,function(n,t){return{k:n,v:t}}),f=hr(r,function(n,t){return[t].concat(wui(i,u,r,t))});return hr(i,function(n){return b(f,n).getOr([n])})}(o,e);r.set(h)},expand:function(n){return b(u.get(),n).map(function(t){var i=b(r.get(),n).getOr([]);return[t].concat(i)})},refresh:function(n){return b(r.get(),n)},collapse:function(t){return b(r.get(),t).bind(function(t){return 1<t.length?n.some(t.slice(1)):n.none()})},lookupMenu:h,lookupItem:o,otherMenus:function(n){var t=s.get();return vrt(lr(t),n)},getPrimary:function(){return f.get().bind(e)},getMenus:function(){return i.get()},clear:function(){u.set({});i.set({});r.set({});f.clear()},isClear:function(){return f.get().isNone()},getTriggeringPath:function(t,i){var s=fi(o(t).toArray(),function(n){return e(n).isSome()});return b(r.get(),t).bind(function(t){var r=yp(s.concat(t));return function(t){for(var u,r=[],i=0;i<t.length;i++){if(u=t[i],!u.isSome())return n.none();r.push(u.getOrDie())}return n.some(r)}(bi(r,function(t,o){return s=t,h=i,c=r.slice(0,o+1),e(s).bind(function(n){return t=s,prt(u.get(),function(n){return n===t}).bind(function(t){return h(t).map(function(t){return{triggeredMenu:n,triggeringItem:t,triggeringPath:c}})});var t}).fold(function(){return ss(f.get(),t)?[]:[n.none()]},function(t){return[n.some(t)]});var s,h,c}))})}}},kor=uui,dor=r("collapse-item"),sa=le({name:"TieredMenu",configFields:[gft("onExecute"),gft("onEscape"),ra("onOpenMenu"),ra("onOpenSubmenu"),vt("onRepositionMenu"),vt("onCollapseMenu"),i("highlightImmediately",!0),ec("data",[u("primary"),u("menus"),u("expansions")]),i("fakeFocus",!1),vt("onHighlight"),vt("onHover"),tg(),u("dom"),i("navigateOnHover",!0),i("stayInDom",!1),vr("tmenuBehaviours",[v,bt,ft,nt]),i("eventOrder",{})],apis:{collapseMenu:function(n,t){n.collapseMenu(t)},highlightPrimary:function(n,t){n.highlightPrimary(t)},repositionMenus:function(n,t){n.repositionMenus(t)}},factory:function(i){function st(n){var u,f,e=(u=n,f=i.data.primary,hr(i.data.menus,function(n,r){function e(){return kc.sketch(t(t({},n),{value:r,markers:i.markers,fakeFocus:i.fakeFocus,onHighlight:i.onHighlight,focusManager:(i.fakeFocus?sti:vg)()}))}return r===f?{type:"prepared",menu:u.getSystem().build(e())}:{type:"notbuilt",nbMenu:e}})),o=hr(i.data.menus,function(n){return bi(n.items,function(n){return"separator"===n.type?[]:[n.data.value]})});return r.setContents(i.data.primary,e,i.data.expansions,o),r.getPrimary()}function u(n){return o.getValue(n).value}function y(n,t){bt.highlight(n,t);bt.getHighlighted(t).orThunk(function(){return bt.getFirst(t)}).each(function(t){dut(n,t.element,hw())})}function g(t,i){return sl(s(i,function(i){return t.lookupMenu(i).bind(function(t){return"prepared"===t.type?n.some(t.menu):n.none()})}))}function tt(n,t,r){var u=g(t,t.otherMenus(r));k(u,function(t){ys(t.element,[i.markers.backgroundMenu]);i.stayInDom||nt.remove(n,t)})}function p(n,t){var r;su((r=n,it.get().getOrThunk(function(){var n={},t=fi(wu(r.element,"."+i.markers.item),function(n){return"true"===hu(n,"aria-haspopup")});return k(t,function(t){r.getSystem().getByDom(t).each(function(t){var i=u(t);n[i]=t})}),it.set(n),n})),function(n,i){var r=cr(t,i);rt(n.element,"aria-expanded",r)})}function w(t,r,u){return n.from(u[0]).bind(function(f){return r.lookupMenu(f).bind(function(f){if("notbuilt"===f.type)return n.none();var e=f.menu,o=g(r,u.slice(1));return k(o,function(n){pr(n.element,i.markers.backgroundMenu)}),lo(e.element)||nt.append(t,he(e)),ys(e.element,[i.markers.backgroundMenu]),y(t,e),tt(t,r,u),n.some(e)})})}function b(t,f,o){if(void 0===o&&(o=e.HighlightSubmenu),f.hasConfigured(a)&&a.isDisabled(f))return n.some(f);var s=u(f);return r.expand(s).bind(function(u){return p(t,u),n.from(u[0]).bind(function(s){return r.lookupMenu(s).bind(function(h){var c=function(n,t,i){if("notbuilt"!==i.type)return i.menu;var u=n.getSystem().build(i.nbMenu());return r.setMenuBuilt(t,u),u}(t,s,h);return lo(c.element)||nt.append(t,he(c)),i.onOpenSubmenu(t,f,c,yp(u)),o===e.HighlightSubmenu?(bt.highlightFirst(c),w(t,r,u)):(bt.dehighlightAll(c),n.some(f))})})})}function l(n,t){var f=u(t);return r.collapse(f).bind(function(u){return p(n,u),w(n,r,u).map(function(r){return i.onCollapseMenu(n,t,r),r})})}function d(n){return function(t,r){return wo(r.getSource(),"."+i.markers.item).bind(function(i){return t.getSystem().getByDom(i).toOptional().bind(function(i){return n(t,i).map(gi)})})}}function ut(n){return bt.getHighlighted(n).bind(bt.getHighlighted)}var e,h,it=vi(),r=bor(),et,ot;return(h=e={})[h.HighlightSubmenu=0]="HighlightSubmenu",h[h.HighlightParent=1]="HighlightParent",et=gt([f(pui(),function(n,t){var i=t.event.item;r.lookupItem(u(i)).each(function(){var f=t.event.menu,i;bt.highlight(n,f);i=u(t.event.item);r.refresh(i).each(function(t){return tt(n,r,t)})})}),lh(function(n,t){var r=t.event.target;n.getSystem().getByDom(r).each(function(t){0===u(t).indexOf("collapse-item")&&l(n,t);b(n,t,e.HighlightSubmenu).fold(function(){i.onExecute(n,t)},c)})}),li(function(n){st(n).each(function(t){nt.append(n,he(t));i.onOpenMenu(n,t);i.highlightImmediately&&y(n,t)})})].concat(i.navigateOnHover?[f(yui(),function(n,t){var f=t.event.item,o=n,s=u(f);r.refresh(s).bind(function(n){return p(o,n),w(o,r,n)});b(n,f,e.HighlightParent);i.onHover(n,f)})]:[])),ot={collapseMenu:function(n){ut(n).each(function(t){l(n,t)})},highlightPrimary:function(n){r.getPrimary().each(function(t){y(n,t)})},repositionMenus:function(t){r.getPrimary().bind(function(i){return ut(t).bind(function(t){var i=u(t),f=sl(s(ck(r.getMenus()),kor));return r.getTriggeringPath(i,function(t){return i=t,oo(f,function(t){return t.getSystem().isConnected()?wi(bt.getCandidates(t),function(n){return u(n)===i}):n.none()});var i})}).map(function(n){return{primary:i,triggeringPath:n}})}).fold(function(){n.from(t.components()[0]).filter(function(n){return"menu"===hu(n.element,"role")}).each(function(n){i.onRepositionMenu(t,n,[])})},function(n){var r=n.primary,u=n.triggeringPath;i.onRepositionMenu(t,r,u)})}},{uid:i.uid,dom:i.dom,markers:i.markers,behaviours:br(i.tmenuBehaviours,[v.config({mode:"special",onRight:d(function(t,i){return ty(i.element)?n.none():b(t,i,e.HighlightSubmenu)}),onLeft:d(function(t,i){return ty(i.element)?n.none():l(t,i)}),onEscape:d(function(n,t){return l(n,t).orThunk(function(){return i.onEscape(n,t).map(function(){return n})})}),focusIn:function(n){r.getPrimary().each(function(t){dut(n,t.element,hw())})}}),bt.config({highlightClass:i.markers.selectedMenu,itemClass:i.markers.menu}),ft.config({find:function(n){return bt.getHighlighted(n)}}),nt.config({})]),eventOrder:i.eventOrder,apis:ot,events:et}},extraApis:{tieredData:function(n,t,i){return{primary:n,menus:t,expansions:i}},singleData:function(n,t){return{primary:n,menus:hh(n,t),expansions:{}}},collapseItem:function(n){return{value:l(dor()),meta:{text:n}}}}}),oi=le({name:"InlineView",configFields:[u("lazySink"),vt("onShow"),vt("onHide"),tw("onEscape"),vr("inlineBehaviours",[ot,o,ge]),df("fireDismissalEventInstead",[i("event",pv())]),df("fireRepositionEventInstead",[i("event",kbt())]),i("getRelated",n.none),i("isExtraPart",dt),i("eventOrder",n.none)],factory:function(i,r){function u(n){ot.isOpen(n)&&o.getValue(n).each(function(t){switch(t.mode){case"menu":ot.getState(n).each(sa.repositionMenus);break;case"position":var r=i.lazySink(n).getOrDie();ku.positionWithinBounds(r,n,t.config,t.getBounds())}})}function f(n,t,i,r){s(n,t,i,function(){return r.map(function(n){return cf(n)})})}function e(r,u,f,e){function a(){return h.lazySink(s)}function p(n){return 2===n.length?v:{}}var h,s,c,l,v,y=(h=i,s=r,c=u,l=e,v="horizontal"===f.type?{layouts:{onLtr:uet,onRtl:fet}}:{},sa.sketch({dom:{tag:"div"},data:f.data,markers:f.menu.markers,highlightImmediately:f.menu.highlightImmediately,onEscape:function(){return ot.close(s),h.onEscape.map(function(n){return n(s)}),n.some(!0)},onExecute:function(){return n.some(!0)},onOpenMenu:function(n,t){ku.positionWithinBounds(a().getOrDie(),t,c,l())},onOpenSubmenu:function(n,i,r,u){var f=a().getOrDie();ku.position(f,r,{anchor:t({type:"submenu",item:i},p(u))})},onRepositionMenu:function(n,i,r){var u=a().getOrDie();ku.positionWithinBounds(u,i,c,l());k(r,function(n){var i=p(n.triggeringPath);ku.position(u,n.triggeredMenu,{anchor:t({type:"submenu",item:n.triggeringItem},i)})})}}));ot.open(r,y);o.setValue(r,n.some({mode:"menu",menu:y}))}var s=function(t,r,u,f){var e=i.lazySink(t).getOrDie();ot.openWhileCloaked(t,r,function(){return ku.positionWithinBounds(e,t,u,f())});o.setValue(t,n.some({mode:"position",config:u,getBounds:f}))},h={setContent:function(n,t){ot.setContent(n,t)},showAt:function(t,i,r){f(t,i,r,n.none())},showWithin:f,showWithinBounds:s,showMenuAt:function(t,i,r){e(t,i,r,n.none)},showMenuWithinBounds:e,hide:function(t){ot.isOpen(t)&&(o.setValue(t,n.none()),ot.close(t))},getContent:function(n){return ot.getState(n)},reposition:u,isOpen:ot.isOpen};return{uid:i.uid,dom:i.dom,behaviours:br(i.inlineBehaviours,[ot.config({isPartOf:function(n,t,r){return vc(t,r)||(u=r,i.getRelated(n).exists(function(n){return vc(n,u)}));var u},getAttachPoint:function(n){return i.lazySink(n).getOrDie()},onOpen:function(n){i.onShow(n)},onClose:function(n){i.onHide(n)}}),o.config({store:{mode:"memory",initialValue:n.none()}}),ge.config({channels:t(t({},get(t({isExtraPart:r.isExtraPart},i.fireDismissalEventInstead.map(function(n){return{fireEventInstead:{event:n.event}}}).getOr({})))),not(t(t({},i.fireRepositionEventInstead.map(function(n){return{fireEventInstead:{event:n.event}}}).getOr({})),{doReposition:u})))})]),eventOrder:i.eventOrder,apis:h}},apis:{showAt:function(n,t,i,r){n.showAt(t,i,r)},showWithin:function(n,t,i,r,u){n.showWithin(t,i,r,u)},showWithinBounds:function(n,t,i,r,u){n.showWithinBounds(t,i,r,u)},showMenuAt:function(n,t,i,r){n.showMenuAt(t,i,r)},showMenuWithinBounds:function(n,t,i,r,u){n.showMenuWithinBounds(t,i,r,u)},hide:function(n,t){n.hide(t)},isOpen:function(n,t){return n.isOpen(t)},getContent:function(n,t){return n.getContent(t)},setContent:function(n,t,i){n.setContent(t,i)},reposition:function(n,t){n.reposition(t)}}}),dc="layout-inset",is=function(n,t,i){return dr(wri(n,t),n.y,i.insetNorth(),edt(),"north",gr(n,{top:2}),dc)},sy=function(n,t,i){return dr(wri(n,t),est(n,t),i.insetSouth(),odt(),"south",gr(n,{bottom:3}),dc)},yh=tinymce.util.Tools.resolve("tinymce.util.Delay"),du=le({name:"Button",factory:function(n){function i(t){return b(n.dom,"attributes").bind(function(n){return b(n,t)})}var r=vn(n.action),u=n.dom.tag;return{uid:n.uid,dom:n.dom,components:n.components,events:r,behaviours:fy(n.buttonBehaviours,[g.config({}),v.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==u)return{role:i("role").getOr("button")};var n=i("type").getOr("button"),r=i("role").map(function(n){return{role:n}}).getOr({});return t({type:n},r)}()},eventOrder:n.eventOrder}},configFields:[i("uid",void 0),u("dom"),i("components",[]),uy("buttonBehaviours",[g,v]),wt("action"),wt("role"),i("eventOrder",{})]}),rs=tinymce.util.Tools.resolve("tinymce.util.I18n"),gor={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},bui="temporary-placeholder",nsr={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},vst=le({name:"Notification",factory:function(t){function r(n){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+n+"%"}}}}function u(n){return{dom:{tag:"div",classes:["tox-text"],innerHtml:n+"%"}}}var o,s,h,i,c=yt({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:e([nt.config({})])}),l=yt({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(0)]},u(0)],behaviours:e([nt.config({})])}),v={updateProgress:function(n,t){n.getSystem().isConnected()&&l.getOpt(n).each(function(n){nt.set(n,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[r(t)]},u(t)])})},updateText:function(n,t){var i;n.getSystem().isConnected()&&(i=c.get(n),nt.set(i,[dl(t)]))}},y=sr([t.icon.toArray(),t.level.toArray(),t.level.bind(function(t){return n.from(nsr[t])}).toArray()]),a=yt(du.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[ts("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:function(n){t.onAction(n)}})),p=[(o=y,s={tag:"div",classes:["tox-notification__icon"]},h=t.iconProvider,i=h(),iui(s,wi(o,function(n){return ni(i,sst(n,i))}).getOr(bui),i,n.none())),{dom:{tag:"div",classes:["tox-notification__body"]},components:[c.asSpec()],behaviours:e([nt.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(function(n){return["tox-notification","tox-notification--in","tox-notification--"+n]}).getOr(["tox-notification","tox-notification--in"])},behaviours:e([g.config({}),it("notification-events",[f(lc(),function(n){a.getOpt(n).each(g.focus)})])]),components:p.concat(t.progress?[l.asSpec()]:[]).concat(t.closeButton?[a.asSpec()]:[]),apis:v}},configFields:[wt("level"),u("progress"),u("icon"),u("onAction"),u("text"),u("iconProvider"),u("translationProvider"),ur("closeButton",!0)],apis:{updateProgress:function(n,t,i){n.updateProgress(t,i)},updateText:function(n,t,i){n.updateText(t,i)}}});var rfi,kn,isr=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),dn=function(n){return wo(n,"[data-mce-autocompleter]")},nb=tinymce.util.Tools.resolve("tinymce.util.Promise"),ufi=function(n){if(3===n.nodeType)return bst(n,n.data.length);var t=n.childNodes;return 0<t.length?ufi(t[t.length-1]):bst(n,t.length)},ffi=function(n,t){var i=n.childNodes;return 0<i.length&&t<i.length?ffi(i[t],0):0<i.length&&1===n.nodeType&&i.length===t?ufi(i[i.length-1]):bst(n,t)},efi=w([d("type"),ii("text")]),rsr=w([i("type","autocompleteitem"),i("active",!1),i("disabled",!1),i("meta",{}),d("value"),ii("text"),ii("icon")]),usr=w([d("type"),d("ch"),vut("minChars",1),i("columns",1),vut("maxResults",10),tw("matches"),uf("fetch"),uf("onAction"),hd("highlightOn",[],fr)]),tb=[ur("disabled",!1),ii("tooltip"),ii("icon"),ii("text"),ei("onSetup",function(){return c})],fsr=w([d("type"),uf("onAction")].concat(tb)),kst=[ur("active",!1)].concat(tb),esr=w(kst.concat([d("type"),uf("onAction")])),ofi=[ei("predicate",dt),sc("scope","node",["node","editor"]),sc("position","selection",["node","selection","line"])],osr=tb.concat([i("type","contextformbutton"),i("primary",!1),uf("onAction"),ff("original",ct)]),ssr=kst.concat([i("type","contextformbutton"),i("primary",!1),uf("onAction"),ff("original",ct)]),hsr=tb.concat([i("type","contextformbutton")]),csr=kst.concat([i("type","contextformtogglebutton")]),lsr=fe("type",{contextformbutton:osr,contextformtogglebutton:ssr}),asr=w([i("type","contextform"),ei("initValue",r("")),ii("label"),ee("commands",lsr),oc("launch",fe("type",{contextformbutton:hsr,contextformtogglebutton:csr}))].concat(ofi)),vsr=w([i("type","contexttoolbar"),d("items")].concat(ofi));(kn=rfi={})[kn.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE";kn[kn.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var te,ttt,ha,eht,us=rfi,oht="tox-menu-nav__js",sht="tox-collection__item",psr={normal:oht,color:"tox-swatch"},bfi="tox-collection__item--enabled",kfi="tox-collection__item-icon",hht="tox-collection__item-label",dfi="tox-collection__item-caret",ib="tox-collection__item--active",gfi="tox-collection__item-container",nei="tox-collection__item-container--row",wsr=[kc.parts.items({})],bsr=[d("type"),d("src"),ii("alt"),hd("classes",[],fr)],ksr=w(bsr),dsr=[d("type"),d("text"),ii("name"),hd("classes",["tox-collection__item-label"],fr)],gsr=w(dsr),tei=dwt(function(){return od("type",{cardimage:ksr,cardtext:gsr,cardcontainer:nhr})}),nhr=w([d("type"),hv("direction","horizontal"),hv("align","left"),hv("valign","middle"),ee("items",tei)]),cy=[ur("disabled",!1),ii("text"),ii("shortcut"),ar("value","value",ov(function(){return l("menuitem-value")}),vo()),i("meta",{})],thr=w([d("type"),ii("label"),ee("items",tei),ei("onSetup",function(){return c}),ei("onAction",c)].concat(cy)),ihr=w([d("type"),ur("active",!1),ii("icon")].concat(cy)),iei=[d("type"),d("fancytype"),ei("onAction",c)],rhr=fe("fancytype",{inserttable:[i("initData",{})].concat(iei),colorswatch:[yut("initData",{},[ur("allowCustomColors",!0),ubt("colors",vo())])].concat(iei)}),uhr=w([d("type"),ei("onSetup",function(){return c}),ei("onAction",c),ii("icon")].concat(cy)),fhr=w([d("type"),uf("getSubmenuItems"),ei("onSetup",function(){return c}),ii("icon")].concat(cy)),ehr=w([d("type"),ii("icon"),ur("active",!1),ei("onSetup",function(){return c}),uf("onAction")].concat(cy)),itt=function(n){return t=l("unnamed-events"),e([it(t,n)]);var t},rei=l("tooltip.exclusive"),rb=l("tooltip.show"),ub=l("tooltip.hide"),ohr=Object.freeze({__proto__:null,hideAllExclusive:cfi,setComponents:function(n,t,i,r){i.getTooltip().each(function(n){n.getSystem().isConnected()&&nt.set(n,r)})}}),shr=Object.freeze({__proto__:null,events:function(n,t){function i(i){t.getTooltip().each(function(r){fa(r);n.onHide(i,r);t.clearTooltip()});t.clearTimer()}return gt(sr([[f(rb,function(i){t.resetTimer(function(){var o,u,r=i;t.isShowing()||(cfi(r),o=n.lazySink(r).getOrDie(),u=r.getSystem().build({dom:n.tooltipDom,components:n.tooltipComponents,events:gt("normal"===n.mode?[f(cc(),function(){at(r,rb)}),f(fft(),function(){at(r,ub)})]:[]),behaviours:e([nt.config({})])}),t.setTooltip(u),ua(o,u),n.onShow(r,u),ku.position(o,u,{anchor:n.anchor(r)}))},n.delay)}),f(ub,function(r){t.resetTimer(function(){i(r)},n.delay)}),f(gl(),function(n,t){t.universal||cr(t.channels,rei)&&i(n)}),ws(function(n){i(n)})],"normal"===n.mode?[f(lc(),function(n){at(n,rb)}),f(oft(),function(n){at(n,ub)}),f(cc(),function(n){at(n,rb)}),f(fft(),function(n){at(n,ub)})]:[f(tkt(),function(n){at(n,rb)}),f(aft(),function(n){at(n,ub)})]]))}}),uei=wr({fields:[u("lazySink"),u("tooltipDom"),i("exclusive",!0),i("tooltipComponents",[]),i("delay",300),sc("mode","normal",["normal","follow-highlight"]),i("anchor",function(n){return{type:"hotspot",hotspot:n,layouts:{onLtr:r([uu,vf,iu,ef,ru,of]),onRtl:r([uu,vf,iu,ef,ru,of])}}}),vt("onHide"),vt("onShow")],name:"tooltipping",active:shr,state:Object.freeze({__proto__:null,init:function(){function t(){i.on(clearTimeout)}var i=vi(),n=vi(),u=r("not-implemented");return ne({getTooltip:n.get,isShowing:n.isSet,setTooltip:n.set,clearTooltip:n.clear,clearTimer:t,resetTimer:function(n,r){t();i.set(setTimeout(n,r))},readState:u})}}),apis:ohr}),fb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),hhr=tinymce.util.Tools.resolve("tinymce.EditorManager"),rtt=function(n){return wfi(n).fold(function(){return 0<n.getParam("toolbar",[],"string[]").length},gi)};(ttt=te=te||{}).default="wrap";ttt.floating="floating";ttt.sliding="sliding";ttt.scrolling="scrolling";(eht=ha=ha||{}).auto="auto";eht.top="top";eht.bottom="bottom";var uoi,pht="silver.readonly",vhr=w([lf("readonly",cd)]),yy=function(n){return a.config({disabled:n})},wht=function(n){return a.config({disabled:n,disableClass:"tox-tbtn--disabled",useNative:!1})},yhr=((uoi={})[gf()]=["disabling","alloy.base.behaviour","toggling","item-events"],uoi),py=sl,bht=tinymce.util.Tools.resolve("tinymce.Env"),foi=function(t,i){return s(t,function(t){var u,f,r,e,o,s;switch(t.type){case"cardcontainer":return e=foi((r=t).items,i),o="vertical"===r.direction?"tox-collection__item-container--column":nei,s="left"===r.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",{dom:{tag:"div",classes:[gfi,o,s,function(){switch(r.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:e};case"cardimage":return f=t.src,{dom:{tag:"img",classes:t.classes,attributes:{src:f,alt:t.alt.getOr("")}}};case"cardtext":return u=t.name.exists(function(n){return cr(i.cardText.highlightOn,n)})?n.from(i.cardText.matchText).getOr(""):"",aei(wei(t.text,u),t.classes)}})},eoi=fot(lst(),ast()),ooi=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,soi=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,hoi=Math.min,coi=Math.max,ott=Math.round,phr=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,whr=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,loi=gc(255,0,0,1),stt=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),aoi="tinymce-custom-colors";var ctt,ltt,or="choiceitem",bhr=[{type:or,text:"Light Green",value:"#BFEDD2"},{type:or,text:"Light Yellow",value:"#FBEEB8"},{type:or,text:"Light Red",value:"#F8CAC6"},{type:or,text:"Light Purple",value:"#ECCAFA"},{type:or,text:"Light Blue",value:"#C2E0F4"},{type:or,text:"Green",value:"#2DC26B"},{type:or,text:"Yellow",value:"#F1C40F"},{type:or,text:"Red",value:"#E03E2D"},{type:or,text:"Purple",value:"#B96AD9"},{type:or,text:"Blue",value:"#3598DB"},{type:or,text:"Dark Turquoise",value:"#169179"},{type:or,text:"Orange",value:"#E67E23"},{type:or,text:"Dark Red",value:"#BA372A"},{type:or,text:"Dark Purple",value:"#843FA1"},{type:or,text:"Dark Blue",value:"#236FA1"},{type:or,text:"Light Gray",value:"#ECF0F1"},{type:or,text:"Medium Gray",value:"#CED4D9"},{type:or,text:"Gray",value:"#95A5A6"},{type:or,text:"Dark Gray",value:"#7E8C8D"},{type:or,text:"Navy Blue",value:"#34495E"},{type:or,text:"Black",value:"#000000"},{type:or,text:"White",value:"#ffffff"}],isi=function(t){function f(n){i.splice(n,1)}void 0===t&&(t=10);var r,u=stt.getItem(aoi),e=pi(u)?JSON.parse(u):[],i=t-(r=e).length<0?r.slice(0,t):r;return{add:function(r){var u;(-1===(u=yyt(i,r))?n.none():n.some(u)).each(f);i.unshift(r);i.length>t&&i.pop();stt.setItem(aoi,JSON.stringify(i))},state:function(){return i.slice(0)}}}(10),nct="#000000",rsi=function(t){return function(i,r){var u=!1;t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:r},onAction:function(n,t){"hex-valid"===t.name&&(u=t.value)},onSubmit:function(r){var f=r.getData().colorpicker;u?(i(n.from(f)),r.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",f]))},onClose:c,onCancel:function(){i(n.none())}})}},khr=function(t,i,r,u,f,e,o){return sl(s(t,function(s){return"choiceitem"===s.type?si("choicemenuitem",ihr,s).fold(ph,function(h){return n.some(function(t,i,r,u,f,e,o,s){void 0===s&&(s=!0);var h=hb({presets:r,textContent:i?t.text:n.none(),htmlContent:n.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:i?t.shortcut:n.none(),checkMark:i?n.some(vei(o.icons)):n.none(),caret:n.none(),value:t.value},o,s);return ri(ay({data:vy(t),disabled:t.disabled,getApi:function(n){return{setActive:function(t){ht.set(n,t)},isActive:function(){return ht.isOn(n)},isDisabled:function(){return a.isDisabled(n)},setDisabled:function(t){return a.set(n,t)}}},onAction:function(){return u(t.value)},onSetup:function(n){return n.setActive(f),c},triggersSubmenu:!1,itemBehaviours:[]},h,e,o),{toggling:{toggleClass:bfi,toggleOnExecute:!1,selected:t.active}})}(h,1===r,u,i,e(s.value),f,o,ntt(t)))}):n.none()}))},usi=l("cell-over"),fsi=l("cell-execute"),dhr={inserttable:function(n){var i=l("size-label"),r=function(n){for(var u,i,r=[],t=0;t<10;t++){for(u=[],i=0;i<10;i++)u.push(function(n,t,i){function r(i){return y(i,fsi,{row:n,col:t})}function u(n,t){t.stop();r(n)}var o;return pu({dom:{tag:"div",attributes:((o={role:"button"})["aria-labelledby"]=i,o)},behaviours:e([it("insert-table-picker-cell",[f(cc(),g.focus),f(gf(),r),f(ow(),u),f(cw(),u)]),ht.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),g.config({onFocus:function(i){return y(i,usi,{row:n,col:t})}})])})}(t,i,n));r.push(u)}return r}(i),u=tsi(0,0),t=yt({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:i}},components:[u],behaviours:e([nt.config({})])});return{type:"widget",data:{value:l("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[eoi.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:bi(r,function(n){return s(n,he)}).concat(t.asSpec()),behaviours:e([it("insert-table-picker",[li(function(n){nt.set(t.get(n),[u])}),nft(usi,function(n,i,u){var f=u.event,e=f.row,o=f.col;!function(n,t,i){for(var u,r=0;r<10;r++)for(u=0;u<10;u++)ht.set(n[r][u],r<=t&&u<=i)}(r,e,o);nt.set(t.get(n),[tsi(e+1,o+1)])}),nft(fsi,function(t,i,r){var u=r.event,f=u.row,e=u.col;n.onAction({numRows:f+1,numColumns:e+1});at(t,kd())})]),v.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(n,i){var f,r,u,o=(r=i,u=(f=n).initData.allowCustomColors&&r.colorinput.hasCustomColors(),f.initData.colors.fold(function(){return boi(r.colorinput.getColors(),u)},function(n){return n.concat(woi(u))})),e=i.colorinput.getColorCols(),s=ght(l("menu-value"),o,function(t){n.onAction({value:t})},e,"color",us.CLOSE_ON_EXECUTE,dt,i.shared.providers),h=t(t({},s),{markers:hy("color"),movement:htt(e,"color")});return{type:"widget",data:{value:l("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[eoi.widget(kc.sketch(h))]}}},esi=function(n){var i=n.text.fold(function(){return{}},function(n){return{innerHtml:n}});return{type:"separator",dom:t({tag:"div",classes:[sht,"tox-collection__group-heading"]},i),components:[]}},ghr=function(t,i,r,u){void 0===u&&(u=!0);var f=hb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:n.none(),ariaLabel:t.text,caret:n.none(),checkMark:n.none(),shortcutContent:t.shortcut},r,u);return ay({data:vy(t),getApi:function(n){return{isDisabled:function(){return a.isDisabled(n)},setDisabled:function(t){return a.set(n,t)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},f,i,r)},ncr=function(t,i,r,u,f){void 0===u&&(u=!0);var e=(f=void 0!==f&&f)?cht("chevron-down",r.icons,[dfi]):cht("chevron-right",r.icons,[dfi]),o=hb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:n.none(),ariaLabel:t.text,caret:n.some(e),checkMark:n.none(),shortcutContent:t.shortcut},r,u);return ay({data:vy(t),getApi:function(n){return{isDisabled:function(){return a.isDisabled(n)},setDisabled:function(t){return a.set(n,t)}}},disabled:t.disabled,onAction:c,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},o,i,r)},tcr=function(t,i,r,u){void 0===u&&(u=!0);var f=hb({iconContent:t.icon,textContent:t.text,htmlContent:n.none(),ariaLabel:t.text,checkMark:n.some(vei(r.icons)),caret:n.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},r,u);return ri(ay({data:vy(t),disabled:t.disabled,getApi:function(n){return{setActive:function(t){ht.set(n,t)},isActive:function(){return ht.isOn(n)},isDisabled:function(){return a.isDisabled(n)},setDisabled:function(t){return a.set(n,t)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},f,i,r),{toggling:{toggleClass:bfi,toggleOnExecute:!1,selected:t.active}})},icr=function(n,t){return b(dhr,n.fancytype).map(function(i){return i(n,t)})};(ltt=ctt={})[ltt.ContentFocus=0]="ContentFocus";ltt[ltt.UiFocus=1]="UiFocus";var pb=oe([{stopped:[]},{resume:["element"]},{complete:[]}]),bsi=function(n,t,i,r,u,f){return vsi(n,t,i,r,u,f).fold(gi,function(r){return bsi(n,t,i,r,u,f)},dt)},ksi=function(n,t,i,r,u){var f=asi(i,r);return bsi(n,t,i,r,f,u)},eu=le({name:"Container",factory:function(n){var i=n.dom,r=i.attributes,u=ok(i,["attributes"]);return{uid:n.uid,dom:t({tag:"div",attributes:t({role:"presentation"},r)},u),components:n.components,behaviours:iot(n.containerBehaviours),events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},configFields:[i("components",[]),vr("containerBehaviours",[]),i("events",{}),i("domModification",{}),i("eventOrder",{})]}),ocr=r([i("prefix","form-field"),vr("fieldBehaviours",[ft,o])]),scr=r([ns({schema:[u("dom")],name:"label"}),ns({factory:{sketch:function(n){return{uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}}}},schema:[u("text")],name:"aria-descriptor"}),fu({factory:{sketch:function(n){var i,t,r=(i=["factory"],t={},su(n,function(n,r){cr(i,r)||(t[r]=n)}),t);return n.factory.sketch(r)}},schema:[u("factory")],name:"field"})]),lt=bu({name:"FormField",configFields:ocr(),partFields:scr(),factory:function(n,t){var i=br(n.fieldBehaviours,[ft.config({find:function(t){return kt(t,n,"field")}}),o.config({store:{mode:"manual",getValue:function(n){return ft.getCurrent(n).bind(o.getValue)},setValue:function(n,t){ft.getCurrent(n).each(function(n){o.setValue(n,t)})}}})]),r=gt([li(function(t){var i=dnt(t,n,["label","field","aria-descriptor"]);i.field().each(function(t){var r=l(n.prefix);i.label().each(function(n){rt(n.element,"for",r);rt(t.element,"id",r)});i["aria-descriptor"]().each(function(i){var r=l(n.prefix);rt(i.element,"id",r);rt(t.element,"aria-describedby",r)})})})]);return{uid:n.uid,dom:n.dom,components:t,behaviours:i,events:r,apis:{getField:function(t){return kt(t,n,"field")},getLabel:function(t){return kt(t,n,"label")}}}},apis:{getField:function(n,t){return n.getField(t)},getLabel:function(n,t){return n.getLabel(t)}}}),hcr=Object.freeze({__proto__:null,exhibit:function(n,t){return yo({attributes:cv([{key:t.tabAttr,value:"true"}])})}}),ai=wr({fields:[i("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:hcr}),ccr=tinymce.util.Tools.resolve("tinymce.html.Entities"),lcr=function(n,t,i,r){return{dom:dsi(i),components:n.toArray().concat([t]),fieldBehaviours:e(r)}},dsi=function(n){return{tag:"div",classes:["tox-form__group"].concat(n)}},ie=l("form-component-change"),wb=l("form-close"),ca=l("form-cancel"),gs=l("form-action"),bb=l("form-submit"),tct=l("form-block"),ict=l("form-unblock"),gsi=l("form-tabchange"),nhi=l("form-resize"),thi=r([wt("data"),i("inputAttributes",{}),i("inputStyles",{}),i("tag","input"),i("inputClasses",[]),vt("onSetValue"),i("styles",{}),i("eventOrder",{}),vr("inputBehaviours",[o,g]),i("selectOnFocus",!0)]),kb=le({name:"Input",configFields:thi(),factory:function(n){return{uid:n.uid,dom:wsi(n),components:[],behaviours:t(t({},psi(i=n)),br(i.inputBehaviours,[o.config({store:t(t({mode:"manual"},i.data.map(function(n){return{initialValue:n}}).getOr({})),{getValue:function(n){return kl(n.element)},setValue:function(n,t){kl(n.element)!==t&&pd(n.element,t)}}),onSetValue:i.onSetValue})])),eventOrder:n.eventOrder};var i}}),ihi={},rct={exports:ihi};!function(){var n=this,t=function(){function l(){}function n(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];h(n,this)}function s(i,r){for(;3===i._state;)i=i._value;0!==i._state?(i._handled=!0,n._immediateFn(function(){var n,f=1===i._state?r.onFulfilled:r.onRejected;if(null!==f){try{n=f(i._value)}catch(n){return void t(r.promise,n)}u(r.promise,n)}else(1===i._state?u:t)(r.promise,i._value)})):i._deferreds.push(r)}function u(i,r){var u,e,o;try{if(r===i)throw new TypeError("A promise cannot be resolved with itself.");if(r&&("object"==typeof r||"function"==typeof r)){if(u=r.then,r instanceof n)return i._state=3,i._value=r,void f(i);if("function"==typeof u)return void h((e=u,o=r,function(){e.apply(o,arguments)}),i)}i._state=1;i._value=r;f(i)}catch(r){t(i,r)}}function t(n,t){n._state=2;n._value=t;f(n)}function f(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var i=0,r=t._deferreds.length;i<r;i++)s(t,t._deferreds[i]);t._deferreds=null}function a(n,t,i){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.promise=i}function h(n,i){var r=!1;try{n(function(n){r||(r=!0,u(i,n))},function(n){r||(r=!0,t(i,n))})}catch(n){if(r)return;r=!0;t(i,n)}}var i,r,e,o={exports:{}},c;return i=o,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=setTimeout,n.prototype.catch=function(n){return this.then(null,n)},n.prototype.then=function(n,t){var i=new this.constructor(l);return s(this,new a(n,t,i)),i},n.all=function(t){var i=Array.prototype.slice.call(t);return new n(function(n,t){if(0===i.length)return n([]);for(var u=i.length,r=0;r<i.length;r++)!function f(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return o.call(e,function(n){f(r,n)},t),0}i[r]=e;0==--u&&n(i)}catch(e){t(e)}}(r,i[r])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(n){n(t)})},n.reject=function(t){return new n(function(n,i){i(t)})},n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;r<u;r++)t[r].then(n,i)})},n._immediateFn="function"==typeof setImmediate?function(n){setImmediate(n)}:function(n){e(n,0)},n._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},n._setImmediateFn=function(t){n._immediateFn=t},n._setUnhandledRejectionFn=function(t){n._unhandledRejectionFn=t},i.exports?i.exports=n:r.Promise||(r.Promise=n),c=o.exports,{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||c}};"object"==typeof ihi&&void 0!==rct?rct.exports=t():(n="undefined"!=typeof globalThis?globalThis:n||self).EphoxContactWrapper=t()}();var fs,att,wh=rct.exports.boltExport,fct=function(t){function f(n){u()?e(n):r.push(n)}var i=n.none(),r=[],u=function(){return i.isSome()},e=function(n){i.each(function(t){setTimeout(function(){n(t)},0)})};return t(function(t){u()||(i=n.some(t),k(r,e),r=[])}),{get:f,map:function(n){return fct(function(t){f(function(i){t(n(i))})})},isReady:u}},vcr={nu:fct,pure:function(n){return fct(function(t){t(n)})}},wy=function(n){function t(t){n().then(t,acr)}return{map:function(t){return wy(function(){return n().then(t)})},bind:function(t){return wy(function(){return n().then(function(n){return t(n).toPromise()})})},anonBind:function(t){return wy(function(){return n().then(function(){return t.toPromise()})})},toLazy:function(){return vcr.nu(t)},toCached:function(){var t=null;return wy(function(){return t=null===t?n():t})},toPromise:n,get:t}},tl=function(n){return wy(function(){return new wh(n)})},bh=function(n){return wy(function(){return wh.resolve(n)})},ycr=["input","textarea"],pcr=Object.freeze({__proto__:null,markValid:uhi,markInvalid:fhi,query:ehi,run:uct,isInvalid:function(n,t){return se(t.getRoot(n).getOr(n.element),t.invalidClass)}}),wcr=Object.freeze({__proto__:null,events:function(n){return n.validator.map(function(t){return gt([f(t.onEvent,function(t){uct(t,n).get(ct)})].concat(t.validateOnLoad?[li(function(t){uct(t,n).get(c)})]:[]))}).getOr({})}}),nh=wr({fields:[u("invalidClass"),i("getRoot",n.none),df("notify",[i("aria","alert"),i("getContainer",n.none),i("validHtml",""),vt("onValid"),vt("onInvalid"),vt("onValidate")]),df("validator",[u("validate"),i("onEvent","input"),i("validateOnLoad",!0)])],name:"invalidating",active:wcr,apis:pcr,extra:{validation:function(n){return function(t){var i=o.getValue(t);return bh(n(i))}}}}),bcr=Object.freeze({__proto__:null,getCoupled:function(n,t,i,r){return i.getOrCreate(n,t,r)}}),yi=wr({fields:[lf("others",nbt(et.value,vo()))],name:"coupling",apis:bcr,state:Object.freeze({__proto__:null,init:function(){var n={},t=r({});return ne({readState:t,getOrCreate:function(t,i,r){var u=lr(i.others);if(u)return b(n,r).getOrThunk(function(){var u=b(i.others,r).getOrDie("No information found for coupled component: "+r)(t),f=t.getSystem().build(u);return n[r]=f});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+JSON.stringify(u,null,2));}})}})}),ohi=r("sink"),shi=r(ns({name:ohi(),overrides:r({dom:{tag:"div"},behaviours:e([ku.config({useFixed:gi})]),events:gt([wl(bd()),wl(de()),wl(ow())])})}));(att=fs=fs||{})[att.HighlightFirst=0]="HighlightFirst";att[att.HighlightNone=1]="HighlightNone";var vli,yli,pli,wli,bli=function(n,t){return n.getSystem().getByUid(t.uid+"-"+ohi()).map(function(n){return function(){return et.value(n)}}).getOrThunk(function(){return t.lazySink.fold(function(){return function(){return et.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(t){return function(){return t(n)}})})},vlr=r([u("dom"),u("fetch"),vt("onOpen"),af("onExecute"),i("getHotspot",n.some),i("getAnchorOverrides",r({})),wc(),vr("dropdownBehaviours",[ht,yi,v,g]),u("toggleClass"),i("eventOrder",{}),wt("lazySink"),i("matchWidth",!1),i("useMinWidth",!1),wt("role")].concat(sct())),ylr=r([no({schema:[tg()],name:"menu",defaults:function(n){return{onExecute:n.onExecute}}}),shi()]),io=bu({name:"Dropdown",configFields:vlr(),partFields:ylr(),factory:function(i,r,u,f){function e(n){ot.getState(n).each(function(n){sa.highlightPrimary(n)})}function o(t){return pl(t),n.some(!0)}var s,h={expand:function(n){ht.isOn(n)||by(i,ct,n,f,c,fs.HighlightNone).get(c)},open:function(n){ht.isOn(n)||by(i,ct,n,f,c,fs.HighlightFirst).get(c)},isOpen:ht.isOn,close:function(n){ht.isOn(n)&&by(i,ct,n,f,c,fs.HighlightFirst).get(c)},repositionMenus:function(n){ht.isOn(n)&&lhi(n)}};return{uid:i.uid,dom:i.dom,components:r,behaviours:br(i.dropdownBehaviours,[ht.config({toggleClass:i.toggleClass,aria:{mode:"expanded"}}),yi.config({others:{sandbox:function(n){return oct(i,n,{onOpen:function(){return ht.on(n)},onClose:function(){return ht.off(n)}})}}}),v.config({mode:"special",onSpace:o,onEnter:o,onDown:function(t){return io.isOpen(t)?e(yi.getCoupled(t,"sandbox")):io.open(t),n.some(!0)},onEscape:function(t){return io.isOpen(t)?(io.close(t),n.some(!0)):n.none()}}),g.config({})]),events:vn(n.some(function(n){by(i,ct,n,f,e,fs.HighlightFirst).get(c)})),eventOrder:t(t({},i.eventOrder),((s={})[gf()]=["disabling","toggling","alloy.base.behaviour"],s)),apis:h,domModification:{attributes:t(t({"aria-haspopup":"true"},i.role.fold(function(){return{}},function(n){return{role:n}})),"button"===i.dom.tag?{type:b(i.dom,"attributes").bind(function(n){return b(n,"type")}).getOr("button")}:{})}}},apis:{open:function(n,t){return n.open(t)},expand:function(n,t){return n.expand(t)},close:function(n,t){return n.close(t)},isOpen:function(n,t){return n.isOpen(t)},repositionMenus:function(n,t){return n.repositionMenus(t)}}}),nk=wr({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return gt([abt(htr(),gi)])},exhibit:function(){return yo({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),kli=l("color-input-change"),dli=l("color-swatch-change"),gli=l("color-picker-cancel"),plr=ns({schema:[u("dom")],name:"label"}),wlr=il("top-left"),blr=il("top"),klr=il("top-right"),dlr=il("right"),glr=il("bottom-right"),nar=il("bottom"),tar=il("bottom-left"),iar=[plr,il("left"),dlr,blr,nar,wlr,klr,tar,glr,fu({name:"thumb",defaults:r({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:gt([av(ch(),n,"spectrum"),av(uw(),n,"spectrum"),av(fw(),n,"spectrum"),av(de(),n,"spectrum"),av(wd(),n,"spectrum"),av(eft(),n,"spectrum")])}}}),fu({schema:[ff("mouseIsDown",function(){return p(!1)})],name:"spectrum",overrides:function(n){function i(i,r){return t.getValueFromEvent(r).map(function(r){return t.setValueFrom(i,n,r)})}var t=n.model.manager;return{behaviours:e([v.config({mode:"special",onLeft:function(i){return t.onLeft(i,n)},onRight:function(i){return t.onRight(i,n)},onUp:function(i){return t.onUp(i,n)},onDown:function(i){return t.onDown(i,n)}}),g.config({})]),events:gt([f(ch(),i),f(uw(),i),f(de(),i),f(wd(),function(t,r){n.mouseIsDown.get()&&i(t,r)})])}}})],tk=r("slider.change.value"),hlt="left",rar=cci(-1),uar=cci(1),far=n.none,ear=n.none,oar={"top-left":n.none(),top:n.none(),"top-right":n.none(),right:n.some(function(n,t){to(n,{x:ptt(t)})}),"bottom-right":n.none(),bottom:n.none(),"bottom-left":n.none(),left:n.some(function(n,t){to(n,{x:vtt(t)})})},sar=Object.freeze({__proto__:null,setValueFrom:function(n,t,i){var r=yct(n,t,i);return gtt(n,{x:r}),r},setToMin:function(n,t){gtt(n,{x:la(t)})},setToMax:function(n,t){gtt(n,{x:va(t)})},findValueOfOffset:yct,getValueFromEvent:function(n){return hct(n).map(function(n){return n.left})},findPositionOfValue:pct,setPositionFromValue:function(n,t,i,r){var u=kh(i),f=pct(n,r.getSpectrum(n),u.x,r.getLeftEdge(n),r.getRightEdge(n),i),e=nf(t.element)/2;tt(t.element,"left",f-e+"px")},onLeft:rar,onRight:uar,onUp:far,onDown:ear,edgeActions:oar}),har=n.none,car=n.none,lar=lci(-1),aar=lci(1),yar={"top-left":n.none(),top:n.some(function(n,t){to(n,{y:ytt(t)})}),"top-right":n.none(),right:n.none(),"bottom-right":n.none(),bottom:n.some(function(n,t){to(n,{y:wtt(t)})}),"bottom-left":n.none(),left:n.none()},par=Object.freeze({__proto__:null,setValueFrom:function(n,t,i){var r=wct(n,t,i);return nit(n,{y:r}),r},setToMin:function(n,t){nit(n,{y:aa(t)})},setToMax:function(n,t){nit(n,{y:ya(t)})},findValueOfOffset:wct,getValueFromEvent:function(n){return hct(n).map(function(n){return n.top})},findPositionOfValue:bct,setPositionFromValue:function(n,t,i,r){var u=kh(i),f=bct(n,r.getSpectrum(n),u.y,r.getTopEdge(n),r.getBottomEdge(n),i),e=cu(t.element)/2;tt(t.element,"top",f-e+"px")},onLeft:har,onRight:car,onUp:lar,onDown:aar,edgeActions:yar}),war=hct,bar=rit(-1,!1),kar=rit(1,!1),dar=rit(-1,!0),gar=rit(1,!0),nvr={"top-left":n.some(function(n,t){to(n,rl(vtt(t),ytt(t)))}),top:n.some(function(n,t){to(n,rl(vhi(t),ytt(t)))}),"top-right":n.some(function(n,t){to(n,rl(ptt(t),ytt(t)))}),right:n.some(function(n,t){to(n,rl(ptt(t),yhi(t)))}),"bottom-right":n.some(function(n,t){to(n,rl(ptt(t),wtt(t)))}),bottom:n.some(function(n,t){to(n,rl(vhi(t),wtt(t)))}),"bottom-left":n.some(function(n,t){to(n,rl(vtt(t),wtt(t)))}),left:n.some(function(n,t){to(n,rl(vtt(t),yhi(t)))})},tvr=Object.freeze({__proto__:null,setValueFrom:function(n,t,i){var r=iit(yct(n,t,i.left),wct(n,t,i.top));return tit(n,r),r},setToMin:function(n,t){tit(n,iit(la(t),aa(t)))},setToMax:function(n,t){tit(n,iit(va(t),ya(t)))},getValueFromEvent:war,setPositionFromValue:function(n,t,i,r){var u=kh(i),f=pct(n,r.getSpectrum(n),u.x,r.getLeftEdge(n),r.getRightEdge(n),i),e=bct(n,r.getSpectrum(n),u.y,r.getTopEdge(n),r.getBottomEdge(n),i),o=nf(t.element)/2,s=cu(t.element)/2;tt(t.element,"left",f-o+"px");tt(t.element,"top",e-s+"px")},onLeft:bar,onRight:kar,onUp:dar,onDown:gar,edgeActions:nvr}),ro=bu({name:"Slider",configFields:[i("stepSize",1),i("onChange",c),i("onChoose",c),i("onInit",c),i("onDragStart",c),i("onDragEnd",c),i("snapToGrid",!1),i("rounded",!0),wt("snapStart"),lf("model",fe("mode",{x:[i("minX",0),i("maxX",100),ff("value",function(n){return p(n.mode.minX)}),u("getInitialValue"),ui("manager",sar)],y:[i("minY",0),i("maxY",100),ff("value",function(n){return p(n.mode.minY)}),u("getInitialValue"),ui("manager",par)],xy:[i("minX",0),i("maxX",100),i("minY",0),i("maxY",100),ff("value",function(n){return p({x:n.mode.minX,y:n.mode.minY})}),u("getInitialValue"),ui("manager",tvr)]})),vr("sliderBehaviours",[v,o]),ff("mouseIsDown",function(){return p(!1)})],partFields:iar,factory:function(t,i){function u(n){return ks(n,t,"thumb")}function h(n){return ks(n,t,"spectrum")}function w(n){return kt(n,t,"left-edge")}function b(n){return kt(n,t,"right-edge")}function k(n){return kt(n,t,"top-edge")}function d(n){return kt(n,t,"bottom-edge")}function e(n,i){s.setPositionFromValue(n,i,t,{getLeftEdge:w,getRightEdge:b,getTopEdge:k,getBottomEdge:d,getSpectrum:h})}function c(n,t){r.value.set(t);e(n,u(n))}function l(n){var i=t.mouseIsDown.get();t.mouseIsDown.set(!1);i&&kt(n,t,"thumb").each(function(i){var u=r.value.get();t.onChoose(n,i,u)})}function a(n,i){i.stop();t.mouseIsDown.set(!0);t.onDragStart(n,u(n))}function y(n,i){i.stop();t.onDragEnd(n,u(n));l(n)}var p,r=t.model,s=r.manager;return{uid:t.uid,dom:t.dom,components:i,behaviours:br(t.sliderBehaviours,[v.config({mode:"special",focusIn:function(n){return kt(n,t,"spectrum").map(v.focusIn).map(gi)}}),o.config({store:{mode:"manual",getValue:function(){return r.value.get()}}}),ge.config({channels:((p={})[pot()]={onReceive:l},p)})]),events:gt([f(tk(),function(i,r){!function(i,r){c(i,r);var f=u(i);t.onChange(i,f,r);n.some(!0)}(i,r.event.value)}),li(function(n){var o=r.getInitialValue(),i,f;r.value.set(o);i=u(n);e(n,i);f=h(n);t.onInit(n,i,f,r.value.get())}),f(ch(),a),f(fw(),y),f(de(),a),f(eft(),y)]),apis:{resetToMin:function(n){s.setToMin(n,t)},resetToMax:function(n){s.setToMax(n,t)},setValue:c,refresh:e},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(n,t,i){n.setValue(t,i)},resetToMin:function(n,t){n.resetToMin(t)},resetToMax:function(n,t){n.resetToMax(t)},refresh:function(n,t){n.refresh(t)}}}),clt=l("rgb-hex-update"),nai=l("slider-update"),tai=l("palette-update"),ivr=[vr("formBehaviours",[o])],np={getField:vd(function(n,t,i){return n.getField(t,i)}),sketch:function(n){var t,i={field:function(n,i){return t.push(n),eot("form",aci(n),i)},record:r(t=[])},u=n(i),f=s(i.record(),function(n){return fu({name:n,pname:aci(n)})});return lot("form",ivr,f,llr,u)}},iai=l("valid-input"),rai=l("invalid-input"),uai=l("validating-input"),llt="colorcustom.rgb.",rvr=function(n){return ft.config({find:n.getOpt})},alt=function(n){return ft.config({find:function(t){return grt(t.element,n).bind(function(n){return t.getSystem().getByDom(n).toOptional()})}})},uvr={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},fvr=tinymce.util.Tools.resolve("tinymce.Resource"),ul=tinymce.util.Tools.resolve("tinymce.util.Tools"),evr=w([i("preprocess",ct),i("postprocess",ct)]),ovr=function(n,t){var i=rf("RepresentingConfigs.memento processors",evr,t);return o.config({store:{mode:"manual",getValue:function(t){var r=n.get(t),u=o.getValue(r);return i.postprocess(u)},setValue:function(t,r){var u=i.preprocess(r),f=n.get(t);o.setValue(f,u)}}})},svr=vci,eit=function(n){return o.config({store:{mode:"memory",initialValue:n}})},vlt=l("alloy-fake-before-tabstop"),ylt=l("alloy-fake-after-tabstop"),hvr=!(we().browser.isIE()||we().browser.isEdge()),dh=function(n){return n.getContext("2d")},cvr=function(n,t,i){return n.width=t,n.height=i,n},lvr=function(n){URL.revokeObjectURL(n.src)},plt=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],avr=function(n,t,i){var r=dh(n),u=function(n){for(var u,f,e,o,r=n.data,s=i[0],h=i[1],c=i[2],l=i[3],a=i[4],v=i[5],y=i[6],p=i[7],w=i[8],b=i[9],k=i[10],d=i[11],g=i[12],nt=i[13],tt=i[14],it=i[15],rt=i[16],ut=i[17],ft=i[18],et=i[19],t=0;t<r.length;t+=4)u=r[t],f=r[t+1],e=r[t+2],o=r[t+3],r[t]=u*s+f*h+e*c+o*l+a,r[t+1]=u*v+f*y+e*p+o*w+b,r[t+2]=u*k+f*d+e*g+o*nt+tt,r[t+3]=u*it+f*rt+e*ut+o*ft+et;return n}(r.getImageData(0,0,n.width,n.height));return r.putImageData(u,0,0),pa(n,t)},vvr=(vli=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(n){return nlt(n,vli)}),yvr=gci(function(n,t){return gct(n,[1,0,0,0,t=gb(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])}),pvr=gci(function(n,t){var i;return t=gb(t,-1,1),gct(n,[(i=(t*=100)<0?127+t/100*127:127*(0==(i=t%1)?plt[t]:plt[Math.floor(t)]*(1-i)+plt[Math.floor(t)+1]*i)+127)/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1])}),wvr=(yli=[0,-1,0,-1,5,-1,0,-1,0],function(n){return i=yli,(t=n).toCanvas().then(function(n){return r=n,f=t.getType(),e=i,u=dh(r),o=function(n,t,i){for(var u,f,c,r=function(n,t,i){return i<n?n=i:n<t&&(n=t),n},e=Math.round(Math.sqrt(i.length)),p=Math.floor(e/2),l=n.data,a=t.data,o=n.width,w=n.height,s=0;s<w;s++)for(u=0;u<o;u++){for(var b=0,k=0,d=0,h=0;h<e;h++)for(f=0;f<e;f++){var g=r(u+f-p,0,o-1),v=4*(r(s+h-p,0,w-1)*o+g),y=i[h*e+f];b+=l[v]*y;k+=l[1+v]*y;d+=l[2+v]*y}c=4*(s*o+u);a[c]=r(b,0,255);a[1+c]=r(k,0,255);a[2+c]=r(d,0,255)}return t}(u.getImageData(0,0,r.width,r.height),u.getImageData(0,0,r.width,r.height),e),u.putImageData(o,0,0),pa(r,f);var r,f,e,u,o});var t,i}),bvr=(pli=function(n,t){return 255*Math.pow(n/255,1-t)},function(n,t){return n.toCanvas().then(function(i){return function(n,t,i){for(var e,f=dh(n),u=new Array(256),r=0;r<u.length;r++)u[r]=pli(r,i);return e=function(n,t){for(var r=n.data,i=0;i<r.length;i+=4)r[i]=t[r[i]],r[i+1]=t[r[i+1]],r[i+2]=t[r[i+2]];return n}(f.getImageData(0,0,n.width,n.height),u),f.putImageData(e,0,0),pa(n,t)}(i,n.getType(),t)})}),fai=function(n,t,i){var o=kct(n),s=dct(n),r=t/o,u=i/s,f=!1,e;return(r<.5||2<r)&&(r=r<.5?.5:2,f=!0),(u<.5||2<u)&&(u=u<.5?.5:2,f=!0),e=kvr(n,r,u),f?e.then(function(n){return fai(n,t,i)}):e},kvr=function(n,t,i){return new wh(function(r){var u=kct(n),f=dct(n),e=Math.floor(u*t),o=Math.floor(f*i),s=dy(e,o);dh(s).drawImage(n,0,0,u,f,0,0,e,o);r(s)})},dvr=function(n,t,i){var r=(i<0?360+i:i)*Math.PI/180,u=n.width,f=n.height,o=Math.sin(r),s=Math.cos(r),h=nli(Math.abs(u*s)+Math.abs(f*o)),c=nli(Math.abs(u*o)+Math.abs(f*s)),l=dy(h,c),e=dh(l);return e.translate(h/2,c/2),e.rotate(r),e.drawImage(n,-u/2,-f/2),pa(l,t)},gvr=function(n,t,i){var r=dy(n.width,n.height),u=dh(r);return"v"===i?(u.scale(1,-1),u.drawImage(n,0,-r.height)):(u.scale(-1,1),u.drawImage(n,-r.width,0)),pa(r,t)},nyr=function(n,t,i,r,u,f){var e=dy(u,f);return dh(e).drawImage(n,-i,-r),pa(e,t)},eai=l("toolbar.button.execute"),oai=((wli={})[gf()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],wli),tp=l("update-menu-text"),sai=l("update-menu-icon"),tyr={type:"separator"},hai=function(n,t){var u,r,i;return iv((u=pi(n)?n.split(" "):n,r=t,0<(i=vu(u,function(n,t){return pi(t)?""===t?n:"|"===t?0<n.length&&!rlt(n[n.length-1])?n.concat([tyr]):n:ni(r,t.toLowerCase())?n.concat([r[t.toLowerCase()]]):n:n.concat([t])},[])).length&&rlt(i[i.length-1])&&i.pop(),i),function(n,i){var f,o,r,s,h,u,c=function(n){if(rlt(n))return n;var t=b(n,"value").getOrThunk(function(){return l("generated-menu-item")});return ri({value:t},n)}(i),e=(o=t,ni(f=c,"getSubmenuItems")?(s=o,h=(r=f).getSubmenuItems(),u=hai(h,s),{item:r,menus:ri(u.menus,hh(r.value,u.items)),expansions:ri(u.expansions,hh(r.value,r.value))}):{item:f,menus:{},expansions:{}});return{menus:ri(n.menus,e.menus),items:[e.item].concat(n.items),expansions:ri(n.expansions,e.expansions)}},{menus:{},expansions:{},items:[]})},iyr=r([i("field1Name","field1"),i("field2Name","field2"),ra("onLockedChange"),ia(["lockClass"]),i("locked",!1),uy("coupledFieldBehaviours",[ft,o])]),ryr=r([cli("field1","field2"),cli("field2","field1"),fu({factory:du,schema:[u("dom")],name:"lock",overrides:function(n){return{buttonBehaviours:e([ht.config({selected:n.locked,toggleClass:n.markers.lockClass,aria:{mode:"pressed"}})])}}})]),re=bu({name:"FormCoupledInputs",configFields:iyr(),partFields:ryr(),factory:function(t,i){return{uid:t.uid,dom:t.dom,components:i,behaviours:fy(t.coupledFieldBehaviours,[ft.config({find:n.some}),o.config({store:{mode:"manual",getValue:function(n){var r=hot(n,t,["field1","field2"]),i={};return i[t.field1Name]=o.getValue(r.field1()),i[t.field2Name]=o.getValue(r.field2()),i},setValue:function(n,i){var r=hot(n,t,["field1","field2"]);ve(i,t.field1Name)&&o.setValue(r.field1(),i[t.field1Name]);ve(i,t.field2Name)&&o.setValue(r.field2(),i[t.field2Name])}}})]),apis:{getField1:function(n){return kt(n,t,"field1")},getField2:function(n){return kt(n,t,"field2")},getLock:function(n){return kt(n,t,"lock")}}}},apis:{getField1:function(n,t){return n.getField1(t)},getField2:function(n,t){return n.getField2(t)},getLock:function(n,t){return n.getLock(t)}}}),ou={undo:r(l("undo")),redo:r(l("redo")),zoom:r(l("zoom")),back:r(l("back")),apply:r(l("apply")),swap:r(l("swap")),transform:r(l("transform")),tempTransform:r(l("temp-transform")),transformApply:r(l("transform-apply"))},uyr=r("save-state"),fyr=r("disable"),eyr=r("enable"),sf={formActionEvent:gs,saveState:uyr,disable:fyr,enable:eyr},cai=tinymce.util.Tools.resolve("tinymce.geom.Rect"),oyr=tinymce.util.Tools.resolve("tinymce.util.Observable"),ip=tinymce.util.Tools.resolve("tinymce.util.VK");aai=0;vai=function(n,i,r,u,f){function y(n,t){return{x:t.x-n.x,y:t.y-n.y,w:t.w,h:t.h}}function p(t,i,u,f){var o=i.x+u*t.deltaX,s=i.y+f*t.deltaY,h=Math.max(20,i.w+u*t.deltaW),c=Math.max(20,i.h+f*t.deltaH),e=(n=cai.clamp({x:o,y:s,w:h,h:c},r,"move"===t.name),y(r,n));it.fire("updateRect",{rect:e});g(e)}function w(t){l(n=t)}function l(n){function t(n,t){er(o,"#"+e+"-"+n).each(function(n){oh(n,{left:t.x+"px",top:t.y+"px",width:Math.max(0,t.w)+"px",height:Math.max(0,t.h)+"px"})})}k(c,function(t){er(o,"#"+e+"-"+t.name).each(function(i){oh(i,{left:n.w*t.xMul+n.x+"px",top:n.h*t.yMul+n.y+"px"})})});t("top",{x:i.x,y:i.y,w:i.w,h:n.y-i.y});t("right",{x:n.x+n.w,y:n.y,w:i.w-n.x-n.w+i.x,h:n.h});t("bottom",{x:i.x,y:n.y+n.h,w:i.w,h:i.h-n.y-n.h+i.y});t("left",{x:i.x,y:n.y,w:n.x-i.x,h:n.h});t("move",n)}function nt(n){rt(n.target,"aria-grabbed","focus"===n.raw.type?"true":"false")}var a,b,v=[],e="tox-crid-"+aai++,o=h.fromDom(u),c=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],d=["top","right","bottom","left"],g=function(n){var t;w((t=r,{x:n.x+t.x,y:n.y+t.y,w:n.w,h:n.h}))},it;return gk(b=h.fromTag("div"),{id:e,"class":"tox-croprect-container",role:"grid","aria-dropeffect":"execute"}),tf(o,b),k(d,function(n){er(o,"#"+e).each(function(t){var i=h.fromTag("div");gk(i,{id:e+"-"+n,"class":"tox-croprect-block","data-mce-bogus":"all"});tt(i,"display","none");tf(t,i)})}),k(c,function(n){er(o,"#"+e).each(function(t){var i=h.fromTag("div");gk(i,{id:e+"-"+n.name,"aria-label":n.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:n.label});bl(i,["tox-croprect-handle","tox-croprect-handle-"+n.name]);tt(i,"display","none");tf(t,i)})}),a=s(c,function(t){var i;return syr(e,{document:u.ownerDocument,root:be(o).dom,handle:e+"-"+t.name,start:function(){i=n},drag:function(n){p(t,i,n.deltaX,n.deltaY)}})}),l(n),v.push(tr(o,"focusin",nt),tr(o,"focusout",nt),tr(o,"keydown",function(t){function i(n,t,i,u,f){n.stopPropagation();n.preventDefault();p(r,i,u,f)}var r;switch(k(c,function(n){if(hu(t.target,"id")===e+"-"+n.name)return r=n,!1}),t.raw.keyCode){case ip.LEFT:i(t,0,n,-10,0);break;case ip.RIGHT:i(t,0,n,10,0);break;case ip.UP:i(t,0,n,0,-10);break;case ip.DOWN:i(t,0,n,0,10);break;case ip.ENTER:case ip.SPACEBAR:t.prevent();f()}})),it=t(t({},oyr),{toggleVisibility:function(n){var t=pt(pt([],s(c,function(n){return"#"+e+"-"+n.name}),!0),s(d,function(n){return"#"+e+"-"+n}),!0).join(","),i=wu(o,t);k(i,n?function(n){return ti(n,"display")}:function(n){return tt(n,"display","none")})},setClampRect:function(t){r=t;l(n)},setRect:w,getInnerRect:function(){return y(r,n)},setInnerRect:g,setViewPortRect:function(t){i=t;l(n)},destroy:function(){k(a,function(n){return n.destroy()});a=[];k(v,function(n){return n.unbind()});v=[]}})};var upi,fp,vit,fpi="data-value",epi=function(n,t,i,r){return s(i,function(i){return wlt(i)?{type:"togglemenuitem",text:i.text,value:i.value,active:i.value===r,onAction:function(){o.setValue(n,i.value);y(n,ie,{name:t});g.focus(n)}}:{type:"nestedmenuitem",text:i.text,getSubmenuItems:function(){return epi(n,t,i.items,r)}}})},opi=function(n,t){return oo(n,function(n){return wlt(n)?lk(n.value===t,n):opi(n.items,t)})},apr=le({name:"HtmlSelect",configFields:[u("options"),vr("selectBehaviours",[g,o]),i("selectClasses",[]),i("selectAttributes",{}),wt("data")],factory:function(n){var i=s(n.options,function(n){return{dom:{tag:"option",value:n.value,innerHtml:n.text}}}),r=n.data.map(function(n){return hh("initialValue",n)}).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:i,behaviours:br(n.selectBehaviours,[g.config({}),o.config({store:t({mode:"manual",getValue:function(n){return kl(n.element)},setValue:function(t,i){wi(n.options,function(n){return n.value===i}).isSome()&&pd(t.element,i)}},r)})])}}}),vpr=Object.freeze({__proto__:null,events:function(n,t){var i=n.stream.streams.setup(n,t);return gt([f(n.event,i),ws(function(){return t.cancel()})].concat(n.cancelEvent.map(function(n){return[f(n,function(){return t.cancel()})]}).getOr([])))}}),ypr=Object.freeze({__proto__:null,throttle:pai,init:function(n){return n.stream.streams.state(n)}}),spi=wr({fields:[lf("stream",fe("mode",{throttle:[u("delay"),i("stopEvent",!0),ui("streams",{setup:function(n,t){var i=n.stream,r=yst(n.onStream,i.delay);return t.setTimer(r),function(n,t){r.throttle(n,t);i.stopEvent&&t.stop()}},state:pai})]})),i("event","input"),wt("cancelEvent"),ra("onStream")],name:"streaming",active:vpr,state:ypr}),hpi=function(n){wai(n,function(n,t){return n.setSelectionRange(t.length,t.length)})},cat=r("alloy.typeahead.itemexecute"),ppr=r([wt("lazySink"),u("fetch"),i("minChars",5),i("responseTime",1e3),vt("onOpen"),i("getHotspot",n.some),i("getAnchorOverrides",r({})),i("layouts",n.none()),i("eventOrder",{}),yut("model",{},[i("getDisplayText",function(n){return void 0!==n.meta&&void 0!==n.meta.text?n.meta.text:n.value}),i("selectsOver",!0),i("populateFromBrowse",!0)]),vt("onSetValue"),af("onExecute"),vt("onItemExecute"),i("inputClasses",[]),i("inputAttributes",{}),i("inputStyles",{}),i("matchWidth",!0),i("useMinWidth",!1),i("dismissOnBlur",!0),ia(["openClass"]),wt("initialData"),vr("typeaheadBehaviours",[g,o,spi,v,ht,yi]),ff("previewing",function(){return p(!0)})].concat(thi()).concat(sct())),wpr=r([no({schema:[tg()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(i,r){t.previewing.get()?i.getSystem().getByUid(t.uid).each(function(u){!function(t,i,r){if(t.selectsOver){var f=o.getValue(i),u=t.getDisplayText(f),e=o.getValue(r);return 0===t.getDisplayText(e).indexOf(u)?n.some(function(){var n;sit(0,i,r);n=u.length;wai(i,function(t,i){return t.setSelectionRange(n,i.length)})}):n.none()}return n.none()}(t.model,u,r).fold(function(){return bt.dehighlight(i,r)},function(n){return n()})}):i.getSystem().getByUid(t.uid).each(function(n){t.model.populateFromBrowse&&sit(t.model,n,r)});t.previewing.set(!1)},onExecute:function(n,i){return n.getSystem().getByUid(t.uid).toOptional().map(function(n){return y(n,cat(),{item:i}),!0})},onHover:function(n,i){t.previewing.set(!1);n.getSystem().getByUid(t.uid).each(function(n){t.model.populateFromBrowse&&sit(t.model,n,i)})}}}})]),bpr=bu({name:"Typeahead",configFields:ppr(),partFields:wpr(),factory:function(i,r,u,e){function l(n,t,r){i.previewing.set(!1);var u=yi.getCoupled(n,"sandbox");ot.isOpen(u)?ft.getCurrent(u).each(function(n){bt.getHighlighted(n).fold(function(){r(n)},function(){lbt(u,n.element,"keydown",t)})}):ect(i,h(n),n,u,e,function(n){ft.getCurrent(n).each(r)},fs.HighlightFirst).get(c)}function h(n){return function(t){return t.map(function(t){var i=bi(ck(t.menus),function(n){return fi(n.items,function(n){return"item"===n.type})});return o.getState(n).update(s(i,function(n){return n.data})),t})}}var a=psi(i),p=[g.config({}),o.config({onSetValue:i.onSetValue,store:t({mode:"dataset",getDataKey:function(n){return kl(n.element)},getFallbackEntry:function(n){return{value:n,meta:{}}},setValue:function(n,t){pd(n.element,i.model.getDisplayText(t))}},i.initialData.map(function(n){return hh("initialValue",n)}).getOr({}))}),spi.config({stream:{mode:"throttle",delay:i.responseTime,stopEvent:!1},onStream:function(t){var u,r=yi.getCoupled(t,"sandbox");g.isFocused(t)&&kl(t.element).length>=i.minChars&&(u=ft.getCurrent(r).bind(function(n){return bt.getHighlighted(n).map(o.getValue)}),i.previewing.set(!0),ect(i,h(t),t,r,e,function(){ft.getCurrent(r).each(function(t){u.fold(function(){i.model.selectsOver&&bt.highlightFirst(t)},function(i){bt.highlightBy(t,function(n){return o.getValue(n).value===i.value});bt.getHighlighted(t).orThunk(function(){return bt.highlightFirst(t),n.none()})})})},fs.HighlightFirst).get(c))},cancelEvent:hft()}),v.config({mode:"special",onDown:function(t,i){return l(t,i,bt.highlightFirst),n.some(!0)},onEscape:function(t){var i=yi.getCoupled(t,"sandbox");return ot.isOpen(i)?(ot.close(i),n.some(!0)):n.none()},onUp:function(t,i){return l(t,i,bt.highlightLast),n.some(!0)},onEnter:function(t){var r=yi.getCoupled(t,"sandbox"),u=ot.isOpen(r),f;return u&&!i.previewing.get()?ft.getCurrent(r).bind(function(n){return bt.getHighlighted(n)}).map(function(n){return y(t,cat(),{item:n}),!0}):(f=o.getValue(t),at(t,hft()),i.onExecute(r,t,f),u&&ot.close(r),n.some(!0))}}),ht.config({toggleClass:i.markers.openClass,aria:{mode:"expanded"}}),yi.config({others:{sandbox:function(n){return oct(i,n,{onOpen:function(){return ht.on(n)},onClose:function(){return ht.off(n)}})}}}),it("typeaheadevents",[lh(function(n){by(i,h(n),n,e,c,fs.HighlightFirst).get(c)}),f(cat(),function(n,t){var r=yi.getCoupled(n,"sandbox");sit(i.model,n,t.event.item);at(n,hft());i.onItemExecute(n,r,t.event.item,o.getValue(n));ot.close(r);hpi(n)})].concat(i.dismissOnBlur?[f(oft(),function(n){var t=yi.getCoupled(n,"sandbox");bo(t.element).isNone()&&ot.close(t)})]:[]))];return{uid:i.uid,dom:wsi(ri(i,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:t(t({},a),br(i.typeaheadBehaviours,p)),eventOrder:i.eventOrder}}}),ba=function(n){return t(t({},n),{toCached:function(){return ba(n.toCached())},bindFuture:function(t){return ba(n.bind(function(n){return n.fold(function(n){return bh(et.error(n))},function(n){return t(n)})}))},bindResult:function(t){return ba(n.map(function(n){return n.bind(t)}))},mapResult:function(t){return ba(n.map(function(n){return n.map(t)}))},mapError:function(t){return ba(n.map(function(n){return n.mapError(t)}))},foldResult:function(t,i){return n.map(function(n){return n.fold(t,i)})},withTimeout:function(t,i){return ba(tl(function(r){var u=!1,f=setTimeout(function(){u=!0;r(et.error(i()))},t);n.get(function(n){u||(clearTimeout(f),r(n))})}))}})},kpr=function(n){return ba(tl(n))},dpr={type:"separator"},cpi=l("aria-invalid"),gpr={bar:yr(function(n,t){return i=t.shared,{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:s(n.items,i.interpreter)};var i}),collection:yr(function(n,t){function r(n){return function(t,i){wo(i.event.target,"[data-collection-item-value]").each(function(r){n(t,i,r,hu(r,"data-collection-item-value"))})}}function c(n,t){return s(wu(n.element,".tox-collection__item"),t)}return i=n,u=t.shared.providers,w=i.label.map(function(n){return nl(n,u)}),h=r(function(n,t,r,f){t.stop();u.isDisabled()||y(n,gs,{name:i.name,value:f})}),b=[f(cc(),r(function(n,t,i){ah(i)})),f(ow(),h),f(cw(),h),f(lc(),r(function(n,t,i){er(n.element,"."+ib).each(function(n){nr(n,ib)});pr(i,ib)})),f(ftr(),r(function(n){er(n.element,"."+ib).each(function(n){nr(n,ib)})})),lh(r(function(n,t,r,u){y(n,gs,{name:i.name,value:u})}))],yb(w,lt.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==i.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:ct},behaviours:e([a.config({disabled:u.isDisabled,onDisabled:function(n){c(n,function(n){pr(n,"tox-collection__item--state-disabled");rt(n,"aria-disabled",!0)})},onEnabled:function(n){c(n,function(n){nr(n,"tox-collection__item--state-disabled");nu(n,"aria-disabled")})}}),ir(),nt.config({}),o.config({store:{mode:"memory",initialValue:[]},onSetValue:function(n,t){var f=n,r=s(t,function(n){var t=rs.translate(n.text),f=1===i.columns?'<div class="tox-collection__item-label">'+t+"<\/div>":"",e='<div class="tox-collection__item-icon">'+n.icon+"<\/div>",o={_:" "," - ":" ","-":" "},r=t.replace(/\_| \- |\-/g,function(n){return o[n]});return'<div class="tox-collection__item'+(u.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+ccr.encodeAllRaw(n.value)+'" title="'+r+'" aria-label="'+r+'">'+e+f+"<\/div>"}),e=s("auto"!==i.columns&&1<i.columns?wyt(r,i.columns):[r],function(n){return'<div class="tox-collection__group">'+n.join("")+"<\/div>"});iw(f.element,e.join(""));"auto"===i.columns&&iht(n,5,"tox-collection__item").each(function(t){var i=t.numRows,r=t.numColumns;v.setGridSize(n,i,r)});at(n,nhi)}}),ai.config({}),v.config(1===(p=i.columns)?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===p?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:"."+sht}}),it("collection-events",b)]),eventOrder:((l={})[gf()]=["disabling","alloy.base.behaviour","collection-events"],l)}),["tox-form__group--collection"],[]);var i,u,l,p,w,h,b}),alertbanner:yr(function(n,t){return r=t.shared.providers,eu.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+(i=n).level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[du.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:tui(i.icon,r.icons),attributes:{title:r.translate(i.iconTooltip)}},action:function(n){y(n,gs,{name:"alert-banner",value:i.url})},buttonBehaviours:e([hst()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:r.translate(i.text)}}]});var i,r}),input:yr(function(t,i){return u=i.shared.providers,yai({name:(r=t).name,multiline:!1,label:r.label,inputMode:r.inputMode,placeholder:r.placeholder,flex:!1,disabled:r.disabled,classname:"tox-textfield",validation:n.none(),maximized:r.maximized},u);var r,u}),textarea:yr(function(t,i){return u=i.shared.providers,yai({name:(r=t).name,multiline:!0,label:r.label,inputMode:n.none(),placeholder:r.placeholder,flex:!0,disabled:r.disabled,classname:"tox-textarea",validation:n.none(),maximized:r.maximized},u);var r,u}),label:yr(function(t,i){return f={dom:{tag:"label",innerHtml:(u=i.shared).providers.translate((r=t).label),classes:["tox-label"]}},o=s(r.items,u.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[f].concat(o),behaviours:e([wa(),nt.config({}),alr(n.none()),v.config({mode:"acyclic"})])};var r,u,f,o}),iframe:(upi=function(i,r){return u=i,h=r.shared.providers,o=hvr&&u.sandboxed,l=t(t({},u.label.map(function(n){return{title:n}}).getOr({})),o?{sandbox:"allow-scripts allow-same-origin"}:{}),c=o,f=p(""),s={getValue:function(){return f.get()},setValue:function(n,t){var i;c?rt(n.element,"srcdoc",t):(rt(n.element,"src","javascript:''"),(i=n.element.dom.contentWindow.document).open(),i.write(t),i.close());f.set(t)}},yb(u.label.map(function(n){return nl(n,h)}),lt.parts.field({factory:{sketch:function(t){return pci({uid:t.uid,dom:{tag:"iframe",attributes:l},behaviours:e([ai.config({}),g.config({}),svr(n.none(),s.getValue,s.setValue)])})}}}),["tox-form__group--stretched"],[]);var u,h,c,f,o,l,s},function(n,t,i){var r=ri(t,{source:"dynamic"});return yr(upi)(n,r,i)}),button:yr(function(i,r){return u=i,f=r.shared.providers,e=hli(u.name,"custom"),yb(n.none(),lt.parts.field(t({factory:du},sli(u,n.some(e),f,[eit(""),wa()]))),[],[]);var u,f,e}),checkbox:yr(function(t,i){function s(t){return t.element.dom.click(),n.some(!0)}function h(n){return ts("checked"===n?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+n]},u.icons)}return r=t,u=i.shared.providers,c=o.config({store:{mode:"manual",getValue:function(n){return n.element.dom.checked},setValue:function(n,t){n.element.dom.checked=t}}}),l=lt.parts.field({factory:{sketch:ct},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:e([wa(),a.config({disabled:function(){return r.disabled||u.isDisabled()}}),ai.config({}),g.config({}),c,v.config({mode:"special",onEnter:s,onSpace:s,stopSpaceKeyup:!0}),it("checkbox-events",[f(ew(),function(n){y(n,ie,{name:r.name})})])])}),p=lt.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:u.translate(r.label)},behaviours:e([nk.config({})])}),w=yt({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]}),lt.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[l,w.asSpec(),p],fieldBehaviours:e([a.config({disabled:function(){return r.disabled||u.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(n){lt.getField(n).each(a.disable)},onEnabled:function(n){lt.getField(n).each(a.enable)}}),ir()])});var r,u,c,l,p,w}),colorinput:yr(function(t,i){function b(n,t){y(n,dli,{value:t})}return p=t,u=i.shared,s=i.colorinput,k=lt.parts.field({factory:kb,inputClasses:["tox-textfield"],onSetValue:function(n){return nh.run(n).get(c)},inputBehaviours:e([a.config({disabled:u.providers.isDisabled}),ir(),ai.config({}),nh.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(n){return gu(n.element)},notify:{onValid:function(n){var t=o.getValue(n);y(n,kli,{color:t})}},validator:{validateOnLoad:!1,validate:function(n){var t=o.getValue(n),i,r;return 0===t.length?bh(et.value(!0)):(i=h.fromTag("span"),tt(i,"background-color",t),r=tu(i,"background-color").fold(function(){return et.error("blah")},function(){return et.value(t)}),bh(r))}}})]),selectOnFocus:!1}),d=p.label.map(function(n){return nl(n,u.providers)}),v=yt((r={dom:{tag:"span",attributes:{"aria-label":u.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[ru,iu,uu]},onLtr:function(){return[iu,ru,uu]}},components:[],fetch:koi(s.getColors(),s.hasCustomColors()),columns:s.getColorCols(),presets:"color",onItemAction:function(n,t){v.getOpt(n).each(function(n){"custom"===t?s.colorPicker(function(t){t.fold(function(){return at(n,gli)},function(t){b(n,t);yoi(t)})},"#ffffff"):b(n,"remove"===t?"":t)})}},io.sketch({dom:r.dom,components:r.components,toggleClass:"mce-active",dropdownBehaviours:e([yy((w=u).providers.isDisabled),ir(),nk.config({}),ai.config({})]),layouts:r.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:w.getSink,fetch:function(t){return tl(function(n){return r.fetch(n)}).map(function(i){return n.from(ssi(ri(ght(l("menu-value"),i,function(n){r.onItemAction(t,n)},r.columns,r.presets,us.CLOSE_ON_EXECUTE,dt,w.providers),{movement:htt(r.columns,r.presets)})))})},parts:{menu:gn(0,0,r.presets)}}))),lt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:d.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[k,v.asSpec()]}]),fieldBehaviours:e([it("form-field-events",[f(kli,function(n,t){v.getOpt(n).each(function(n){tt(n.element,"background-color",t.event.color)});y(n,ie,{name:p.name})}),f(dli,function(n,t){lt.getField(n).each(function(i){o.setValue(i,t.event.value);ft.getCurrent(n).each(g.focus)})}),f(gli,function(n){lt.getField(n).each(function(){ft.getCurrent(n).each(g.focus)})})])])});var p,u,s,r,w,k,d,v}),colorpicker:yr(function(){var t=yt(dcr(gcr,function(n){return"tox-"+n}).sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(n){y(n,gs,{name:"hex-valid",value:!0})},onInvalidHex:function(n){y(n,gs,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[t.asSpec()],behaviours:e([o.config({store:{mode:"manual",getValue:function(n){var i=t.get(n);return ft.getCurrent(i).bind(function(n){return o.getValue(n).hex}).map(function(n){return"#"+n}).getOr("")},setValue:function(i,r){var u=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(r),f=t.get(i);ft.getCurrent(f).fold(function(){console.log("Can not find form")},function(t){o.setValue(t,{hex:n.from(u[1]).getOr("")});np.getField(t,"hex").each(function(n){at(n,yv())})})}}}),wa()])}}),dropzone:yr(function(n,t){return nlr(n,t.shared.providers)}),grid:yr(function(n,t){return i=t.shared,{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+n.columns+"col"]},components:s(n.items,i.interpreter)};var i}),listbox:yr(function(t,i){return u=t,h=(f=i).shared.providers,s=rc(u.items).filter(wlt),l=u.label.map(function(n){return nl(n,h)}),v={dom:{tag:"div",classes:["tox-listboxfield"]},components:[lt.parts.field({dom:{},factory:{sketch:function(t){return ilt({uid:t.uid,text:s.map(function(n){return n.text}),icon:n.none(),tooltip:u.label,role:n.none(),fetch:function(n,t){t(gy(epi(n,u.name,u.items,o.getValue(n)),us.CLOSE_ON_EXECUTE,f,!1))},onSetup:r(c),getApi:r({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[ai.config({}),o.config({store:{mode:"manual",initialValue:s.map(function(n){return n.value}).getOr(""),getValue:function(n){return hu(n.element,fpi)},setValue:function(n,t){opi(u.items,t).each(function(t){rt(n.element,fpi,t.value);y(n,tp,{text:t.text})})}}})]},"tox-listbox",f.shared)}}})]},lt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:sr([l.toArray(),[v]]),fieldBehaviours:e([a.config({disabled:r(u.disabled),onDisabled:function(n){lt.getField(n).each(a.disable)},onEnabled:function(n){lt.getField(n).each(a.enable)}})])});var u,f,h,s,l,v}),selectbox:yr(function(t,i){return r=t,u=i.shared.providers,o=s(r.items,function(n){return{text:u.translate(n.text),value:n.value}}),h=r.label.map(function(n){return nl(n,u)}),c={dom:{tag:"div",classes:["tox-selectfield"]},components:sr([[lt.parts.field({dom:{},selectAttributes:{size:r.size},options:o,factory:apr,selectBehaviours:e([a.config({disabled:function(){return r.disabled||u.isDisabled()}}),ai.config({}),it("selectbox-change",[f(ew(),function(n){y(n,ie,{name:r.name})})])])})],(1<r.size?n.none():n.some(ts("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},u.icons))).toArray()])},lt.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:sr([h.toArray(),[c]]),fieldBehaviours:e([a.config({disabled:function(){return r.disabled||u.isDisabled()},onDisabled:function(n){lt.getField(n).each(a.disable)},onEnabled:function(n){lt.getField(n).each(a.enable)}}),ir()])});var r,u,o,h,c}),sizeinput:yr(function(n,t){return ali(n,t.shared.providers)}),urlinput:yr(function(n,t){return vyr(n,t,t.urlinput)}),customeditor:yr(function(n){var i=vi(),r=yt({dom:{tag:n.tag}}),t=vi();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:e([it("custom-editor-events",[li(function(u){r.getOpt(u).each(function(r){(ni(n,"init")?n.init(r.element.dom):fvr.load(n.scriptId,n.scriptUrl).then(function(t){return t(r.element.dom,n.settings)})).then(function(n){t.on(function(t){n.setValue(t)});t.clear();i.set(n)})})})]),o.config({store:{mode:"manual",getValue:function(){return i.get().fold(function(){return t.get().getOr("")},function(n){return n.getValue()})},setValue:function(n,r){i.get().fold(function(){t.set(r)},function(n){return n.setValue(r)})}}}),wa()]),components:[r.asSpec()]}}),htmlpanel:yr(function(n){return"presentation"===n.presets?eu.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:n.html}}):eu.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:n.html,attributes:{role:"document"}},containerBehaviours:e([ai.config({}),g.config({})])})}),imagetools:yr(function(n,t){return cyr(n,t.shared.providers)}),table:yr(function(n,t){return lyr(n,t.shared.providers)}),panel:yr(function(n,t){return{dom:{tag:"div",classes:n.classes},components:s(n.items,t.shared.interpreter)}})},nwr={field:function(n,t){return t}},lat=function(n,t,i){return b(gpr,t.type).fold(function(){return console.error('Unknown factory type "'+t.type+'", defaulting to container: ',t),t},function(r){return r(n,t,i)})},lpi={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},api=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],vpi=function(n){return vu(n,function(n,i){var r,u;return ni(i,"items")?(r=vpi(i.items),{customFormats:n.customFormats.concat(r.customFormats),formats:n.formats.concat([{title:i.title,items:r.formats}])}):ni(i,"inline")||ni(i,"block")||ni(i,"selector")?(u="custom-"+(pi(i.name)?i.name:i.title.toLowerCase()),{customFormats:n.customFormats.concat([{name:u,format:i}]),formats:n.formats.concat([{title:i.title,format:u,icon:i.icon}])}):t(t({},n),{formats:n.formats.concat(i)})},{customFormats:[],formats:[]})},twr=ul.trim,iwr=tvi("true"),rwr=tvi("false"),uwr=function(n){var t=s(wu(h.fromDom(n),"h1,h2,h3,h4,h5,h6,a:not([href])"),function(n){return n.dom});return fi(s(fi(t,wyr),byr).concat(s(fi(t,pyr),kyr)),dyr)},yit="tinymce-url-history",hf=ifr,ka=nfr,fwr=r([i("shell",!1),u("makeItem"),i("setupItem",c),uy("listBehaviours",[nt])]),ewr=r([ns({name:"items",overrides:function(){return{behaviours:e([nt.config({})])}}})]),ypi=bu({name:r("CustomList")(),configFields:fwr(),partFields:ewr(),factory:function(t,i){var r=t.shell?{behaviours:[nt.config({})],components:[]}:{behaviours:[],components:i};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:br(t.listBehaviours,r.behaviours),apis:{setItems:function(i,r){var u;u=i;(t.shell?n.some(u):kt(u,t,"items")).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components");},function(n){var u=nt.contents(n),f=r.length,e=f-u.length,s=0<e?pyt(e,function(){return t.makeItem()}):[],h=u.slice(f),o;k(h,function(t){return nt.remove(n,t)});k(s,function(t){return nt.append(n,t)});o=nt.contents(n);k(o,function(n,u){t.setupItem(i,n,r[u],u)})})}}}},apis:{setItems:function(n,t,i){n.setItems(t,i)}}}),ep=r([u("dom"),i("shell",!0),vr("toolbarBehaviours",[nt])]),owr=r([ns({name:"groups",overrides:function(){return{behaviours:e([nt.config({})])}}})]),es=bu({name:"Toolbar",configFields:ep(),partFields:owr(),factory:function(t,i){var r=t.shell?{behaviours:[nt.config({})],components:[]}:{behaviours:[],components:i};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:br(t.toolbarBehaviours,r.behaviours),apis:{setGroups:function(i,r){var u;u=i;(t.shell?n.some(u):kt(u,t,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components");},function(n){nt.set(n,r)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(n,t,i){n.setGroups(t,i)}}}),ppi=r([]),swr=Object.freeze({__proto__:null,setup:c,isDocked:dt,getBehaviours:ppi}),aat=oe([{"static":[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),vat=function(n,t,i){var u,f,r,e;n.getSystem().isConnected()&&(r=i,e=(f=t).lazyViewport(u=n),r.isDocked()&&pvi(u,f,r,e),epr(u,e,r).each(function(n){n.fold(function(){return yvi(u,f,r)},function(n){return nat(u,f,r,n)},function(n){pvi(u,f,r,e,!0);nat(u,f,r,n)})}))},hwr=Object.freeze({__proto__:null,refresh:vat,reset:wvi,isDocked:function(n,t,i){return i.isDocked()},getModes:function(n,t,i){return i.getModes()},setModes:function(n,t,i,r){return i.setModes(r)}}),cwr=Object.freeze({__proto__:null,events:function(n,t){return gt([vv(sw(),function(i,r){n.contextual.each(function(n){se(i.element,n.transitionClass)&&(ys(i.element,[n.transitionClass,n.fadeInClass]),(t.isVisible()?n.onShown:n.onHidden)(i));r.stop()})}),f(cft(),function(i){vat(i,n,t)}),f(gd(),function(i){wvi(i,n,t)})])}}),au=wr({fields:[df("contextual",[d("fadeInClass"),d("fadeOutClass"),d("transitionClass"),uf("lazyContext"),vt("onShow"),vt("onShown"),vt("onHide"),vt("onHidden")]),ei("lazyViewport",as),hd("modes",["top","bottom"],fr),vt("onDocked"),vt("onUndocked")],name:"docking",active:cwr,apis:hwr,state:Object.freeze({__proto__:null,init:function(n){var t=p(!1),i=p(!0),r=vi(),u=p(n.modes);return ne({isDocked:t.get,setDocked:t.set,getInitialPos:r.get,setInitialPos:r.set,clearInitialPos:r.clear,isVisible:i.get,setVisible:i.set,getModes:u.get,setModes:u.set,readState:function(){return"docked:  "+t.get()+", visible: "+i.get()+", modes: "+u.get().join(",")}})}})}),yat=r(l("toolbar-height-change")),ih={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},wpi="tox-tinymce--toolbar-sticky-on",bpi="tox-tinymce--toolbar-sticky-off",lwr=Object.freeze({__proto__:null,setup:function(n,t,i){n.inline||(t.header.isPositionedAtTop()||n.on("ResizeEditor",function(){i().each(au.reset)}),n.on("ResizeWindow ResizeEditor",function(){i().each(iat)}),n.on("SkinLoaded",function(){i().each(function(n){au.isDocked(n)?au.reset(n):au.refresh(n)})}),n.on("FullscreenStateChanged",function(){i().each(au.reset)}));n.on("AfterScrollIntoView",function(n){i().each(function(t){au.refresh(t);var a,e,r,o,i,v,y,s,u,p,w,f,c,l,b,k,d=t.element;sii(d)&&(a=n,o=(r=so(e=d)).dom.defaultView.innerHeight,i=cs(r),y=cl(v=h.fromDom(a.elm)),s=cu(v),p=(u=y.y)+s,w=uc(e),f=cu(e),l=(c=w.top)+f,b=Math.abs(c-i.top)<2,k=Math.abs(l-(i.top+o))<2,b&&u<l?wpt(i.left,u-f,r):k&&c<p&&wpt(i.left,u-o+s+f,r))})});n.on("PostRender",function(){kvi(n,!1)})},isDocked:function(n){return n().map(au.isDocked).getOr(!1)},getBehaviours:dvi}),awr=w([d("type"),lf("items",gwt([put([d("name"),ee("items",fr)]),fr]))].concat(tb)),vwr=[ii("text"),ii("tooltip"),ii("icon"),uf("fetch"),ei("onSetup",function(){return c})],ywr=w(pt([d("type")],vwr,!0)),pwr=w([d("type"),ii("tooltip"),ii("icon"),ii("text"),tw("select"),uf("fetch"),ei("onSetup",function(){return c}),sc("presets","normal",["normal","color","listpreview"]),i("columns",1),uf("onAction"),uf("onItemAction")]),pat=le({factory:function(t,i){var r={focus:v.focusIn,setMenus:function(t,r){var u=s(r,function(t){return ult(gvi({type:"menubutton",text:t.text,fetch:function(n){n(t.getItems())}}).mapError(function(n){return yl(n)}).getOrDie(),"tox-mbtn",i.backstage,n.some("menuitem"))});nt.set(t,u)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:e([nt.config({}),it("menubar-events",[li(function(n){t.onSetup(n)}),f(cc(),function(n,t){er(n.element,".tox-mbtn--active").each(function(i){wo(t.event.target,".tox-mbtn").each(function(t){ki(i,t)||n.getSystem().getByDom(i).each(function(i){n.getSystem().getByDom(t).each(function(n){io.expand(n);io.close(i);g.focus(n)})})})})}),f(dbt(),function(n,t){t.event.prevFocus.bind(function(t){return n.getSystem().getByDom(t).toOptional()}).each(function(i){t.event.newFocus.bind(function(t){return n.getSystem().getByDom(t).toOptional()}).each(function(n){io.isOpen(i)&&(io.expand(n),io.close(i))})})})]),v.config({mode:"flow",selector:".tox-mbtn",onEscape:function(i){return t.onEscape(i),n.some(!0)}}),ai.config({})]),apis:r,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[u("dom"),u("uid"),u("onEscape"),u("backstage"),i("onSetup",c)],apis:{focus:function(n,t){n.focus(t)},setMenus:function(n,t,i){n.setMenus(t,i)}}}),wwr=Object.freeze({__proto__:null,refresh:function(n,t,i){var r;i.isExpanded()&&(ti(n.element,fl(t)),r=rp(t,n.element),tt(n.element,fl(t),r))},grow:function(n,t,i){i.isExpanded()||ryi(n,t,i)},shrink:function(n,t,i){i.isExpanded()&&iyi(n,t,i)},immediateShrink:function(n,t,i){i.isExpanded()&&tyi(n,t,i)},hasGrown:function(n,t,i){return i.isExpanded()},hasShrunk:function(n,t,i){return i.isCollapsed()},isGrowing:uyi,isShrinking:fyi,isTransitioning:function(n,t){return uyi(n,t)||fyi(n,t)},toggleGrow:function(n,t,i){(i.isExpanded()?iyi:ryi)(n,t,i)},disableTransitions:rat}),bwr=Object.freeze({__proto__:null,exhibit:function(n,t){return yo(t.expanded?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:hh(t.dimension.property,"0px")})},events:function(n,t){return gt([vv(sw(),function(i,r){r.event.raw.propertyName===n.dimension.property&&(rat(i,n),t.isExpanded()&&ti(i.element,n.dimension.property),(t.isExpanded()?n.onGrown:n.onShrunk)(i))})])}}),os=wr({fields:[u("closedClass"),u("openClass"),u("shrinkingClass"),u("growingClass"),wt("getAnimationRoot"),vt("onShrunk"),vt("onStartShrink"),vt("onGrown"),vt("onStartGrow"),i("expanded",!1),lf("dimension",fe("property",{width:[ui("property","width"),ui("getDimension",function(n){return nf(n)+"px"})],height:[ui("property","height"),ui("getDimension",function(n){return cu(n)+"px"})]}))],name:"sliding",active:bwr,apis:wwr,state:Object.freeze({__proto__:null,init:function(n){var t=p(n.expanded);return ne({isExpanded:function(){return!0===t.get()},isCollapsed:function(){return!1===t.get()},setCollapsed:ue(t.set,!1),setExpanded:ue(t.set,!0),readState:function(){return"expanded: "+t.get()}})}})}),kpi="container",kwr=[vr("slotBehaviours",[])],dwr=hr({getSlotNames:function(n,t){return n.getSlotNames(t)},getSlot:function(n,t,i){return n.getSlot(t,i)},isShowing:function(n,t,i){return n.isShowing(t,i)},hideSlot:function(n,t,i){return n.hideSlot(t,i)},hideAllSlots:function(n,t){return n.hideAllSlots(t)},showSlot:function(n,t,i){return n.showSlot(t,i)}},vd),rh=t(t({},dwr),{sketch:function(n){var t,i={slot:function(n,i){return t.push(n),eot(kpi,eyi(n),i)},record:r(t=[])},u=n(i),f=s(i.record(),function(n){return fu({name:n,pname:eyi(n)})});return lot(kpi,kwr,f,lpr,u)}}),gwr=w([ii("icon"),ii("tooltip"),ei("onShow",c),ei("onHide",c),ei("onSetup",function(){return c})]),wat=l("FixSizeEvent"),bat=l("AutoSizeEvent"),nbr=Object.freeze({__proto__:null,block:function(t,i,r,u){rt(t.element,"aria-busy",!0);var f=i.getRoot(t).getOr(t),s=e([v.config({mode:"special",onTab:function(){return n.some(!0)},onShiftTab:function(){return n.some(!0)}}),g.config({})]),h=u(f,s),o=f.getSystem().build(h);nt.append(f,he(o));o.hasConfigured(v)&&i.focus&&v.focusIn(o);r.isBlocked()||i.onBlock(t);r.blockWith(function(){return nt.remove(f,o)})},unblock:function(n,t,i){nu(n.element,"aria-busy");i.isBlocked()&&t.onUnblock(n);i.clear()}}),gh=wr({fields:[ei("getRoot",n.none),ur("focus",!0),vt("onBlock"),vt("onUnblock")],name:"blocking",apis:nbr,state:Object.freeze({__proto__:null,init:function(){var n=vdt();return ne({readState:n.isSet,blockWith:function(t){n.set({destroy:t})},clear:n.clear,isBlocked:n.isSet})}})}),dpi=r([vr("splitToolbarBehaviours",[yi]),ff("builtGroups",function(){return p([])})]),tbr=r([ia(["overflowToggledClass"]),tw("getOverflowBounds"),u("lazySink"),ff("overflowGroups",function(){return p([])})].concat(dpi())),ibr=r([fu({factory:es,schema:ep(),name:"primary"}),no({schema:ep(),name:"overflow"}),no({name:"overflow-button"}),no({name:"overflow-group"})]),kat=r(function(n,t){var i=n,r=Math.floor(t);tt(i,"max-width",ud.max(i,r,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"])+"px")}),rbr=r([ia(["toggledClass"]),u("lazySink"),uf("fetch"),tw("getBounds"),df("fireDismissalEventInstead",[i("event",pv())]),wc()]),ubr=r([no({name:"button",overrides:function(n){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:e([ht.config({toggleClass:n.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),no({factory:es,schema:ep(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:e([v.config({mode:"cyclic",onEscape:function(i){return kt(i,t,"button").each(g.focus),n.none()}})])}}})]),da=bu({name:"FloatingToolbarButton",factory:function(i,r,u,f){return t(t({},du.sketch(t(t({},f.button()),{action:function(n){lyi(n,f)},buttonBehaviours:fy({dump:f.button().buttonBehaviours},[yi.config({others:{toolbarSandbox:function(r){return f=r,s=u,o=i,{dom:{tag:"div",attributes:{id:(h=skt()).id}},behaviours:e([v.config({mode:"special",onEscape:function(t){return ot.close(t),n.some(!0)}}),ot.config({onOpen:function(n,t){o.fetch().get(function(n){ayi(f,t,o,s.layouts,n);h.link(f.element);v.focusIn(t)})},onClose:function(){ht.off(f);g.focus(f);h.unlink(f.element)},isPartOf:function(n,t,i){return vc(t,i)||vc(f,i)},getAttachPoint:function(){return o.lazySink(f).getOrDie()}}),ge.config({channels:t(t({},get(t({isExtraPart:dt},o.fireDismissalEventInstead.map(function(n){return{fireEventInstead:{event:n.event}}}).getOr({})))),not({doReposition:function(){ot.getState(yi.getCoupled(f,"toolbarSandbox")).each(function(n){eat(f,n,o,s.layouts)})}}))})])};var f,s,o,h}}})])}))),{apis:{setGroups:function(n,t){ot.getState(yi.getCoupled(n,"toolbarSandbox")).each(function(r){ayi(n,r,i,u.layouts,t)})},reposition:function(n){ot.getState(yi.getCoupled(n,"toolbarSandbox")).each(function(t){eat(n,t,i,u.layouts)})},toggle:function(n){lyi(n,f)},getToolbar:function(n){return ot.getState(yi.getCoupled(n,"toolbarSandbox"))},isOpen:function(n){return ot.isOpen(yi.getCoupled(n,"toolbarSandbox"))}}})},configFields:rbr(),partFields:ubr(),apis:{setGroups:function(n,t,i){n.setGroups(t,i)},reposition:function(n,t){n.reposition(t)},toggle:function(n,t){n.toggle(t)},getToolbar:function(n,t){return n.getToolbar(t)},isOpen:function(n,t){return n.isOpen(t)}}}),fbr=r([u("items"),ia(["itemSelector"]),vr("tgroupBehaviours",[v])]),ebr=r([fn({name:"items",unit:"item"})]),pit=bu({name:"ToolbarGroup",configFields:fbr(),partFields:ebr(),factory:function(n,t){return{uid:n.uid,dom:n.dom,components:t,behaviours:br(n.tgroupBehaviours,[v.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),gpi=bu({name:"SplitFloatingToolbar",configFields:tbr(),partFields:ibr(),factory:function(n,i,r,u){var f=yt(da.sketch({fetch:function(){return tl(function(t){t(vyi(n.overflowGroups.get()))})},layouts:{onLtr:function(){return[ru,iu]},onRtl:function(){return[iu,ru]},onBottomLtr:function(){return[of,ef]},onBottomRtl:function(){return[ef,of]}},getBounds:r.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:u["overflow-button"](),toolbar:u.overflow()}}));return{uid:n.uid,dom:n.dom,components:i,behaviours:br(n.splitToolbarBehaviours,[yi.config({others:{overflowGroup:function(){return pit.sketch(t(t({},u["overflow-group"]()),{items:[f.asSpec()]}))}}})]),apis:{setGroups:function(t,i){n.builtGroups.set(s(i,t.getSystem().build));yyi(t,f,n)},refresh:function(t){return yyi(t,f,n)},toggle:function(n){f.getOpt(n).each(function(n){da.toggle(n)})},isOpen:function(n){return f.getOpt(n).map(da.isOpen).getOr(!1)},reposition:function(n){f.getOpt(n).each(function(n){da.reposition(n)})},getOverflow:function(n){return f.getOpt(n).bind(da.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(n,t,i){n.setGroups(t,i)},refresh:function(n,t){n.refresh(t)},reposition:function(n,t){n.reposition(t)},toggle:function(n,t){n.toggle(t)},isOpen:function(n,t){return n.isOpen(t)},getOverflow:function(n,t){return n.getOverflow(t)}}}),obr=r([ia(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),vt("onOpened"),vt("onClosed")].concat(dpi())),sbr=r([fu({factory:es,schema:ep(),name:"primary"}),fu({factory:es,schema:ep(),name:"overflow",overrides:function(t){return{toolbarBehaviours:e([os.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(n){kt(n,t,"overflow-button").each(function(n){ht.off(n);g.focus(n)});t.onClosed(n)},onGrown:function(n){v.focusIn(n);t.onOpened(n)},onStartGrow:function(n){kt(n,t,"overflow-button").each(ht.on)}}),v.config({mode:"acyclic",onEscape:function(i){return kt(i,t,"overflow-button").each(g.focus),n.some(!0)}})])}}}),no({name:"overflow-button",overrides:function(n){return{buttonBehaviours:e([ht.config({toggleClass:n.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),no({name:"overflow-group"})]),dat=bu({name:"SplitSlidingToolbar",configFields:obr(),partFields:sbr(),factory:function(n,i,r,u){var e="alloy.toolbar.toggle";return{uid:n.uid,dom:n.dom,components:i,behaviours:br(n.splitToolbarBehaviours,[yi.config({others:{overflowGroup:function(n){return pit.sketch(t(t({},u["overflow-group"]()),{items:[du.sketch(t(t({},u["overflow-button"]()),{action:function(){at(n,e)}}))]}))}}}),it("toolbar-toggle-events",[f(e,function(t){pyi(t,n)})])]),apis:{setGroups:function(t,i){var r=s(i,t.getSystem().build);n.builtGroups.set(r);hat(t,n)},refresh:function(t){return hat(t,n)},toggle:function(t){return pyi(t,n)},isOpen:function(t){return kt(t,n,"overflow").map(os.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(n,t,i){n.setGroups(t,i)},refresh:function(n,t){n.refresh(t)},toggle:function(n,t){n.toggle(t)},isOpen:function(n,t){return n.isOpen(t)}}}),hbr=ka.optional({factory:pat,name:"menubar",schema:[u("backstage")]}),cbr=ka.optional({factory:{sketch:function(t){return ypi.sketch({uid:t.uid,dom:t.dom,listBehaviours:e([v.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return oat({type:t.type,uid:l("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),n.some(!0)}})},setupItem:function(n,t,i){es.setGroups(t,i)},shell:!0})}},name:"multiple-toolbar",schema:[u("dom"),u("onEscape")]}),lbr=ka.optional({factory:{sketch:function(i){return(i.type===te.sliding?function(n){var i=dat.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),r=dat.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),u=kyi(n);return dat.sketch(t(t({},u),{components:[i,r],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(n){n.getSystem().broadcastOn([yat()],{type:"opened"})},onClosed:function(n){n.getSystem().broadcastOn([yat()],{type:"closed"})}}))}:i.type===te.floating?function(n){var i=kyi(n),r=gpi.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return gpi.sketch(t(t({},i),{lazySink:n.getSink,getOverflowBounds:function(){var t=n.moreDrawerData.lazyHeader().element,i=cl(t),r=drt(t),u=cl(r),f=Math.max(r.dom.scrollHeight,u.height);return lu(i.x+4,u.y,i.width-8,f)},parts:t(t({},i.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n.attributes}}}),components:[r],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}:oat)({type:i.type,uid:i.uid,onEscape:function(){return i.onEscape(),n.some(!0)},cyclicKeying:!1,initGroups:[],getSink:i.getSink,providers:i.providers,moreDrawerData:{lazyToolbar:i.lazyToolbar,lazyMoreButton:i.lazyMoreButton,lazyHeader:i.lazyHeader},attributes:i.attributes})}},name:"toolbar",schema:[u("dom"),u("onEscape"),u("getSink")]}),abr=ka.optional({factory:{sketch:function(n){var t=n.editor,i=n.sticky?dvi:ppi;return{uid:n.uid,dom:n.dom,components:n.components,behaviours:e(i(t,n.sharedBackstage))}}},name:"header",schema:[u("dom")]}),vbr=ka.optional({name:"socket",schema:[u("dom")]}),ybr=ka.optional({factory:{sketch:function(n){return{uid:n.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:e([ai.config({}),g.config({}),os.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(n){ft.getCurrent(n).each(rh.hideAllSlots);at(n,bat)},onGrown:function(n){at(n,bat)},onStartGrow:function(n){y(n,wat,{width:tu(n.element,"width").getOr("")})},onStartShrink:function(n){y(n,wat,{width:nf(n.element)+"px"})}}),nt.config({}),ft.config({find:function(n){return rc(nt.contents(n))}})])}],behaviours:e([alt(0),it("sidebar-sliding-events",[f(wat,function(n,t){tt(n.element,"width",t.event.width)}),f(bat,function(n){ti(n.element,"width")})])])}}},name:"sidebar",schema:[u("dom")]}),pbr=ka.optional({factory:{sketch:function(n){return{uid:n.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:e([nt.config({}),gh.config({focus:!1}),ft.config({find:function(n){return rc(n.components())}})]),components:[]}}},name:"throbber",schema:[u("dom")]}),hi=bu({name:"OuterContainer",factory:function(t,i){return{uid:t.uid,dom:t.dom,components:i,apis:{getSocket:function(n){return hf.getPart(n,t,"socket")},setSidebar:function(n,i){hf.getPart(n,t,"sidebar").each(function(n){return spr(n,i)})},toggleSidebar:function(n,i){hf.getPart(n,t,"sidebar").each(function(n){var t=i;ft.getCurrent(n).each(function(n){ft.getCurrent(n).each(function(i){os.hasGrown(n)?rh.isShowing(i,t)?os.shrink(n):(rh.hideAllSlots(i),rh.showSlot(i,t)):(rh.hideAllSlots(i),rh.showSlot(i,t),os.grow(n))})})})},whichSidebar:function(n){return hf.getPart(n,t,"sidebar").bind(hpr).getOrNull()},getHeader:function(n){return hf.getPart(n,t,"header")},getToolbar:function(n){return hf.getPart(n,t,"toolbar")},setToolbar:function(n,i){hf.getPart(n,t,"toolbar").each(function(n){n.getApis().setGroups(n,i)})},setToolbars:function(n,i){hf.getPart(n,t,"multiple-toolbar").each(function(n){ypi.setItems(n,i)})},refreshToolbar:function(n){hf.getPart(n,t,"toolbar").each(function(n){return n.getApis().refresh(n)})},toggleToolbarDrawer:function(i){hf.getPart(i,t,"toolbar").each(function(t){var i=t.getApis().toggle;null!=i?n.some(function(n){return n(t)}(i)):n.none()})},isToolbarDrawerToggled:function(i){return hf.getPart(i,t,"toolbar").bind(function(t){return n.from(t.getApis().isOpen).map(function(n){return n(t)})}).getOr(!1)},getThrobber:function(n){return hf.getPart(n,t,"throbber")},focusToolbar:function(n){hf.getPart(n,t,"toolbar").orThunk(function(){return hf.getPart(n,t,"multiple-toolbar")}).each(function(n){v.focusIn(n)})},setMenubar:function(n,i){hf.getPart(n,t,"menubar").each(function(n){pat.setMenus(n,i)})},focusMenubar:function(n){hf.getPart(n,t,"menubar").each(function(n){pat.focus(n)})}},behaviours:t.behaviours}},configFields:[u("dom"),u("behaviours")],partFields:[abr,hbr,lbr,cbr,vbr,ybr,pbr],apis:{getSocket:function(n,t){return n.getSocket(t)},setSidebar:function(n,t,i){n.setSidebar(t,i)},toggleSidebar:function(n,t,i){n.toggleSidebar(t,i)},whichSidebar:function(n,t){return n.whichSidebar(t)},getHeader:function(n,t){return n.getHeader(t)},getToolbar:function(n,t){return n.getToolbar(t)},setToolbar:function(n,t,i){var r=s(i,cit);n.setToolbar(t,r)},setToolbars:function(n,t,i){var r=s(i,function(n){return s(n,cit)});n.setToolbars(t,r)},refreshToolbar:function(n,t){return n.refreshToolbar(t)},toggleToolbarDrawer:function(n,t){n.toggleToolbarDrawer(t)},isToolbarDrawerToggled:function(n,t){return n.isToolbarDrawerToggled(t)},getThrobber:function(n,t){return n.getThrobber(t)},setMenubar:function(n,t,i){n.setMenubar(t,i)},focusMenubar:function(n,t){n.focusMenubar(t)},focusToolbar:function(n,t){n.focusToolbar(t)}}}),nwi={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},wbr=ue(tpi,!1),bbr=ue(tpi,!0);(vit=fp=fp||{})[vit.SemiColon=0]="SemiColon";vit[vit.Space=1]="Space";var bit,fvt,bwi,evt=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],ukr=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],fkr={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},ekr={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},okr=Object.freeze({__proto__:null,events:function(n,t){function i(i,r){n.updateState.each(function(n){var u=n(i,r);t.set(u)});n.renderComponents.each(function(n){var u=s(n(r,t.get()),i.getSystem().build);rnt(i,u)})}return gt([f(gl(),function(t,r){var f,u=r;u.universal||(f=n.channel,cr(u.channels,f)&&i(t,u.data))}),li(function(t){n.initialData.each(function(n){i(t,n)})})])}}),skr=Object.freeze({__proto__:null,getState:function(n,t,i){return i}}),pf=wr({fields:[u("channel"),wt("renderComponents"),wt("updateState"),wt("initialData")],name:"reflecting",active:okr,apis:skr,state:Object.freeze({__proto__:null,init:function(){var t=p(n.none());return{readState:function(){return t.get().getOr("none")},get:t.get,set:t.set,clear:function(){return t.set(n.none())}}}})}),hkr=r([u("toggleClass"),u("fetch"),ra("onExecute"),i("getHotspot",n.some),i("getAnchorOverrides",r({})),wc(),ra("onItemExecute"),wt("lazySink"),u("dom"),vt("onOpen"),vr("splitDropdownBehaviours",[yi,v,g]),i("matchWidth",!1),i("useMinWidth",!1),i("eventOrder",{}),wt("role")].concat(sct())),ckr=r([fu({factory:du,schema:[u("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:e([g.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(n.uid).each(pl)},buttonBehaviours:e([ht.config({toggleOnExecute:!1,toggleClass:n.toggleClass})])}}}),fu({factory:du,schema:[u("dom")],name:"button",defaults:function(){return{buttonBehaviours:e([g.revoke()])}},overrides:function(n){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(n.uid).each(function(i){n.onExecute(i,t)})}}}}),ns({factory:{sketch:function(n){return{uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}}}},schema:[u("text")],name:"aria-descriptor"}),no({schema:[tg()],name:"menu",defaults:function(n){return{onExecute:function(t,i){t.getSystem().getByUid(n.uid).each(function(r){n.onItemExecute(r,t,i)})}}}}),shi()]),kit=bu({name:"SplitDropdown",configFields:hkr(),partFields:ckr(),factory:function(i,r,u,f){function h(n){ft.getCurrent(n).each(function(n){bt.highlightFirst(n);v.focusIn(n)})}function e(n){by(i,ct,n,f,h,fs.HighlightFirst).get(c)}function o(t){return pl(ks(t,i,"button")),n.some(!0)}var s,a=t(t({},gt([li(function(n){kt(n,i,"aria-descriptor").each(function(t){var i=l("aria");rt(t.element,"id",i);rt(n.element,"aria-describedby",i)})})])),vn(n.some(e))),y={repositionMenus:function(n){ht.isOn(n)&&lhi(n)}};return{uid:i.uid,dom:i.dom,components:r,apis:y,eventOrder:t(t({},i.eventOrder),((s={})[gf()]=["disabling","toggling","alloy.base.behaviour"],s)),events:a,behaviours:br(i.splitDropdownBehaviours,[yi.config({others:{sandbox:function(n){var t=ks(n,i,"arrow");return oct(i,n,{onOpen:function(){ht.on(t);ht.on(n)},onClose:function(){ht.off(t);ht.off(n)}})}}}),v.config({mode:"special",onSpace:o,onEnter:o,onDown:function(t){return e(t),n.some(!0)}}),g.config({}),ht.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:i.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(n,t){return n.repositionMenus(t)}}}),kwi=l("focus-button"),dwi=function(n,t,i){return hwi(n,{toolbarButtonBehaviours:[].concat(0<i.length?[it("toolbarButtonWith",i)]:[]),getApi:kbr,onSetup:n.onSetup},t)},gwi=function(n,t,i){return ri(hwi(n,{toolbarButtonBehaviours:[nt.config({}),ht.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<i.length?[it("toolbarToggleButtonWith",i)]:[]),getApi:dbr,onSetup:n.onSetup},t))},lkr=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],op={button:uk(nfi,function(n,t){return i=t.backstage.shared.providers,dwi(n,i,[]);var i}),togglebutton:uk(tfi,function(n,t){return i=t.backstage.shared.providers,gwi(n,i,[]);var i}),menubutton:uk(gvi,function(t,i){return ult(t,"tox-tbtn",i.backstage,n.none())}),splitbutton:uk(function(n){return si("SplitButton",pwr,n)},function(i,r){function h(n){return{isDisabled:function(){return a.isDisabled(n)},setDisabled:function(t){return a.set(n,t)},setIconFill:function(t,i){er(n.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(n){rt(n,"fill",i)})},setIconStroke:function(t,i){er(n.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(n){rt(n,"stroke",i)})},setActive:function(t){rt(n.element,"aria-pressed",t);er(n.element,"span").each(function(i){n.getSystem().getByDom(i).each(function(n){return ht.set(n,t)})})},isActive:function(){return er(n.element,"span").exists(function(t){return n.getSystem().getByDom(t).exists(ht.isOn)})}}}return o=i,s=r.backstage.shared,nt=l("channel-update-split-dropdown-display"),y=p(c),w={getApi:h,onSetup:o.onSetup},kit.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:t({"aria-pressed":!1},swi(o.tooltip,s.providers))},onExecute:function(n){o.onAction(h(n))},onItemExecute:function(){},splitDropdownBehaviours:e([roi(s.providers.isDisabled),ir(),it("split-dropdown-events",[f(kwi,g.focus),ob(w,y),sb(w,y)]),nk.config({})]),eventOrder:((b={})[na()]=["alloy.base.behaviour","split-dropdown-events"],b),toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:(k=h,u=o,d=s.providers,function(t){return tl(function(n){return u.fetch(n)}).map(function(i){return n.from(ssi(ri(ght(l("menu-value"),i,function(n){u.onItemAction(k(t),n)},u.columns,u.presets,us.CLOSE_ON_EXECUTE,u.select.getOr(dt),d),{movement:htt(u.columns,u.presets),menuBehaviours:itt("auto"!==u.columns?[]:[li(function(n){iht(n,4,sfi(u.presets)).each(function(t){var i=t.numRows,r=t.numColumns;v.setGridSize(n,i,r)})})])})))})}),parts:{menu:gn(0,o.columns,o.presets)},components:[kit.parts.button(nvt(o.icon,o.text,n.none(),n.some(nt),n.some([ht.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),kit.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:tui("chevron-down",s.providers.icons)},buttonBehaviours:e([roi(s.providers.isDisabled),ir(),hst()])}),kit.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]});var o,s,b,k,u,d,nt,y,w}),grouptoolbarbutton:uk(function(n){return si("GroupToolbarButton",awr,n)},function(t,i,r){var e,u,o,h,c,f,l=r.ui.registry.getAll().buttons,a=((e={})[wet]=i.backstage.shared.header.isPositionedAtTop()?bs.TopToBottom:bs.BottomToTop,e);if(eb(r)!==te.floating)throw new Error("Toolbar groups are only supported when using floating toolbar mode");return o=i.backstage,h=function(t){return dit(r,{buttons:l,toolbar:t,allowToolbarGroups:!1},i,n.none())},c=a,f=o.shared,da.sketch({lazySink:f.getSink,fetch:function(){return tl(function(n){n(s(h(u.items),cit))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:nvt((u=t).icon,u.text,u.tooltip,n.none(),n.none(),f.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:c}}}})}),styleSelectButton:function(n,i){return rk(n,r=i.backstage,owi(n,t({type:"advanced"},r.styleselect)));var r},fontsizeSelectButton:function(n,t){return rk(n,t.backstage,uwi(n))},fontSelectButton:function(n,t){return rk(n,t.backstage,rwi(n))},formatButton:function(n,t){return rk(n,t.backstage,ewi(n))},alignMenuButton:function(n,t){return rk(n,t.backstage,twi(n))}},nbi={styleselect:op.styleSelectButton,fontsizeselect:op.fontsizeSelectButton,fontselect:op.fontSelectButton,formatselect:op.formatButton,align:op.alignMenuButton},dit=function(t,i,r,u){var e,o,f,h,c=(f=i.toolbar,h=i.buttons,!1===f?[]:void 0===f||!0===f?(e=h,o=s(lkr,function(n){var t=fi(n.items,function(n){return ni(e,n)||ni(nbi,n)});return{name:n.name,items:t}}),fi(o,function(n){return 0<n.items.length})):pi(f)?s(f.split("|"),function(n){return{items:n.trim().split(" ")}}):cyt(f,function(n){return ni(n,"name")&&ni(n,"items")})?f:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[]));return fi(s(c,function(f){var e=bi(f.items,function(f){return 0===f.trim().length?[]:(o=t,s=i.buttons,e=f,c=i.allowToolbarGroups,h=r,l=u,b(s,e.toLowerCase()).orThunk(function(){return l.bind(function(n){return oo(n,function(n){return b(s,n+e.toLowerCase())})})}).fold(function(){return b(nbi,e.toLowerCase()).map(function(n){return n(o,h)}).orThunk(function(){return n.none()})},function(t){return"grouptoolbarbutton"!==t.type||c?(r=h,u=o,b(op,(i=t).type).fold(function(){return console.error("skipping button defined by",i),n.none()},function(t){return n.some(t(i,r,u))})):(console.warn("Ignoring the '"+e+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),n.none());var i,r,u}).toArray());var o,s,e,c,h,l});return{title:n.from(t.translate(f.name)),items:e}}),function(n){return 0<n.items.length})},tbi=we(),akr=tbi.os.isiOS()&&tbi.os.version.major<=12,vkr=Object.freeze({__proto__:null,render:function(n,t,i,r,u){var s=p(0),f=t.outerContainer,v,y,e,w,o,c,b;wbr(n);var l=h.fromDom(u.targetNode),k=dk(be(l)),d=t.mothership;return dti(l,d,bgi),det(k,t.uiMothership),n.on("PostRender",function(){cwi(n,t,i,r);s.set(n.getWin().innerWidth);hi.setMenubar(f,dyi(n,i));hi.setSidebar(f,i.sidebar),function(n,t){function f(){var t=c.get();t.left===i.innerWidth&&t.top===i.innerHeight||(c.set(ci(i.innerWidth,i.innerHeight)),vht(n))}function e(){var t=n.getDoc().documentElement,i=l.get();i.left===t.offsetWidth&&i.top===t.offsetHeight||(l.set(ci(t.offsetWidth,t.offsetHeight)),vht(n))}function o(t){return n.fire("ScrollContent",t)}var r=n.dom,i=n.getWin(),s=n.getDoc().documentElement,c=p(ci(i.innerWidth,i.innerHeight)),l=p(ci(s.offsetWidth,s.offsetHeight)),a,u;r.bind(i,"resize",f);r.bind(i,"scroll",o);a=ug(h.fromDom(n.getBody()),"load",e);u=t.uiMothership.element;n.on("hide",function(){tt(u,"display","none")});n.on("show",function(){ti(u,"display")});n.on("NodeChange",e);n.on("remove",function(){a.unbind();r.unbind(i,"resize",f);r.unbind(i,"scroll",o);i=null})}(n,t)}),o=hi.getSocket(f).getOrDie("Could not find expected socket element"),akr&&(oh(o.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),y=function(){n.fire("ScrollContent")},e=null,w=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];ayt(e)&&(e=setTimeout(function(){e=null;y.apply(null,t)},20))},v=tr(o.element,"scroll",w),n.on("remove",v.unbind)),cei(n,t),n.addCommand("ToggleSidebar",function(t,i){hi.toggleSidebar(f,i);n.fire("ToggleSidebar")}),n.addQueryValueHandler("ToggleSidebar",function(){return hi.whichSidebar(f)}),c=eb(n),c!==te.sliding&&c!==te.floating||n.on("ResizeWindow ResizeEditor ResizeContent",function(){var i=n.getWin().innerWidth;i!==s.get()&&(hi.refreshToolbar(t.outerContainer),s.set(i))}),b={enable:function(){ly(t,!1)},disable:function(){ly(t,!0)},isDisabled:function(){return a.isDisabled(f)}},{iframeContainer:o.element.dom,editorContainer:f.element.dom,api:b}}}),ykr=Object.freeze({__proto__:null,render:function(n,t,i,r,u){function l(){var u;o.get()?f.show():(o.set(hi.getHeader(e).getOrDie()),det(u=sei(n),w),det(u,b),cwi(n,t,i,r),hi.setMenubar(e,dyi(n,i)),f.show(),function(n,t,i,r){function f(r){var f=awi(t,i.isPositionedAtTop()),o=f.pos,u=f.bounds,s=e.get(),l=s.pos,h=s.bounds,c=u.height!==h.height||u.width!==h.width;e.set({pos:o,bounds:u});c&&vht(n,r);i.isVisible()&&(l!==o?i.update(!0):c&&(i.updateMode(),i.repositionPopups()))}var e=p(awi(t,i.isPositionedAtTop())),u;r||(n.on("activate",i.show),n.on("deactivate",i.hide));n.on("SkinLoaded ResizeWindow",function(){return i.update(!0)});n.on("NodeChange keydown",function(n){yh.requestAnimationFrame(function(){return f(n)})});n.on("ScrollWindow",function(){return i.updateMode()});u=gv();u.set(ug(h.fromDom(n.getBody()),"load",f));n.on("remove",function(){u.clear()})}(n,c,f,s),n.nodeChanged())}function v(){return yh.setEditorTimeout(n,l,0)}var w=t.mothership,b=t.uiMothership,e=t.outerContainer,o=p(null),c=h.fromDom(u.targetNode),f=gbr(n,c,t,r,o),s=n.getParam("toolbar_persist",!1,"boolean"),y;return bbr(n),n.on("show",l),n.on("hide",f.hide),s||(n.on("focus",v),n.on("blur",f.hide)),n.on("init",function(){(n.hasFocus()||s)&&v()}),cei(n,t),y={show:function(){f.show()},hide:function(){f.hide()},enable:function(){ly(t,!1)},disable:function(){ly(t,!0)},isDisabled:function(){return a.isDisabled(e)}},{editorContainer:e.element.dom,api:y}}}),ibi="contexttoolbar-hide",pkr=function(i,r){var o,u,h,f,p=i.label.fold(function(){return{}},function(n){return{"aria-label":n}}),l=yt(kb.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:i.initValue(),inputAttributes:p,selectOnFocus:!0,inputBehaviours:e([v.config({mode:"special",onEnter:function(n){return y.findPrimary(n).map(function(n){return pl(n),!0})},onLeft:function(t,i){return i.cut(),n.none()},onRight:function(t,i){return i.cut(),n.none()}})])})),y=(o=l,u=i.commands,h=r,f=s(u,function(n){return yt(("contextformtogglebutton"===n.type?function(n,i,r){var u=i.original,f,e;return u.primary,f=ok(u,["primary"]),e=vs(tfi(t(t({},f),{type:"togglebutton",onAction:c}))),gwi(e,r.backstage.shared.providers,[vwi(n,i)])}:function(n,i,r){var u=i.original,f,e;return u.primary,f=ok(u,["primary"]),e=vs(nfi(t(t({},f),{type:"button",onAction:c}))),dwi(e,r.backstage.shared.providers,[vwi(n,i)])})(o,n,{backstage:{shared:{providers:h}}}))}),{asSpecs:function(){return s(f,function(n){return n.asSpec()})},findPrimary:function(t){return oo(u,function(i,r){return i.primary?n.from(f[r]).bind(function(n){return n.getOpt(t)}).filter(vp(a.isDisabled)):n.none()})}});return[{title:n.none(),items:[l.asSpec()]},{title:n.none(),items:y.asSpecs()}]},rbi={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},ubi={maxHeightFunction:aw(),maxWidthFunction:kat()},fbi=l("forward-slide"),ebi=l("backward-slide"),ovt=l("change-slide-event"),svt="tox-pop--resizing",hvt="tox-pop--transition",wkr={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},bkr=(bwi=["Infinity",(bit="[0-9]+")+"\\."+git(bit)+git(fvt="[eE][+-]?[0-9]+"),"\\."+bit+git(fvt),bit+git(fvt)].join("|"),new RegExp("^([+-]?(?:"+bwi+"))(.*)$"));var ga,hp,edr={name:"lineheight",text:"Line height",icon:"line-height",getOptions:function(n){return n.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},hash:function(t){return i=["fixed","relative","empty"],n.from(bkr.exec(t)).bind(function(t){var u=Number(t[1]),r=t[2],f=r;return eo(i,function(n){return eo(wkr[n],function(n){return f===n})})?n.some({value:u,unit:r}):n.none()}).map(function(n){return n.value+n.unit}).getOr(t);var i},display:ct,watcher:function(n,t,i){return n.formatter.formatChanged("lineheight",i,!1,{value:t}).unbind},getCurrent:function(t){return n.from(t.queryCommandValue("LineHeight"))},setCurrent:function(n,t){return n.execCommand("LineHeight",!1,t)}},ski=function(n){return{type:"selection",root:h.fromDom(n.selection.getNode())}},odr={onLtr:function(){return[uu,iu,ru,ef,of,vf,is,sy,gw,pn,dw,yn]},onRtl:function(){return[uu,ru,iu,of,ef,vf,is,sy,dw,yn,gw,pn]}},sdr={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},yvt={type:"separator"},hki=function(n){function i(n){return{text:n.text,icon:n.icon,disabled:n.disabled,shortcut:n.shortcut}}var r;if(pi(n))return n;switch(n.type){case"separator":return yvt;case"submenu":return t(t({type:"nestedmenuitem"},i(n)),{getSubmenuItems:function(){var t=n.getSubmenuItems();return pi(t)?t:s(t,hki)}});default:return t(t({type:"menuitem"},i(n)),{onAction:(r=n.onAction,function(){return r()})})}},pvt=oe([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),urt=pvt.offset,ol=pvt.absolute,nv=pvt.fixed,hdr=function(t,i,r,u,f){var e=i.getSnapPoints(t);return dbi(e,r,u,f).orThunk(function(){return vu(e,function(t,i){var h,c,l,o,s,a,v,e=(h=i.sensor,i.range.left,i.range.top,o=sp(r,c=u,l=f),s=sp(h,c,l),a=Math.abs(o.left-s.left),v=Math.abs(o.top-s.top),ci(a,v));return t.deltas.fold(function(){return{deltas:n.some(e),snap:n.some(i)}},function(r){return(e.left+e.top)/2<=(r.left+r.top)/2?{deltas:n.some(e),snap:n.some(i)}:t})},{deltas:n.none(),snap:n.none()}).snap.map(function(n){return{output:lvt(n.output,r,u,f),extra:n.extra}})})},cdr=function(n,t,i,r,u){return dbi(t.getSnapPoints(n),i,r,u)},ldr=Object.freeze({__proto__:null,snapTo:function(n,t,i,r){var e,u,f,o=t.getTarget(n.element);t.repositionTarget&&(e=cs(so(n.element)),u=cvi(o),nd(o,bbi({coord:lvt((f=r).output,f.output,e,u),extra:f.extra}.coord,0,u)))}}),wvt="data-initial-z-index",adr=df("snaps",[u("getSnapPoints"),vt("onSensor"),u("leftAttr"),u("topAttr"),i("lazyViewport",as),i("mustSnap",!1)]),bvt=[i("useFixed",dt),u("blockerClass"),i("getTarget",ct),i("onDrag",c),i("repositionTarget",!0),i("onDrop",c),ei("getBounds",as),adr],vdr=Object.freeze({__proto__:null,getData:function(t){return n.from(ci(t.x,t.y))},getDelta:function(n,t){return ci(t.left-n.left,t.top-n.top)}}),ydr=pt(pt([],bvt,!0),[ui("dragger",{handlers:vvt(rki)})],!1),cki=Object.freeze({__proto__:null,getData:function(t){var i,r=t.raw.touches;return 1===r.length?(i=r[0],n.some(ci(i.clientX,i.clientY))):n.none()},getDelta:function(n,t){return ci(t.left-n.left,t.top-n.top)}}),pdr=pt(pt([],bvt,!0),[ui("dragger",{handlers:vvt(uki)})],!1),wdr=pt(pt([],bvt,!0),[ui("dragger",{handlers:vvt(function(n,t,i){return pt(pt([],rki(n,t,i),!0),uki(n,t,i),!0)})})],!1),tv=dkt({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:ydr,touch:pdr,mouseOrTouch:wdr}),name:"dragging",active:{events:function(n,t){return n.dragger.handlers(n,t)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:n.from(t.extra)}}},state:Object.freeze({__proto__:null,init:function(){var t=n.none(),i=n.none(),u=r({});return ne({readState:u,reset:function(){t=n.none();i=n.none()},update:function(i,r){return i.getData(r).bind(function(r){return f=i,u=r,e=t.map(function(n){return f.getDelta(n,u)}),t=n.some(u),e;var f,u,e})},getStartData:function(){return i},setStartData:function(t){i=n.some(t)}})}}),apis:ldr});(hp=ga=ga||{})[hp.None=0]="None";hp[hp.Both=1]="Both";hp[hp.Vertical=2]="Vertical";var tyt,rgr=r([u("lazySink"),wt("dragBlockClass"),ei("getBounds",as),i("useTabstopAt",gi),i("eventOrder",{}),vr("modalBehaviours",[v]),af("onExecute"),gft("onEscape")]),iyt={sketch:ct},ugr=r([ns({name:"draghandle",overrides:function(n,t){return{behaviours:e([tv.config({mode:"mouse",getTarget:function(n){return ng(n,'[role="dialog"]').getOr(n)},blockerClass:n.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:n.getDragBounds})])}}}),fu({schema:[u("dom")],name:"title"}),fu({factory:iyt,schema:[u("dom")],name:"close"}),fu({factory:iyt,schema:[u("dom")],name:"body"}),ns({factory:iyt,schema:[u("dom")],name:"footer"}),no({factory:{sketch:function(n,i){return t(t({},n),{dom:i.dom,components:i.components})}},schema:[i("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),i("components",[])],name:"blocker"})]),rr=bu({name:"ModalDialog",configFields:rgr(),partFields:ugr(),factory:function(i,r,u,f){var s,o=vi(),h=l("modal-events"),c=t(t({},i.eventOrder),((s={})[na()]=[h].concat(i.eventOrder["alloy.system.attached"]||[]),s));return{uid:i.uid,dom:i.dom,components:r,apis:{show:function(n){o.set(n);var r=i.lazySink(n).getOrDie(),u=f.blocker(),s=r.getSystem().build(t(t({},u),{components:u.components.concat([he(n)]),behaviours:e([g.config({}),it("dialog-blocker-events",[vv(lc(),function(){v.focusIn(n)})])])}));ua(r,s);v.focusIn(n)},hide:function(n){o.clear();gu(n.element).each(function(t){n.getSystem().getByDom(t).each(function(n){fa(n)})})},getBody:function(n){return ks(n,i,"body")},getFooter:function(n){return ks(n,i,"footer")},setIdle:function(n){gh.unblock(n)},setBusy:function(n,t){gh.block(n,t)}},eventOrder:c,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:br(i.modalBehaviours,[nt.config({}),v.config({mode:"cyclic",onEnter:i.onExecute,onEscape:i.onEscape,useTabstopAt:i.useTabstopAt}),gh.config({getRoot:o.get}),it(h,[li(function(t){var r,u,f,e=t.element,o=ks(t,i,"title").element,s=pe(e,"id").fold(function(){var n=l("dialog-label");return rt(o,"id",n),n},ct);rt(e,"aria-labelledby",s);r=t.element;u=ks(t,i,"body").element;f=n.from(hu(r,"id")).fold(function(){var n=l("dialog-describe");return rt(u,"id",n),n},ct);rt(r,"aria-describedby",f)})])])}},apis:{show:function(n,t){n.show(t)},hide:function(n,t){n.hide(t)},getBody:function(n,t){return n.getBody(t)},getFooter:function(n,t){return n.getFooter(t)},setBusy:function(n,t,i){n.setBusy(t,i)},setIdle:function(n,t){n.setIdle(t)}}}),fgr=w([d("type"),d("name")].concat(cy)),egr=cd,pdi=[ar("name","name",ov(function(){return l("button-name")}),fr),ii("icon"),sc("align","end",["start","end"]),ur("primary",!1),ur("disabled",!1)],wdi=pt(pt([],pdi,!0),[d("text")],!1),ryt=pt([sd("type",["submit","cancel","custom"])],wdi,!0),ogr=fe("type",{submit:ryt,cancel:ryt,custom:ryt,menu:pt([sd("type",["menu"]),ii("text"),ii("tooltip"),ii("icon"),ee("items",fgr)],pdi,!0)}),sgr=[d("type"),d("text"),sd("level",["info","warn","error","success"]),d("icon"),i("url","")],hgr=w(sgr),cgr=[d("type"),d("text"),ur("disabled",!1),ur("primary",!1),ar("name","name",ov(function(){return l("button-name")}),fr),ii("icon"),ur("borderless",!1)],lgr=w(cgr),agr=[d("type"),d("name"),d("label"),ur("disabled",!1)],vgr=w(agr),ygr=cd,uyt=[d("type"),d("name")],uo=uyt.concat([ii("label")]),pgr=uo.concat([i("columns","auto")]),wgr=w(pgr),bgr=put([d("value"),d("text"),d("icon")]),kgr=w(uo),dgr=fr,ggr=w(uo),nnr=fr,tnr=uyt.concat([hv("tag","textarea"),d("scriptId"),d("scriptUrl"),ke("settings",void 0,kni)]),inr=uyt.concat([hv("tag","textarea"),uf("init")]),rnr=nw(function(n){return si("customeditor.old",kf(inr),n).orThunk(function(){return si("customeditor.new",kf(tnr),n)})}),unr=fr,fnr=w(uo),enr=fc(ebt),onr=[d("type"),d("html"),sc("presets","presentation",["presentation","document"])],snr=w(onr),hnr=uo.concat([ur("sandboxed",!0)]),cnr=w(hnr),lnr=fr,anr=uo.concat([lf("currentState",w([u("blob"),d("url")]))]),vnr=w(anr),ynr=uo.concat([ii("inputMode"),ii("placeholder"),ur("maximized",!1),ur("disabled",!1)]),pnr=w(ynr),wnr=fr,bnr=[d("text"),d("value")],knr=[d("text"),ee("items",(tyt=fh(function(){return bdi}),{extract:function(n,t){return tyt().extract(n,t)},toString:function(){return tyt().toString()}}))],bdi=gwt([w(bnr),w(knr)]),dnr=uo.concat([ee("items",bdi),ur("disabled",!1)]),gnr=w(dnr),ntu=fr,ttu=uo.concat([ibt("items",[d("text"),d("value")]),vut("size",1),ur("disabled",!1)]),itu=w(ttu),rtu=fr,utu=uo.concat([ur("constrain",!0),ur("disabled",!1)]),ftu=w(utu),kdi=w([d("width"),d("height")]),etu=[d("type"),ee("header",fr),ee("cells",fc(fr))],otu=w(etu),stu=uo.concat([ii("placeholder"),ur("maximized",!1),ur("disabled",!1)]),htu=w(stu),ctu=fr,ltu=uo.concat([sc("filetype","file",["image","media","file"]),i("disabled",!1)]),atu=w(ltu),vtu=w([d("value"),i("meta",{})]),fyt=dwt(function(){return od("type",{alertbanner:hgr,bar:w((i=kvt("bar"),[d("type"),i])),button:lgr,checkbox:vgr,colorinput:kgr,colorpicker:ggr,dropzone:fnr,grid:w((n=kvt("grid"),[d("type"),lf("columns",wut),n])),iframe:cnr,input:pnr,listbox:gnr,selectbox:itu,sizeinput:ftu,textarea:htu,urlinput:atu,customeditor:rnr,htmlpanel:snr,imagetools:vnr,collection:wgr,label:w((t=kvt("label"),[d("type"),d("label"),t])),table:otu,panel:ddi});var n,t,i}),ytu=[d("type"),i("classes",[]),ee("items",fyt)],ddi=w(ytu),ptu=[ar("name","name",ov(function(){return l("tab-name")}),fr),d("title"),ee("items",fyt)],wtu=[d("type"),ibt("tabs",ptu)],btu=w(wtu),ktu=wdi,dtu=ogr,gtu=w([d("title"),lf("body",od("type",{panel:ddi,tabpanel:btu})),hv("size","normal"),ee("buttons",dtu),i("initialData",{}),ei("onAction",c),ei("onChange",c),ei("onSubmit",c),ei("onClose",c),ei("onCancel",c),i("onTabChange",c)]),niu=w(pt([sd("type",["cancel","custom"])],ktu,!0)),tiu=w([d("title"),d("url"),rbt("height"),rbt("width"),ubt("buttons",niu),ei("onAction",c),ei("onCancel",c),ei("onClose",c),ei("onMessage",c)]),eyt=function(n){return tc(n)?[n].concat(bi(ck(n),eyt)):ic(n)?bi(n,eyt):[]},iiu={checkbox:ygr,colorinput:dgr,colorpicker:nnr,dropzone:enr,input:wnr,iframe:lnr,sizeinput:kdi,selectbox:rtu,listbox:ntu,size:kdi,textarea:ctu,urlinput:vtu,customeditor:unr,collection:bgr,togglemenuitem:egr},ek={open:function(n,t){var i=aki(t);return n(i.internalDialog,i.initialData,i.dataValidator)},openUrl:function(n,t){return n(vs(si("dialog",tiu,t)))},redial:aki},riu=le({name:"TabButton",configFields:[i("uid",void 0),u("value"),ar("dom","dom",lut(function(){return{attributes:{role:"tab",id:l("aria"),"aria-selected":"false"}}}),vo()),wt("action"),i("domModification",{}),vr("tabButtonBehaviours",[g,v,o]),u("view")],factory:function(n){return{uid:n.uid,dom:n.dom,components:n.components,events:vn(n.action),behaviours:br(n.tabButtonBehaviours,[g.config({}),v.config({mode:"execution",useSpace:!0,useEnter:!0}),o.config({store:{mode:"memory",initialValue:n.value}})]),domModification:n.domModification}}}),uiu=r([u("tabs"),u("dom"),i("clickToDismiss",!1),vr("tabbarBehaviours",[bt,v]),ia(["tabClass","selectedClass"])]),fiu=r([fn({factory:riu,name:"tabs",unit:"tab",overrides:function(n){return{action:function(t){var i=t.getSystem().getByUid(n.uid).getOrDie(),r=bt.isHighlighted(i,t);(r&&n.clickToDismiss?function(n,t){bt.dehighlight(n,t);y(n,nkt(),{tabbar:n,button:t})}:r?c:function(n,t){bt.highlight(n,t);y(n,gbt(),{tabbar:n,button:t})})(i,t)},domModification:{classes:[n.markers.tabClass]}}}})]),gdi=bu({name:"Tabbar",configFields:uiu(),partFields:fiu(),factory:function(n,t){return{uid:n.uid,dom:n.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:br(n.tabbarBehaviours,[bt.config({highlightClass:n.markers.selectedClass,itemClass:n.markers.tabClass,onHighlight:function(n,t){rt(t.element,"aria-selected","true")},onDehighlight:function(n,t){rt(t.element,"aria-selected","false")}}),v.config({mode:"flow",getInitial:function(n){return bt.getHighlighted(n).map(function(n){return n.element})},selector:"."+n.markers.tabClass,executeOnMove:!0})])}}}),eiu=le({name:"Tabview",configFields:[vr("tabviewBehaviours",[nt])],factory:function(n){return{uid:n.uid,dom:n.dom,behaviours:br(n.tabviewBehaviours,[nt.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),oiu=r([i("selectFirst",!0),vt("onChangeTab"),vt("onDismissTab"),i("tabs",[]),vr("tabSectionBehaviours",[])]),siu=r([fu({factory:gdi,schema:[u("dom"),ec("markers",[u("tabClass"),u("selectedClass")])],name:"tabbar",defaults:function(n){return{tabs:n.tabs}}}),fu({factory:eiu,name:"tabview"})]),cp=bu({name:"TabSection",configFields:oiu(),partFields:siu(),factory:function(n,t){function i(t,i){kt(t,n,"tabbar").each(function(n){i(n).each(pl)})}return{uid:n.uid,dom:n.dom,components:t,behaviours:iot(n.tabSectionBehaviours),events:gt(sr([n.selectFirst?[li(function(n){i(n,bt.getFirst)})]:[],[f(gbt(),function(t,i){var r=i.event.button,u=o.getValue(r);kt(r,n,"tabview").each(function(t){wi(n.tabs,function(n){return n.value===u}).each(function(i){var u=i.view();pe(r.element,"id").each(function(n){rt(t.element,"aria-labelledby",n)});nt.set(t,u);n.onChangeTab(t,r,u)})})}),f(nkt(),function(t,i){var r=i.event.button;n.onDismissTab(t,r)})]])),apis:{getViewItems:function(t){return kt(t,n,"tabview").map(function(n){return nt.contents(n)}).getOr([])},showTab:function(n,t){i(n,function(n){return wi(bt.getCandidates(n),function(n){return o.getValue(n)===t}).filter(function(t){return!bt.isHighlighted(n,t)})})}}}},apis:{getViewItems:function(n,t){return n.getViewItems(t)},showTab:function(n,t,i){n.showTab(t,i)}}}),ngi="send-data-to-section",tgi="send-data-to-view",oyt=l("update-dialog"),igi=l("update-title"),rgi=l("update-body"),ugi=l("update-footer"),fgi=l("body-send-message"),hiu=bht.deviceType.isTouch(),ciu=function(n,t){function i(t,i){return f(t,function(t,r){var u,f;u=t;f=function(u){i(n(),u,r.event,t)};pf.getState(u).get().each(function(n){f(n,u)})})}return pt(pt([],cdi(i,t),!0),[i(gs,function(n,t,i){t.onAction(n,{name:i.name})})],!1)},egi=function(n,t,i){function r(t,i){return f(t,function(t,r){var u,f;u=t;f=function(u){i(n(),u,r.event,t)};pf.getState(u).get().each(function(n){f(n.internalDialog,u)})})}return pt(pt([],cdi(r,t),!0),[r(bb,function(n,t){return t.onSubmit(n)}),r(ie,function(n,t,i){t.onChange(n,{name:i.name})}),r(gs,function(n,t,r,u){function f(){return v.focusIn(u)}function e(n){return hpt(n,"disabled")||pe(n,"aria-disabled").exists(function(n){return"true"===n})}var o=be(u.element),s=vh(o);t.onAction(n,{name:r.name,value:r.value});vh(o).fold(f,function(n){e(n)||s.exists(function(t){return wk(n,t)&&e(t)})?f():i().toOptional().filter(function(t){return!wk(t.element,n)}).each(f)})}),r(gsi,function(n,t,i){t.onTabChange(n,{newTabName:i.name,oldTabName:i.oldName})}),ws(function(t){var i=n();o.setValue(t,i.getData())})],!1)},liu=ldi,syt=tinymce.util.Tools.resolve("tinymce.util.URI"),aiu=["insertContent","setContent","execCommand","close","block","unblock"];ogi.add("silver",function(i){var u=kdr(i),e=u.uiMothership,f=u.backstage,o=u.renderUI,s=u.getUi;return ecr(i,f.shared),{renderUI:o,getWindowManagerImpl:r(igr({editor:i,backstage:f})),getNotificationManagerImpl:function(){return u=i,o=e,r={backstage:f}.backstage.shared,{open:function(i,f){function c(){f();oi.hide(s)}function l(){var t=cf(h.fromDom(u.getContentAreaContainer())),i=as(),r=ce(i.x,t.x,t.right),f=ce(i.y,t.y,t.bottom),e=Math.max(t.right,i.right),o=Math.max(t.bottom,i.bottom);return n.some(lu(r,f,e-r,o-f))}var a=!i.closeButton&&i.timeout&&(0<i.timeout||i.timeout<0),e=pu(vst.sketch({text:i.text,level:cr(["success","error","warning","warn","info"],i.type)?i.type:void 0,progress:!0===i.progressBar,icon:n.from(i.icon),closeButton:!a,onAction:c,iconProvider:r.providers.icons,translationProvider:r.providers.translate})),s=pu(oi.sketch(t({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:r.getSink,fireDismissalEventInstead:{}},r.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return o.add(s),0<i.timeout&&yh.setTimeout(function(){c()},i.timeout),{close:c,moveTo:function(n,t){oi.showAt(s,he(e),{anchor:{type:"makeshift",x:n,y:t}})},moveRel:function(i,u){var f,o,c,a=he(e),v={maxHeightFunction:aw()};"banner"!==u&&fo(i)?(f=function(){switch(u){case"bc-bc":return sy;case"tc-tc":return is;case"tc-bc":return vf;default:return uu}}(),o={type:"node",root:sh(),node:n.some(h.fromDom(i)),overrides:v,layouts:{onRtl:function(){return[f]},onLtr:function(){return[f]}}},oi.showWithinBounds(s,a,{anchor:o},l)):(c=t(t({},r.anchors.banner()),{overrides:v}),oi.showWithinBounds(s,a,{anchor:c},l))},text:function(n){vst.updateText(e,n)},settings:i,getEl:function(){return e.element.dom},progressBar:{value:function(n){vst.updateProgress(e,n)}}}},close:function(n){n.close()},reposition:function(n){0<n.length&&k(n,function(t,i){0===i?t.moveRel(null,"banner"):t.moveRel(n[i-1].getEl(),"bc-tc")})},getArgs:function(n){return n.settings}};var u,o,r},ui:s()}})}();